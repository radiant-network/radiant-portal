name: Radiant Model
model_file: ./model.fga

tuples:
  # application level tuples
  - user: user:anne
    relation: data_manager
    object: application:radiant

  - user: application:radiant
    relation: parent
    object: project:p1

  - user: application:radiant
    relation: parent
    object: project:p2

  # project level tuples
  - user: user:bob
    relation: geneticist
    object: project:p1

  - user: user:charlie
    relation: requester
    object: project:p1

  - user: user:charlie
    relation: requester
    object: project:p2

tests:
  - name: Check application data_manager permissions
    check:
      - user: user:anne
        object: application:radiant
        assertions:
          data_manager: true

  - name: Check project roles and permissions
    check:
      - user: user:bob
        object: project:p1
        assertions:
          geneticist: true
          requester: false
          assignee: true
          post__cases_search: true

      - user: user:charlie
        object: project:p1
        assertions:
          geneticist: false
          requester: true
          post__cases_search: true

  - name: List users assigned as assignee to project proj1
    list_users:
      - object: project:p1
        user_filter:
          - type: user
        assertions:
          assignee:
            users:
              - user:bob
              - user:charlie

  - name: List projects where bob is geneticist
    list_objects:
      - user: user:bob
        type: project
        assertions:
          geneticist:
            - project:p1
