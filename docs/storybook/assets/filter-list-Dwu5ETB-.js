import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{R as be,r as a}from"./index-CBYaBgW8.js";import{A as Ze,a as et,b as tt,c as st}from"./accordion-CtRRXK5y.js";import{B as C}from"./button-CNrQRuJA.js";import{d as _e,e as je,C as nt,a as rt}from"./card-CV4HB3NY.js";import{T as ot,a as at,b as lt}from"./tooltip-BjBxR1Ac.js";import{A as it}from"./action-button-KkvxmIWD.js";import"./button.variants-Du9eY_ux.js";import{C as ct}from"./checkbox-filter-Dg7BtyeC.js";import{I as H}from"./input-Dm5winle.js";import{L as le}from"./label-C8KZOh3h.js";import{S as dt}from"./separator-B36Ht569.js";import{S as Y}from"./skeleton-Shk8p_SP.js";import{S as ut}from"./switch-SfbwGtii.js";import{u as q}from"./i18n-B5b-4376.js";import{q as S,D as Se}from"./query-builder-remote-Cb2u0WYb.js";import{M as B,T as J,R as N}from"./sqon-xFXjybh7.js";import{A as ie}from"./applications-config-3OOAo44D.js";import{u as Ne,o as K}from"./api-boGUK73W.js";import{S as mt}from"./search-DKmUqS9g.js";import{E as pt,L as ft,G as ht,a as xt,b as yt,c as vt}from"./less-than-or-equal-operator-icon-BI5aNTvi.js";import{c as gt}from"./index-C66Dxnp2.js";import{C as kt}from"./checkbox-B4fiCiBj.js";import{d as he,S as xe,a as ye,b as ve,c as ge}from"./select-DMB6Vi4A.js";import{u as bt}from"./chunk-PVWAREVJ-ZXULl1h5.js";import{a as _t,c as Re,b as ae}from"./index-Ba5mf8A5.js";import{P as X,u as ce}from"./index-Dut9wsGU.js";import{i as Ie,R as jt,I as St,C as Nt}from"./dropdown-menu-BJyjb2OL.js";import{u as Rt}from"./index-C6lL4ijz.js";import{u as It}from"./index-BtWW-1ow.js";import{u as wt}from"./index-SF2qmtPV.js";import{P as Et}from"./index-BZEiv_1o.js";import{c as we}from"./utils-D-KgF5mV.js";const Ee=be.createContext({caseId:1,seqId:1}),At=t=>{switch(t){case ie.cnv_occurrence:return s=>K.aggregateGermlineCNVOccurrences(s.caseId,s.seqId,s.aggregationBody).then(n=>n.data);default:return s=>K.aggregateGermlineSNVOccurrences(s.caseId,s.seqId,s.aggregationBody,s.withDictionary).then(n=>n.data)}};function Ct(t,s=30,n=!1,d=!1,m){let l;const{caseId:o,seqId:f}=be.useContext(Ee);n?l={caseId:o,seqId:f,aggregationBody:{field:t,size:s},withDictionary:d}:l=null;const i=S.getResolvedActiveQuery(m);return i&&l&&(l.aggregationBody.sqon={content:i.content,op:i.op}),Ne(l,At(m),{revalidateOnFocus:!1})}function Tt(t,s){const n=t.toLowerCase().split(/\s+/).filter(Boolean);return s.filter(d=>{const m=d.key.toLowerCase(),l=d.label.toLowerCase();function o(f,i){let b=0;for(const h of i){const c=f.indexOf(h,b);if(c===-1)return!1;b=c+h.length}return!0}return o(m,n)||o(l,n)})}function oe(t,s){return s<t?s:t}function Ft(t,s){return!!(S.getResolvedActiveQuery(t).content.find(d=>d.content.field===s.key)&&s.withDictionary)}function Ae({field:t,maxVisibleItems:s=5}){const{t:n,sanitize:d,lazyTranslate:m}=q(),{appId:l,clearUnappliedFilters:o}=pe(),f=Ke(l),[i,b]=a.useState(Ft(l,t)),{data:h,isLoading:c}=Ct(t.key,void 0,!0,i,l),k=()=>{try{const y=sessionStorage.getItem(f);if(y){const j=JSON.parse(y);if(Object.prototype.hasOwnProperty.call(j,t.key)){const F=j[t.key];return console.error(`[${t.key}] Found in sessionStorage:`,F),F}}}catch(y){console.warn(`Failed to read filter state from sessionStorage for ${t.key}:`,y)}const p=S.getResolvedActiveQuery(l).content.find(y=>y.content.field===t.key);return(p==null?void 0:p.content.value)||[]},[x,v]=a.useState(h||[]),[u,_]=a.useState(k()),[E,I]=a.useState(oe(x.length,s)),[V,A]=a.useState(!1),[T,G]=a.useState(!1),[M,R]=a.useState(()=>{const p=S.getResolvedActiveQuery(l);return JSON.stringify(p)}),[g,ee]=a.useState(()=>{try{const p=sessionStorage.getItem(f);if(p){const r=JSON.parse(p);return Object.prototype.hasOwnProperty.call(r,t.key)}}catch(p){console.warn(`Failed to check sessionStorage state for ${t.key}:`,p)}return!1});a.useEffect(()=>{const p=S.getResolvedActiveQuery(l),r=JSON.stringify(p);if(M&&M!==r){o();const y=S.getResolvedActiveQuery(l).content.find(F=>F.content.field===t.key),j=(y==null?void 0:y.content.value)||[];_(j)}R(r)},[l,t.key,o,M]),a.useEffect(()=>{const p=S.getResolvedActiveQuery(l).content.find(j=>j.content.field===t.key),r=(p==null?void 0:p.content.value)||[],y=JSON.stringify([...u].sort())!==JSON.stringify([...r].sort());A(y),u.length===0&&r.length>0&&!T&&!V&&!g&&_(r),g&&ee(!1),u.length>0&&T&&G(!1),h==null||h.sort((j,F)=>{const fe=j.key&&u.includes(j.key),Xe=F.key&&u.includes(F.key);return fe===Xe?F.count-j.count:fe?-1:1}),h==null||h.forEach(j=>{j.label=n(`common.filters.values.${t.key}.${d(j.key)}`,{defaultValue:m(j.key)})}),v(h||[]),I(oe((h==null?void 0:h.length)||0,s))},[h,l,t.key,s,u]),a.useEffect(()=>{try{const p=sessionStorage.getItem(f)||"{}",r=JSON.parse(p);r[t.key]=u,sessionStorage.setItem(f,JSON.stringify(r))}catch(p){console.warn(`Failed to save filter state to sessionStorage for ${t.key}:`,p)}},[u,f,t.key]),a.useEffect(()=>{const p=()=>{sessionStorage.removeItem(f)};return window.addEventListener("beforeunload",p),()=>{window.removeEventListener("beforeunload",p)}},[f]);const P=a.useCallback(p=>{if(!p.trim()){v(h||[]),I(oe((h==null?void 0:h.length)||0,s));return}const r=Tt(p,h);s>r.length?I(r.length):r.length>s&&I(s),v(r)},[h,s]),L=a.useCallback(()=>{I(x.length)},[E,x]),$=a.useCallback(()=>{I(s)},[E]),z=a.useCallback(()=>{u.length!==x.length&&(A(!0),_(x.map(p=>p.key)))},[x,u]),O=a.useCallback(()=>{A(!0),_([]),G(!0);try{const p=sessionStorage.getItem(f);if(p){const r=JSON.parse(p);delete r[t.key],Object.keys(r).length===0?sessionStorage.removeItem(f):sessionStorage.setItem(f,JSON.stringify(r))}}catch(p){console.warn(`Failed to clear filter state from sessionStorage for ${t.key}:`,p)}},[f,t.key]),te=a.useCallback(()=>{u.length!==0&&O()},[u,O]),se=a.useCallback(p=>{let r=[];u.some(y=>y===p.key)?r=u.filter(y=>y!==p.key):r=[...u,p.key],A(!0),_(r)},[u]),ne=a.useCallback(()=>{O()},[O]),w=a.useCallback(p=>{A(!1),G(!1),S.updateActiveQueryField(l,{field:t.key,value:[...u],merge_strategy:B.OVERRIDE_VALUES,operator:p}),o()},[u,l,t.key,o]),re=a.useCallback(()=>{w(J.In)},[w]),U=a.useCallback(()=>{w(J.NotIn)},[w]),D=a.useCallback(()=>{w(J.All)},[w]),Q=a.useCallback(()=>{w(J.In)},[w]);return e.jsxs(e.Fragment,{children:[e.jsxs(_e,{size:"sm",variant:"outline",children:[e.jsx(H,{startIcon:mt,size:"xs",type:"text",placeholder:n("common.filters.search.placeholder"),className:"w-full text-xs py-1.5 px-3 mb-4 border border-border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",onChange:p=>P(p.target.value),autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(C,{size:"xs",onClick:()=>z(),variant:"link",className:"px-0",children:n("common.filters.buttons.all")}),e.jsx(dt,{orientation:"vertical",className:"h-4"}),e.jsx(C,{size:"xs",onClick:()=>te(),variant:"link",className:"px-0",children:n("common.filters.buttons.none")}),t.withDictionary&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-grow"}),e.jsx(le,{htmlFor:"with-dictionary-switch",className:"text-xs",children:n("common.filters.with_dictionary")}),e.jsx(ut,{id:"with-dictionary-switch",checked:i,size:"xs",onCheckedChange:()=>b(!i)})]})]}),e.jsxs("div",{className:"max-h-[250px] overflow-auto",children:[c&&Array.from({length:3},(p,r)=>e.jsxs("div",{className:"flex justify-between items-center py-2 space-x-2",children:[e.jsx(Y,{className:"w-full h-6 rounded"}),e.jsx(Y,{className:"h-6 w-12 rounded-md"})]},`skeleton-${r}`)),!c&&x.length===0&&e.jsx("div",{className:"text-muted-foreground py-4",children:n("common.filters.no_values_found")}),!c&&x.length>0&&Array.from({length:E},(p,r)=>e.jsx("div",{className:"gap-3 py-1.5",children:e.jsx(ct,{size:"xs",label:n(`common.filters.labels.${t.key}_value.${x[r].key}`,{defaultValue:x[r].label}),checked:u.some(y=>y===x[r].key),count:x[r].count,onCheckedChange:()=>se(x[r])})},x[r].key))]}),!c&&x.length>E&&e.jsx(C,{className:"mt-2 px-0",onClick:L,size:"xs",variant:"link",children:n("common.filters.buttons.show_more",{count:x.length-s})}),!c&&E>s&&e.jsx(C,{className:"mt-2 px-0",onClick:$,size:"xs",variant:"link",children:n("common.filters.buttons.show_less")})]}),e.jsx(je,{size:"sm",children:e.jsxs("div",{className:"flex align-right justify-end items-center space-x-2",children:[e.jsx(C,{size:"xxs",variant:"ghost",onClick:ne,disabled:u.length===0||c,children:n("common.filters.buttons.clear")}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(it,{size:"xxs",variant:"outline",className:"h-7",color:"primary",actions:[{label:n("common.filters.buttons.some_not_in"),onClick:Q},{label:n("common.filters.buttons.all"),onClick:D},{label:n("common.filters.buttons.not_in"),onClick:U}],onDefaultAction:re,disabled:c,children:n("common.filters.buttons.apply")})})]})})]})}Ae.__docgenInfo={description:"",methods:[],displayName:"MultiSelectFilter",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},maxVisibleItems:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"5",computed:!1}}}};const Ot=gt({slots:{base:"text-muted-foreground"},variants:{size:{xs:{base:"text-xs"},sm:{base:"text-sm"}}},defaultVariants:{size:"sm"}});function Ce({className:t,size:s,children:n}){const d=Ot({size:s});return e.jsx("p",{className:d.base({className:t}),children:n})}Ce.__docgenInfo={description:"",methods:[],displayName:"TextMuted"};const qt=function(){const{caseId:t}=bt(),s=t?Number(t):void 0;if(s==null)throw new Error("Required parameter case_id was null or undefined.");return s},Te="integer",Vt=t=>{switch(t){case ie.cnv_occurrence:return s=>K.statisticsGermlineCNVOccurrences(s.caseId,s.seqId,s.statisticsBody).then(n=>n.data);default:return s=>K.statisticsGermlineSNVOccurrences(s.caseId,s.seqId,s.statisticsBody).then(n=>n.data)}};function Gt(t,s,n,d,m=!1){const l={caseId:n,seqId:d,statisticsBody:{field:t}},o=m?Se:S.getResolvedActiveQuery(s);return o&&(l.statisticsBody.sqon={content:o.content,op:o.op}),Ne(l,Vt(s),{revalidateOnFocus:!1})}function ke(t,s,n,d){var v;let m=!1,l=N.LessThan,o="0",f="0",i="",b=!1;const h=(d==null?void 0:d.type)===Te?0:3,c=s.content.find(u=>"content"in u&&"field"in u.content?u.content.field===t:!1),k=s.content.find(u=>"content"in u&&"field"in u.content?u.content.field===`${t}_unit`:!1);if(c){const u=c.content.value;if(console.log("[NumericalFilter] values",u),u.includes("__missing__"))return{hasUnappliedItems:m,selectedRange:l,minValue:o,maxValue:f,numericalValue:i,hasNoData:!0,selectedUnit:void 0};m=!0,u.length===2?(l=N.Between,o=Number(u[0]).toFixed(h),f=Number(u[1]).toFixed(h)):i=u[0],c.op&&(l=c.op)}else console.log("[NumericalFilter else] no filter exists",n),b=!1,(n==null?void 0:n.defaultMin)!==void 0?(o=n.defaultMin.toString(),i=n.defaultMin.toString()):(d==null?void 0:d.min)!==void 0&&(o=Number(d.min.toFixed(h)).toString(),i=Number(d.min.toFixed(h)).toString()),(n==null?void 0:n.defaultMax)!==void 0?f=n.defaultMax.toString():(d==null?void 0:d.max)!==void 0&&(f=Number(d.max.toFixed(h)).toString()),n!=null&&n.defaultOperator&&(l=N[n.defaultOperator]);let x;return k&&k.content.value[0]&&((v=n==null?void 0:n.rangeTypes)!=null&&v.length)&&(x=n.rangeTypes[0].key),{hasUnappliedItems:m,selectedRange:l,minValue:o,maxValue:f,numericalValue:i,hasNoData:b,selectedUnit:x}}function Fe({field:t}){var U,D,Q,p;const{t:s}=q(),{appId:n,aggregations:d}=pe(),{seqId:m}=a.useContext(Ee),l=qt(),o=t.key,f={[N.GreaterThan]:{display:s("common.filters.operators.greater_than"),dropdown:s("common.filters.operators.greater_than"),icon:vt},[N.LessThan]:{display:s("common.filters.operators.less_than"),dropdown:s("common.filters.operators.less_than"),icon:yt},[N.Between]:{display:s("common.filters.operators.between"),dropdown:s("common.filters.operators.between"),icon:xt},[N.GreaterThanOrEqualTo]:{display:s("common.filters.operators.greater_than_or_equal"),dropdown:s("common.filters.operators.greater_than_or_equal"),icon:ht},[N.LessThanOrEqualTo]:{display:s("common.filters.operators.less_than_or_equal"),dropdown:s("common.filters.operators.less_than_or_equal"),icon:ft},[N.In]:{display:s("common.filters.operators.in"),dropdown:s("common.filters.operators.in"),icon:pt}},{data:i,isLoading:b}=Gt(o,n,l,m,!1),h=(i==null?void 0:i.type)===Te?0:3,[c,k]=a.useState(N.GreaterThan),[x,v]=a.useState("0"),[u,_]=a.useState("0"),[E,I]=a.useState("0"),[V,A]=a.useState(!1),[T,G]=a.useState(),[M,R]=a.useState(!1),g=(U=Object.values(d).flatMap(r=>r.items).find(r=>r.key===o))==null?void 0:U.defaults,ee=t.type==="numerical"&&(g==null?void 0:g.noDataInputOption),P=(g==null?void 0:g.intervalDecimal)!==void 0&&((g==null?void 0:g.max)!==void 0||(g==null?void 0:g.min)!==void 0)||i&&(i.min!==void 0||i.max!==void 0),L=(g==null?void 0:g.min)??(i==null?void 0:i.min)??0,$=(g==null?void 0:g.max)??(i==null?void 0:i.max)??100,z=a.useCallback(()=>{const r=S.getResolvedActiveQuery(n);if(!(r!=null&&r.content))return;const y=ke(o,r,g,i);A(y.hasNoData),I(y.minValue),_(y.maxValue),R(y.hasUnappliedItems),k(y.selectedRange??N.GreaterThan),v(y.numericalValue)},[n,o,g,i]);a.useEffect(()=>{z()},[z]);const O=a.useCallback(r=>{k(r),R(!0)},[]),te=a.useCallback(r=>{A(r),R(!0)},[]),se=a.useCallback(r=>{G(r),R(!0)},[]),ne=()=>{R(!1);const r=ke(o,Se,g,i);A(r.hasNoData),I(r.minValue),_(r.maxValue),R(r.hasUnappliedItems),k(r.selectedRange),v(r.numericalValue)},w=a.useCallback(()=>{if(R(!1),V){S.updateActiveQueryField(n,{field:o,value:["__missing__"],merge_strategy:B.OVERRIDE_VALUES});return}let r=[];r=c===N.Between?[parseFloat(E.toString()),parseFloat(u.toString())]:[parseFloat(x.toString())],S.updateActiveQueryField(n,{field:o,value:r,merge_strategy:B.OVERRIDE_VALUES,operator:c}),T&&S.updateActiveQueryField(n,{field:`${o}_unit`,value:[T],merge_strategy:B.OVERRIDE_VALUES})},[n,o,c,x,E,u,V,T]),re=Object.entries(N).map(([r,y])=>{if(y in f){const j=f[y].icon;return e.jsx(he,{value:y,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{size:16}),e.jsx("span",{children:f[y].dropdown})]})},y)}return null}).filter(Boolean);return e.jsxs(e.Fragment,{children:[e.jsx(_e,{id:`${o}_container`,size:"sm",variant:"outline",children:e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{id:`${o}_operator`,children:e.jsxs(xe,{value:c,onValueChange:O,children:[e.jsx(ye,{size:"sm",children:e.jsx(ve,{placeholder:s("common.filters.operators.select_operator"),children:f[c].display})}),e.jsx(ge,{children:re})]})}),c===N.Between?e.jsxs("div",{className:"flex gap-2 flex-row",children:[e.jsx(H,{size:"xs",className:"w-half",value:E,onChange:r=>{const y=r.target.value;isNaN(Number(y))||(I(y),R(!0))},min:L,max:$,id:`${o}_min`,"data-testid":`${o}_min`}),e.jsx(H,{size:"xs",className:"w-half",value:u,onChange:r=>{const y=r.target.value;isNaN(Number(y))||(_(y),R(!0))},min:L,max:$,id:`${o}_max`,"data-testid":`${o}_max`})]}):e.jsx(H,{size:"xs",className:"w-full",value:x,onChange:r=>{const y=r.target.value;isNaN(Number(y))||(v(y),R(!0))},min:L,max:$,id:`${o}_value`,"data-testid":`${o}_value`}),P&&e.jsx("div",{id:`${o}_interval`,children:e.jsxs(Ce,{size:"xs",children:[s("common.filters.labels.actual_interval")," : ",(D=i==null?void 0:i.min)==null?void 0:D.toFixed(h)," -"," ",(Q=i==null?void 0:i.max)==null?void 0:Q.toFixed(h)]})})]}),(g==null?void 0:g.rangeTypes)&&g.rangeTypes.length>0&&e.jsx("div",{id:`${o}_range_type_container`,children:b?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-5 w-16 mb-1",id:`${o}_unit_label_skeleton`}),e.jsx(Y,{className:"h-9 w-full",id:`${o}_select_skeleton`})]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"text-sm",id:`${o}_unit_label`,children:s("common.filters.labels.unit")}),e.jsxs(xe,{defaultValue:T||g.rangeTypes[0].key,onValueChange:se,children:[e.jsx(ye,{children:e.jsx(ve,{placeholder:s("common.filters.labels.select_unit"),children:((p=g.rangeTypes.find(r=>r.key===T))==null?void 0:p.name)||s("common.filters.labels.select_unit")})}),e.jsx(ge,{children:g.rangeTypes.map(r=>e.jsx(he,{value:r.key,children:r.name},r.key))})]})]})}),ee&&!P&&e.jsxs("label",{className:"flex items-center space-x-2 overflow-hidden",id:`${o}_no_data_label`,children:[e.jsx(kt,{checked:V,onCheckedChange:te,id:`${o}_no_data`}),e.jsx("span",{children:s("common.filters.labels.no_data")})]})]})}),e.jsx(je,{size:"sm",children:e.jsxs("div",{className:"flex align-right justify-end items-center space-x-2",children:[e.jsx(C,{size:"xxs",variant:"ghost",onClick:ne,disabled:!M,id:`${o}_clear`,children:s("common.filters.buttons.clear")}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(C,{size:"xxs",variant:"outline",onClick:w,id:`${o}_apply`,children:s("common.filters.buttons.apply")})})]})})]})}Fe.__docgenInfo={description:"",methods:[],displayName:"NumericalFilter",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};var de="Radio",[Mt,Oe]=Re(de),[Lt,$t]=Mt(de),qe=a.forwardRef((t,s)=>{const{__scopeRadio:n,name:d,checked:m=!1,required:l,disabled:o,value:f="on",onCheck:i,form:b,...h}=t,[c,k]=a.useState(null),x=ce(s,_=>k(_)),v=a.useRef(!1),u=c?b||!!c.closest("form"):!0;return e.jsxs(Lt,{scope:n,checked:m,disabled:o,children:[e.jsx(X.button,{type:"button",role:"radio","aria-checked":m,"data-state":Le(m),"data-disabled":o?"":void 0,disabled:o,value:f,...h,ref:x,onClick:ae(t.onClick,_=>{m||i==null||i(),u&&(v.current=_.isPropagationStopped(),v.current||_.stopPropagation())})}),u&&e.jsx(Me,{control:c,bubbles:!v.current,name:d,value:f,checked:m,required:l,disabled:o,form:b,style:{transform:"translateX(-100%)"}})]})});qe.displayName=de;var Ve="RadioIndicator",Ge=a.forwardRef((t,s)=>{const{__scopeRadio:n,forceMount:d,...m}=t,l=$t(Ve,n);return e.jsx(Et,{present:d||l.checked,children:e.jsx(X.span,{"data-state":Le(l.checked),"data-disabled":l.disabled?"":void 0,...m,ref:s})})});Ge.displayName=Ve;var Bt="RadioBubbleInput",Me=a.forwardRef(({__scopeRadio:t,control:s,checked:n,bubbles:d=!0,...m},l)=>{const o=a.useRef(null),f=ce(o,l),i=wt(n),b=It(s);return a.useEffect(()=>{const h=o.current;if(!h)return;const c=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(c,"checked").set;if(i!==n&&x){const v=new Event("click",{bubbles:d});x.call(h,n),h.dispatchEvent(v)}},[i,n,d]),e.jsx(X.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...m,tabIndex:-1,ref:f,style:{...m.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Me.displayName=Bt;function Le(t){return t?"checked":"unchecked"}var Pt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Z="RadioGroup",[zt,ws]=Re(Z,[Ie,Oe]),$e=Ie(),Be=Oe(),[Ut,Dt]=zt(Z),Pe=a.forwardRef((t,s)=>{const{__scopeRadioGroup:n,name:d,defaultValue:m,value:l,required:o=!1,disabled:f=!1,orientation:i,dir:b,loop:h=!0,onValueChange:c,...k}=t,x=$e(n),v=Rt(b),[u,_]=_t({prop:l,defaultProp:m??null,onChange:c,caller:Z});return e.jsx(Ut,{scope:n,name:d,required:o,disabled:f,value:u,onValueChange:_,children:e.jsx(jt,{asChild:!0,...x,orientation:i,dir:v,loop:h,children:e.jsx(X.div,{role:"radiogroup","aria-required":o,"aria-orientation":i,"data-disabled":f?"":void 0,dir:v,...k,ref:s})})})});Pe.displayName=Z;var ze="RadioGroupItem",Ue=a.forwardRef((t,s)=>{const{__scopeRadioGroup:n,disabled:d,...m}=t,l=Dt(ze,n),o=l.disabled||d,f=$e(n),i=Be(n),b=a.useRef(null),h=ce(s,b),c=l.value===m.value,k=a.useRef(!1);return a.useEffect(()=>{const x=u=>{Pt.includes(u.key)&&(k.current=!0)},v=()=>k.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",v)}},[]),e.jsx(St,{asChild:!0,...f,focusable:!o,active:c,children:e.jsx(qe,{disabled:o,required:l.required,checked:c,...i,...m,name:l.name,ref:h,onCheck:()=>l.onValueChange(m.value),onKeyDown:ae(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:ae(m.onFocus,()=>{var x;k.current&&((x=b.current)==null||x.click())})})})});Ue.displayName=ze;var Qt="RadioGroupIndicator",De=a.forwardRef((t,s)=>{const{__scopeRadioGroup:n,...d}=t,m=Be(n);return e.jsx(Ge,{...m,...d,ref:s})});De.displayName=Qt;var Qe=Pe,Je=Ue,Jt=De;function ue({className:t,...s}){return e.jsx(Qe,{className:we("grid gap-2",t),...s})}ue.displayName=Qe.displayName;function me({className:t,...s}){return e.jsx(Je,{className:we("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(Jt,{className:"flex items-center justify-center",children:e.jsx(Nt,{className:"h-2.5 w-2.5 fill-current text-current"})})})}me.displayName=Je.displayName;ue.__docgenInfo={description:"",methods:[]};me.__docgenInfo={description:"",methods:[]};function He({data:t,field:s}){const{t:n}=q(),[d,m]=a.useState(t||[]),[l,o]=a.useState(null),{appId:f}=pe();a.useEffect(()=>{const c=S.getActiveQuery(f).content.find(k=>k.content.field===s.key);if(c){const k=c.content.value;k.length>=1&&o(k[0])}else o(null);m(t||[])},[t]);const i=a.useCallback(c=>{c.key!==l&&c.key!==void 0&&(o(c.key||null),S.updateActiveQueryField(f,{field:s.key,value:[...c.key],merge_strategy:B.OVERRIDE_VALUES}))},[l]),b=a.useCallback(c=>l===c.key,[l]),h=a.useCallback(()=>{o(null)},[l]);return e.jsxs("div",{className:"p-2 w-full max-w-md",children:[e.jsx(ue,{children:d.map(c=>e.jsx("div",{className:"space-y-3 pt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{value:c.key||"",id:c.key,checked:b(c),onClick:()=>{i(c)}}),e.jsx(le,{htmlFor:c.key,children:c.key})]}),e.jsx("span",{className:"bg-accent px-2 py-1 rounded-md font-mono text-xs",children:c.count})]})},c.key))}),l!==null&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-4 border-border"}),e.jsx("div",{className:"flex align-right justify-end items-center space-x-2",children:e.jsx(C,{onClick:h,size:"xs",children:n("common.filters.buttons.clear")})})]})]})}He.__docgenInfo={description:"",methods:[],displayName:"ToggleFilter",props:{data:{required:!1,tsType:{name:"Array",elements:[{name:"Aggregation"}],raw:"Aggregation[]"},description:""},field:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};function W({field:t,children:s}){const{t:n}=q(),d=n(`common.filters.labels.${t.translation_key}`,{defaultValue:t.key}),m=`common.filters.labels.${t.translation_key}_tooltip`,l=n(m)===m?null:n(m);function o(){return e.jsx("div",{className:"flex items-center justify-between w-full text-xs",children:e.jsx("span",{children:d})})}return e.jsx(nt,{size:"sm",children:e.jsxs(Ze,{value:t.key,className:"border-none",children:[e.jsx(rt,{size:"sm",children:e.jsx(et,{children:l?e.jsxs(ot,{children:[e.jsx(at,{asChild:!0,children:e.jsx("span",{children:o()})}),e.jsx(lt,{children:e.jsx("span",{children:l})})]}):o()})}),e.jsx(tt,{className:"pb-0",children:s})]},t.key)})}function We({field:t,isOpen:s}){const{t:n}=q(),d=t.type;if(d==="divider")return e.jsx("h4",{className:"px-2 h-8 text-sidebar-foreground/70 text-xs font-medium line-height-xs text-ellipsis overflow-hidden flex justify-between items-center",children:n(`common.filters.${t.key}`)});let m;switch(d){case"multiple":m=e.jsx(W,{field:t,isOpen:s,children:e.jsx(Ae,{field:t})});break;case"numerical":m=e.jsx(W,{field:t,isOpen:s,children:e.jsx(Fe,{field:t})});break;case"boolean":m=e.jsx(W,{field:t,isOpen:s,children:e.jsx(He,{field:t})});break;default:m=e.jsx("div",{children:n("common.filters.unsupported_type",{type:t.type})})}return m}W.__docgenInfo={description:"",methods:[],displayName:"AccordionContainer",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},searchHandler:{required:!1,tsType:{name:"signature",type:"function",raw:"(_e: React.MouseEvent<SVGElement, MouseEvent>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<SVGElement, MouseEvent>",elements:[{name:"SVGElement"},{name:"MouseEvent"}]},name:"_e"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};We.__docgenInfo={description:"To be use when the filter needs to be inside an Accordion component",methods:[],displayName:"FilterContainer",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},searchHandler:{required:!1,tsType:{name:"signature",type:"function",raw:"(_e: React.MouseEvent<SVGElement, MouseEvent>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<SVGElement, MouseEvent>",elements:[{name:"SVGElement"},{name:"MouseEvent"}]},name:"_e"}],return:{name:"void"}}},description:""}}};const Ye=a.createContext({appId:ie.variant_entity,aggregations:{},clearUnappliedFilters:()=>{}}),pe=()=>{const t=a.useContext(Ye);if(!t)throw new Error("useFilterConfig must be used within a FilterConfigProvider");return t};function Ke(t){return`temp-filters-${t}`}function Ht({groupKey:t,appId:s,aggregations:n}){var x;const{t:d}=q(),[m,l]=a.useState(!1),[o,f]=a.useState([]),[i,b]=a.useState(t),h=Ke(s),c=()=>{sessionStorage.removeItem(h)},k=t?((x=n[t])==null?void 0:x.items)||[]:Object.values(n).flatMap(v=>v.items);return a.useEffect(()=>{l(!1),f([])},[t]),a.useEffect(()=>{(i&&i!==null&&t===null||i&&i!==null&&t&&t!==null&&i!==t)&&c(),b(t)},[t,i]),e.jsx(Ye,{value:{appId:s,aggregations:n,clearUnappliedFilters:c},children:e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(C,{variant:"link",size:"xs",onClick:()=>{const v=!m;l(v),f(v?k.map(u=>u.key):[])},children:d(m?"common.actions.collapse_all":"common.actions.expand_all")})}),e.jsx(st,{className:"flex flex-col gap-1",type:"multiple",value:o,onValueChange:v=>f(v),children:k.map((v,u)=>e.jsx(We,{isOpen:o.includes(v.key),field:v},`${v.key}-${u}`))})]})})}Ht.__docgenInfo={description:"",methods:[],displayName:"FilterList",props:{groupKey:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},aggregations:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [key: string]: AggregationGroup;
}`,signature:{properties:[{key:{name:"string"},value:{name:"AggregationGroup",required:!0}}]}},description:""},appId:{required:!0,tsType:{name:"ApplicationId"},description:""}}};export{Ht as F,Ae as M,Fe as N,He as T,qt as u};
