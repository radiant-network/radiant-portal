import{j as b}from"./jsx-runtime-D_zvdyIk.js";import{r as u}from"./index-CBYaBgW8.js";import{u as F,c as y}from"./api-BrpmfvPu.js";import{g as I,s as f,D as v}from"./data-table-filters-6DkJ3gDN.js";import{P as C}from"./priority-indicator-B47qAchG.js";import{F as m,C as O,R as w,H as x}from"./refresh-ccw-CVzmjQM2.js";import{c as R}from"./createLucideIcon-B119WVF5.js";import{C as z}from"./check-DSe_yRo5.js";import{P as T}from"./pen-BSZDi--G.js";import{u as j}from"./i18n-Dquk_Wud.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],A=R("OctagonX",P);function E(r,s){const[e,n]=u.useState(()=>{if(typeof window>"u")return s;try{const o=localStorage.getItem(r);return o?JSON.parse(o):s}catch{return s}});return u.useEffect(()=>{try{localStorage.setItem(r,JSON.stringify(e))}catch{}},[r,e]),[e,n]}const _=["routine","urgent","asap","stat"];function L(r){return r.sort((e,n)=>{var a,d;const o=_.indexOf(((a=e.key)==null?void 0:a.toLowerCase())||""),c=_.indexOf(((d=n.key)==null?void 0:d.toLowerCase())||"");return o!==-1&&c!==-1?o-c:o!==-1?-1:c!==-1?1:0}).map(e=>({...e,label:b.jsx(C,{size:"sm",code:e.key})}))}const D="case_exploration.status";function M(r){return{draft:T,submitted:x,in_progress:w,completed:z,incomplete:O,revoke:A,unknown:m}[r.toLowerCase()]||m}function k(r,s){return r.map(e=>({...e,label:s(`${D}.${e.key}`,e.label||""),icon:M(e.key||"")}))}const g={priority_code:{key:"priority_code",weight:1,visible:!0},status_code:{key:"status_code",weight:2,visible:!0},analysis_catalog_code:{key:"analysis_catalog_code",weight:3,visible:!0},project_code:{key:"project_code",visible:!1},diagnosis_lab_code:{key:"diagnosis_lab_code",visible:!1},ordering_organization_code:{key:"ordering_organization_code",visible:!1}},h={priority_code:[],status_code:[],analysis_catalog_code:[],project_code:[],diagnosis_lab_code:[],ordering_organization_code:[]};async function B(r){return(await y.casesFilters(r)).data}function N({loading:r=!0,setSearchCriteria:s}){const[e,n]=u.useState([]),[o,c]=u.useState({}),[a,d]=E("case-exploration-filters",{...h}),{t:p}=j(),{data:i}=F("case-filters",()=>B({search_criteria:[]}),{revalidateOnFocus:!1,revalidateOnMount:!0,revalidateIfStale:!1,revalidateOnReconnect:!1}),S=u.useMemo(()=>i?Object.keys(i).map(t=>{const l={key:t,label:p(`case_exploration.case.filters.${t}`),isVisible:I(g).includes(t),isOpen:o[t]||!1,selectedItems:a[t]||[],options:[]};switch(t){case"status_code":return{...l,options:f(k(i[t]||[],p))};case"project_code":case"diagnosis_lab_code":case"ordering_organization_code":return{...l,popoverSize:"lg",isVisible:a[t]&&a[t].length>0||e.includes(t)||!1,options:f(i[t]||[]),withTooltip:!0};case"priority_code":return{...l,options:L(i[t]||[])};case"analysis_catalog_code":return{...l,options:f(i[t]||[]),popoverSize:"lg",withTooltip:!0};default:return l}}):[],[i,a,e,o,p]);return b.jsx(v,{filterSearch:{placeholder:p("case_exploration.filters_group.search_placeholder"),minSearchLength:1,api:t=>y.autocompleteCases(t,"10")},filterButtons:S,changedFilterButtons:e,setChangedFilterButtons:n,filters:a,setFilters:d,openFilters:o,setOpenFilters:c,loading:r,setSearchCriteria:s,criterias:g,defaultFilters:h})}N.__docgenInfo={description:"",methods:[],displayName:"FiltersGroupForm",props:{loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},setSearchCriteria:{required:!0,tsType:{name:"signature",type:"function",raw:"(searchCriteria: SearchCriterion[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"SearchCriterion"}],raw:"SearchCriterion[]"},name:"searchCriteria"}],return:{name:"void"}}},description:""}}};export{N as F};
