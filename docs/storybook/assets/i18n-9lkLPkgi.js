import{_ as J}from"./iframe-CxA8_9go.js";import{I as G,g as W,R as Y,a as Z,i as k,b as V}from"./i18next-DOi7g2fS.js";import{r as m}from"./index-CGj_12n1.js";function X(){if(console&&console.warn){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];v(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const U={};function T(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];v(e[0])&&U[e[0]]||(v(e[0])&&(U[e[0]]=new Date),X(...e))}const M=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},P=(n,e,t)=>{n.loadNamespaces(e,M(n,t))},$=(n,e,t,a)=>{v(t)&&(t=[t]),t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,M(n,a))},K=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=e.languages[0],r=e.options?e.options.fallbackLng:!1,o=e.languages[e.languages.length-1];if(a.toLowerCase()==="cimode")return!0;const i=(c,l)=>{const s=e.services.backendConnector.state[`${c}|${l}`];return s===-1||s===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!i(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(a,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||i(a,n)&&(!r||i(o,n)))},ee=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(T("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,o)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!o(r.isLanguageChangingTo,n))return!1}}):K(n,e,t)},v=n=>typeof n=="string",te=n=>typeof n=="object"&&n!==null,ne=(n,e)=>{const t=m.useRef();return m.useEffect(()=>{t.current=n},[n,e]),t.current},B=(n,e,t,a)=>n.getFixedT(e,t,a),oe=(n,e,t,a)=>m.useCallback(B(n,e,t,a),[n,e,t,a]),ae=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:a,defaultNS:r}=m.useContext(G)||{},o=t||a||W();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new Y),!o){T("You will need to pass in an i18next instance by using initReactI18next");const u=(g,d)=>v(d)?d:te(d)&&v(d.defaultValue)?d.defaultValue:Array.isArray(g)?g[g.length-1]:g,f=[u,{},!1];return f.t=u,f.i18n={},f.ready=!1,f}o.options.react&&o.options.react.wait!==void 0&&T("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const i={...Z(),...o.options.react,...e},{useSuspense:c,keyPrefix:l}=i;let s=r||o.options&&o.options.defaultNS;s=v(s)?[s]:s||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(s);const p=(o.isInitialized||o.initializedStoreOnce)&&s.every(u=>ee(u,o,i)),H=oe(o,e.lng||null,i.nsMode==="fallback"?s:s[0],l),E=()=>H,C=()=>B(o,e.lng||null,i.nsMode==="fallback"?s:s[0],l),[D,w]=m.useState(E);let S=s.join();e.lng&&(S=`${e.lng}${S}`);const F=ne(S),h=m.useRef(!0);m.useEffect(()=>{const{bindI18n:u,bindI18nStore:f}=i;h.current=!0,!p&&!c&&(e.lng?$(o,e.lng,s,()=>{h.current&&w(C)}):P(o,s,()=>{h.current&&w(C)})),p&&F&&F!==S&&h.current&&w(C);const g=()=>{h.current&&w(C)};return u&&o&&o.on(u,g),f&&o&&o.store.on(f,g),()=>{h.current=!1,u&&o&&u.split(" ").forEach(d=>o.off(d,g)),f&&o&&f.split(" ").forEach(d=>o.store.off(d,g))}},[o,S]),m.useEffect(()=>{h.current&&p&&w(E)},[o,l,p]);const y=[D,o,p];if(y.t=D,y.i18n=o,y.ready=p,p||!p&&!c)return y;throw new Promise(u=>{e.lng?$(o,e.lng,s,()=>u()):P(o,s,()=>u())})};function re(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function x(n){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(n)}function ie(n,e){if(x(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var a=t.call(n,e);if(x(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function se(n){var e=ie(n,"string");return x(e)=="symbol"?e:e+""}function ue(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,se(a.key),a)}}function ce(n,e,t){return e&&ue(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var _=[],le=_.forEach,fe=_.slice;function ge(n){return le.call(fe.call(arguments,1),function(e){if(e)for(var t in e)n[t]===void 0&&(n[t]=e[t])}),n}var A=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,de=function(e,t,a){var r=a||{};r.path=r.path||"/";var o=encodeURIComponent(t),i="".concat(e,"=").concat(o);if(r.maxAge>0){var c=r.maxAge-0;if(Number.isNaN(c))throw new Error("maxAge should be a Number");i+="; Max-Age=".concat(Math.floor(c))}if(r.domain){if(!A.test(r.domain))throw new TypeError("option domain is invalid");i+="; Domain=".concat(r.domain)}if(r.path){if(!A.test(r.path))throw new TypeError("option path is invalid");i+="; Path=".concat(r.path)}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+="; Expires=".concat(r.expires.toUTCString())}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite){var l=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(l){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return i},R={create:function(e,t,a,r){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};a&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+a*60*1e3)),r&&(o.domain=r),document.cookie=de(e,encodeURIComponent(t),o)},read:function(e){for(var t="".concat(e,"="),a=document.cookie.split(";"),r=0;r<a.length;r++){for(var o=a[r];o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null},remove:function(e){this.create(e,"",-1)}},pe={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&typeof document<"u"){var a=R.read(e.lookupCookie);a&&(t=a)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&typeof document<"u"&&R.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},me={name:"querystring",lookup:function(e){var t;if(typeof window<"u"){var a=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(a=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=a.substring(1),o=r.split("&"),i=0;i<o.length;i++){var c=o[i].indexOf("=");if(c>0){var l=o[i].substring(0,c);l===e.lookupQuerystring&&(t=o[i].substring(c+1))}}}return t}},b=null,z=function(){if(b!==null)return b;try{b=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{b=!1}return b},he={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&z()){var a=window.localStorage.getItem(e.lookupLocalStorage);a&&(t=a)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&z()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},L=null,O=function(){if(L!==null)return L;try{L=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{L=!1}return L},ve={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&O()){var a=window.sessionStorage.getItem(e.lookupSessionStorage);a&&(t=a)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&O()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},we={name:"navigator",lookup:function(e){var t=[];if(typeof navigator<"u"){if(navigator.languages)for(var a=0;a<navigator.languages.length;a++)t.push(navigator.languages[a]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},Se={name:"htmlTag",lookup:function(e){var t,a=e.htmlTag||(typeof document<"u"?document.documentElement:null);return a&&typeof a.getAttribute=="function"&&(t=a.getAttribute("lang")),t}},ye={name:"path",lookup:function(e){var t;if(typeof window<"u"){var a=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(a instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof a[e.lookupFromPathIndex]!="string")return;t=a[e.lookupFromPathIndex].replace("/","")}else t=a[0].replace("/","")}return t}},ke={name:"subdomain",lookup:function(e){var t=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,a=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(a)return a[t]}},j=!1;try{document.cookie,j=!0}catch{}var q=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];j||q.splice(1,1);function be(){return{order:q,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var Q=(function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};re(this,n),this.type="languageDetector",this.detectors={},this.init(e,t)}return ce(n,[{key:"init",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t||{languageUtils:{}},this.options=ge(a,this.options||{},be()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(o){return o.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(pe),this.addDetector(me),this.addDetector(he),this.addDetector(ve),this.addDetector(we),this.addDetector(Se),this.addDetector(ye),this.addDetector(ke)}},{key:"addDetector",value:function(t){return this.detectors[t.name]=t,this}},{key:"detect",value:function(t){var a=this;t||(t=this.options.order);var r=[];return t.forEach(function(o){if(a.detectors[o]){var i=a.detectors[o].lookup(a.options);i&&typeof i=="string"&&(i=[i]),i&&(r=r.concat(i))}}),r=r.map(function(o){return a.options.convertDetectedLanguage(o)}),this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}},{key:"cacheUserLanguage",value:function(t,a){var r=this;a||(a=this.options.caches),a&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||a.forEach(function(o){r.detectors[o]&&r.detectors[o].cacheUserLanguage(t,r.options)}))}}])})();Q.type="languageDetector";function Le(n){return n.replace(/_/g," ")}function Ne(n){return n.toLowerCase().replace(/^\w/,e=>e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())}const N=async n=>{try{return(await J(()=>import(`@translations-merged/${n}.json`),[],import.meta.url)).default}catch{throw console.error(`Failed to load merged translations for ${n}. Make sure the build process has run to generate merged translation files.`),new Error(`Missing merged translation file for language: ${n}`)}};let I=null;const xe=async()=>I||(I=(async()=>{await k.use(V).use(Q).init({debug:!1,fallbackLng:"en",supportedLngs:["en","fr"],defaultNS:"common",ns:["common"],detection:{order:["querystring","cookie","localStorage","navigator"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",caches:["localStorage","cookie"]},interpolation:{escapeValue:!1}});const n=k.language;console.log(`LanguageDetector detected language: ${n}`);try{console.log(`Loading initial translations for ${n}...`);const e=await N(n);k.addResourceBundle(n,"common",e,!0,!0),console.log(`✅ Initial translations loaded for ${n}`)}catch(e){if(console.error(`Failed to load initial translations for ${n}:`,e),n!=="en")try{const t=await N("en");k.addResourceBundle("en","common",t,!0,!0),await k.changeLanguage("en"),console.log("✅ Fallback English translations loaded")}catch(t){console.error("Failed to load fallback translations:",t)}}console.log("✅ i18n initialization complete")})(),I),Ee=()=>{const{t:n,i18n:e}=ae(),t=o=>String(o).replace(/^_+/,"").toLowerCase(),a=o=>Le(String(o)).toLowerCase(),r=async o=>{if(!e.hasResourceBundle(o,"common"))try{console.log(`Loading translations for ${o}...`);const i=await N(o);e.addResourceBundle(o,"common",i,!0,!0),console.log(`✅ Translations loaded for ${o}`)}catch(i){console.error(`Failed to load translations for ${o}:`,i);return}await e.changeLanguage(o)};return{t:n,sanitize:t,lazyTranslate:a,changeLanguage:r,language:e.language,languages:["en","fr"],setLanguage:r,currentLanguage:e.language,i18n:e}};xe();export{X as a,te as b,v as i,Le as r,Ne as t,Ee as u,T as w};
