import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{r}from"./index-CBYaBgW8.js";import{_ as S,C as F,a as G,c as X,d as H,b as J}from"./command-DH6TAVdL.js";import{S as Q}from"./skeleton-_T1otFf0.js";import{u as U}from"./i18n-B58psOPr.js";import{u as W}from"./useDebounce-CEPqGWFj.js";import{c as g}from"./utils-CDN07tui.js";import{X as Y}from"./x-4HkHZ1eq.js";import{C as Z}from"./check-DSe_yRo5.js";function V(l,p){return p.find(f=>l===f.value)}const $=({options:l=[],placeholder:p,emptyIndicator:f,noSearchIndicator:k,value:n,onChange:s,disabled:N,debounceDelay:I=500,onSearch:d,optionFilterProp:x="label",optionLabelProp:v="label",className:_,loading:c,leftAddon:E,minSearchLength:A=0})=>{const i=r.useRef(null),{t:w}=U(),[h,y]=r.useState(!1),[u,m]=r.useState(V(n,l)),[D,o]=r.useState(""),[b,L]=r.useState(""),T=W(b,I),R=r.useCallback(e=>{const a=i.current;if(a){if(h||y(!0),e.key==="Enter"&&a.value!==""){const j=l.find(M=>M[x]===a.value);j&&(m(j),s==null||s(j.value))}e.key==="Escape"&&a.blur()}},[h,l,s]),z=r.useCallback(()=>{y(!1),o((u==null?void 0:u[v])||"")},[u]),B=r.useCallback(e=>{o(e[v]),m(e),s==null||s(e.value),setTimeout(()=>{var a;(a=i==null?void 0:i.current)==null||a.blur()},0)},[s]);r.useEffect(()=>{if(n&&l.length>0){const e=V(n,l);e&&(m(e),o(e[v]))}},[n,l]),r.useEffect(()=>{!d||!open||T&&(d==null||d(T))},[T,open]);const q=l.filter(e=>e[x].toLowerCase().trim().includes(b.toLowerCase().trim())),C=b.length>A,K=()=>C?f||t.jsx("div",{className:"text-center text-sm",children:w("common.auto_complete.no_data")}):k||t.jsx("div",{className:"text-center text-sm",children:w("common.auto_complete.type_to_search")});return t.jsxs(S,{onKeyDown:R,className:_,shouldFilter:!1,children:[t.jsx("div",{className:"w-full relative shadow-xs outline-none focus-within:ring-1 focus-within:ring-ring rounded-md",children:t.jsx(F,{ref:i,value:D,onValueChange:c?void 0:e=>{o(e),L(e)},onBlur:z,onFocus:()=>y(!0),placeholder:p,disabled:N,className:"text-sm",leftAddon:E,rightAddon:t.jsx("button",{type:"button",onClick:()=>{m(void 0),o(""),s==null||s("")},className:g("h-[26px] p-0",{hidden:!u||N}),children:t.jsx(Y,{size:16,className:""})})})}),t.jsx("div",{className:"relative",children:t.jsx("div",{className:g("animate-in fade-in-0 zoom-in-95 absolute top-0 z-10 w-full rounded-xl bg-popover outline-none shadow-md",h?"block mt-1":"hidden"),children:t.jsxs(G,{className:"rounded-lg border",children:[c?t.jsx(S.Loading,{children:t.jsx("div",{className:"p-1",children:t.jsx(Q,{className:"h-8 w-full"})})}):null,q.length>0&&!c?t.jsx(X,{children:q.map(e=>t.jsxs(H,{value:e[x],onMouseDown:a=>{a.preventDefault(),a.stopPropagation()},onSelect:()=>B(e),className:"cursor-pointer",children:[t.jsx("span",{className:"flex-1",children:e.label}),e.value===n?t.jsx(Z,{className:"w-4"}):null]},e.value))}):null,!c&&t.jsx(J,{children:K()})]})})})]})};$.__docgenInfo={description:"",methods:[],displayName:"AutoComplete",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:"",defaultValue:{value:"[]",computed:!1}},emptyIndicator:{required:!1,tsType:{name:"ReactNode"},description:""},noSearchIndicator:{required:!1,tsType:{name:"ReactNode"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onSearch:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},debounceDelay:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}},optionLabelProp:{required:!1,tsType:{name:"T"},description:"",defaultValue:{value:"'label'",computed:!1}},optionFilterProp:{required:!1,tsType:{name:"T"},description:"",defaultValue:{value:"'label'",computed:!1}},loading:{required:!1,tsType:{name:"boolean"},description:""},leftAddon:{required:!1,tsType:{name:"ReactNode"},description:""},minSearchLength:{required:!1,tsType:{name:"number"},description:"Minimum length to consider a search has started. @default 0",defaultValue:{value:"0",computed:!1}}}};export{$ as A};
