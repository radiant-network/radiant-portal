import{j as b}from"./jsx-runtime-D_zvdyIk.js";import{r as d}from"./index-CBYaBgW8.js";import{u as F,c as S}from"./api-sDAZ07y6.js";import{g as C,a as I,s as p,D as O}from"./data-table-filters-dmP5CrSI.js";import{P as w}from"./priority-indicator-DRp5KRSc.js";import{F as g,C as x,R,H as z}from"./refresh-ccw-CVzmjQM2.js";import{c as T}from"./createLucideIcon-B119WVF5.js";import{C as j}from"./check-DSe_yRo5.js";import{P}from"./pen-BSZDi--G.js";import{u as A}from"./i18n-DNusCRs9.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],L=T("OctagonX",E);function D(s,o){const[t,n]=d.useState(()=>{if(typeof window>"u")return o;try{const a=localStorage.getItem(s);return a?JSON.parse(a):o}catch{return o}});return d.useEffect(()=>{try{localStorage.setItem(s,JSON.stringify(t))}catch{}},[s,t]),[t,n]}const h=["routine","urgent","asap","stat"];function M(s){return s.sort((t,n)=>{var r,u;const a=h.indexOf(((r=t.key)==null?void 0:r.toLowerCase())||""),l=h.indexOf(((u=n.key)==null?void 0:u.toLowerCase())||"");return a!==-1&&l!==-1?a-l:a!==-1?-1:l!==-1?1:0}).map(t=>({...t,label:b.jsx(w,{size:"sm",code:t.key})}))}const k="case_exploration.status";function B(s){return{draft:P,submitted:z,in_progress:R,completed:j,incomplete:x,revoke:L,unknown:g}[s.toLowerCase()]||g}function N(s,o){return s.map(t=>({...t,label:o(`${k}.${t.key}`,t.label||""),icon:B(t.key||"")}))}const f={priority_code:{key:"priority_code",weight:1,visible:!0},status_code:{key:"status_code",weight:2,visible:!0},case_type_code:{key:"case_type_code",weight:3,visible:!0},project_code:{key:"project_code",visible:!1},analysis_catalog_code:{key:"analysis_catalog_code",visible:!1},diagnosis_lab_code:{key:"diagnosis_lab_code",visible:!1},ordering_organization_code:{key:"ordering_organization_code",visible:!1},panel_code:{key:"panel_code",visible:!1},resolution_status_code:{key:"resolution_status_code",visible:!1},life_status_code:{key:"proband_life_status_code",visible:!1},case_category_code:{key:"case_category_code",visible:!1}},y={priority_code:[],status_code:[],case_type_code:[],project_code:[],analysis_catalog_code:[],diagnosis_lab_code:[],ordering_organization_code:[],panel_code:[],resolution_status_code:[],life_status_code:[],case_category_code:[]};async function V(s){return(await S.casesFilters(s)).data}function q({loading:s=!0,setSearchCriteria:o}){const[t,n]=d.useState([]),[a,l]=d.useState({}),[r,u]=D("case-exploration-filters",{...y}),{t:_}=A(),{data:i}=F("case-filters",()=>V({search_criteria:[]}),{revalidateOnFocus:!1,revalidateOnMount:!0,revalidateIfStale:!1,revalidateOnReconnect:!1}),v=d.useMemo(()=>i?C(f).filter(e=>e in i).map(e=>{const c={key:e,label:_(`case_exploration.case.filters.${e}`),isVisible:I(f).includes(e),isOpen:a[e]||!1,selectedItems:r[e]||[],options:[]};switch(e){case"priority_code":return{...c,options:M(i[e]||[])};case"status_code":return{...c,options:p(N(i[e]||[],_))};case"case_type_code":return{...c,options:p(i[e]||[])};case"project_code":case"analysis_catalog_code":case"diagnosis_lab_code":case"ordering_organization_code":case"panel_code":return{...c,popoverSize:"lg",isVisible:r[e]&&r[e].length>0||t.includes(e)||!1,options:p(i[e]||[]),withTooltip:!0};case"life_status_code":case"case_category_code":case"resolution_status_code":return{...c,isVisible:r[e]&&r[e].length>0||t.includes(e)||!1,options:p(i[e]||[])};default:return c}}):[],[i,r,t,a,_]);return b.jsx(O,{filterSearch:{placeholder:_("case_exploration.filters_group.search_placeholder"),minSearchLength:1,api:m=>S.autocompleteCases(m,"10")},filterButtons:v,changedFilterButtons:t,setChangedFilterButtons:n,filters:r,setFilters:u,openFilters:a,setOpenFilters:l,loading:s,setSearchCriteria:o,criterias:f,defaultFilters:y})}q.__docgenInfo={description:"",methods:[],displayName:"FiltersGroupForm",props:{loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},setSearchCriteria:{required:!0,tsType:{name:"signature",type:"function",raw:"(searchCriteria: SearchCriterion[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"SearchCriterion"}],raw:"SearchCriterion[]"},name:"searchCriteria"}],return:{name:"void"}}},description:""}}};export{q as F};
