import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{R as he,r as o}from"./index-CBYaBgW8.js";import{A as Fe}from"./action-button-9r-08jXC.js";import{B as R}from"./button-DAgLdymK.js";import"./button.variants-Du9eY_ux.js";import{C as Re}from"./checkbox-filter-CgMxmOlu.js";import{d as xe,e as ye,C as Oe,a as Ce}from"./card-Cyh3E19J.js";import{I as W}from"./input-Bj-MPxry.js";import{L as ae}from"./label-BI8zg36L.js";import{S as qe}from"./separator-ChZWIdMg.js";import{S as X}from"./skeleton-_T1otFf0.js";import{S as Ve}from"./switch-Jy17y5RA.js";import{q as _,D as ve}from"./query-builder-remote-D1MOyb6t.js";import{M as G,T as H,R as b}from"./sqon-xFXjybh7.js";import{u as q}from"./i18n-BTxp_gVm.js";import{A as $e,a as Me,b as ze,c as Be}from"./accordion-DSXieqtP.js";import{A as oe}from"./applications-config-3OOAo44D.js";import{u as ke,o as Z}from"./api-BI7VOGfX.js";import{S as Le}from"./search-DKmUqS9g.js";import{E as Ge,L as Ue,G as Qe,a as De,b as Pe,c as Je}from"./less-than-or-equal-operator-icon-BI5aNTvi.js";import{C as He}from"./checkbox-BUFo-vqr.js";import{d as ce,S as de,a as ue,b as me,c as pe}from"./select-Dcd4mvCY.js";import{c as We}from"./index-C66Dxnp2.js";import{u as Ye}from"./chunk-WWGJGFF6-0IpzJ_3T.js";import{R as Xe,a as Ze}from"./radio-group-DekDLgvf.js";import{T as Ke,a as et,b as tt}from"./tooltip-0vX-MTK3.js";const je=he.createContext({caseId:1,seqId:1}),st=t=>{switch(t){case oe.cnv_occurrence:return s=>Z.aggregateGermlineCNVOccurrences(s.caseId,s.seqId,s.aggregationBody).then(n=>n.data);default:return s=>Z.aggregateGermlineSNVOccurrences(s.caseId,s.seqId,s.aggregationBody,s.withDictionary).then(n=>n.data)}};function Se(t,s=30,n=!1,d=!1,f){let u;const{caseId:r,seqId:h}=he.useContext(je);n?u={caseId:r,seqId:h,aggregationBody:{field:t,size:s},withDictionary:d}:u=null;const l=_.getResolvedActiveQuery(f);return l&&u&&(u.aggregationBody.sqon={content:l.content,op:l.op}),ke(u,st(f),{revalidateOnFocus:!1})}function nt(t,s){const n=t.toLowerCase().split(/\s+/).filter(Boolean);return s.filter(d=>{const f=d.key.toLowerCase(),u=d.label.toLowerCase();function r(h,l){let N=0;for(const p of l){const j=h.indexOf(p,N);if(j===-1)return!1;N=j+p.length}return!0}return r(f,n)||r(u,n)})}function re(t,s){return s<t?s:t}function rt(t,s){return!!(_.getResolvedActiveQuery(t).content.find(d=>d.content.field===s.key)&&s.withDictionary)}function ge({field:t,maxVisibleItems:s=5}){const{t:n,sanitize:d,lazyTranslate:f}=q(),{appId:u}=le(),r=Ae(u),h=()=>{sessionStorage.removeItem(r)},[l,N]=o.useState(rt(u,t)),{data:p,isLoading:j}=Se(t.key,void 0,!0,l,u),v=()=>{try{const a=sessionStorage.getItem(r);if(a){const k=JSON.parse(a);if(Object.prototype.hasOwnProperty.call(k,t.key)){const g=k[t.key];return console.error(`[${t.key}] Found in sessionStorage:`,g),g}}}catch(a){console.warn(`Failed to read filter state from sessionStorage for ${t.key}:`,a)}const i=_.getResolvedActiveQuery(u).content.find(a=>a.content.field===t.key);return(i==null?void 0:i.content.value)||[]},[x,S]=o.useState(p||[]),[c,A]=o.useState(v()),[T,w]=o.useState(re(x.length,s)),[V,F]=o.useState(!1),[O,$]=o.useState(!1),[M,I]=o.useState(()=>{const i=_.getResolvedActiveQuery(u);return JSON.stringify(i)}),[y,K]=o.useState(()=>{try{const i=sessionStorage.getItem(r);if(i){const m=JSON.parse(i);return Object.prototype.hasOwnProperty.call(m,t.key)}}catch(i){console.warn(`Failed to check sessionStorage state for ${t.key}:`,i)}return!1});o.useEffect(()=>{const i=_.getResolvedActiveQuery(u),m=JSON.stringify(i);if(M&&M!==m){h();const a=_.getResolvedActiveQuery(u).content.find(g=>g.content.field===t.key),k=(a==null?void 0:a.content.value)||[];A(k)}I(m)},[u,t.key,h,M]),o.useEffect(()=>{const i=_.getResolvedActiveQuery(u).content.find(g=>g.content.field===t.key),m=(i==null?void 0:i.content.value)||[],a=JSON.stringify([...c].sort())!==JSON.stringify([...m].sort());F(a),c.length===0&&m.length>0&&!O&&!V&&!y&&A(m),y&&K(!1),c.length>0&&O&&$(!1);const k=(()=>{const g=_.getResolvedActiveQuery(u).content.find(L=>L.content.field===t.key);return(g==null?void 0:g.content.value)||[]})();p==null||p.sort((g,L)=>{const ie=g.key&&k.includes(g.key),Te=L.key&&k.includes(L.key);return ie===Te?L.count-g.count:ie?-1:1}),p==null||p.forEach(g=>{g.label=n(`common.filters.values.${t.key}.${d(g.key)}`,{defaultValue:f(g.key)})}),S(p||[]),w(re((p==null?void 0:p.length)||0,s))},[p,u,t.key,s,c]),o.useEffect(()=>{try{const i=sessionStorage.getItem(r)||"{}",m=JSON.parse(i);m[t.key]=c,sessionStorage.setItem(r,JSON.stringify(m))}catch(i){console.warn(`Failed to save filter state to sessionStorage for ${t.key}:`,i)}},[c,r,t.key]),o.useEffect(()=>{const i=()=>{sessionStorage.removeItem(r)};return window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i)}},[r]);const U=o.useCallback(i=>{if(!i.trim()){S(p||[]),w(re((p==null?void 0:p.length)||0,s));return}const m=nt(i,p);s>m.length?w(m.length):m.length>s&&w(s),S(m)},[p,s]),z=o.useCallback(()=>{w(x.length)},[T,x]),B=o.useCallback(()=>{w(s)},[T]),Q=o.useCallback(()=>{c.length!==x.length&&(F(!0),A(x.map(i=>i.key)))},[x,c]),C=o.useCallback(()=>{F(!0),A([]),$(!0);try{const i=sessionStorage.getItem(r);if(i){const m=JSON.parse(i);delete m[t.key],Object.keys(m).length===0?sessionStorage.removeItem(r):sessionStorage.setItem(r,JSON.stringify(m))}}catch(i){console.warn(`Failed to clear filter state from sessionStorage for ${t.key}:`,i)}},[r,t.key]),ee=o.useCallback(()=>{c.length!==0&&C()},[c,C]),te=o.useCallback(i=>{let m=[];c.some(a=>a===i.key)?m=c.filter(a=>a!==i.key):m=[...c,i.key],F(!0),A(m)},[c]),se=o.useCallback(()=>{C()},[C]),E=o.useCallback(i=>{F(!1),$(!1),_.updateActiveQueryField(u,{field:t.key,value:[...c],merge_strategy:G.OVERRIDE_VALUES,operator:i}),h()},[c,u,t.key,h]),ne=o.useCallback(()=>{E(H.In)},[E]),D=o.useCallback(()=>{E(H.NotIn)},[E]),P=o.useCallback(()=>{E(H.All)},[E]),J=o.useCallback(()=>{E(H.In)},[E]);return e.jsxs(e.Fragment,{children:[e.jsxs(xe,{size:"sm",variant:"outline",children:[e.jsx(W,{startIcon:Le,size:"xs",type:"text",placeholder:n("common.filters.search.placeholder"),className:"w-full text-xs py-1.5 px-3 mb-4 border border-border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",onChange:i=>U(i.target.value),autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(R,{size:"xs",onClick:()=>Q(),variant:"link",className:"px-0",children:n("common.filters.buttons.all")}),e.jsx(qe,{orientation:"vertical",className:"h-4"}),e.jsx(R,{size:"xs",onClick:()=>ee(),variant:"link",className:"px-0",children:n("common.filters.buttons.none")}),t.withDictionary&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-grow"}),e.jsx(ae,{htmlFor:"with-dictionary-switch",className:"text-xs",children:n("common.filters.with_dictionary")}),e.jsx(Ve,{id:"with-dictionary-switch",checked:l,size:"xs",onCheckedChange:()=>N(!l)})]})]}),e.jsxs("div",{className:"max-h-[250px] overflow-auto",children:[j&&Array.from({length:3},(i,m)=>e.jsxs("div",{className:"flex justify-between items-center py-2 space-x-2",children:[e.jsx(X,{className:"w-full h-6 rounded"}),e.jsx(X,{className:"h-6 w-12 rounded-md"})]},`skeleton-${m}`)),!j&&x.length===0&&e.jsx("div",{className:"text-muted-foreground py-4",children:n("common.filters.no_values_found")}),!j&&x.length>0&&Array.from({length:T},(i,m)=>e.jsx("div",{className:"gap-3 py-1.5",children:e.jsx(Re,{size:"xs",label:n(`common.filters.labels.${t.key}_value.${x[m].key}`,{defaultValue:x[m].label}),checked:c.some(a=>a===x[m].key),count:x[m].count,onCheckedChange:()=>te(x[m])})},x[m].key))]}),!j&&x.length>T&&e.jsx(R,{className:"mt-2 px-0",onClick:z,size:"xs",variant:"link",children:n("common.filters.buttons.show_more",{count:x.length-s})}),!j&&T>s&&e.jsx(R,{className:"mt-2 px-0",onClick:B,size:"xs",variant:"link",children:n("common.filters.buttons.show_less")})]}),e.jsx(ye,{size:"sm",children:e.jsxs("div",{className:"flex align-right justify-end items-center space-x-2",children:[e.jsx(R,{size:"xxs",variant:"ghost",onClick:se,disabled:c.length===0||j,children:n("common.filters.buttons.clear")}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(Fe,{size:"xxs",variant:"outline",className:"h-7",color:"primary",actions:[{label:n("common.filters.buttons.some_not_in"),onClick:J},{label:n("common.filters.buttons.all"),onClick:P},{label:n("common.filters.buttons.not_in"),onClick:D}],onDefaultAction:ne,disabled:j,children:n("common.filters.buttons.apply")})})]})})]})}ge.__docgenInfo={description:"",methods:[],displayName:"MultiSelectFilter",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},maxVisibleItems:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"5",computed:!1}}}};const at=We({slots:{base:"text-muted-foreground"},variants:{size:{xs:{base:"text-xs"},sm:{base:"text-sm"}}},defaultVariants:{size:"sm"}});function _e({className:t,size:s,children:n}){const d=at({size:s});return e.jsx("p",{className:d.base({className:t}),children:n})}_e.__docgenInfo={description:"",methods:[],displayName:"TextMuted"};const ot=function(){const{caseId:t}=Ye(),s=t?Number(t):void 0;if(s==null)throw new Error("Required parameter case_id was null or undefined.");return s},be="integer",lt=t=>{switch(t){case oe.cnv_occurrence:return s=>Z.statisticsGermlineCNVOccurrences(s.caseId,s.seqId,s.statisticsBody).then(n=>n.data);default:return s=>Z.statisticsGermlineSNVOccurrences(s.caseId,s.seqId,s.statisticsBody).then(n=>n.data)}};function it(t,s,n,d,f=!1){const u={caseId:n,seqId:d,statisticsBody:{field:t}},r=f?ve:_.getResolvedActiveQuery(s);return r&&(u.statisticsBody.sqon={content:r.content,op:r.op}),ke(u,lt(s),{revalidateOnFocus:!1})}function fe(t,s,n,d){var S;let f=!1,u=(n==null?void 0:n.defaultOperator)??b.LessThan,r="0",h="0",l="",N=!1;const p=(d==null?void 0:d.type)===be?0:3,j=s.content.find(c=>"content"in c&&"field"in c.content?c.content.field===t:!1),v=s.content.find(c=>"content"in c&&"field"in c.content?c.content.field===`${t}_unit`:!1);if(j){const c=j.content.value;if(console.log("[NumericalFilter] values",c),c.includes("__missing__"))return{hasUnappliedItems:f,selectedRange:u,minValue:r,maxValue:h,numericalValue:l,hasNoData:!0,selectedUnit:void 0};f=!0,c.length===2?(u=b.Between,r=Number(c[0]).toFixed(p),h=Number(c[1]).toFixed(p)):l=c[0],j.op&&(u=j.op)}else console.log("[NumericalFilter else] no filter exists",n),N=!1,(n==null?void 0:n.defaultMin)!==void 0?(r=n.defaultMin.toString(),l=n.defaultMin.toString()):(d==null?void 0:d.min)!==void 0&&(r=Number(d.min.toFixed(p)).toString(),l=Number(d.min.toFixed(p)).toString()),(n==null?void 0:n.defaultMax)!==void 0?h=n.defaultMax.toString():(d==null?void 0:d.max)!==void 0&&(h=Number(d.max.toFixed(p)).toString()),n!=null&&n.defaultOperator&&(u=b[n.defaultOperator]);let x;return v&&v.content.value[0]&&((S=n==null?void 0:n.rangeTypes)!=null&&S.length)&&(x=n.rangeTypes[0].key),{hasUnappliedItems:f,selectedRange:u,minValue:r,maxValue:h,numericalValue:l,hasNoData:N,selectedUnit:x}}function Ne({field:t}){var D,P,J,i,m;const{t:s}=q(),{appId:n,aggregations:d}=le(),{seqId:f}=o.useContext(je),u=ot(),r=t.key,h={[b.GreaterThan]:{display:s("common.filters.operators.greater_than"),dropdown:s("common.filters.operators.greater_than"),icon:Je},[b.LessThan]:{display:s("common.filters.operators.less_than"),dropdown:s("common.filters.operators.less_than"),icon:Pe},[b.Between]:{display:s("common.filters.operators.between"),dropdown:s("common.filters.operators.between"),icon:De},[b.GreaterThanOrEqualTo]:{display:s("common.filters.operators.greater_than_or_equal"),dropdown:s("common.filters.operators.greater_than_or_equal"),icon:Qe},[b.LessThanOrEqualTo]:{display:s("common.filters.operators.less_than_or_equal"),dropdown:s("common.filters.operators.less_than_or_equal"),icon:Ue},[b.In]:{display:s("common.filters.operators.in"),dropdown:s("common.filters.operators.in"),icon:Ge}},{data:l,isLoading:N}=it(r,n,u,f,!1),p=(l==null?void 0:l.type)===be?0:3,[j,v]=o.useState(b.GreaterThan),[x,S]=o.useState("0"),[c,A]=o.useState("0"),[T,w]=o.useState("0"),[V,F]=o.useState(!1),[O,$]=o.useState(),[M,I]=o.useState(!1),y=(D=Object.values(d).flatMap(a=>a.items).find(a=>a.key===r))==null?void 0:D.defaults,K=t.type==="numerical"&&(y==null?void 0:y.noDataInputOption),U=(y==null?void 0:y.intervalDecimal)!==void 0&&((y==null?void 0:y.max)!==void 0||(y==null?void 0:y.min)!==void 0)||l&&(l.min!==void 0||l.max!==void 0),z=(y==null?void 0:y.min)??(l==null?void 0:l.min)??0,B=(y==null?void 0:y.max)??(l==null?void 0:l.max)??100,Q=o.useCallback(()=>{const a=_.getResolvedActiveQuery(n);if(!(a!=null&&a.content))return;const k=fe(r,a,y,l);F(k.hasNoData),w(k.minValue),A(k.maxValue),I(k.hasUnappliedItems),v(k.selectedRange??b.GreaterThan),S(k.numericalValue)},[n,r,y,l]);o.useEffect(()=>{Q()},[Q]);const C=o.useCallback(a=>{v(a),I(!0)},[]),ee=o.useCallback(a=>{F(a),I(!0)},[]),te=o.useCallback(a=>{$(a),I(!0)},[]),se=()=>{I(!1);const a=fe(r,ve,y,l);F(a.hasNoData),w(a.minValue),A(a.maxValue),I(a.hasUnappliedItems),v(a.selectedRange),S(a.numericalValue)},E=o.useCallback(()=>{if(I(!1),V){_.updateActiveQueryField(n,{field:r,value:["__missing__"],merge_strategy:G.OVERRIDE_VALUES});return}let a=[];a=j===b.Between?[parseFloat(T.toString()),parseFloat(c.toString())]:[parseFloat(x.toString())],_.updateActiveQueryField(n,{field:r,value:a,merge_strategy:G.OVERRIDE_VALUES,operator:j}),O&&_.updateActiveQueryField(n,{field:`${r}_unit`,value:[O],merge_strategy:G.OVERRIDE_VALUES})},[n,r,j,x,T,c,V,O]),ne=Object.entries(b).map(([a,k])=>{if(k in h){const g=h[k].icon;return e.jsx(ce,{value:k,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{size:16}),e.jsx("span",{children:h[k].dropdown})]})},k)}return null}).filter(Boolean);return e.jsxs(e.Fragment,{children:[e.jsx(xe,{id:`${r}_container`,size:"sm",variant:"outline",children:e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{id:`${r}_operator`,children:e.jsxs(de,{value:j,onValueChange:C,children:[e.jsx(ue,{size:"sm",children:e.jsx(me,{placeholder:s("common.filters.operators.select_operator"),children:((P=h[j])==null?void 0:P.display)||s("common.filters.operators.unknown")})}),e.jsx(pe,{children:ne})]})}),j===b.Between?e.jsxs("div",{className:"flex gap-2 flex-row",children:[e.jsx(W,{size:"xs",className:"w-half",value:T,onChange:a=>{const k=a.target.value;isNaN(Number(k))||(w(k),I(!0))},min:z,max:B,id:`${r}_min`,"data-testid":`${r}_min`}),e.jsx(W,{size:"xs",className:"w-half",value:c,onChange:a=>{const k=a.target.value;isNaN(Number(k))||(A(k),I(!0))},min:z,max:B,id:`${r}_max`,"data-testid":`${r}_max`})]}):e.jsx(W,{size:"xs",className:"w-full",value:x,onChange:a=>{const k=a.target.value;isNaN(Number(k))||(S(k),I(!0))},min:z,max:B,id:`${r}_value`,"data-testid":`${r}_value`}),U&&e.jsx("div",{id:`${r}_interval`,children:e.jsxs(_e,{size:"xs",children:[s("common.filters.labels.actual_interval")," : ",(J=l==null?void 0:l.min)==null?void 0:J.toFixed(p)," -"," ",(i=l==null?void 0:l.max)==null?void 0:i.toFixed(p)]})})]}),(y==null?void 0:y.rangeTypes)&&y.rangeTypes.length>0&&e.jsx("div",{id:`${r}_range_type_container`,className:"mt-3",children:N?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"h-5 w-16 mb-1",id:`${r}_unit_label_skeleton`}),e.jsx(X,{className:"h-9 w-full",id:`${r}_select_skeleton`})]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"text-sm",id:`${r}_unit_label`,children:s("common.filters.labels.unit")}),e.jsxs(de,{defaultValue:O||y.rangeTypes[0].key,onValueChange:te,children:[e.jsx(ue,{children:e.jsx(me,{placeholder:s("common.filters.labels.select_unit"),children:((m=y.rangeTypes.find(a=>a.key===O))==null?void 0:m.name)||s("common.filters.labels.select_unit")})}),e.jsx(pe,{children:y.rangeTypes.map(a=>e.jsx(ce,{value:a.key,children:a.name},a.key))})]})]})}),K&&!U&&e.jsxs("label",{className:"flex items-center space-x-2 overflow-hidden mt-3",id:`${r}_no_data_label`,children:[e.jsx(He,{checked:V,onCheckedChange:ee,id:`${r}_no_data`}),e.jsx("span",{children:s("common.filters.labels.no_data")})]})]})}),e.jsx(ye,{size:"sm",children:e.jsxs("div",{className:"flex align-right justify-end items-center space-x-2",children:[e.jsx(R,{size:"xxs",variant:"ghost",onClick:se,disabled:!M,id:`${r}_clear`,children:s("common.filters.buttons.clear")}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(R,{size:"xxs",variant:"outline",onClick:E,id:`${r}_apply`,children:s("common.filters.buttons.apply")})})]})})]})}Ne.__docgenInfo={description:"",methods:[],displayName:"NumericalFilter",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};function Ie({data:t,field:s}){const{t:n}=q(),{appId:d}=le(),{data:f}=Se(s.key,void 0,!0,!1,d),[u,r]=o.useState(t||f||[]),[h,l]=o.useState(null);o.useEffect(()=>{r(t||f||[])},[t,f]),o.useEffect(()=>{const v=_.getActiveQuery(d).content.find(x=>x.content.field===s.key);if(v){const x=v.content.value;x.length>=1&&l(x[0])}else l(null)},[d,s.key]);const N=o.useCallback(v=>{v.key!==h&&v.key!==void 0&&(l(v.key||null),_.updateActiveQueryField(d,{field:s.key,value:[...v.key],merge_strategy:G.OVERRIDE_VALUES}))},[h]),p=o.useCallback(v=>h===v.key,[h]),j=o.useCallback(()=>{l(null)},[h]);return e.jsxs("div",{className:"p-2 w-full max-w-md",children:[e.jsx(Xe,{children:u.map(v=>e.jsx("div",{className:"space-y-3 pt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{value:v.key||"",id:v.key,checked:p(v),onClick:()=>{N(v)}}),e.jsx(ae,{htmlFor:v.key,children:v.key})]}),e.jsx("span",{className:"bg-accent px-2 py-1 rounded-md font-mono text-xs",children:v.count})]})},v.key))}),h!==null&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-4 border-border"}),e.jsx("div",{className:"flex align-right justify-end items-center space-x-2",children:e.jsx(R,{onClick:j,size:"xs",children:n("common.filters.buttons.clear")})})]})]})}Ie.__docgenInfo={description:"",methods:[],displayName:"ToggleFilter",props:{data:{required:!1,tsType:{name:"Array",elements:[{name:"Aggregation"}],raw:"Aggregation[]"},description:""},field:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};function Y({field:t,children:s}){const{t:n}=q(),d=n(`common.filters.labels.${t.translation_key}`,{defaultValue:t.key}),f=`common.filters.labels.${t.translation_key}_tooltip`,u=n(f)===f?null:n(f);function r(){return e.jsx("div",{className:"flex items-center justify-between w-full text-xs",children:e.jsx("span",{children:d})})}return e.jsx(Oe,{size:"sm",children:e.jsxs($e,{value:t.key,className:"border-none",children:[e.jsx(Ce,{size:"sm",children:e.jsx(Me,{children:u?e.jsxs(Ke,{children:[e.jsx(et,{asChild:!0,children:e.jsx("span",{children:r()})}),e.jsx(tt,{children:e.jsx("span",{children:u})})]}):r()})}),e.jsx(ze,{className:"pb-0",children:s})]},t.key)})}function we({field:t,isOpen:s}){const{t:n}=q(),d=t.type;if(d==="divider")return e.jsx("h4",{className:"px-2 h-8 text-sidebar-foreground/70 text-xs font-medium line-height-xs text-ellipsis overflow-hidden flex justify-between items-center",children:n(`common.filters.${t.key}`)});let f;switch(d){case"multiple":f=e.jsx(Y,{field:t,isOpen:s,children:e.jsx(ge,{field:t})});break;case"numerical":f=e.jsx(Y,{field:t,isOpen:s,children:e.jsx(Ne,{field:t})});break;case"boolean":f=e.jsx(Y,{field:t,isOpen:s,children:e.jsx(Ie,{field:t})});break;default:f=e.jsx("div",{children:n("common.filters.unsupported_type",{type:t.type})})}return f}Y.__docgenInfo={description:"",methods:[],displayName:"AccordionContainer",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},searchHandler:{required:!1,tsType:{name:"signature",type:"function",raw:"(_e: React.MouseEvent<SVGElement, MouseEvent>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<SVGElement, MouseEvent>",elements:[{name:"SVGElement"},{name:"MouseEvent"}]},name:"_e"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};we.__docgenInfo={description:"To be use when the filter needs to be inside an Accordion component",methods:[],displayName:"FilterContainer",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},searchHandler:{required:!1,tsType:{name:"signature",type:"function",raw:"(_e: React.MouseEvent<SVGElement, MouseEvent>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<SVGElement, MouseEvent>",elements:[{name:"SVGElement"},{name:"MouseEvent"}]},name:"_e"}],return:{name:"void"}}},description:""}}};const Ee=o.createContext({appId:oe.variant_entity,aggregations:{}}),le=()=>{const t=o.useContext(Ee);if(!t)throw new Error("useFilterConfig must be used within a FilterConfigProvider");return t};function Ae(t){return`temp-filters-${t}`}function ct({groupKey:t,appId:s,aggregations:n}){var x;const{t:d}=q(),[f,u]=o.useState(!1),[r,h]=o.useState([]),[l,N]=o.useState(t),p=Ae(s),j=()=>{sessionStorage.removeItem(p)},v=t?((x=n[t])==null?void 0:x.items)||[]:Object.values(n).flatMap(S=>S.items);return o.useEffect(()=>{u(!1),h([])},[t]),o.useEffect(()=>{(l&&l!==null&&t===null||l&&l!==null&&t&&t!==null&&l!==t)&&j(),N(t)},[t,l]),e.jsx(Ee,{value:{appId:s,aggregations:n},children:e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(R,{variant:"link",size:"xs",onClick:()=>{const S=!f;u(S),h(S?v.map(c=>c.key):[])},children:d(f?"common.actions.collapse_all":"common.actions.expand_all")})}),e.jsx(Be,{className:"flex flex-col gap-1",type:"multiple",value:r,onValueChange:S=>h(S),children:v.map((S,c)=>e.jsx(we,{isOpen:r.includes(S.key),field:S},`${S.key}-${c}`))})]})})}ct.__docgenInfo={description:"",methods:[],displayName:"FilterList",props:{groupKey:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},aggregations:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [key: string]: AggregationGroup;
}`,signature:{properties:[{key:{name:"string"},value:{name:"AggregationGroup",required:!0}}]}},description:""},appId:{required:!0,tsType:{name:"ApplicationId"},description:""}}};export{je as A,ct as F,Ee as a,ot as u};
