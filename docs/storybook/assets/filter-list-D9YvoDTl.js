import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{R as he,r as a}from"./index-CBYaBgW8.js";import{A as Fe}from"./action-button-9r-08jXC.js";import{B as O}from"./button-D8iatrnR.js";import"./button.variants-Du9eY_ux.js";import{C as Oe}from"./checkbox-filter-CgMxmOlu.js";import{d as ye,e as xe,C as Re,a as Ce}from"./card-Cyh3E19J.js";import{I as W}from"./input-Bj-MPxry.js";import{L as oe}from"./label-BI8zg36L.js";import{S as Ve}from"./separator-ChZWIdMg.js";import{S as K}from"./skeleton-_T1otFf0.js";import{S as qe}from"./switch-Jy17y5RA.js";import{q as _,D as ve}from"./query-builder-remote-ey8YFat1.js";import{M as G,T as H,R as b}from"./sqon-BpmWAJ8m.js";import{u as V}from"./i18n-DVJNUQ1X.js";import{A as $e,a as Me,b as ze,c as Be}from"./accordion-DSXieqtP.js";import{A as ae}from"./applications-config-3OOAo44D.js";import{u as ke,o as X}from"./api-BrpmfvPu.js";import{S as Le}from"./search-DKmUqS9g.js";import{E as Ge,L as De,G as Ue,a as Qe,b as Je,c as Pe}from"./less-than-or-equal-operator-icon-BI5aNTvi.js";import{C as He}from"./checkbox-BUFo-vqr.js";import{d as ce,S as de,a as ue,b as me,c as pe}from"./select-DnbErV3f.js";import{c as We}from"./index-C66Dxnp2.js";import{u as Ye}from"./chunk-WWGJGFF6-0IpzJ_3T.js";import{R as Ke,a as Xe}from"./radio-group-DekDLgvf.js";import{T as Ze,a as et,b as tt}from"./tooltip-0vX-MTK3.js";const ge=he.createContext({caseId:1,seqId:1}),st=t=>{switch(t){case ae.cnv_occurrence:return s=>X.aggregateGermlineCNVOccurrences(s.caseId,s.seqId,s.aggregationBody).then(n=>n.data);default:return s=>X.aggregateGermlineSNVOccurrences(s.caseId,s.seqId,s.aggregationBody,s.withDictionary).then(n=>n.data)}};function Se(t,s=30,n=!1,d=!1,p){let m;const{caseId:r,seqId:h}=he.useContext(ge);n?m={caseId:r,seqId:h,aggregationBody:{field:t,size:s},withDictionary:d}:m=null;const i=_.getResolvedActiveQuery(p);return i&&m&&(m.aggregationBody.sqon={content:i.content,op:i.op}),ke(m,st(p),{revalidateOnFocus:!1})}function nt(t,s){const n=t.toLowerCase().split(/\s+/).filter(Boolean);return s.filter(d=>{const p=d.key.toLowerCase(),m=d.label.toLowerCase();function r(h,i){let N=0;for(const f of i){const g=h.indexOf(f,N);if(g===-1)return!1;N=g+f.length}return!0}return r(p,n)||r(m,n)})}function re(t,s){return s<t?s:t}function rt(t,s){try{const n=sessionStorage.getItem(s);if(n){const d=JSON.parse(n),p=`${t.key}_withDictionary`;if(Object.prototype.hasOwnProperty.call(d,p))return d[p]}}catch(n){console.warn(`Failed to read dictionary toggle state from sessionStorage for ${t.key}:`,n)}return!1}function je({field:t,maxVisibleItems:s=5}){const{t:n,sanitize:d,lazyTranslate:p}=V(),{appId:m}=le(),r=Te(m),h=()=>{try{const l=sessionStorage.getItem(r);if(l){const c=JSON.parse(l);Object.keys(c).forEach(o=>{o.endsWith("_withDictionary")||delete c[o]}),Object.keys(c).length>0?sessionStorage.setItem(r,JSON.stringify(c)):sessionStorage.removeItem(r)}}catch(l){console.warn("Failed to clear unapplied filters from sessionStorage:",l)}},[i,N]=a.useState(rt(t,r)),{data:f,isLoading:g}=Se(t.key,void 0,!0,i,m),v=()=>{try{const o=sessionStorage.getItem(r);if(o){const k=JSON.parse(o);if(Object.prototype.hasOwnProperty.call(k,t.key)){const j=k[t.key];return console.error(`[${t.key}] Found in sessionStorage:`,j),j}}}catch(o){console.warn(`Failed to read filter state from sessionStorage for ${t.key}:`,o)}const l=_.getResolvedActiveQuery(m).content.find(o=>o.content.field===t.key);return(l==null?void 0:l.content.value)||[]},[y,S]=a.useState(f||[]),[u,A]=a.useState(v()),[w,E]=a.useState(re(y.length,s)),[q,F]=a.useState(!1),[R,$]=a.useState(!1),[M,I]=a.useState(()=>{const l=_.getResolvedActiveQuery(m);return JSON.stringify(l)}),[x,Z]=a.useState(()=>{try{const l=sessionStorage.getItem(r);if(l){const c=JSON.parse(l);return Object.prototype.hasOwnProperty.call(c,t.key)}}catch(l){console.warn(`Failed to check sessionStorage state for ${t.key}:`,l)}return!1});a.useEffect(()=>{const l=_.getResolvedActiveQuery(m),c=JSON.stringify(l);if(M&&M!==c){h();const o=_.getResolvedActiveQuery(m).content.find(j=>j.content.field===t.key),k=(o==null?void 0:o.content.value)||[];A(k)}I(c)},[m,t.key,h,M]),a.useEffect(()=>{const l=_.getResolvedActiveQuery(m).content.find(j=>j.content.field===t.key),c=(l==null?void 0:l.content.value)||[],o=JSON.stringify([...u].sort())!==JSON.stringify([...c].sort());F(o),u.length===0&&c.length>0&&!R&&!q&&!x&&A(c),x&&Z(!1),u.length>0&&R&&$(!1);const k=(()=>{const j=_.getResolvedActiveQuery(m).content.find(L=>L.content.field===t.key);return(j==null?void 0:j.content.value)||[]})();f==null||f.sort((j,L)=>{const ie=j.key&&k.includes(j.key),Ae=L.key&&k.includes(L.key);return ie===Ae?L.count-j.count:ie?-1:1}),f==null||f.forEach(j=>{j.label=n(`common.filters.values.${t.key}.${d(j.key)}`,{defaultValue:p(j.key)})}),S(f||[]),E(re((f==null?void 0:f.length)||0,s))},[f,m,t.key,s]),a.useEffect(()=>{try{const l=sessionStorage.getItem(r)||"{}",c=JSON.parse(l);c[t.key]=u,sessionStorage.setItem(r,JSON.stringify(c))}catch(l){console.warn(`Failed to save filter state to sessionStorage for ${t.key}:`,l)}},[u,r,t.key]),a.useEffect(()=>{if(t.withDictionary)try{const l=sessionStorage.getItem(r)||"{}",c=JSON.parse(l),o=`${t.key}_withDictionary`;c[o]=i,sessionStorage.setItem(r,JSON.stringify(c))}catch(l){console.warn(`Failed to save dictionary toggle state to sessionStorage for ${t.key}:`,l)}},[i,r,t.key,t.withDictionary]);const D=a.useCallback(l=>{if(!l.trim()){S(f||[]),E(re((f==null?void 0:f.length)||0,s));return}const c=nt(l,f);s>c.length?E(c.length):c.length>s&&E(s),S(c)},[f,s]),z=a.useCallback(()=>{E(y.length)},[w,y]),B=a.useCallback(()=>{E(s)},[w]),U=a.useCallback(()=>{u.length!==y.length&&(F(!0),A(y.map(l=>l.key)))},[y,u]),C=a.useCallback(()=>{F(!0),A([]),$(!0);try{const l=sessionStorage.getItem(r);if(l){const c=JSON.parse(l);delete c[t.key],Object.keys(c).length===0?sessionStorage.removeItem(r):sessionStorage.setItem(r,JSON.stringify(c))}}catch(l){console.warn(`Failed to clear filter state from sessionStorage for ${t.key}:`,l)}},[r,t.key]),ee=a.useCallback(()=>{u.length!==0&&C()},[u,C]),te=a.useCallback(l=>{let c=[];u.some(o=>o===l.key)?c=u.filter(o=>o!==l.key):c=[...u,l.key],F(!0),A(c)},[u]),se=a.useCallback(()=>{C()},[C]),T=a.useCallback(l=>{F(!1),$(!1),_.updateActiveQueryField(m,{field:t.key,value:[...u],merge_strategy:G.OVERRIDE_VALUES,operator:l}),h()},[u,m,t.key,h]),ne=a.useCallback(()=>{T(H.In)},[T]),Q=a.useCallback(()=>{T(H.NotIn)},[T]),J=a.useCallback(()=>{T(H.All)},[T]),P=a.useCallback(()=>{T(H.In)},[T]);return e.jsxs(e.Fragment,{children:[e.jsxs(ye,{size:"sm",variant:"outline",children:[e.jsx(W,{startIcon:Le,size:"xs",type:"text",placeholder:n("common.filters.search.placeholder"),className:"w-full text-xs py-1.5 px-3 mb-4 border border-border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",onChange:l=>D(l.target.value),autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(O,{size:"xs",onClick:()=>U(),variant:"link",className:"px-0",children:n("common.filters.buttons.all")}),e.jsx(Ve,{orientation:"vertical",className:"h-4"}),e.jsx(O,{size:"xs",onClick:()=>ee(),variant:"link",className:"px-0",children:n("common.filters.buttons.none")}),t.withDictionary&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-grow"}),e.jsx(oe,{htmlFor:"with-dictionary-switch",className:"text-xs",children:n("common.filters.with_dictionary")}),e.jsx(qe,{id:"with-dictionary-switch",checked:i,size:"xs",onCheckedChange:()=>N(!i)})]})]}),e.jsxs("div",{className:"max-h-[250px] overflow-auto",children:[g&&Array.from({length:3},(l,c)=>e.jsxs("div",{className:"flex justify-between items-center py-2 space-x-2",children:[e.jsx(K,{className:"w-full h-6 rounded"}),e.jsx(K,{className:"h-6 w-12 rounded-md"})]},`skeleton-${c}`)),!g&&y.length===0&&e.jsx("div",{className:"text-muted-foreground py-4",children:n("common.filters.no_values_found")}),!g&&y.length>0&&Array.from({length:w},(l,c)=>e.jsx("div",{className:"gap-3 py-1.5",children:e.jsx(Oe,{size:"xs",label:n(`common.filters.labels.${t.key}_value.${y[c].key}`,{defaultValue:y[c].label}),checked:u.some(o=>o===y[c].key),count:y[c].count,onCheckedChange:()=>te(y[c])})},y[c].key))]}),!g&&y.length>w&&e.jsx(O,{className:"mt-2 px-0",onClick:z,size:"xs",variant:"link",children:n("common.filters.buttons.show_more",{count:y.length-w})}),!g&&w>s&&e.jsx(O,{className:"mt-2 px-0",onClick:B,size:"xs",variant:"link",children:n("common.filters.buttons.show_less")})]}),e.jsx(xe,{size:"sm",children:e.jsxs("div",{className:"flex align-right justify-end items-center space-x-2",children:[e.jsx(O,{size:"xxs",variant:"ghost",onClick:se,disabled:u.length===0||g,children:n("common.filters.buttons.clear")}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(Fe,{size:"xxs",variant:"outline",className:"h-7",color:"primary",actions:[{label:n("common.filters.buttons.some_not_in"),onClick:P},{label:n("common.filters.buttons.all"),onClick:J},{label:n("common.filters.buttons.not_in"),onClick:Q}],onDefaultAction:ne,disabled:g,children:n("common.filters.buttons.apply")})})]})})]})}je.__docgenInfo={description:"",methods:[],displayName:"MultiSelectFilter",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},maxVisibleItems:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"5",computed:!1}}}};const ot=We({slots:{base:"text-muted-foreground"},variants:{size:{xs:{base:"text-xs"},sm:{base:"text-sm"}}},defaultVariants:{size:"sm"}});function _e({className:t,size:s,children:n}){const d=ot({size:s});return e.jsx("p",{className:d.base({className:t}),children:n})}_e.__docgenInfo={description:"",methods:[],displayName:"TextMuted"};const at=function(){const{caseId:t}=Ye(),s=t?Number(t):void 0;if(s==null)throw new Error("Required parameter case_id was null or undefined.");return s},be="integer",lt=t=>{switch(t){case ae.cnv_occurrence:return s=>X.statisticsGermlineCNVOccurrences(s.caseId,s.seqId,s.statisticsBody).then(n=>n.data);default:return s=>X.statisticsGermlineSNVOccurrences(s.caseId,s.seqId,s.statisticsBody).then(n=>n.data)}};function it(t,s,n,d,p=!1){const m={caseId:n,seqId:d,statisticsBody:{field:t}},r=p?ve:_.getResolvedActiveQuery(s);return r&&(m.statisticsBody.sqon={content:r.content,op:r.op}),ke(m,lt(s),{revalidateOnFocus:!1})}function fe(t,s,n,d){var S;let p=!1,m=(n==null?void 0:n.defaultOperator)??b.LessThan,r="0",h="0",i="",N=!1;const f=(d==null?void 0:d.type)===be?0:3,g=s.content.find(u=>"content"in u&&"field"in u.content?u.content.field===t:!1),v=s.content.find(u=>"content"in u&&"field"in u.content?u.content.field===`${t}_unit`:!1);if(g){const u=g.content.value;if(console.log("[NumericalFilter] values",u),u.includes("__missing__"))return{hasUnappliedItems:p,selectedRange:m,minValue:r,maxValue:h,numericalValue:i,hasNoData:!0,selectedUnit:void 0};p=!0,u.length===2?(m=b.Between,r=Number(u[0]).toFixed(f),h=Number(u[1]).toFixed(f)):i=u[0],g.op&&(m=g.op)}else console.log("[NumericalFilter else] no filter exists",n),N=!1,(n==null?void 0:n.defaultMin)!==void 0?(r=n.defaultMin.toString(),i=n.defaultMin.toString()):(d==null?void 0:d.min)!==void 0&&(r=Number(d.min.toFixed(f)).toString(),i=Number(d.min.toFixed(f)).toString()),(n==null?void 0:n.defaultMax)!==void 0?h=n.defaultMax.toString():(d==null?void 0:d.max)!==void 0&&(h=Number(d.max.toFixed(f)).toString()),n!=null&&n.defaultOperator&&(m=b[n.defaultOperator]);let y;return v&&v.content.value[0]&&((S=n==null?void 0:n.rangeTypes)!=null&&S.length)&&(y=n.rangeTypes[0].key),{hasUnappliedItems:p,selectedRange:m,minValue:r,maxValue:h,numericalValue:i,hasNoData:N,selectedUnit:y}}function Ne({field:t}){var Q,J,P,l,c;const{t:s}=V(),{appId:n,aggregations:d}=le(),{seqId:p}=a.useContext(ge),m=at(),r=t.key,h={[b.GreaterThan]:{display:s("common.filters.operators.greater_than"),dropdown:s("common.filters.operators.greater_than"),icon:Pe},[b.LessThan]:{display:s("common.filters.operators.less_than"),dropdown:s("common.filters.operators.less_than"),icon:Je},[b.Between]:{display:s("common.filters.operators.between"),dropdown:s("common.filters.operators.between"),icon:Qe},[b.GreaterThanOrEqualTo]:{display:s("common.filters.operators.greater_than_or_equal"),dropdown:s("common.filters.operators.greater_than_or_equal"),icon:Ue},[b.LessThanOrEqualTo]:{display:s("common.filters.operators.less_than_or_equal"),dropdown:s("common.filters.operators.less_than_or_equal"),icon:De},[b.In]:{display:s("common.filters.operators.in"),dropdown:s("common.filters.operators.in"),icon:Ge}},{data:i,isLoading:N}=it(r,n,m,p,!1),f=(i==null?void 0:i.type)===be?0:3,[g,v]=a.useState(b.GreaterThan),[y,S]=a.useState("0"),[u,A]=a.useState("0"),[w,E]=a.useState("0"),[q,F]=a.useState(!1),[R,$]=a.useState(),[M,I]=a.useState(!1),x=(Q=Object.values(d).flatMap(o=>o.items).find(o=>o.key===r))==null?void 0:Q.defaults,Z=t.type==="numerical"&&(x==null?void 0:x.noDataInputOption),D=(x==null?void 0:x.intervalDecimal)!==void 0&&((x==null?void 0:x.max)!==void 0||(x==null?void 0:x.min)!==void 0)||i&&(i.min!==void 0||i.max!==void 0),z=(x==null?void 0:x.min)??(i==null?void 0:i.min)??0,B=(x==null?void 0:x.max)??(i==null?void 0:i.max)??100,U=a.useCallback(()=>{const o=_.getResolvedActiveQuery(n);if(!(o!=null&&o.content))return;const k=fe(r,o,x,i);F(k.hasNoData),E(k.minValue),A(k.maxValue),I(k.hasUnappliedItems),v(k.selectedRange??b.GreaterThan),S(k.numericalValue)},[n,r,x,i]);a.useEffect(()=>{U()},[U]);const C=a.useCallback(o=>{v(o),I(!0)},[]),ee=a.useCallback(o=>{F(o),I(!0)},[]),te=a.useCallback(o=>{$(o),I(!0)},[]),se=()=>{I(!1);const o=fe(r,ve,x,i);F(o.hasNoData),E(o.minValue),A(o.maxValue),I(o.hasUnappliedItems),v(o.selectedRange),S(o.numericalValue)},T=a.useCallback(()=>{if(I(!1),q){_.updateActiveQueryField(n,{field:r,value:["__missing__"],merge_strategy:G.OVERRIDE_VALUES});return}let o=[];o=g===b.Between?[parseFloat(w.toString()),parseFloat(u.toString())]:[parseFloat(y.toString())],_.updateActiveQueryField(n,{field:r,value:o,merge_strategy:G.OVERRIDE_VALUES,operator:g}),R&&_.updateActiveQueryField(n,{field:`${r}_unit`,value:[R],merge_strategy:G.OVERRIDE_VALUES})},[n,r,g,y,w,u,q,R]),ne=Object.entries(b).map(([o,k])=>{if(k in h){const j=h[k].icon;return e.jsx(ce,{value:k,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{size:16}),e.jsx("span",{children:h[k].dropdown})]})},k)}return null}).filter(Boolean);return e.jsxs(e.Fragment,{children:[e.jsx(ye,{id:`${r}_container`,size:"sm",variant:"outline",children:e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{id:`${r}_operator`,children:e.jsxs(de,{value:g,onValueChange:C,children:[e.jsx(ue,{size:"sm",children:e.jsx(me,{placeholder:s("common.filters.operators.select_operator"),children:((J=h[g])==null?void 0:J.display)||s("common.filters.operators.unknown")})}),e.jsx(pe,{children:ne})]})}),g===b.Between?e.jsxs("div",{className:"flex gap-2 flex-row",children:[e.jsx(W,{size:"xs",className:"w-half",value:w,onChange:o=>{const k=o.target.value;isNaN(Number(k))||(E(k),I(!0))},min:z,max:B,id:`${r}_min`,"data-testid":`${r}_min`}),e.jsx(W,{size:"xs",className:"w-half",value:u,onChange:o=>{const k=o.target.value;isNaN(Number(k))||(A(k),I(!0))},min:z,max:B,id:`${r}_max`,"data-testid":`${r}_max`})]}):e.jsx(W,{size:"xs",className:"w-full",value:y,onChange:o=>{const k=o.target.value;isNaN(Number(k))||(S(k),I(!0))},min:z,max:B,id:`${r}_value`,"data-testid":`${r}_value`}),D&&e.jsx("div",{id:`${r}_interval`,children:e.jsxs(_e,{size:"xs",children:[s("common.filters.labels.actual_interval")," : ",(P=i==null?void 0:i.min)==null?void 0:P.toFixed(f)," -"," ",(l=i==null?void 0:i.max)==null?void 0:l.toFixed(f)]})})]}),(x==null?void 0:x.rangeTypes)&&x.rangeTypes.length>0&&e.jsx("div",{id:`${r}_range_type_container`,className:"mt-3",children:N?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-5 w-16 mb-1",id:`${r}_unit_label_skeleton`}),e.jsx(K,{className:"h-9 w-full",id:`${r}_select_skeleton`})]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"text-sm",id:`${r}_unit_label`,children:s("common.filters.labels.unit")}),e.jsxs(de,{defaultValue:R||x.rangeTypes[0].key,onValueChange:te,children:[e.jsx(ue,{children:e.jsx(me,{placeholder:s("common.filters.labels.select_unit"),children:((c=x.rangeTypes.find(o=>o.key===R))==null?void 0:c.name)||s("common.filters.labels.select_unit")})}),e.jsx(pe,{children:x.rangeTypes.map(o=>e.jsx(ce,{value:o.key,children:o.name},o.key))})]})]})}),Z&&!D&&e.jsxs("label",{className:"flex items-center space-x-2 overflow-hidden mt-3",id:`${r}_no_data_label`,children:[e.jsx(He,{checked:q,onCheckedChange:ee,id:`${r}_no_data`}),e.jsx("span",{children:s("common.filters.labels.no_data")})]})]})}),e.jsx(xe,{size:"sm",children:e.jsxs("div",{className:"flex align-right justify-end items-center space-x-2",children:[e.jsx(O,{size:"xxs",variant:"ghost",onClick:se,disabled:!M,id:`${r}_clear`,children:s("common.filters.buttons.clear")}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(O,{size:"xxs",variant:"outline",onClick:T,id:`${r}_apply`,children:s("common.filters.buttons.apply")})})]})})]})}Ne.__docgenInfo={description:"",methods:[],displayName:"NumericalFilter",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};function Ie({data:t,field:s}){const{t:n}=V(),{appId:d}=le(),{data:p}=Se(s.key,void 0,!0,!1,d),[m,r]=a.useState(t||p||[]),[h,i]=a.useState(null);a.useEffect(()=>{r(t||p||[])},[t,p]),a.useEffect(()=>{const v=_.getActiveQuery(d).content.find(y=>y.content.field===s.key);if(v){const y=v.content.value;y.length>=1&&i(y[0])}else i(null)},[d,s.key]);const N=a.useCallback(v=>{v.key!==h&&v.key!==void 0&&(i(v.key||null),_.updateActiveQueryField(d,{field:s.key,value:[...v.key],merge_strategy:G.OVERRIDE_VALUES}))},[h]),f=a.useCallback(v=>h===v.key,[h]),g=a.useCallback(()=>{i(null)},[h]);return e.jsxs("div",{className:"p-2 w-full max-w-md",children:[e.jsx(Ke,{children:m.map(v=>e.jsx("div",{className:"space-y-3 pt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{value:v.key||"",id:v.key,checked:f(v),onClick:()=>{N(v)}}),e.jsx(oe,{htmlFor:v.key,children:v.key})]}),e.jsx("span",{className:"bg-accent px-2 py-1 rounded-md font-mono text-xs",children:v.count})]})},v.key))}),h!==null&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-4 border-border"}),e.jsx("div",{className:"flex align-right justify-end items-center space-x-2",children:e.jsx(O,{onClick:g,size:"xs",children:n("common.filters.buttons.clear")})})]})]})}Ie.__docgenInfo={description:"",methods:[],displayName:"ToggleFilter",props:{data:{required:!1,tsType:{name:"Array",elements:[{name:"Aggregation"}],raw:"Aggregation[]"},description:""},field:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};function Y({field:t,children:s}){const{t:n}=V(),d=n(`common.filters.labels.${t.translation_key}`,{defaultValue:t.key}),p=`common.filters.labels.${t.translation_key}_tooltip`,m=n(p)===p?null:n(p);function r(){return e.jsx("div",{className:"flex items-center justify-between w-full text-xs",children:e.jsx("span",{children:d})})}return e.jsx(Re,{size:"sm",children:e.jsxs($e,{value:t.key,className:"border-none",children:[e.jsx(Ce,{size:"sm",children:e.jsx(Me,{children:m?e.jsxs(Ze,{children:[e.jsx(et,{asChild:!0,children:e.jsx("span",{children:r()})}),e.jsx(tt,{children:e.jsx("span",{children:m})})]}):r()})}),e.jsx(ze,{className:"pb-0",children:s})]},t.key)})}function we({field:t,isOpen:s}){const{t:n}=V(),d=t.type;if(d==="divider")return e.jsx("h4",{className:"px-2 h-8 text-sidebar-foreground/70 text-xs font-medium line-height-xs text-ellipsis overflow-hidden flex justify-between items-center",children:n(`common.filters.${t.key}`)});let p;switch(d){case"multiple":p=e.jsx(Y,{field:t,isOpen:s,children:e.jsx(je,{field:t})});break;case"numerical":p=e.jsx(Y,{field:t,isOpen:s,children:e.jsx(Ne,{field:t})});break;case"boolean":p=e.jsx(Y,{field:t,isOpen:s,children:e.jsx(Ie,{field:t})});break;default:p=e.jsx("div",{children:n("common.filters.unsupported_type",{type:t.type})})}return p}Y.__docgenInfo={description:"",methods:[],displayName:"AccordionContainer",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},searchHandler:{required:!1,tsType:{name:"signature",type:"function",raw:"(_e: React.MouseEvent<SVGElement, MouseEvent>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<SVGElement, MouseEvent>",elements:[{name:"SVGElement"},{name:"MouseEvent"}]},name:"_e"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};we.__docgenInfo={description:"To be use when the filter needs to be inside an Accordion component",methods:[],displayName:"FilterContainer",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},searchHandler:{required:!1,tsType:{name:"signature",type:"function",raw:"(_e: React.MouseEvent<SVGElement, MouseEvent>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<SVGElement, MouseEvent>",elements:[{name:"SVGElement"},{name:"MouseEvent"}]},name:"_e"}],return:{name:"void"}}},description:""}}};const Ee=a.createContext({appId:ae.variant_entity,aggregations:{}}),le=()=>{const t=a.useContext(Ee);if(!t)throw new Error("useFilterConfig must be used within a FilterConfigProvider");return t};function Te(t){return`temp-filters-${t}`}function ct({groupKey:t,appId:s,aggregations:n}){var y;const{t:d}=V(),[p,m]=a.useState(!1),[r,h]=a.useState([]),[i,N]=a.useState(t),f=Te(s),g=()=>{sessionStorage.removeItem(f)},v=t?((y=n[t])==null?void 0:y.items)||[]:Object.values(n).flatMap(S=>S.items);return a.useEffect(()=>{m(!1),h([])},[t]),a.useEffect(()=>{(i&&i!==null&&t===null||i&&i!==null&&t&&t!==null&&i!==t)&&g(),N(t)},[t,i]),e.jsx(Ee,{value:{appId:s,aggregations:n},children:e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{variant:"link",size:"xs",onClick:()=>{const S=!p;m(S),h(S?v.map(u=>u.key):[])},children:d(p?"common.actions.collapse_all":"common.actions.expand_all")})}),e.jsx(Be,{className:"flex flex-col gap-1",type:"multiple",value:r,onValueChange:S=>h(S),children:v.map((S,u)=>e.jsx(we,{isOpen:r.includes(S.key),field:S},`${S.key}-${u}`))})]})})}ct.__docgenInfo={description:"",methods:[],displayName:"FilterList",props:{groupKey:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},aggregations:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [key: string]: AggregationGroup;
}`,signature:{properties:[{key:{name:"string"},value:{name:"AggregationGroup",required:!0}}]}},description:""},appId:{required:!0,tsType:{name:"ApplicationId"},description:""}}};export{ge as A,ct as F,Ee as a,at as u};
