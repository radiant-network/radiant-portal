var Wu=Object.defineProperty;var Bu=(r,e,n)=>e in r?Wu(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var Z=(r,e,n)=>Bu(r,typeof e!="symbol"?e+"":e,n);import{c as Se,g as ie}from"./index-CBYaBgW8.js";import{B as Ie,a as Rn,T as Ms,M as ne,S as $u,R as Hn,s as zu}from"./sqon-BcDlHyYL.js";var je,Vn;function Te(){if(Vn)return je;Vn=1;var r=Object.prototype;function e(n){var t=n&&n.constructor,a=typeof t=="function"&&t.prototype||r;return n===a}return je=e,je}var Fe,Yn;function Us(){if(Yn)return Fe;Yn=1;function r(e,n){return function(t){return e(n(t))}}return Fe=r,Fe}var xe,Wn;function ku(){if(Wn)return xe;Wn=1;var r=Us(),e=r(Object.keys,Object);return xe=e,xe}var De,Bn;function Ns(){if(Bn)return De;Bn=1;var r=Te(),e=ku(),n=Object.prototype,t=n.hasOwnProperty;function a(i){if(!r(i))return e(i);var s=[];for(var u in Object(i))t.call(i,u)&&u!="constructor"&&s.push(u);return s}return De=a,De}var Le,$n;function Gs(){if($n)return Le;$n=1;var r=typeof Se=="object"&&Se&&Se.Object===Object&&Se;return Le=r,Le}var Me,zn;function x(){if(zn)return Me;zn=1;var r=Gs(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=r||e||Function("return this")();return Me=n,Me}var Ue,kn;function se(){if(kn)return Ue;kn=1;var r=x(),e=r.Symbol;return Ue=e,Ue}var Ne,Jn;function Ju(){if(Jn)return Ne;Jn=1;var r=se(),e=Object.prototype,n=e.hasOwnProperty,t=e.toString,a=r?r.toStringTag:void 0;function i(s){var u=n.call(s,a),o=s[a];try{s[a]=void 0;var c=!0}catch{}var f=t.call(s);return c&&(u?s[a]=o:delete s[a]),f}return Ne=i,Ne}var Ge,Xn;function Xu(){if(Xn)return Ge;Xn=1;var r=Object.prototype,e=r.toString;function n(t){return e.call(t)}return Ge=n,Ge}var Ke,Zn;function ue(){if(Zn)return Ke;Zn=1;var r=se(),e=Ju(),n=Xu(),t="[object Null]",a="[object Undefined]",i=r?r.toStringTag:void 0;function s(u){return u==null?u===void 0?a:t:i&&i in Object(u)?e(u):n(u)}return Ke=s,Ke}var He,ea;function G(){if(ea)return He;ea=1;function r(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return He=r,He}var Ve,ra;function mn(){if(ra)return Ve;ra=1;var r=ue(),e=G(),n="[object AsyncFunction]",t="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(u){if(!e(u))return!1;var o=r(u);return o==t||o==a||o==n||o==i}return Ve=s,Ve}var Ye,ta;function Zu(){if(ta)return Ye;ta=1;var r=x(),e=r["__core-js_shared__"];return Ye=e,Ye}var We,na;function eo(){if(na)return We;na=1;var r=Zu(),e=(function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function n(t){return!!e&&e in t}return We=n,We}var Be,aa;function Ks(){if(aa)return Be;aa=1;var r=Function.prototype,e=r.toString;function n(t){if(t!=null){try{return e.call(t)}catch{}try{return t+""}catch{}}return""}return Be=n,Be}var $e,ia;function ro(){if(ia)return $e;ia=1;var r=mn(),e=eo(),n=G(),t=Ks(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,u=Object.prototype,o=s.toString,c=u.hasOwnProperty,f=RegExp("^"+o.call(c).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l(v){if(!n(v)||e(v))return!1;var d=r(v)?f:i;return d.test(t(v))}return $e=l,$e}var ze,sa;function to(){if(sa)return ze;sa=1;function r(e,n){return e==null?void 0:e[n]}return ze=r,ze}var ke,ua;function W(){if(ua)return ke;ua=1;var r=ro(),e=to();function n(t,a){var i=e(t,a);return r(i)?i:void 0}return ke=n,ke}var Je,oa;function no(){if(oa)return Je;oa=1;var r=W(),e=x(),n=r(e,"DataView");return Je=n,Je}var Xe,ca;function Cn(){if(ca)return Xe;ca=1;var r=W(),e=x(),n=r(e,"Map");return Xe=n,Xe}var Ze,fa;function ao(){if(fa)return Ze;fa=1;var r=W(),e=x(),n=r(e,"Promise");return Ze=n,Ze}var er,la;function Hs(){if(la)return er;la=1;var r=W(),e=x(),n=r(e,"Set");return er=n,er}var rr,va;function io(){if(va)return rr;va=1;var r=W(),e=x(),n=r(e,"WeakMap");return rr=n,rr}var tr,da;function oe(){if(da)return tr;da=1;var r=no(),e=Cn(),n=ao(),t=Hs(),a=io(),i=ue(),s=Ks(),u="[object Map]",o="[object Object]",c="[object Promise]",f="[object Set]",l="[object WeakMap]",v="[object DataView]",d=s(r),b=s(e),p=s(n),h=s(t),S=s(a),_=i;return(r&&_(new r(new ArrayBuffer(1)))!=v||e&&_(new e)!=u||n&&_(n.resolve())!=c||t&&_(new t)!=f||a&&_(new a)!=l)&&(_=function(T){var q=i(T),O=q==o?T.constructor:void 0,A=O?s(O):"";if(A)switch(A){case d:return v;case b:return u;case p:return c;case h:return f;case S:return l}return q}),tr=_,tr}var nr,pa;function K(){if(pa)return nr;pa=1;function r(e){return e!=null&&typeof e=="object"}return nr=r,nr}var ar,_a;function so(){if(_a)return ar;_a=1;var r=ue(),e=K(),n="[object Arguments]";function t(a){return e(a)&&r(a)==n}return ar=t,ar}var ir,ga;function Re(){if(ga)return ir;ga=1;var r=so(),e=K(),n=Object.prototype,t=n.hasOwnProperty,a=n.propertyIsEnumerable,i=r((function(){return arguments})())?r:function(s){return e(s)&&t.call(s,"callee")&&!a.call(s,"callee")};return ir=i,ir}var sr,ha;function B(){if(ha)return sr;ha=1;var r=Array.isArray;return sr=r,sr}var ur,ya;function Vs(){if(ya)return ur;ya=1;var r=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=r}return ur=e,ur}var or,ba;function ce(){if(ba)return or;ba=1;var r=mn(),e=Vs();function n(t){return t!=null&&e(t.length)&&!r(t)}return or=n,or}var ee={exports:{}},cr,Aa;function uo(){if(Aa)return cr;Aa=1;function r(){return!1}return cr=r,cr}ee.exports;var qa;function fe(){return qa||(qa=1,(function(r,e){var n=x(),t=uo(),a=e&&!e.nodeType&&e,i=a&&!0&&r&&!r.nodeType&&r,s=i&&i.exports===a,u=s?n.Buffer:void 0,o=u?u.isBuffer:void 0,c=o||t;r.exports=c})(ee,ee.exports)),ee.exports}var fr,Sa;function oo(){if(Sa)return fr;Sa=1;var r=ue(),e=Vs(),n=K(),t="[object Arguments]",a="[object Array]",i="[object Boolean]",s="[object Date]",u="[object Error]",o="[object Function]",c="[object Map]",f="[object Number]",l="[object Object]",v="[object RegExp]",d="[object Set]",b="[object String]",p="[object WeakMap]",h="[object ArrayBuffer]",S="[object DataView]",_="[object Float32Array]",T="[object Float64Array]",q="[object Int8Array]",O="[object Int16Array]",A="[object Int32Array]",g="[object Uint8Array]",I="[object Uint8ClampedArray]",R="[object Uint16Array]",C="[object Uint32Array]",y={};y[_]=y[T]=y[q]=y[O]=y[A]=y[g]=y[I]=y[R]=y[C]=!0,y[t]=y[a]=y[h]=y[i]=y[S]=y[s]=y[u]=y[o]=y[c]=y[f]=y[l]=y[v]=y[d]=y[b]=y[p]=!1;function Q(w){return n(w)&&e(w.length)&&!!y[r(w)]}return fr=Q,fr}var lr,Ia;function On(){if(Ia)return lr;Ia=1;function r(e){return function(n){return e(n)}}return lr=r,lr}var re={exports:{}};re.exports;var Ta;function Pn(){return Ta||(Ta=1,(function(r,e){var n=Gs(),t=e&&!e.nodeType&&e,a=t&&!0&&r&&!r.nodeType&&r,i=a&&a.exports===t,s=i&&n.process,u=(function(){try{var o=a&&a.require&&a.require("util").types;return o||s&&s.binding&&s.binding("util")}catch{}})();r.exports=u})(re,re.exports)),re.exports}var vr,Ra;function me(){if(Ra)return vr;Ra=1;var r=oo(),e=On(),n=Pn(),t=n&&n.isTypedArray,a=t?e(t):r;return vr=a,vr}var dr,ma;function co(){if(ma)return dr;ma=1;var r=Ns(),e=oe(),n=Re(),t=B(),a=ce(),i=fe(),s=Te(),u=me(),o="[object Map]",c="[object Set]",f=Object.prototype,l=f.hasOwnProperty;function v(d){if(d==null)return!0;if(a(d)&&(t(d)||typeof d=="string"||typeof d.splice=="function"||i(d)||u(d)||n(d)))return!d.length;var b=e(d);if(b==o||b==c)return!d.size;if(s(d))return!r(d).length;for(var p in d)if(l.call(d,p))return!1;return!0}return dr=v,dr}var fo=co();const U=ie(fo),E=[];for(let r=0;r<256;++r)E.push((r+256).toString(16).slice(1));function lo(r,e=0){return(E[r[e+0]]+E[r[e+1]]+E[r[e+2]]+E[r[e+3]]+"-"+E[r[e+4]]+E[r[e+5]]+"-"+E[r[e+6]]+E[r[e+7]]+"-"+E[r[e+8]]+E[r[e+9]]+"-"+E[r[e+10]]+E[r[e+11]]+E[r[e+12]]+E[r[e+13]]+E[r[e+14]]+E[r[e+15]]).toLowerCase()}let pr;const vo=new Uint8Array(16);function po(){if(!pr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");pr=crypto.getRandomValues.bind(crypto)}return pr(vo)}const _o=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ca={randomUUID:_o};function F(r,e,n){var a;if(Ca.randomUUID&&!r)return Ca.randomUUID();r=r||{};const t=r.random??((a=r.rng)==null?void 0:a.call(r))??po();if(t.length<16)throw new Error("Random bytes length must be >= 16");return t[6]=t[6]&15|64,t[8]=t[8]&63|128,lo(t)}var _r,Oa;function go(){if(Oa)return _r;Oa=1;function r(){this.__data__=[],this.size=0}return _r=r,_r}var gr,Pa;function le(){if(Pa)return gr;Pa=1;function r(e,n){return e===n||e!==e&&n!==n}return gr=r,gr}var hr,Qa;function Ce(){if(Qa)return hr;Qa=1;var r=le();function e(n,t){for(var a=n.length;a--;)if(r(n[a][0],t))return a;return-1}return hr=e,hr}var yr,wa;function ho(){if(wa)return yr;wa=1;var r=Ce(),e=Array.prototype,n=e.splice;function t(a){var i=this.__data__,s=r(i,a);if(s<0)return!1;var u=i.length-1;return s==u?i.pop():n.call(i,s,1),--this.size,!0}return yr=t,yr}var br,Ea;function yo(){if(Ea)return br;Ea=1;var r=Ce();function e(n){var t=this.__data__,a=r(t,n);return a<0?void 0:t[a][1]}return br=e,br}var Ar,ja;function bo(){if(ja)return Ar;ja=1;var r=Ce();function e(n){return r(this.__data__,n)>-1}return Ar=e,Ar}var qr,Fa;function Ao(){if(Fa)return qr;Fa=1;var r=Ce();function e(n,t){var a=this.__data__,i=r(a,n);return i<0?(++this.size,a.push([n,t])):a[i][1]=t,this}return qr=e,qr}var Sr,xa;function Oe(){if(xa)return Sr;xa=1;var r=go(),e=ho(),n=yo(),t=bo(),a=Ao();function i(s){var u=-1,o=s==null?0:s.length;for(this.clear();++u<o;){var c=s[u];this.set(c[0],c[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=n,i.prototype.has=t,i.prototype.set=a,Sr=i,Sr}var Ir,Da;function qo(){if(Da)return Ir;Da=1;var r=Oe();function e(){this.__data__=new r,this.size=0}return Ir=e,Ir}var Tr,La;function So(){if(La)return Tr;La=1;function r(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}return Tr=r,Tr}var Rr,Ma;function Io(){if(Ma)return Rr;Ma=1;function r(e){return this.__data__.get(e)}return Rr=r,Rr}var mr,Ua;function To(){if(Ua)return mr;Ua=1;function r(e){return this.__data__.has(e)}return mr=r,mr}var Cr,Na;function Pe(){if(Na)return Cr;Na=1;var r=W(),e=r(Object,"create");return Cr=e,Cr}var Or,Ga;function Ro(){if(Ga)return Or;Ga=1;var r=Pe();function e(){this.__data__=r?r(null):{},this.size=0}return Or=e,Or}var Pr,Ka;function mo(){if(Ka)return Pr;Ka=1;function r(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return Pr=r,Pr}var Qr,Ha;function Co(){if(Ha)return Qr;Ha=1;var r=Pe(),e="__lodash_hash_undefined__",n=Object.prototype,t=n.hasOwnProperty;function a(i){var s=this.__data__;if(r){var u=s[i];return u===e?void 0:u}return t.call(s,i)?s[i]:void 0}return Qr=a,Qr}var wr,Va;function Oo(){if(Va)return wr;Va=1;var r=Pe(),e=Object.prototype,n=e.hasOwnProperty;function t(a){var i=this.__data__;return r?i[a]!==void 0:n.call(i,a)}return wr=t,wr}var Er,Ya;function Po(){if(Ya)return Er;Ya=1;var r=Pe(),e="__lodash_hash_undefined__";function n(t,a){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=r&&a===void 0?e:a,this}return Er=n,Er}var jr,Wa;function Qo(){if(Wa)return jr;Wa=1;var r=Ro(),e=mo(),n=Co(),t=Oo(),a=Po();function i(s){var u=-1,o=s==null?0:s.length;for(this.clear();++u<o;){var c=s[u];this.set(c[0],c[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=n,i.prototype.has=t,i.prototype.set=a,jr=i,jr}var Fr,Ba;function wo(){if(Ba)return Fr;Ba=1;var r=Qo(),e=Oe(),n=Cn();function t(){this.size=0,this.__data__={hash:new r,map:new(n||e),string:new r}}return Fr=t,Fr}var xr,$a;function Eo(){if($a)return xr;$a=1;function r(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return xr=r,xr}var Dr,za;function Qe(){if(za)return Dr;za=1;var r=Eo();function e(n,t){var a=n.__data__;return r(t)?a[typeof t=="string"?"string":"hash"]:a.map}return Dr=e,Dr}var Lr,ka;function jo(){if(ka)return Lr;ka=1;var r=Qe();function e(n){var t=r(this,n).delete(n);return this.size-=t?1:0,t}return Lr=e,Lr}var Mr,Ja;function Fo(){if(Ja)return Mr;Ja=1;var r=Qe();function e(n){return r(this,n).get(n)}return Mr=e,Mr}var Ur,Xa;function xo(){if(Xa)return Ur;Xa=1;var r=Qe();function e(n){return r(this,n).has(n)}return Ur=e,Ur}var Nr,Za;function Do(){if(Za)return Nr;Za=1;var r=Qe();function e(n,t){var a=r(this,n),i=a.size;return a.set(n,t),this.size+=a.size==i?0:1,this}return Nr=e,Nr}var Gr,ei;function Ys(){if(ei)return Gr;ei=1;var r=wo(),e=jo(),n=Fo(),t=xo(),a=Do();function i(s){var u=-1,o=s==null?0:s.length;for(this.clear();++u<o;){var c=s[u];this.set(c[0],c[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=n,i.prototype.has=t,i.prototype.set=a,Gr=i,Gr}var Kr,ri;function Lo(){if(ri)return Kr;ri=1;var r=Oe(),e=Cn(),n=Ys(),t=200;function a(i,s){var u=this.__data__;if(u instanceof r){var o=u.__data__;if(!e||o.length<t-1)return o.push([i,s]),this.size=++u.size,this;u=this.__data__=new n(o)}return u.set(i,s),this.size=u.size,this}return Kr=a,Kr}var Hr,ti;function Qn(){if(ti)return Hr;ti=1;var r=Oe(),e=qo(),n=So(),t=Io(),a=To(),i=Lo();function s(u){var o=this.__data__=new r(u);this.size=o.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=t,s.prototype.has=a,s.prototype.set=i,Hr=s,Hr}var Vr,ni;function Mo(){if(ni)return Vr;ni=1;function r(e,n){for(var t=-1,a=e==null?0:e.length;++t<a&&n(e[t],t,e)!==!1;);return e}return Vr=r,Vr}var Yr,ai;function Ws(){if(ai)return Yr;ai=1;var r=W(),e=(function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Yr=e,Yr}var Wr,ii;function wn(){if(ii)return Wr;ii=1;var r=Ws();function e(n,t,a){t=="__proto__"&&r?r(n,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[t]=a}return Wr=e,Wr}var Br,si;function Bs(){if(si)return Br;si=1;var r=wn(),e=le(),n=Object.prototype,t=n.hasOwnProperty;function a(i,s,u){var o=i[s];(!(t.call(i,s)&&e(o,u))||u===void 0&&!(s in i))&&r(i,s,u)}return Br=a,Br}var $r,ui;function ve(){if(ui)return $r;ui=1;var r=Bs(),e=wn();function n(t,a,i,s){var u=!i;i||(i={});for(var o=-1,c=a.length;++o<c;){var f=a[o],l=s?s(i[f],t[f],f,i,t):void 0;l===void 0&&(l=t[f]),u?e(i,f,l):r(i,f,l)}return i}return $r=n,$r}var zr,oi;function Uo(){if(oi)return zr;oi=1;function r(e,n){for(var t=-1,a=Array(e);++t<e;)a[t]=n(t);return a}return zr=r,zr}var kr,ci;function $s(){if(ci)return kr;ci=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(t,a){var i=typeof t;return a=a??r,!!a&&(i=="number"||i!="symbol"&&e.test(t))&&t>-1&&t%1==0&&t<a}return kr=n,kr}var Jr,fi;function zs(){if(fi)return Jr;fi=1;var r=Uo(),e=Re(),n=B(),t=fe(),a=$s(),i=me(),s=Object.prototype,u=s.hasOwnProperty;function o(c,f){var l=n(c),v=!l&&e(c),d=!l&&!v&&t(c),b=!l&&!v&&!d&&i(c),p=l||v||d||b,h=p?r(c.length,String):[],S=h.length;for(var _ in c)(f||u.call(c,_))&&!(p&&(_=="length"||d&&(_=="offset"||_=="parent")||b&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||a(_,S)))&&h.push(_);return h}return Jr=o,Jr}var Xr,li;function En(){if(li)return Xr;li=1;var r=zs(),e=Ns(),n=ce();function t(a){return n(a)?r(a):e(a)}return Xr=t,Xr}var Zr,vi;function No(){if(vi)return Zr;vi=1;var r=ve(),e=En();function n(t,a){return t&&r(a,e(a),t)}return Zr=n,Zr}var et,di;function Go(){if(di)return et;di=1;function r(e){var n=[];if(e!=null)for(var t in Object(e))n.push(t);return n}return et=r,et}var rt,pi;function Ko(){if(pi)return rt;pi=1;var r=G(),e=Te(),n=Go(),t=Object.prototype,a=t.hasOwnProperty;function i(s){if(!r(s))return n(s);var u=e(s),o=[];for(var c in s)c=="constructor"&&(u||!a.call(s,c))||o.push(c);return o}return rt=i,rt}var tt,_i;function de(){if(_i)return tt;_i=1;var r=zs(),e=Ko(),n=ce();function t(a){return n(a)?r(a,!0):e(a)}return tt=t,tt}var nt,gi;function Ho(){if(gi)return nt;gi=1;var r=ve(),e=de();function n(t,a){return t&&r(a,e(a),t)}return nt=n,nt}var te={exports:{}};te.exports;var hi;function ks(){return hi||(hi=1,(function(r,e){var n=x(),t=e&&!e.nodeType&&e,a=t&&!0&&r&&!r.nodeType&&r,i=a&&a.exports===t,s=i?n.Buffer:void 0,u=s?s.allocUnsafe:void 0;function o(c,f){if(f)return c.slice();var l=c.length,v=u?u(l):new c.constructor(l);return c.copy(v),v}r.exports=o})(te,te.exports)),te.exports}var at,yi;function Js(){if(yi)return at;yi=1;function r(e,n){var t=-1,a=e.length;for(n||(n=Array(a));++t<a;)n[t]=e[t];return n}return at=r,at}var it,bi;function Vo(){if(bi)return it;bi=1;function r(e,n){for(var t=-1,a=e==null?0:e.length,i=0,s=[];++t<a;){var u=e[t];n(u,t,e)&&(s[i++]=u)}return s}return it=r,it}var st,Ai;function Xs(){if(Ai)return st;Ai=1;function r(){return[]}return st=r,st}var ut,qi;function jn(){if(qi)return ut;qi=1;var r=Vo(),e=Xs(),n=Object.prototype,t=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(s){return s==null?[]:(s=Object(s),r(a(s),function(u){return t.call(s,u)}))}:e;return ut=i,ut}var ot,Si;function Yo(){if(Si)return ot;Si=1;var r=ve(),e=jn();function n(t,a){return r(t,e(t),a)}return ot=n,ot}var ct,Ii;function Fn(){if(Ii)return ct;Ii=1;function r(e,n){for(var t=-1,a=n.length,i=e.length;++t<a;)e[i+t]=n[t];return e}return ct=r,ct}var ft,Ti;function xn(){if(Ti)return ft;Ti=1;var r=Us(),e=r(Object.getPrototypeOf,Object);return ft=e,ft}var lt,Ri;function Zs(){if(Ri)return lt;Ri=1;var r=Fn(),e=xn(),n=jn(),t=Xs(),a=Object.getOwnPropertySymbols,i=a?function(s){for(var u=[];s;)r(u,n(s)),s=e(s);return u}:t;return lt=i,lt}var vt,mi;function Wo(){if(mi)return vt;mi=1;var r=ve(),e=Zs();function n(t,a){return r(t,e(t),a)}return vt=n,vt}var dt,Ci;function eu(){if(Ci)return dt;Ci=1;var r=Fn(),e=B();function n(t,a,i){var s=a(t);return e(t)?s:r(s,i(t))}return dt=n,dt}var pt,Oi;function ru(){if(Oi)return pt;Oi=1;var r=eu(),e=jn(),n=En();function t(a){return r(a,n,e)}return pt=t,pt}var _t,Pi;function Bo(){if(Pi)return _t;Pi=1;var r=eu(),e=Zs(),n=de();function t(a){return r(a,n,e)}return _t=t,_t}var gt,Qi;function $o(){if(Qi)return gt;Qi=1;var r=Object.prototype,e=r.hasOwnProperty;function n(t){var a=t.length,i=new t.constructor(a);return a&&typeof t[0]=="string"&&e.call(t,"index")&&(i.index=t.index,i.input=t.input),i}return gt=n,gt}var ht,wi;function tu(){if(wi)return ht;wi=1;var r=x(),e=r.Uint8Array;return ht=e,ht}var yt,Ei;function Dn(){if(Ei)return yt;Ei=1;var r=tu();function e(n){var t=new n.constructor(n.byteLength);return new r(t).set(new r(n)),t}return yt=e,yt}var bt,ji;function zo(){if(ji)return bt;ji=1;var r=Dn();function e(n,t){var a=t?r(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}return bt=e,bt}var At,Fi;function ko(){if(Fi)return At;Fi=1;var r=/\w*$/;function e(n){var t=new n.constructor(n.source,r.exec(n));return t.lastIndex=n.lastIndex,t}return At=e,At}var qt,xi;function Jo(){if(xi)return qt;xi=1;var r=se(),e=r?r.prototype:void 0,n=e?e.valueOf:void 0;function t(a){return n?Object(n.call(a)):{}}return qt=t,qt}var St,Di;function nu(){if(Di)return St;Di=1;var r=Dn();function e(n,t){var a=t?r(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}return St=e,St}var It,Li;function Xo(){if(Li)return It;Li=1;var r=Dn(),e=zo(),n=ko(),t=Jo(),a=nu(),i="[object Boolean]",s="[object Date]",u="[object Map]",o="[object Number]",c="[object RegExp]",f="[object Set]",l="[object String]",v="[object Symbol]",d="[object ArrayBuffer]",b="[object DataView]",p="[object Float32Array]",h="[object Float64Array]",S="[object Int8Array]",_="[object Int16Array]",T="[object Int32Array]",q="[object Uint8Array]",O="[object Uint8ClampedArray]",A="[object Uint16Array]",g="[object Uint32Array]";function I(R,C,y){var Q=R.constructor;switch(C){case d:return r(R);case i:case s:return new Q(+R);case b:return e(R,y);case p:case h:case S:case _:case T:case q:case O:case A:case g:return a(R,y);case u:return new Q;case o:case l:return new Q(R);case c:return n(R);case f:return new Q;case v:return t(R)}}return It=I,It}var Tt,Mi;function Zo(){if(Mi)return Tt;Mi=1;var r=G(),e=Object.create,n=(function(){function t(){}return function(a){if(!r(a))return{};if(e)return e(a);t.prototype=a;var i=new t;return t.prototype=void 0,i}})();return Tt=n,Tt}var Rt,Ui;function au(){if(Ui)return Rt;Ui=1;var r=Zo(),e=xn(),n=Te();function t(a){return typeof a.constructor=="function"&&!n(a)?r(e(a)):{}}return Rt=t,Rt}var mt,Ni;function ec(){if(Ni)return mt;Ni=1;var r=oe(),e=K(),n="[object Map]";function t(a){return e(a)&&r(a)==n}return mt=t,mt}var Ct,Gi;function rc(){if(Gi)return Ct;Gi=1;var r=ec(),e=On(),n=Pn(),t=n&&n.isMap,a=t?e(t):r;return Ct=a,Ct}var Ot,Ki;function tc(){if(Ki)return Ot;Ki=1;var r=oe(),e=K(),n="[object Set]";function t(a){return e(a)&&r(a)==n}return Ot=t,Ot}var Pt,Hi;function nc(){if(Hi)return Pt;Hi=1;var r=tc(),e=On(),n=Pn(),t=n&&n.isSet,a=t?e(t):r;return Pt=a,Pt}var Qt,Vi;function ac(){if(Vi)return Qt;Vi=1;var r=Qn(),e=Mo(),n=Bs(),t=No(),a=Ho(),i=ks(),s=Js(),u=Yo(),o=Wo(),c=ru(),f=Bo(),l=oe(),v=$o(),d=Xo(),b=au(),p=B(),h=fe(),S=rc(),_=G(),T=nc(),q=En(),O=de(),A=1,g=2,I=4,R="[object Arguments]",C="[object Array]",y="[object Boolean]",Q="[object Date]",w="[object Error]",D="[object Function]",$="[object GeneratorFunction]",Ee="[object Map]",mu="[object Number]",Mn="[object Object]",Cu="[object RegExp]",Ou="[object Set]",Pu="[object String]",Qu="[object Symbol]",wu="[object WeakMap]",Eu="[object ArrayBuffer]",ju="[object DataView]",Fu="[object Float32Array]",xu="[object Float64Array]",Du="[object Int8Array]",Lu="[object Int16Array]",Mu="[object Int32Array]",Uu="[object Uint8Array]",Nu="[object Uint8ClampedArray]",Gu="[object Uint16Array]",Ku="[object Uint32Array]",P={};P[R]=P[C]=P[Eu]=P[ju]=P[y]=P[Q]=P[Fu]=P[xu]=P[Du]=P[Lu]=P[Mu]=P[Ee]=P[mu]=P[Mn]=P[Cu]=P[Ou]=P[Pu]=P[Qu]=P[Uu]=P[Nu]=P[Gu]=P[Ku]=!0,P[w]=P[D]=P[wu]=!1;function ye(m,z,k,Hu,be,L){var j,Ae=z&A,qe=z&g,Vu=z&I;if(k&&(j=be?k(m,Hu,be,L):k(m)),j!==void 0)return j;if(!_(m))return m;var Un=p(m);if(Un){if(j=v(m),!Ae)return s(m,j)}else{var J=l(m),Nn=J==D||J==$;if(h(m))return i(m,Ae);if(J==Mn||J==R||Nn&&!be){if(j=qe||Nn?{}:b(m),!Ae)return qe?o(m,a(j,m)):u(m,t(j,m))}else{if(!P[J])return be?m:{};j=d(m,J,Ae)}}L||(L=new r);var Gn=L.get(m);if(Gn)return Gn;L.set(m,j),T(m)?m.forEach(function(M){j.add(ye(M,z,k,M,m,L))}):S(m)&&m.forEach(function(M,H){j.set(H,ye(M,z,k,H,m,L))});var Yu=Vu?qe?f:c:qe?O:q,Kn=Un?void 0:Yu(m);return e(Kn||m,function(M,H){Kn&&(H=M,M=m[H]),n(j,H,ye(M,z,k,H,m,L))}),j}return Qt=ye,Qt}var wt,Yi;function ic(){if(Yi)return wt;Yi=1;var r=ac(),e=1,n=4;function t(a){return r(a,e|n)}return wt=t,wt}var sc=ic();const V=ie(sc);var Et,Wi;function iu(){if(Wi)return Et;Wi=1;var r=wn(),e=le();function n(t,a,i){(i!==void 0&&!e(t[a],i)||i===void 0&&!(a in t))&&r(t,a,i)}return Et=n,Et}var jt,Bi;function uc(){if(Bi)return jt;Bi=1;function r(e){return function(n,t,a){for(var i=-1,s=Object(n),u=a(n),o=u.length;o--;){var c=u[e?o:++i];if(t(s[c],c,s)===!1)break}return n}}return jt=r,jt}var Ft,$i;function oc(){if($i)return Ft;$i=1;var r=uc(),e=r();return Ft=e,Ft}var xt,zi;function su(){if(zi)return xt;zi=1;var r=ce(),e=K();function n(t){return e(t)&&r(t)}return xt=n,xt}var Dt,ki;function cc(){if(ki)return Dt;ki=1;var r=ue(),e=xn(),n=K(),t="[object Object]",a=Function.prototype,i=Object.prototype,s=a.toString,u=i.hasOwnProperty,o=s.call(Object);function c(f){if(!n(f)||r(f)!=t)return!1;var l=e(f);if(l===null)return!0;var v=u.call(l,"constructor")&&l.constructor;return typeof v=="function"&&v instanceof v&&s.call(v)==o}return Dt=c,Dt}var Lt,Ji;function uu(){if(Ji)return Lt;Ji=1;function r(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return Lt=r,Lt}var Mt,Xi;function fc(){if(Xi)return Mt;Xi=1;var r=ve(),e=de();function n(t){return r(t,e(t))}return Mt=n,Mt}var Ut,Zi;function lc(){if(Zi)return Ut;Zi=1;var r=iu(),e=ks(),n=nu(),t=Js(),a=au(),i=Re(),s=B(),u=su(),o=fe(),c=mn(),f=G(),l=cc(),v=me(),d=uu(),b=fc();function p(h,S,_,T,q,O,A){var g=d(h,_),I=d(S,_),R=A.get(I);if(R){r(h,_,R);return}var C=O?O(g,I,_+"",h,S,A):void 0,y=C===void 0;if(y){var Q=s(I),w=!Q&&o(I),D=!Q&&!w&&v(I);C=I,Q||w||D?s(g)?C=g:u(g)?C=t(g):w?(y=!1,C=e(I,!0)):D?(y=!1,C=n(I,!0)):C=[]:l(I)||i(I)?(C=g,i(g)?C=b(g):(!f(g)||c(g))&&(C=a(I))):y=!1}y&&(A.set(I,C),q(C,I,T,O,A),A.delete(I)),r(h,_,C)}return Ut=p,Ut}var Nt,es;function vc(){if(es)return Nt;es=1;var r=Qn(),e=iu(),n=oc(),t=lc(),a=G(),i=de(),s=uu();function u(o,c,f,l,v){o!==c&&n(c,function(d,b){if(v||(v=new r),a(d))t(o,c,b,f,u,l,v);else{var p=l?l(s(o,b),d,b+"",o,c,v):void 0;p===void 0&&(p=d),e(o,b,p)}},i)}return Nt=u,Nt}var Gt,rs;function ou(){if(rs)return Gt;rs=1;function r(e){return e}return Gt=r,Gt}var Kt,ts;function dc(){if(ts)return Kt;ts=1;function r(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}return Kt=r,Kt}var Ht,ns;function pc(){if(ns)return Ht;ns=1;var r=dc(),e=Math.max;function n(t,a,i){return a=e(a===void 0?t.length-1:a,0),function(){for(var s=arguments,u=-1,o=e(s.length-a,0),c=Array(o);++u<o;)c[u]=s[a+u];u=-1;for(var f=Array(a+1);++u<a;)f[u]=s[u];return f[a]=i(c),r(t,this,f)}}return Ht=n,Ht}var Vt,as;function _c(){if(as)return Vt;as=1;function r(e){return function(){return e}}return Vt=r,Vt}var Yt,is;function gc(){if(is)return Yt;is=1;var r=_c(),e=Ws(),n=ou(),t=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:r(i),writable:!0})}:n;return Yt=t,Yt}var Wt,ss;function hc(){if(ss)return Wt;ss=1;var r=800,e=16,n=Date.now;function t(a){var i=0,s=0;return function(){var u=n(),o=e-(u-s);if(s=u,o>0){if(++i>=r)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return Wt=t,Wt}var Bt,us;function yc(){if(us)return Bt;us=1;var r=gc(),e=hc(),n=e(r);return Bt=n,Bt}var $t,os;function cu(){if(os)return $t;os=1;var r=ou(),e=pc(),n=yc();function t(a,i){return n(e(a,i,r),a+"")}return $t=t,$t}var zt,cs;function bc(){if(cs)return zt;cs=1;var r=le(),e=ce(),n=$s(),t=G();function a(i,s,u){if(!t(u))return!1;var o=typeof s;return(o=="number"?e(u)&&n(s,u.length):o=="string"&&s in u)?r(u[s],i):!1}return zt=a,zt}var kt,fs;function Ac(){if(fs)return kt;fs=1;var r=cu(),e=bc();function n(t){return r(function(a,i){var s=-1,u=i.length,o=u>1?i[u-1]:void 0,c=u>2?i[2]:void 0;for(o=t.length>3&&typeof o=="function"?(u--,o):void 0,c&&e(i[0],i[1],c)&&(o=u<3?void 0:o,u=1),a=Object(a);++s<u;){var f=i[s];f&&t(a,f,s,o)}return a})}return kt=n,kt}var Jt,ls;function qc(){if(ls)return Jt;ls=1;var r=vc(),e=Ac(),n=e(function(t,a,i){r(t,a,i)});return Jt=n,Jt}var Sc=qc();const Ic=ie(Sc);var Xt,vs;function Tc(){if(vs)return Xt;vs=1;var r=se(),e=Re(),n=B(),t=r?r.isConcatSpreadable:void 0;function a(i){return n(i)||e(i)||!!(t&&i&&i[t])}return Xt=a,Xt}var Zt,ds;function Rc(){if(ds)return Zt;ds=1;var r=Fn(),e=Tc();function n(t,a,i,s,u){var o=-1,c=t.length;for(i||(i=e),u||(u=[]);++o<c;){var f=t[o];a>0&&i(f)?a>1?n(f,a-1,i,s,u):r(u,f):s||(u[u.length]=f)}return u}return Zt=n,Zt}var en,ps;function mc(){if(ps)return en;ps=1;var r="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,r),this}return en=e,en}var rn,_s;function Cc(){if(_s)return rn;_s=1;function r(e){return this.__data__.has(e)}return rn=r,rn}var tn,gs;function fu(){if(gs)return tn;gs=1;var r=Ys(),e=mc(),n=Cc();function t(a){var i=-1,s=a==null?0:a.length;for(this.__data__=new r;++i<s;)this.add(a[i])}return t.prototype.add=t.prototype.push=e,t.prototype.has=n,tn=t,tn}var nn,hs;function Oc(){if(hs)return nn;hs=1;function r(e,n,t,a){for(var i=e.length,s=t+(a?1:-1);a?s--:++s<i;)if(n(e[s],s,e))return s;return-1}return nn=r,nn}var an,ys;function Pc(){if(ys)return an;ys=1;function r(e){return e!==e}return an=r,an}var sn,bs;function Qc(){if(bs)return sn;bs=1;function r(e,n,t){for(var a=t-1,i=e.length;++a<i;)if(e[a]===n)return a;return-1}return sn=r,sn}var un,As;function wc(){if(As)return un;As=1;var r=Oc(),e=Pc(),n=Qc();function t(a,i,s){return i===i?n(a,i,s):r(a,e,s)}return un=t,un}var on,qs;function Ec(){if(qs)return on;qs=1;var r=wc();function e(n,t){var a=n==null?0:n.length;return!!a&&r(n,t,0)>-1}return on=e,on}var cn,Ss;function jc(){if(Ss)return cn;Ss=1;function r(e,n,t){for(var a=-1,i=e==null?0:e.length;++a<i;)if(t(n,e[a]))return!0;return!1}return cn=r,cn}var fn,Is;function lu(){if(Is)return fn;Is=1;function r(e,n){return e.has(n)}return fn=r,fn}var ln,Ts;function Fc(){if(Ts)return ln;Ts=1;function r(){}return ln=r,ln}var vn,Rs;function Ln(){if(Rs)return vn;Rs=1;function r(e){var n=-1,t=Array(e.size);return e.forEach(function(a){t[++n]=a}),t}return vn=r,vn}var dn,ms;function xc(){if(ms)return dn;ms=1;var r=Hs(),e=Fc(),n=Ln(),t=1/0,a=r&&1/n(new r([,-0]))[1]==t?function(i){return new r(i)}:e;return dn=a,dn}var pn,Cs;function Dc(){if(Cs)return pn;Cs=1;var r=fu(),e=Ec(),n=jc(),t=lu(),a=xc(),i=Ln(),s=200;function u(o,c,f){var l=-1,v=e,d=o.length,b=!0,p=[],h=p;if(f)b=!1,v=n;else if(d>=s){var S=c?null:a(o);if(S)return i(S);b=!1,v=t,h=new r}else h=c?[]:p;e:for(;++l<d;){var _=o[l],T=c?c(_):_;if(_=f||_!==0?_:0,b&&T===T){for(var q=h.length;q--;)if(h[q]===T)continue e;c&&h.push(T),p.push(_)}else v(h,T,f)||(h!==p&&h.push(T),p.push(_))}return p}return pn=u,pn}var _n,Os;function Lc(){if(Os)return _n;Os=1;var r=Rc(),e=cu(),n=Dc(),t=su(),a=e(function(i){return n(r(i,1,t,!0))});return _n=a,_n}var Mc=Lc();const Uc=ie(Mc),N=r=>!Object.keys(r).length||U(r==null?void 0:r.content),vu=r=>!N(r),pe=r=>!Nc(r),Nc=r=>isNaN(r),Sf=r=>r.content.value&&r.content.value.some(e=>e==null?void 0:e.toString().startsWith($u)),If=r=>!!r.content.isUploadedList,Tf=r=>!!r.content.remoteComponent,_e=r=>typeof r=="object"&&vu(r)&&"op"in r&&Object.values(Ie).includes(r.op),Rf=r=>r.content.value.every(e=>["false","true"].includes(e.toString().toLowerCase())),mf=r=>r.op===Hn.In?!1:r.op in Hn,Cf=r=>!!r.title,Y=(r=F())=>({id:r,content:[],op:Ie.And}),Of=(r,e=[])=>{const n=V(r),t=[];return n.map(a=>{t.push(Gc(a,e))}),t},Gc=(r,e)=>({content:r.content.filter(t=>{let a=!1;if(!Array.isArray(t.content))t.content&&e!=null&&e.includes(t.content.field)||(a=!0);else if(t.content.length!==0&&(e!=null&&e.includes(t.content.field)||(a=!0),Array.isArray(t.content))){const{field:i}=t.content[0].content;e!=null&&e.includes(i)&&(a=!1)}return a}),id:r.id,op:r.op}),ae=r=>{let e=r;const n=r.filter(a=>N(a)),t=r.filter(a=>vu(a));if(n.length){const a=n[0];e=[...t,a]}return V(e)},du=(r,e)=>{const n=(i,s)=>s.filter(u=>u!==i).map(u=>pe(u)&&typeof u=="number"&&u>i?u-1:u),t=e.filter((i,s)=>s!==r).map(i=>N(i)?i:{...i,content:n(r,i.content)}),a=t.filter(i=>U(i.content));return a.length?du(t.findIndex(i=>i.id==a[0].id),t):t},Ps=(r,e)=>{var a,i,s,u;const n=e.getRawQueries(),t=e.getState().activeQueryId;if(n.length===1)e.resetQueries(r);else{const o=e.getQueryIndex(r),c=ae(du(o,n));if(c.length){const f=Kc(c,o),l=c[f];let v=e.getSelectedQueryIndexes();v.includes(o)&&(v=v.filter(p=>p!==o).map(p=>p>o?p-1:p),(i=(a=e.coreProps).onQuerySelectChange)==null||i.call(a,v));const d=c.find(p=>p.id===t),b={activeQueryId:d?t:l.id,queries:c,selectedQueryIndexes:v};d||(u=(s=e.coreProps).onActiveQueryChange)==null||u.call(s,l),e.setState(p=>({...p,...b}))}else e.resetQueries(r)}},Kc=(r,e)=>r.length-1>=e?e:e+1>r.length-1?e-1<r.length&&e-1>=0?e-1:r.length-1:e+1,pu=(r,e)=>({...e,content:e.content.map(n=>_e(n)&&!n.skipBooleanOperatorCheck?pu(r,n):n),op:r}),_u=(r,e)=>({...e,content:e.content.filter(function n(t){return pe(t)?!0:_e(t)?t.content.filter(n).length>0:t.content.field!==r})}),Hc=({sqon:r,field:e,index:n,isUploadedList:t,merge_strategy:a=ne.APPEND_VALUES,operator:i=Ms.In,overrideValuesName:s,remoteComponent:u,value:o})=>{let c;const f={content:{field:e,index:n,isUploadedList:t,overrideValuesName:s,remoteComponent:u,value:o},op:i};return U(r)?(c=Y(),c.content=[f]):c=Vc(r,f,{operator:Rn.OVERRIDE_OPERATOR,values:a}),c},Vc=(r,e,n)=>{const t=V(r);return n=Ic({},{operator:Rn.DEFAULT,values:ne.DEFAULT},n),gu(t,e,n)?t:{...t,content:[...t.content,e]}},gu=(r,e,n)=>{let t=!1;return r.content.forEach(a=>{if(pe(a)||a.name)return;const i=a;if(_e(i)){t=gu(i,e,n);return}const s=i;s.content.field===e.content.field&&(t=!0,e.content.overrideValuesName&&(s.content.overrideValuesName=e.content.overrideValuesName),e.op&&n.operator!==Rn.KEEP_OPERATOR&&(s.op=e.op),n.values===ne.APPEND_VALUES&&(s.content.value=Uc([],s.content.value,e.content.value)),n.values===ne.OVERRIDE_VALUES&&(s.content.value=e.content.value))}),t},Yc=(r,e)=>{const n=e.content,t=typeof r=="number"?n.filter(a=>a!==r):n.filter(a=>{if(typeof a=="number")return!0;const i=a,{skipBooleanOperatorCheck:s}=i,u=s&&i.content[0].content.field!==r,o=a.content.field!==r;return s?u:o});return{...e,content:t,op:e.op}},Wc=(r,e)=>{const t=e.content.filter(a=>a.id!==r);return{...e,content:t,op:e.op}},hu=(r,e)=>_e(e)?e.content.reduce((n,t)=>n||hu(r,t),!1):typeof e=="number"&&e===r,Pf=(r,e)=>V(r).map(t=>{const a=t.content.map(i=>i.id===e.id?{id:e.id,content:e.queries[0].content,op:i.op,name:e.name}:i);return{...t,content:a}}),yu=r=>V(r).map(t=>{const a=t.content.map(i=>Object.prototype.hasOwnProperty.call(i,"title")&&i.id?{filterID:i.id}:i);return{...t,content:a}}),Bc=(r,e)=>{let n=-1;const t=r.content.filter((a,i)=>{if(pe(a))return!0;const s=a,{skipBooleanOperatorCheck:u}=s,o=u&&s.content.find(c=>c.content.field===e);return(o||a.content.field==e)&&(n=i),u?!o:a.content.field!==e});return[n,{...r,content:t}]},$c=(r,e,n)=>(console.error("createSQONFromFilters is not implemented"),[]),zc=(r,e,n)=>(console.error("createSQONFromFilters is not implemented"),[]),bu=(r,e)=>{const n=t=>t.content.map(a=>pe(a)?e[a]:a).map(a=>bu(a,e));return _e(r)?{content:n(r),op:r.op}:{content:r.content,op:r.op}};function Au({defaultTitle:r="New Filter",type:e}){const n=F(),t={id:F(),queries:[Y(n)],type:e,name:r,favorite:!1,isDirty:!1,isNew:!0};return{newActiveQueryId:n,newSavedFilter:t}}const qu=(r,e)=>{const n={},t=r.id??F();return Object.assign(n,{id:t,raw:()=>r,index:()=>e.getState().queries.findIndex(i=>i.id===t),isActive:()=>e.getState().activeQueryId===t,isEmpty:()=>N(r),isNotEmpty:()=>!N(r),toggleSelect:i=>{var o,c;const s=e.getQueryIndex(t);let u=[];i?u=[...e.getState().selectedQueryIndexes,s]:u=e.getState().selectedQueryIndexes.filter(f=>f!==s),e.setState(f=>({...f,selectedQueryIndexes:u})),(c=(o=e.coreProps).onQuerySelectChange)==null||c.call(o,u)},isSelected:()=>e.getState().selectedQueryIndexes.includes(e.getQueryIndex(t)),isSelectable:()=>{const i=e.getState().queries;return i.length===2&&e.hasEmptyQuery()?!1:i.length>1&&n.isNotEmpty()},saveAsCustomPill:async i=>{var u,o;const s={favorite:!1,id:F(),queries:[n.raw()],name:i,type:e.coreProps.savedFilterType};return Promise.resolve((o=(u=e.coreProps).onCustomPillSave)==null?void 0:o.call(u,s)).then(()=>n.update({...n.raw(),content:[{id:s.id,op:s.queries[0].op,content:s.queries[0].content,title:s.name}]}))},delete:()=>{var i,s;Ps(t,e),(s=(i=e.coreProps).onQueryDelete)==null||s.call(i,t)},update:i=>{var s,u,o,c;if(U(i.content))Ps(t,e);else{const f=e.getState().activeQueryId,l=e.getQueryIndex(t),v=V(e.getRawQueries()),d={...i,id:t,content:i.content,op:i.op};v[l]=d,e.setState(b=>({...b,queries:ae(v)})),(u=(s=e.coreProps).onQueryUpdate)==null||u.call(s,d),f===t&&((c=(o=e.coreProps).onActiveQueryChange)==null||c.call(o,d))}},duplicate:()=>{const i=e.getQuery(t);i&&e.createQuery({op:i.raw().op,content:i.raw().content})},setAsActive:()=>{var i,s;e.setState(u=>({...u,activeQueryId:t})),(s=(i=e.coreProps).onActiveQueryChange)==null||s.call(i,n.raw())},changeCombineOperator:i=>{var f,l;const s=V(e.getRawQueries()),u=e.getQueryIndex(t),o=s[u],c=pu(i,o);s[u]={...o,content:c.content,op:c.op},e.setState(v=>({...v,queries:ae(s)})),(l=(f=e.coreProps).onActiveQueryChange)==null||l.call(f,s[u])},addPill:i=>{n.update({...r,content:[...r.content,i]})},removePillById:i=>{n.update(Wc(i,r))},removePillByFieldOrIndex:i=>{n.update(Yc(i,r))},isReferencedInActiveQuery:()=>{const i=e.getActiveQuery();return i?hu(n.index(),i.raw()):!1},hasCustomPill:()=>n.raw().content.some(i=>i.name||!i.content)}),n};var gn,Qs;function kc(){if(Qs)return gn;Qs=1;function r(e,n){for(var t=-1,a=e==null?0:e.length;++t<a;)if(n(e[t],t,e))return!0;return!1}return gn=r,gn}var hn,ws;function Su(){if(ws)return hn;ws=1;var r=fu(),e=kc(),n=lu(),t=1,a=2;function i(s,u,o,c,f,l){var v=o&t,d=s.length,b=u.length;if(d!=b&&!(v&&b>d))return!1;var p=l.get(s),h=l.get(u);if(p&&h)return p==u&&h==s;var S=-1,_=!0,T=o&a?new r:void 0;for(l.set(s,u),l.set(u,s);++S<d;){var q=s[S],O=u[S];if(c)var A=v?c(O,q,S,u,s,l):c(q,O,S,s,u,l);if(A!==void 0){if(A)continue;_=!1;break}if(T){if(!e(u,function(g,I){if(!n(T,I)&&(q===g||f(q,g,o,c,l)))return T.push(I)})){_=!1;break}}else if(!(q===O||f(q,O,o,c,l))){_=!1;break}}return l.delete(s),l.delete(u),_}return hn=i,hn}var yn,Es;function Jc(){if(Es)return yn;Es=1;function r(e){var n=-1,t=Array(e.size);return e.forEach(function(a,i){t[++n]=[i,a]}),t}return yn=r,yn}var bn,js;function Xc(){if(js)return bn;js=1;var r=se(),e=tu(),n=le(),t=Su(),a=Jc(),i=Ln(),s=1,u=2,o="[object Boolean]",c="[object Date]",f="[object Error]",l="[object Map]",v="[object Number]",d="[object RegExp]",b="[object Set]",p="[object String]",h="[object Symbol]",S="[object ArrayBuffer]",_="[object DataView]",T=r?r.prototype:void 0,q=T?T.valueOf:void 0;function O(A,g,I,R,C,y,Q){switch(I){case _:if(A.byteLength!=g.byteLength||A.byteOffset!=g.byteOffset)return!1;A=A.buffer,g=g.buffer;case S:return!(A.byteLength!=g.byteLength||!y(new e(A),new e(g)));case o:case c:case v:return n(+A,+g);case f:return A.name==g.name&&A.message==g.message;case d:case p:return A==g+"";case l:var w=a;case b:var D=R&s;if(w||(w=i),A.size!=g.size&&!D)return!1;var $=Q.get(A);if($)return $==g;R|=u,Q.set(A,g);var Ee=t(w(A),w(g),R,C,y,Q);return Q.delete(A),Ee;case h:if(q)return q.call(A)==q.call(g)}return!1}return bn=O,bn}var An,Fs;function Zc(){if(Fs)return An;Fs=1;var r=ru(),e=1,n=Object.prototype,t=n.hasOwnProperty;function a(i,s,u,o,c,f){var l=u&e,v=r(i),d=v.length,b=r(s),p=b.length;if(d!=p&&!l)return!1;for(var h=d;h--;){var S=v[h];if(!(l?S in s:t.call(s,S)))return!1}var _=f.get(i),T=f.get(s);if(_&&T)return _==s&&T==i;var q=!0;f.set(i,s),f.set(s,i);for(var O=l;++h<d;){S=v[h];var A=i[S],g=s[S];if(o)var I=l?o(g,A,S,s,i,f):o(A,g,S,i,s,f);if(!(I===void 0?A===g||c(A,g,u,o,f):I)){q=!1;break}O||(O=S=="constructor")}if(q&&!O){var R=i.constructor,C=s.constructor;R!=C&&"constructor"in i&&"constructor"in s&&!(typeof R=="function"&&R instanceof R&&typeof C=="function"&&C instanceof C)&&(q=!1)}return f.delete(i),f.delete(s),q}return An=a,An}var qn,xs;function ef(){if(xs)return qn;xs=1;var r=Qn(),e=Su(),n=Xc(),t=Zc(),a=oe(),i=B(),s=fe(),u=me(),o=1,c="[object Arguments]",f="[object Array]",l="[object Object]",v=Object.prototype,d=v.hasOwnProperty;function b(p,h,S,_,T,q){var O=i(p),A=i(h),g=O?f:a(p),I=A?f:a(h);g=g==c?l:g,I=I==c?l:I;var R=g==l,C=I==l,y=g==I;if(y&&s(p)){if(!s(h))return!1;O=!0,R=!1}if(y&&!R)return q||(q=new r),O||u(p)?e(p,h,S,_,T,q):n(p,h,g,S,_,T,q);if(!(S&o)){var Q=R&&d.call(p,"__wrapped__"),w=C&&d.call(h,"__wrapped__");if(Q||w){var D=Q?p.value():p,$=w?h.value():h;return q||(q=new r),T(D,$,S,_,q)}}return y?(q||(q=new r),t(p,h,S,_,T,q)):!1}return qn=b,qn}var Sn,Ds;function rf(){if(Ds)return Sn;Ds=1;var r=ef(),e=K();function n(t,a,i,s,u){return t===a?!0:t==null||a==null||!e(t)&&!e(a)?t!==t&&a!==a:r(t,a,i,s,n,u)}return Sn=n,Sn}var In,Ls;function tf(){if(Ls)return In;Ls=1;var r=rf();function e(n,t){return r(n,t)}return In=e,In}var nf=tf();const af=ie(nf);var Iu=(r=>(r.Filter="filter",r.Query="query",r))(Iu||{});const sf=(r,e)=>{const n={},t=r.id;return Object.assign(n,{id:t,raw:()=>r,getQueries:()=>r.queries&&r.queries.length>0?r.queries.map(i=>qu(i,e)):[],getRawQueries:()=>r.queries,getQueryById:i=>n.getQueries().find(s=>s.id===i)||null,copy:()=>{const i=n.getRawQueries().map(f=>({...f,id:F()})),u=e.getSavedFilters().filter(f=>!f.isNew()).filter(f=>f.raw().name.includes(r.name)),o=`${r.name} COPY${u.length>1?` ${u.length-1}`:""}`;return{favorite:!1,id:F(),queries:i,name:o,isDirty:!1,isNew:!0,type:e.coreProps.savedFilterType}},duplicate:()=>{var i,s;if(n.isSelected()){const u=n.copy();e.setState(o=>({...o,activeQueryId:u.queries[0].id,queries:u.queries,savedFilters:[...o.savedFilters,u]})),(s=(i=e.coreProps).onSavedFilterCreate)==null||s.call(i,u)}else console.error("Can only duplicate the selected saved filter")},delete:async()=>{var i,s;return Promise.resolve((s=(i=e.coreProps).onSavedFilterDelete)==null?void 0:s.call(i,t)).then(()=>{var c,f,l,v;const{newActiveQueryId:u,newSavedFilter:o}=Au({type:e.coreProps.savedFilterType,defaultTitle:e.coreProps.savedFilterDefaultTitle});e.setState(d=>({...d,activeQueryId:u,queries:o.queries,savedFilters:[...d.savedFilters.filter(b=>b.id!==t),o]})),(f=(c=e.coreProps).onActiveQueryChange)==null||f.call(c,o.queries[0]),(v=(l=e.coreProps).onSavedFilterCreate)==null||v.call(l,o)})},save:async(i,s)=>{var c,f,l,v;const u={...n.raw(),name:(s==null?void 0:s.name)||n.raw().name,favorite:(s==null?void 0:s.favorite)!==void 0?s.favorite:n.raw().favorite,queries:e.getRawQueries()};return i===Iu.Query?Promise.resolve((f=(c=e.coreProps).onCustomPillUpdate)==null?void 0:f.call(c,u)).then(()=>{}):Promise.resolve((v=(l=e.coreProps).onSavedFilterUpdate)==null?void 0:v.call(l,{...u,queries:yu(u.queries)})).then(d=>{d&&e.setState(b=>({...b,savedFilters:b.savedFilters.map(p=>p.id===d.id?{...d,isNew:!1,isDirty:!1}:p)}))})},select:()=>{e.setState(i=>({...i,activeQueryId:r.queries[0].id,queries:r.queries}))},discardChanges:()=>{n.isSelected()?e.setState(i=>({...i,activeQueryId:r.queries[0].id,queries:r.queries})):console.error("Can only discard changes to the selected saved filter")},hasQueries:()=>n.getQueries().length>0,isSelected:()=>{const i=e.getState().queries.map(s=>s.id);return r.queries.find(s=>i.includes(s.id))!==void 0},isFavorite:()=>r.favorite||!1,isNew:()=>r.isNew||!1,isDirty:()=>!n.isSelected()||r.isNew?!1:r.isDirty||e.getRawQueries().length!==r.queries.length?!0:!r.queries.every(i=>{const s=e.getRawQueries().find(u=>u.id==i.id);return s?af({content:zu(s.content),id:s.id,op:s.op},{content:i.content,id:i.id,op:i.op}):!1})}),n},uf=()=>{const r=F();return{activeQueryId:r,queries:[Y(r)],savedFilters:[],selectedQueryIndexes:[]}},Qf=r=>{const e={};return Object.assign(e,{coreProps:r,setCoreProps:t=>{e.coreProps=t(e.coreProps)},setState:t=>{var a,i;(i=(a=e.coreProps).onStateChange)==null||i.call(a,t(e.coreProps.state))},getState:()=>e.coreProps.state,reset:()=>{e.setState(()=>e.coreProps.initialState)},clearQueries:()=>{var i,s;const t=F(),a=Y(t);e.setState(u=>({...u,activeQueryId:t,queries:[a]})),(s=(i=e.coreProps).onActiveQueryChange)==null||s.call(i,a)},saveNewFilter:async t=>{var i,s;const a={id:(t==null?void 0:t.id)||F(),name:(t==null?void 0:t.name)||e.coreProps.savedFilterDefaultTitle||"New Filter",favorite:(t==null?void 0:t.favorite)===void 0?!1:t.favorite,queries:(t==null?void 0:t.queries)||e.getRawQueries(),type:(t==null?void 0:t.type)||e.coreProps.savedFilterType};return Promise.resolve((s=(i=e.coreProps).onSavedFilterSave)==null?void 0:s.call(i,{...a,queries:yu(a.queries)})).then(u=>{u&&e.setState(o=>{const c=o.savedFilters.filter(f=>f.id!==a.id);return{...o,savedFilters:[...c,{...u,isNew:!1,isDirty:!1}]}})})},createSavedFilter:()=>{var i,s;const{newActiveQueryId:t,newSavedFilter:a}=Au({type:e.coreProps.savedFilterType,defaultTitle:e.coreProps.savedFilterDefaultTitle});e.setState(u=>({...u,activeQueryId:t,queries:a.queries,savedFilters:[...u.savedFilters,a]})),(s=(i=e.coreProps).onSavedFilterCreate)==null||s.call(i,a)},getSelectedSavedFilter:()=>{if(!e.getActiveQuery())return null;let a=e.getSavedFilters().find(i=>i.isSelected()&&!i.isNew());return a||(a=e.getSavedFilters().find(i=>i.isNew())),a||null},getSavedFilters:()=>e.coreProps.state.savedFilters&&e.coreProps.state.savedFilters.length>0?e.coreProps.state.savedFilters.map(a=>sf(a,e)):[],getQueries:()=>e.coreProps.state.queries&&e.coreProps.state.queries.length>0?e.coreProps.state.queries.map(t=>qu(t,e)):[],getRawQueries:()=>e.coreProps.state.queries||[],getSelectedQueryIndexes:()=>e.getState().selectedQueryIndexes,toggleQuerySelect:(t,a)=>{var i;(i=e.getQuery(t))==null||i.toggleSelect(a)},resetQuerySelection:()=>{var t,a;e.setState(i=>({...i,selectedQueryIndexes:[]})),(a=(t=e.coreProps).onQuerySelectChange)==null||a.call(t,[])},createQuery:({id:t=F(),op:a=Ie.And,content:i})=>{var u,o,c,f;const s={id:t,op:a,content:i};return e.setState(l=>({...l,activeQueryId:s.id,queries:ae([...e.getRawQueries(),s])})),(o=(u=e.coreProps).onActiveQueryChange)==null||o.call(u,s),(f=(c=e.coreProps).onQueryCreate)==null||f.call(c,s),s.id},getQuery:t=>e.getQueries().find(a=>a.id===t)||null,setActiveQuery:t=>{var a;(a=e.getQuery(t))==null||a.setAsActive()},getActiveQuery:()=>e.coreProps.state.activeQueryId?e.getQuery(e.coreProps.state.activeQueryId):null,getQueryIndex:t=>{const a=e.getQuery(t);return a?a.index():-1},updateQuery:(t,a)=>{var i;(i=e.getQuery(t))==null||i.update(a)},duplicateQuery:t=>{var a;(a=e.getQuery(t))==null||a.duplicate()},deleteQuery:t=>{var a;(a=e.getQuery(t))==null||a.delete()},changeQueryCombineOperator:(t,a)=>{var i;(i=e.getQuery(t))==null||i.changeCombineOperator(a)},hasEmptyQuery:()=>e.getQueries().some(t=>t.isEmpty()),hasQueries:()=>e.getQueries().length>0,canCombine:()=>e.getQueries().length>1&&e.getSelectedQueryIndexes().length>1,resetQueries:t=>{var i,s;const a=Y(t);(s=(i=e.coreProps).onActiveQueryChange)==null||s.call(i,a),e.setState(u=>({...u,activeQueryId:t,queries:[a]}))},combineSelectedQueries:t=>{var s,u,o,c,f,l;if(!e.canCombine()){console.error("Cannot combine queries. There must be at least 2 queries selected.");return}const a={id:F(),op:t,content:e.getSelectedQueryIndexes().sort()},i=[];e.setState(v=>({...v,activeQueryId:a.id,queries:ae([...v.queries,a]),selectedQueryIndexes:i})),(u=(s=e.coreProps).onActiveQueryChange)==null||u.call(s,a),(c=(o=e.coreProps).onQueryCreate)==null||c.call(o,a),(l=(f=e.coreProps).onQuerySelectChange)==null||l.call(f,i)},isEmpty:()=>e.getQueries().length===1&&e.getQueries()[0].isEmpty()}),e},of="QBCacheUpdate",Tu="query-builder-cache",wf={content:[],op:"and"};var cf=(r=>(r.ADD_QUERY="ADD_QUERY",r.UPDATE_QUERY="UPDATE_QUERY",r.SET_STATE="SET_STATE",r))(cf||{});class ff extends Event{constructor(n){super(of);Z(this,"eventData");Z(this,"eventType");Z(this,"value");Z(this,"queryBuilderId");this.eventType=n.eventType,this.queryBuilderId=n.queryBuilderId,this.value=n.value,this.eventData=n.eventData}}const we=(r,{eventType:e,eventData:n,value:t,skipEvent:a})=>{if(window.localStorage.setItem(`${Tu}-${r}`,JSON.stringify(t)),!a){const i=new ff({queryBuilderId:r,value:t,eventType:e,eventData:n});window.dispatchEvent(i)}},Tn=r=>{const e=uf();return we(r,{value:e,eventType:"SET_STATE",eventData:e}),e},ge=r=>{if(typeof window<"u"){const e=window.localStorage.getItem(`${Tu}-${r}`);if(!e)return Tn(r);try{return JSON.parse(e)}catch{return Tn(r)}}else return{}},lf=(r,e,n=!1)=>{const t=ge(r),a=(t==null?void 0:t.queries)??[],i=a.find(u=>N(u)),s=a.find(u=>u.id===t.activeQueryId&&N(u));we(r,{eventType:"ADD_QUERY",eventData:e,value:{activeQueryId:n||s?e.id:(t==null?void 0:t.activeQueryId)??e.id,queries:i?a.map(u=>N(u)?e:u):[...a,e]}})},vf=(r,e=bu)=>{var t;const n=ge(r);return e(((t=n==null?void 0:n.queries)==null?void 0:t.find(({id:a})=>a===n.activeQueryId))??Y(),n.queries)},he=r=>{var n;const e=ge(r);return((n=e==null?void 0:e.queries)==null?void 0:n.find(({id:t})=>t===e.activeQueryId))??Y()},X=(r,e)=>{var a;const n=ge(r),t=(a=n==null?void 0:n.queries)==null?void 0:a.find(({id:i})=>i===e.id);if(t)t.content=e.content,t.op=e.op;else throw new Error(`Query with id ${e.id} not found`);we(r,{eventType:"UPDATE_QUERY",eventData:t,value:n})},df=(r,{field:e,index:n,isUploadedList:t,merge_strategy:a=ne.APPEND_VALUES,operator:i=Ms.In,overrideValuesName:s,remoteComponent:u,value:o})=>{const c=yf.getActiveQuery(r);X(r,U(o)?_u(e,c):Hc({sqon:c,field:e,index:n,isUploadedList:t,merge_strategy:a,operator:i,overrideValuesName:s,remoteComponent:u,value:o}))},pf=(r,e)=>{X(r,Ru(r,{field:e.filterGroup.field,operator:e.operator,sqonContent:zc(e.filterGroup,e.selectedFilters,e.index)}))},Ru=(r,{field:e,operator:n=Ie.And,sqonContent:t})=>{const a=he(r);let i={id:F(),content:t,op:n};if(!U(a)){const s=Bc(a,e),u=s[0],o=s[1],c={...o};U(c.content)&&U(a)?i={id:F(),content:[],op:n}:(u>=0?c.content.splice(u,0,...t):c.content=[...c.content,...t],i={...c,content:[...c.content]},o.content.length===0&&(i.op=n))}return i},_f=(r,e)=>X(r,e.selectedFilters.length>0?Ru(r,{field:e.field,sqonContent:$c(e.field,e.selectedFilters)}):_u(e.field,he(r))),gf=(r,e)=>{const n=he(r);X(r,{...n,content:[...n.content,e]})},hf=(r,e)=>{const n=he(r);n.content=n.content.filter(t=>t.id!==e).filter(t=>t!==void 0),X(r,n)},yf={addQuery:lf,updateQuery:X,getActiveQuery:he,getResolvedActiveQuery:vf,updateActiveQueryField:df,updateActiveQueryFilters:pf,updateQueryByTableFilter:_f,addPillToActiveQuery:gf,removePillFromActiveQuery:hf,setLocalQueryBuilderState:we,getLocalQueryBuilderState:ge,setDefaultLocalQueryBuilderState:Tn};export{wf as D,of as Q,Iu as S,Qf as a,cf as b,sf as c,mf as d,ue as e,K as f,uf as g,G as h,Rf as i,V as j,se as k,B as l,Cf as m,_e as n,pe as o,Sf as p,yf as q,Of as r,If as s,Tf as t,Pf as u,F as v,bu as w,af as x};
