import{r as i,j as e,b as fe,d as he,f as bn,e as ye,K as F,a6 as vn,c as J}from"./iframe-ic5Qxcay.js";import{S as j,a as tt}from"./api-BYcQ-ONY.js";import{H as V,h as A}from"./index-Bt_24FGa.js";import{B as jn,U as kn,O as _n,F as Nn,P as In,G as An,V as wt,D as Sn}from"./variant-icon-CzO8XNtv.js";import{B as T,a as On}from"./button-BcQGDfh9.js";import{a as Cn,S as Et,c as Lt,d as qt,e as Rt,f as Tn,g as wn,m as Mt}from"./sidebar-D-31RJo7.js";import{u as R}from"./i18n-Cigd5hm4.js";import{P as En,a as Ln}from"./panel-left-open-BFRfC5cz.js";import{T as qn,f as Rn,p as nt,U as Mn}from"./upload-id-modal-C-5yr5dK.js";import{L as xe}from"./label-eM5uO9uI.js";import{R as Fn,a as Bn}from"./radio-group-Cex1OP7w.js";import{v as K,q as Re,D as Qn}from"./query-builder-remote-BuklbIIi.js";import{A as B,F as b,u as Dn,C as Pn}from"./applications-config-BMmgC7pC.js";import{F as Vn}from"./isEqual-5aAmisoh.js";import{A as $n}from"./action-button-B_a_lzkE.js";import{C as Un}from"./checkbox-filter-5zoF-W4G.js";import{d as Be,e as Ft,C as ge,a as zn}from"./card-D-UNvjER.js";import{I as pe}from"./input-Dz_0xX-P.js";import{S as Bt}from"./separator-1IuDAtPm.js";import{S as L}from"./skeleton-GjmtatcU.js";import{S as Gn}from"./switch-_BZ1ZhDC.js";import{t as Hn,n as Xn}from"./number-format-BEllOijY.js";import{S as Kn}from"./search-BfHePcXQ.js";import{a as Qt,c as Dt,b as Pt,E as Vt,L as $t,G as Ut}from"./less-than-or-equal-operator-icon-C_Jn6Fv8.js";import{C as zt}from"./checkbox-DjDMf7QJ.js";import{d as st,S as rt,a as at,b as ot,c as it}from"./select-BMV_LGFF.js";import{A as Gt,a as Ht,b as Xt,c as Kt}from"./accordion-Cz6C3-ED.js";import{M as Jn}from"./multi-selector-CJ8WiaT1.js";import{g as lt,u as z,o as be,k as Yn,D as Wn}from"./data-table-90HQarN3.js";import{_ as te,a as ne}from"./helper-Me1SWD51.js";import{P as Qe,a as De,b as Pe,c as ct}from"./popover-BwT8FhSe.js";import{S as Zn}from"./spinner-lUd3wpd4.js";import{X as Jt}from"./x-DwTnIsGu.js";import{N as es}from"./not-in-operator-icon-BvYMoSQv.js";import{t as ts}from"./take-B7uprChh.js";import{C as ns}from"./chevron-left-B5yEdOKB.js";import{C as ss}from"./chevron-right-BbD3LfFi.js";import{T as rs}from"./trash-BxBrD3uR.js";import{R as P}from"./sqon-COfEEhMd.js";import{o as ve,h as je,a as ke,b as _e,d as as}from"./api-occurrence-D4eb6UYL.js";import{a as Ve,m as Ne,b as Ie}from"./table-mock-BMgG2mXw.js";import{M as os,R as is,a as ls}from"./chunk-EPOLDU6W-BMYMZ5VL.js";import"./preload-helper-Dp1pzeXC.js";import"./index-BYOZoyyb.js";import"./check-kaNqWciF.js";import"./index-1DQCLpOe.js";import"./sheet-6Q7YgmUc.js";import"./dialog-B_yGti1J.js";import"./circle-DxKroGXL.js";import"./index-DADJ2x1d.js";import"./useDebounce-CTf4ZIzC.js";import"./collapsible-card-DdwK6FTQ.js";import"./index-DzhlLSxu.js";import"./collapsible-q7vo0pMb.js";import"./chevron-up-D3TGdidm.js";import"./chevron-down-phpPST6C.js";import"./display-table-DnbguSc1.js";import"./empty-DjDDoDVK.js";import"./hover-card-D4Fdr2Zv.js";import"./index-DshgSYoq.js";import"./dropdown-menu-Bz4pCMIQ.js";import"./command-by36HEmY.js";import"./badge-BQ_KDDi0.js";import"./settings-cLO6YgXh.js";import"./pagination-DKhy9RR6.js";import"./ellipsis-_Ijjc0_5.js";import"./index-BChYSWVh.js";import"./chunk-WWGJGFF6-DAcEyU2n.js";import"./_baseSlice-DkFNCYmM.js";import"./toString-R_glXL-2.js";import"./empty-cell-D0rJSJQf.js";const cs={organization:Sn,variant:wt,gene:An,pathogenicity:In,frequency:Nn,occurrence:_n,parental_analysis:kn,metric_qc:jn},dt=bn({base:"text-secondary dark:text-foreground",variants:{selected:{true:"bg-sidebar-brand-accent text-sidebar-brand-accent-foreground"}},defaultVariants:{selected:!1}});function Yt({onItemSelect:t,aggregationGroups:s,selectedItemId:n}){const{t:r}=R(),{open:a,toggleSidebar:l}=Cn(),[o,u]=i.useState(null),c=n!==void 0?n:o,f=d=>{const m=c===d?null:d;u(m),t&&t(m)};return e.jsx(Et,{variant:"sidebar",collapsible:"icon",className:"static! flex flex-col w-full bg-primary dark:bg-secondary ",children:e.jsx(Lt,{children:e.jsxs(qt,{children:[e.jsxs(fe,{children:[e.jsx(he,{asChild:!0,children:e.jsx(T,{iconOnly:!0,onClick:()=>l(),className:dt({className:"mb-1 hover:bg-sidebar-brand-accent hover:text-sidebar-brand-accent-foreground"}),size:"sm",variant:"ghost",children:a?e.jsx(En,{}):e.jsx(Ln,{})})}),e.jsx(ye,{side:"right",align:"center",children:r(a?"query_filters.sidebar_panel.collapse":"query_filters.sidebar_panel.expand")})]}),e.jsx(Rt,{children:Object.entries(s).map(([d])=>{const m=cs[d],k=r(`query_filters.sidebar_panel.filters.${d}`);return e.jsx(Tn,{children:e.jsx(wn,{asChild:!0,className:dt({selected:c===d}),onClick:_=>{_.preventDefault(),f(d)},tooltip:k,children:e.jsxs("div",{children:[e.jsx(m,{}),e.jsx("span",{children:k})]})})},d)})})]})})})}Yt.__docgenInfo={description:"",methods:[],displayName:"SidebarGroups",props:{onItemSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(itemId: string | null) => void",signature:{arguments:[{type:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},name:"itemId"}],return:{name:"void"}}},description:""},selectedItemId:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},aggregationGroups:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};const q={GreaterThan:j.GreaterThan,LessThan:j.LessThan,Between:j.Between,GreaterThanOrEqualTo:j.GreaterThanOrEqualTo,LessThanOrEqualTo:j.LessThanOrEqualTo,In:j.In},Le={In:j.In,NotIn:j.NotIn},U={And:j.And,Or:j.Or};function ds(t){return t.content.value.every(s=>["false","true"].includes(s.toString().toLowerCase()))}function ut(t,s){if(typeof t=="object"&&t!==null&&"content"in t){const n=t.content;if("field"in n)return n.field===s}return!1}function us(){return{content:[],id:K(),op:U.And}}function pt(t){return t.content.length===0}var Q=(t=>(t.REMOVE_QUERY="remove-query",t.SET_ACTIVE_QUERY="set-active-query",t.ADD_OR_UPDATE_FACET_PILL="add-or-update-facet-pill",t.REMOVE_FACET_PILL="remove-facet-pill",t.CHANGE_COMBINER_OPERATOR="change-combiner-operator",t))(Q||{});function Me(){const t=K();return{aggregations:{},activeQueryId:t,sqons:[{content:[],id:t,op:U.And}],fetcher:{list:s=>(console.error(`fetcher.list has not been set: ${s}`),Promise.resolve([])),count:s=>(console.error(`fetcher.count has not been set: ${s}`),Promise.resolve({count:0}))},history:{type:"empty",target:"",uuid:t}}}const Wt=i.createContext(Me()),Zt=i.createContext(()=>{console.warn("QueryBuilderDispatchContext has been initialized without any dispatch props")});function ps(t,s){switch(s.type){case"set-active-query":return{...t,activeQueryId:s.payload};case"remove-query":{const{activeQueryId:n}=t,{sqons:r}=t,a=r.findIndex(l=>l.id===s.payload.id);return r.splice(a,1),{...t,sqons:[{content:[],op:U.And,id:n}]}}case"add-or-update-facet-pill":{const{activeQueryId:n}=t,{sqons:r}=t,a=r.findIndex(u=>u.id===n);if(a<0)return r.push({id:n,content:[s.payload],op:U.And}),{...t,sqons:[...r],history:s.payload.content.field};const l=s.payload.content.field,o=r[a].content.findIndex(u=>ut(u,l));return o<0?(r[a].content=[...r[a].content,s.payload],{...t,sqons:[...r],history:{uuid:K(),type:"add",target:l}}):s.payload.content.value.length>0?(r[a].content[o]=s.payload,{...t,sqons:[...r],history:{uuid:K(),type:"update",target:l}}):(r[a].content.splice(o,1),{...t,sqons:[...r],history:{uuid:K(),type:"update",target:l}})}case"remove-facet-pill":{const{activeQueryId:n}=t,{sqons:r}=t,a=r.findIndex(u=>u.id===n);if(a<0)throw Error(`Cannot remove pill from an undefined active query: ${s.type} ${n} ${s.payload}`);const l=s.payload.content.field,o=r[a].content.findIndex(u=>ut(u,l));return r[a].content.splice(o,1),{...t,sqons:[...r],history:{uuid:K(),type:"remove",target:l}}}case"change-combiner-operator":{const{activeQueryId:n}=t,{sqons:r}=t,a=r.findIndex(l=>l.id===n);if(a<0)throw Error(`ActiveQueryId does not exist in sqons: ${s.type} ${n} ${s.payload}`);return r[a].op=s.payload.operator,{...t}}default:throw Error(`Unknown action: ${s.type} ${JSON.stringify(s.payload)}`)}}function en({children:t,...s}){const[n,r]=i.useReducer(ps,s);return e.jsx(Wt,{value:n,children:e.jsx(Zt,{value:r,children:t})})}function G(){return i.useContext(Wt)}function H(){return i.useContext(Zt)}function Y(){const{activeQueryId:t,sqons:s}=G();return s.find(n=>n.id===t)??us()}function Ae(){const t=Y();return{content:t.content,op:t.op}}function tn(){const{history:t}=G();return t}function ms(t){const s=Y();if(s.content.length===0)return[];const n=s.content.findIndex(r=>typeof r=="object"&&r!==null&&"content"in r&&"field"in r.content&&r.content.field===t);return s.content[n]?s.content[n].content.value:[]}function fs(t){const s=Y();if(s.content.length===0)return null;const n=s.content.findIndex(r=>typeof r=="object"&&r!==null&&"content"in r&&"field"in r.content&&r.content.field===t);return s.content[n]?s.content[n].content.value[0]:null}en.__docgenInfo={description:"",methods:[],displayName:"QBProvider",props:{aggregations:{required:!0,tsType:{name:"AggregationConfig"},description:""},sqons:{required:!0,tsType:{name:"Array",elements:[{name:"ISyntheticSqon"}],raw:"ISyntheticSqon[]"},description:""},activeQueryId:{required:!0,tsType:{name:"string"},description:""},fetcher:{required:!0,tsType:{name:"IQBFetcher"},description:""},history:{required:!0,tsType:{name:"IHistory"},description:""},children:{required:!0,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""}}};const $e=i.createContext({appId:B.snv_occurrence,builderFetcher:t=>{},statisticFetcher:t=>{}});function ee(){const t=i.useContext($e);if(!t)throw new Error("useFilterConfig must be used within a FilterConfigProvider");return t}function hs(){const{appId:t}=i.useContext($e);return`temp-filters-${t}`}function Ue({field:t}){const{t:s}=R(),{builderFetcher:n}=ee(),r=H(),a=tn(),{data:l}=n({field:t.key}),o=fs(t.key),[u,c]=i.useState(l??[]),[f,d]=i.useState(o),m=i.useCallback(x=>{x.key!==f&&x.key!==void 0&&(d(x.key??null),r({type:Q.ADD_OR_UPDATE_FACET_PILL,payload:{content:{field:t.key,value:[x.key]},op:j.In}}))},[f]),k=i.useCallback(x=>f===x.key,[f]),_=i.useCallback(()=>{r({type:Q.REMOVE_FACET_PILL,payload:{content:{field:t.key,value:[f]},op:j.In}}),d(null)},[f]);return i.useEffect(()=>{l&&c(l)},[l]),i.useEffect(()=>{a.target==t.key&&o!==f&&d(o)},[a.uuid]),e.jsxs("div",{className:"p-2 w-full max-w-md",children:[e.jsx(Fn,{children:u.map(x=>e.jsx("div",{className:"space-y-3 pt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bn,{value:x.key||"",id:x.key,checked:k(x),onClick:()=>{m(x)}}),e.jsx(xe,{htmlFor:x.key,children:x.key})]}),e.jsx("span",{className:"bg-accent px-2 py-1 rounded-md font-mono text-xs",children:x.count})]})},x.key))}),f!==null&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-4 border-border"}),e.jsx("div",{className:"flex align-right justify-end items-center space-x-2",children:e.jsx(T,{onClick:_,size:"xs",children:s("common.filters.buttons.clear")})})]})]})}Ue.__docgenInfo={description:"@TODO: https://d3b.atlassian.net/browse/SJRA-1241 update aggregate empty check when task is done",methods:[],displayName:"BooleanFacet",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};function ys(t,s){const n=t.toLowerCase().split(/\s+/).filter(Boolean);return s.filter(r=>{const a=r.key.toLowerCase(),l=r.label.toLowerCase();function o(u,c){let f=0;for(const d of c){const m=u.indexOf(d,f);if(m===-1)return!1;f=m+d.length}return!0}return o(a,n)||o(l,n)})}function qe(t,s){return s<t?s:t}function xs(t){return(s,n)=>{const r=s.key&&t.includes(s.key),a=n.key&&t.includes(n.key);return r===a?n.count-s.count:r?-1:1}}function ze({field:t,maxVisibleItems:s=5}){const{t:n,sanitize:r,lazyTranslate:a}=R(),{appId:l,builderFetcher:o}=ee(),u=H(),[c,f]=i.useState(!1),{data:d,isLoading:m}=o({field:t.key,withDictionary:c}),k=tn(),_=ms(t.key),x=i.useMemo(()=>(d??[]).map(O=>({...O,label:n(`common.filters.values.${O.key}.${r(O.key)}`,{defaultValue:a(O.key)})})).sort(xs(_)),[d,_]),[h,p]=i.useState(x),[y,S]=i.useState(_),[w,C]=i.useState(qe((d??[]).length,s)),E=i.useCallback(N=>{if(!N.trim()){p(d),C(qe(d.length,s));return}const O=ys(N,d);p(O),s>O.length?C(O.length):O.length>s&&C(s)},[s,d]),$=i.useCallback(()=>{C(h.length)},[h]),X=i.useCallback(()=>{C(s)},[s]),M=i.useCallback(()=>{y.length!==h.length&&S(h.map(N=>N.key))},[h,y]),v=i.useCallback(()=>{S([])},[t.key]),Te=i.useCallback(()=>{y.length!==0&&v()},[y,v]),oe=N=>{if(y.includes(N.key??"")){S(y.filter(O=>O!==N.key));return}S([...y,N.key])},Z=i.useCallback(()=>{v()},[v]),D=i.useCallback(N=>{u({type:Q.ADD_OR_UPDATE_FACET_PILL,payload:{content:{field:t.key,value:[...y]},op:N}})},[y,l,t.key]),ie=i.useCallback(()=>{D(Le.In)},[D]),we=i.useCallback(()=>{D(Le.NotIn)},[D]),Ee=i.useCallback(()=>{D(Le.In)},[D]);return i.useEffect(()=>{m||(p(x),C(qe((d??[]).length,s)))},[m,d]),i.useEffect(()=>{k.target==t.key&&(Vn(_,y)||S(_))},[k.uuid]),e.jsxs(e.Fragment,{children:[e.jsxs(Be,{size:"sm",variant:"outline",children:[e.jsx(pe,{startIcon:Kn,size:"xs",type:"text",placeholder:n("common.filters.search.placeholder"),className:"w-full text-xs mt-3 py-1.5 px-3 mb-4 border border-border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",onChange:N=>E(N.target.value),autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(T,{size:"xs",onClick:()=>M(),variant:"link",className:"px-0",children:n("common.filters.buttons.all")}),e.jsx(Bt,{orientation:"vertical",className:"h-4"}),e.jsx(T,{size:"xs",onClick:()=>Te(),variant:"link",className:"px-0",children:n("common.filters.buttons.none")}),t.withDictionary&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grow"}),e.jsx(xe,{htmlFor:"with-dictionary-switch",className:"text-xs",children:n("common.filters.with_dictionary")}),e.jsx(Gn,{id:"with-dictionary-switch",checked:c,size:"xs",onCheckedChange:()=>f(!c)})]})]}),e.jsxs("div",{className:"max-h-[250px] overflow-auto",children:[m&&Array.from({length:3},(N,O)=>e.jsxs("div",{className:"flex justify-between items-center py-2 space-x-2",children:[e.jsx(L,{className:"w-full h-6 rounded"}),e.jsx(L,{className:"h-6 w-12 rounded-md"})]},`skeleton-${O}`)),!m&&h.length===0&&e.jsx("div",{className:"text-muted-foreground py-4",children:n("common.filters.no_values_found")}),!m&&h.length>0&&h.slice(0,w).map(N=>e.jsx("div",{className:"gap-3 py-1.5",children:e.jsx(Un,{size:"xs",label:N.label,checked:y.some(O=>O===N.key),count:N.count,onCheckedChange:()=>oe(N)})},N.key))]}),!m&&h.length>w&&e.jsx(T,{className:"mt-2 px-0",onClick:$,size:"xs",variant:"link",children:n("common.filters.buttons.show_more",{value:Hn(h.length-w)})}),!m&&w>s&&e.jsx(T,{className:"mt-2 px-0",onClick:X,size:"xs",variant:"link",children:n("common.filters.buttons.show_less")})]}),e.jsx(Ft,{size:"sm",children:e.jsxs("div",{className:"flex align-right justify-end items-center space-x-2",children:[e.jsx(T,{size:"xxs",variant:"ghost",onClick:Z,disabled:y.length===0||m,children:n("common.filters.buttons.clear")}),e.jsx("div",{className:"flex space-x-2",children:e.jsx($n,{size:"xxs",variant:"outline",className:"h-7",color:"primary",actions:[{label:n("common.filters.buttons.some_not_in"),onClick:Ee},{label:n("common.filters.buttons.not_in"),onClick:we}],onDefaultAction:ie,disabled:m,children:n("common.filters.buttons.apply")})})]})})]})}ze.__docgenInfo={description:`Multi select facet
- Allow to select multi string value
@TODO: https://d3b.atlassian.net/browse/SJRA-1241 update aggregate empty check when task is done`,methods:[],displayName:"MultiSelectFacet",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},maxVisibleItems:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"5",computed:!1}}}};const nn="integer";function mt(t,s,n,r){var x;let a=!1,l=(n==null?void 0:n.defaultOperator)??q.LessThan,o="0",u="0",c="",f=!1;const d=(r==null?void 0:r.type)===nn?0:3,m=s.content.find(h=>"content"in h&&"field"in h.content?h.content.field===t:!1),k=s.content.find(h=>"content"in h&&"field"in h.content?h.content.field===`${t}_unit`:!1);if(m){const h=m.content.value;if(console.log("[NumericalFilter] values",h),h.includes("__missing__"))return{hasUnappliedItems:a,selectedRange:l,minValue:o,maxValue:u,numericalValue:c,hasNoData:!0,selectedUnit:void 0};a=!0,h.length===2?(l=q.Between,o=Number(Number(h[0]).toFixed(d)).toLocaleString(F.language),u=Number(Number(h[1]).toFixed(d)).toLocaleString(F.language)):c=Number(h[0]).toLocaleString(F.language),m.op&&(l=m.op)}else console.log("[NumericalFilter else] no filter exists",n),f=!1,(n==null?void 0:n.defaultMin)!==void 0?(o=n.defaultMin.toLocaleString(F.language),c=n.defaultMin.toLocaleString(F.language)):(r==null?void 0:r.min)!==void 0&&(o=Number(r.min.toFixed(d)).toLocaleString(F.language),c=Number(r.min.toFixed(d)).toLocaleString(F.language)),(n==null?void 0:n.defaultMax)!==void 0?u=n.defaultMax.toLocaleString(F.language):(r==null?void 0:r.max)!==void 0&&(u=Number(r.max.toFixed(d)).toLocaleString(F.language)),n!=null&&n.defaultOperator&&(l=q[n.defaultOperator]);let _;return k&&k.content.value[0]&&((x=n==null?void 0:n.rangeTypes)!=null&&x.length)&&(_=n.rangeTypes[0].key),{hasUnappliedItems:a,selectedRange:l,minValue:o,maxValue:u,numericalValue:c,hasNoData:f,selectedUnit:_}}function gs(t){return{[q.GreaterThan]:{display:t("common.filters.operators.greater_than"),dropdown:t("common.filters.operators.greater_than"),icon:Ut},[q.LessThan]:{display:t("common.filters.operators.less_than"),dropdown:t("common.filters.operators.less_than"),icon:$t},[q.Between]:{display:t("common.filters.operators.between"),dropdown:t("common.filters.operators.between"),icon:Vt},[q.GreaterThanOrEqualTo]:{display:t("common.filters.operators.greater_than_or_equal"),dropdown:t("common.filters.operators.greater_than_or_equal"),icon:Pt},[q.LessThanOrEqualTo]:{display:t("common.filters.operators.less_than_or_equal"),dropdown:t("common.filters.operators.less_than_or_equal"),icon:Dt},[q.In]:{display:t("common.filters.operators.in"),dropdown:t("common.filters.operators.in"),icon:Qt}}}function Ge({field:t}){var Ye,We,Ze,et;const{t:s}=R(),n=H(),{aggregations:r}=G(),{appId:a}=ee(),{statisticFetcher:l}=ee(),o=t.key,u=gs(s),{data:c,isLoading:f}=l({field:o}),d=(c==null?void 0:c.type)===nn?0:3,[m,k]=i.useState(q.GreaterThan),[_,x]=i.useState("0"),[h,p]=i.useState("0"),[y,S]=i.useState("0"),[w,C]=i.useState(!1),[E,$]=i.useState(),[X,M]=i.useState(!1),v=(Ye=Object.values(r).flatMap(g=>g.items).find(g=>g.key===o))==null?void 0:Ye.defaults,Te=t.type==="numerical"&&(v==null?void 0:v.noDataInputOption),oe=(v==null?void 0:v.intervalDecimal)!==void 0&&((v==null?void 0:v.max)!==void 0||(v==null?void 0:v.min)!==void 0)||c&&(c.min!==void 0||c.max!==void 0),Z=(v==null?void 0:v.min)??(c==null?void 0:c.min)??0,D=(v==null?void 0:v.max)??(c==null?void 0:c.max)??100,ie=i.useCallback(()=>{const g=Re.getResolvedActiveQuery(a);if(!(g!=null&&g.content))return;const I=mt(o,g,v,c);C(I.hasNoData),S(I.minValue),p(I.maxValue),M(I.hasUnappliedItems),k(I.selectedRange??q.GreaterThan),x(I.numericalValue)},[a,o,v,c]);i.useEffect(()=>{ie()},[ie]);const we=i.useCallback(g=>{k(g),M(!0)},[]),Ee=i.useCallback(g=>{C(g),M(!0)},[]),N=i.useCallback(g=>{$(g),M(!0)},[]),O=()=>{M(!1);const g=mt(o,Qn,v,c);C(g.hasNoData),S(g.minValue),p(g.maxValue),M(g.hasUnappliedItems),k(g.selectedRange),x(g.numericalValue)},yn=i.useCallback(()=>{if(M(!1),w){n({type:Q.ADD_OR_UPDATE_FACET_PILL,payload:{field:o,value:["__missing__"]}});return}let g=[];g=m===q.Between?[parseFloat(y.toString()),parseFloat(h.toString())]:[parseFloat(_.toString())],n({type:Q.ADD_OR_UPDATE_FACET_PILL,payload:{field:o,value:g,operator:m}}),E&&n({type:Q.ADD_OR_UPDATE_FACET_PILL,payload:{field:`${o}_unit`,value:[E]}})},[a,o,m,_,y,h,w,E]),xn=Object.entries(q).map(([g,I])=>{if(I in u){const gn=u[I].icon;return e.jsx(st,{value:I,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gn,{size:16}),e.jsx("span",{children:u[I].dropdown})]})},I)}return null}).filter(Boolean);return e.jsxs(e.Fragment,{children:[e.jsx(Be,{id:`${o}_container`,size:"sm",variant:"outline",children:e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{id:`${o}_operator`,children:e.jsxs(rt,{value:m,onValueChange:we,children:[e.jsx(at,{size:"sm",children:e.jsx(ot,{placeholder:s("common.filters.operators.select_operator"),children:((We=u[m])==null?void 0:We.display)||s("common.filters.operators.unknown")})}),e.jsx(it,{children:xn})]})}),m===q.Between?e.jsxs("div",{className:"flex gap-2 flex-row",children:[e.jsx(pe,{size:"xs",className:"w-half",value:y,onChange:g=>{const I=g.target.value;isNaN(Number(I))||(S(I),M(!0))},min:Z,max:D,id:`${o}_min`,"data-testid":`${o}_min`}),e.jsx(pe,{size:"xs",className:"w-half",value:h,onChange:g=>{const I=g.target.value;isNaN(Number(I))||(p(I),M(!0))},min:Z,max:D,id:`${o}_max`,"data-testid":`${o}_max`})]}):e.jsx(pe,{size:"xs",className:"w-full",value:_,onChange:g=>{const I=g.target.value;isNaN(Number(I))||(x(I),M(!0))},min:Z,max:D,id:`${o}_value`,"data-testid":`${o}_value`}),oe&&e.jsx("div",{id:`${o}_interval`,children:e.jsxs(qn,{size:"xs",children:[s("common.filters.labels.actual_interval")," : ",(Ze=c==null?void 0:c.min)==null?void 0:Ze.toFixed(d)," -"," ",(c==null?void 0:c.min)!==void 0?Number(c.min.toFixed(d)).toLocaleString(F.language):""," ","-"," ",(c==null?void 0:c.max)!==void 0?Number(c.max.toFixed(d)).toLocaleString(F.language):""]})})]}),(v==null?void 0:v.rangeTypes)&&v.rangeTypes.length>0&&e.jsx("div",{id:`${o}_range_type_container`,className:"mt-3",children:f?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-5 w-16 mb-1",id:`${o}_unit_label_skeleton`}),e.jsx(L,{className:"h-9 w-full",id:`${o}_select_skeleton`})]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"text-sm",id:`${o}_unit_label`,children:s("common.filters.labels.unit")}),e.jsxs(rt,{defaultValue:E||v.rangeTypes[0].key,onValueChange:N,children:[e.jsx(at,{children:e.jsx(ot,{placeholder:s("common.filters.labels.select_unit"),children:((et=v.rangeTypes.find(g=>g.key===E))==null?void 0:et.name)||s("common.filters.labels.select_unit")})}),e.jsx(it,{children:v.rangeTypes.map(g=>e.jsx(st,{value:g.key,children:g.name},g.key))})]})]})}),Te&&!oe&&e.jsxs("label",{className:"flex items-center space-x-2 overflow-hidden mt-3",id:`${o}_no_data_label`,children:[e.jsx(zt,{checked:w,onCheckedChange:Ee,id:`${o}_no_data`}),e.jsx("span",{children:s("common.filters.labels.no_data")})]})]})}),e.jsx(Ft,{size:"sm",children:e.jsxs("div",{className:"flex align-right justify-end items-center space-x-2",children:[e.jsx(T,{size:"xxs",variant:"ghost",onClick:O,disabled:!X,id:`${o}_clear`,children:s("common.filters.buttons.clear")}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(T,{size:"xxs",variant:"outline",onClick:yn,id:`${o}_apply`,children:s("common.filters.buttons.apply")})})]})})]})}Ge.__docgenInfo={description:"@TODO: https://d3b.atlassian.net/browse/SJRA-1241 update aggregate empty check when task is done",methods:[],displayName:"NumericalFacet",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};function me({field:t,children:s}){const{t:n}=R(),r=n(`common.filters.labels.${t.translation_key}`,{defaultValue:t.key});let a=null;if(Rn.includes(t.key)){const o=`common.filters.labels.${t.translation_key}_tooltip`;a=n(o)===o?null:n(o)}function l(){return e.jsx("div",{className:"flex items-center justify-between w-full text-xs",children:e.jsx("span",{children:r})})}return e.jsx(ge,{size:"sm",children:e.jsxs(Gt,{value:t.key,className:"border-none",children:[e.jsx(zn,{size:"sm",children:e.jsx(Ht,{children:a?e.jsxs(fe,{children:[e.jsx(he,{asChild:!0,children:e.jsx("span",{children:l()})}),e.jsx(ye,{children:e.jsx("span",{children:a})})]}):l()})}),e.jsx(Xt,{className:"pb-0",children:s})]},t.key)})}function sn({field:t}){const{t:s}=R();let n;switch(t.type){case b.MULTIPLE:n=e.jsx(ze,{field:t});break;case b.NUMERICAL:n=e.jsx(Ge,{field:t});break;case b.BOOLEAN:n=e.jsx(Ue,{field:t});break;default:n=e.jsx("div",{children:s("common.filters.unsupported_type",{type:t.type})})}return n}function rn({field:t,isOpen:s}){const{t:n}=R(),r=t.type;if(r===b.DIVIDER)return e.jsx("h4",{className:"px-2 h-8 text-sidebar-foreground/70 text-xs font-medium line-height-xs text-ellipsis overflow-hidden flex justify-between items-center",children:n(`common.filters.${t.key}`)});let a;switch(r){case b.MULTIPLE:a=e.jsx(me,{field:t,isOpen:s,children:e.jsx(ze,{field:t})});break;case b.NUMERICAL:a=e.jsx(me,{field:t,isOpen:s,children:e.jsx(Ge,{field:t})});break;case b.BOOLEAN:a=e.jsx(me,{field:t,isOpen:s,children:e.jsx(Ue,{field:t})});break;default:a=e.jsx("div",{children:n("common.filters.unsupported_type",{type:t.type})})}return a}me.__docgenInfo={description:"",methods:[],displayName:"AccordionContainer",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},searchHandler:{required:!1,tsType:{name:"signature",type:"function",raw:"(_e: React.MouseEvent<SVGElement, MouseEvent>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<SVGElement, MouseEvent>",elements:[{name:"SVGElement"},{name:"MouseEvent"}]},name:"_e"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};rn.__docgenInfo={description:"To be use when the facet needs to be inside an Accordion component",methods:[],displayName:"FacetContainer",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},searchHandler:{required:!1,tsType:{name:"signature",type:"function",raw:"(_e: React.MouseEvent<SVGElement, MouseEvent>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<SVGElement, MouseEvent>",elements:[{name:"SVGElement"},{name:"MouseEvent"}]},name:"_e"}],return:{name:"void"}}},description:""}}};const bs=2;function an({search:t}){const{t:s}=R(),{appId:n}=ee(),{translation_key:r,key:a}=t,l=a.replace(/search_by_/g,""),[o,u]=i.useState([]),[c,f]=i.useState([]),[d,m]=i.useState(null);i.useEffect(()=>{var y;const x=Re.getResolvedActiveQuery(n);if(JSON.stringify(x)===JSON.stringify(d))return;const h=x.content.find(S=>"content"in S&&"field"in S.content?S.content.field===l:!1),p=((y=h==null?void 0:h.content)==null?void 0:y.value)||[];Array.isArray(p)&&u(p),m(x)},[n,l,Re.getActiveQuery(n)]),i.useEffect(()=>{(async()=>{if(o.length===0){f([]);return}if(o.length>bs){const h=o.map(p=>({value:p,label:p,badgeLabel:p}));f(h);return}try{const h=o.map(async y=>{var S,w;try{const E=(await lt.geneAutoComplete(y)).data.find($=>{var X;return((X=$.source)==null?void 0:X.name)===y});if(E)return{value:y,label:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-sm text-foreground",children:((S=E.source)==null?void 0:S.name)||y}),e.jsx("span",{className:"text-xs text-muted-foreground",children:((w=E.source)==null?void 0:w.id)||""})]}),badgeLabel:y}}catch(C){console.error(`Error fetching gene ${y}:`,C)}return{value:y,label:y,badgeLabel:y}}),p=await Promise.all(h);f(p)}catch(h){console.error("Error fetching gene details:",h);const p=o.map(y=>({value:y,label:y,badgeLabel:y}));f(p)}})()},[o]);const k=async x=>{if(!x)return[];try{return(await lt.geneAutoComplete(x)).data.map(p=>{var y,S,w,C,E,$;return{value:((y=p.source)==null?void 0:y.name)||"",label:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-sm text-foreground",children:nt(((S=p.highlight)==null?void 0:S.name)||((w=p.source)==null?void 0:w.name)||"")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:nt(((C=p.highlight)==null?void 0:C.id)||((E=p.source)==null?void 0:E.id)||"")})]}),badgeLabel:(($=p.source)==null?void 0:$.name)||""}})}catch(h){return console.error("Error fetching genes:",h),[]}},_=x=>{u(x)};return e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{children:s(`common.filters.labels.${r}`)}),e.jsxs(fe,{children:[e.jsx(he,{asChild:!0,children:e.jsx(vn,{size:16})}),e.jsx(ye,{children:s(`common.filters.labels.${r}_tooltip`)})]})]}),e.jsx(Jn,{value:o,defaultOptions:c,onChange:_,onSearch:k,placeholder:s(`common.filters.labels.${r}_placeholder`),className:"w-full",debounceDelay:300,maxSelected:100,hidePlaceholderWhenSelected:!0})]})}an.__docgenInfo={description:"",methods:[],displayName:"SearchFacet",props:{search:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};function on({groupKey:t,aggregations:s}){var h;const{t:n}=R(),[r,a]=i.useState(!1),[l,o]=i.useState([]),[u,c]=i.useState(t),f=hs(),d=()=>{sessionStorage.removeItem(f)},m=t?((h=s[t])==null?void 0:h.items)||[]:Object.values(s).flatMap(p=>p.items),k=m.filter(p=>p.type===b.SEARCH_BY),_=m.filter(p=>p.type===b.UPLOAD_LIST),x=m.filter(p=>p.type!==b.SEARCH_BY&&p.type!==b.UPLOAD_LIST);return i.useEffect(()=>{a(!1),o([])},[t]),i.useEffect(()=>{(u&&u!==null&&t===null||u&&u!==null&&t&&t!==null&&u!==t)&&d(),c(t)},[t,u]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col gap-3 mb-3",children:[k.map((p,y)=>e.jsx(an,{search:p},`${p.key}-${y}`)),_.map((p,y)=>e.jsx(Mn,{variant:p.key.replace(/upload_list_/g,"")},`${p.key}-${y}`))]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(T,{variant:"link",size:"xs",onClick:()=>{const p=!r;a(p),o(p?x.map(y=>y.key):[])},children:n(r?"common.actions.collapse_all":"common.actions.expand_all")})}),e.jsx(Kt,{className:"flex flex-col gap-1",type:"multiple",value:l,onValueChange:p=>o(p),children:x.map((p,y)=>e.jsx(rn,{isOpen:l.includes(p.key),field:p},`${p.key}-${y}`))})]})}on.__docgenInfo={description:"",methods:[],displayName:"FacetList",props:{groupKey:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},aggregations:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};function vs(t){switch(t){case B.snv_occurrence:return{builderFetcher:ft,statisticFetcher:ht};case B.cnv_occurrence:return{builderFetcher:js,statisticFetcher:ks};default:return{builderFetcher:ft,statisticFetcher:ht}}}function ft({field:t,size:s=30,withDictionary:n=!1}){const r=Ae(),a=te(),l=ne(),o={caseId:a,seqId:l,aggregationBody:{field:t,size:s,sqon:r},withDictionary:n};return z(o,async()=>be.aggregateGermlineSNVOccurrences(o.caseId,o.seqId,o.aggregationBody,o.withDictionary).then(u=>u.data),{revalidateOnFocus:!1})}function ht({field:t}){const s=Ae(),n=te(),r=ne(),a={caseId:n,seqId:r,statisticsBody:{field:t,sqon:s}};return z(a,async()=>be.statisticsGermlineSNVOccurrences(a.caseId,a.seqId,a.statisticsBody).then(l=>l.data),{revalidateOnFocus:!1})}function js({field:t,size:s=30}){const n=Ae(),r=te(),a=ne(),l={caseId:r,seqId:a,aggregationBody:{field:t,size:s,sqon:n}};return z(l,async()=>be.aggregateGermlineCNVOccurrences(l.caseId,l.seqId,l.aggregationBody).then(o=>o.data),{revalidateOnFocus:!1})}function ks({field:t}){const s=Ae(),n=te(),r=ne(),a={caseId:n,seqId:r,statisticsBody:{field:t,sqon:s}};return z(a,async()=>be.statisticsGermlineCNVOccurrences(a.caseId,a.seqId,a.statisticsBody).then(l=>l.data),{revalidateOnFocus:!1})}async function _s(t){return(await Yn.getUserPreferences(t.key)).data}function Ns({appId:t,setPreference:s}){const n=z(`query-builder-get-${t}`,()=>_s({key:`query-builder-${t}`}),{revalidateOnMount:!0,revalidateIfStale:!1,revalidateOnFocus:!1});i.useEffect(()=>{n.data?s({...n.data,history:Me().history}):n.error&&s(Me())},[n.isLoading])}function Is(t){return Object.fromEntries(Object.entries(t).map(([s,n])=>{const r={...n,items:n.items.filter(a=>a.facetHidden!==!0)};return[s,r]}).filter(([s,n])=>n.items.length>0))}function ln(t,s){let n;for(const r in t)if(n=t[r].items.find(a=>a.key===s),n)return n;return console.error(`${s} doesn't exist in aggregations`,t),{type:b.MULTIPLE,key:"error",translation_key:"error"}}function He({children:t,onRemovePill:s}){return e.jsxs("div",{className:"flex items-center rounded-xs p-0.5 bg-muted group-data-[query-active=true]/query:bg-primary/25",children:[t,e.jsx(T,{iconOnly:!0,variant:"ghost",size:"sm",className:"mr-0.5 ml-1 py-0.5 enabled:hover:bg-transparent size-4",onClick:n=>{n.stopPropagation(),s()},children:e.jsx(Jt,{})})]})}He.__docgenInfo={description:`Simple wrapper that:
- Add the blue background to highlight the query pill if it has been selected by the user
- Add the X button to remove query-pill

         ┌────────────────────────────┐
┌───────┌──────────────────────────────────────────┐─────────────────┐
| [] Q1 | Loremp Ipsum = [1,2, 3 >][X]      | 389K | [copy] [trash]  |
└───────└──────────────────────────────────────────┘─────────────────┘
         └────────────────────────────┘`,methods:[],displayName:"QueryPillContainer",props:{onRemovePill:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function Xe({field:t,operator:s}){const{t:n,lazyTranslate:r}=R();return e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"ml-1 mr-0.5 text-xs font-medium",children:n(`common.filters.labels.${t}`,{defaultValue:r(t)})}),e.jsx("span",{className:"ml-1 mr-0.5",children:s})]})}Xe.__docgenInfo={description:`Label for a pill
@TODO: Change dictionary key from filters to facet

         ┌────────────┐                   ┌─────┐
┌───────┌───────────────────────────────────────────────────────────┐─────────────────┐
| [] Q1 | Loremp Ipsum = [1,2, 3 >][X] and Ipsum < 60[x]     | 389K | [copy] [trash]  |
└───────└───────────────────────────────────────────────────────────┘─────────────────┘
         └────────────┘                   └─────┘`,methods:[],displayName:"LabelOperator",props:{field:{required:!0,tsType:{name:"string"},description:""},operator:{required:!0,tsType:{name:"ReactNode"},description:""}}};function Ke({type:t,size:s,className:n}){switch(t){case j.GreaterThan:return e.jsx(Ut,{size:s,className:n});case j.GreaterThanOrEqualTo:return e.jsx(Pt,{size:s,className:n});case j.LessThan:return e.jsx($t,{size:s,className:n});case j.LessThanOrEqualTo:return e.jsx(Dt,{size:s,className:n});case j.Between:return e.jsx(Vt,{size:s,className:n});case j.NotIn:return e.jsx(es,{size:s,className:n});default:return e.jsx(Qt,{size:s,className:n})}}Ke.__docgenInfo={description:`Return to corresponding operator for the sqon

/**
Label for a pill
@TODO: Change dictionary key from filters to facet

                      ┌─┐                       ┌─┐
┌───────┌───────────────────────────────────────────────────────────┐─────────────────┐
| [] Q1 | Loremp Ipsum = [1,2, 3 >][X] and Ipsum < 60[x]     | 389K | [copy] [trash]  |
└───────└───────────────────────────────────────────────────────────┘─────────────────┘
                      └─┘                       └─┘`,methods:[],displayName:"Operator",props:{size:{required:!1,tsType:{name:"number"},description:""},type:{required:!1,tsType:{name:"union",raw:"SqonOpEnum | (string & {})",elements:[{name:"SqonOpEnum"},{name:"unknown"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};function cn({canExpand:t,className:s,classNameContent:n,children:r,clickable:a,...l}){return e.jsx("div",{className:J("bg-background rounded-xs pl-2 text-xs font-medium leading-5 relative",t?"pr-[22px]":"pr-2",s),...l,children:e.jsx("div",{className:J("flex flex-wrap items-center",a?"hover:shadow-[inset_0_-4px_0_-2.5px_black] hover:cursor-pointer":"",n),children:r})})}cn.__docgenInfo={description:`Visual container for QueryPillValues. Highlight with a white background

                        ┌─────────────┐
┌───────┌──────────────────────────────────────────┐─────────────────┐
| [] Q1 | Loremp Ipsum = [1,2, 3 >][X]      | 389K | [copy] [trash]  |
└───────└──────────────────────────────────────────┘─────────────────┘
                        └─────────────┘`,methods:[],displayName:"QueryPillValuesContainer",props:{canExpand:{required:!1,tsType:{name:"boolean"},description:""},clickable:{required:!1,tsType:{name:"boolean"},description:""},classNameContent:{required:!1,tsType:{name:"string"},description:""}}};const yt=3,As=",",Ss="&";function Je({valueFacet:t,...s}){const[n,r]=i.useState(!1),{t:a,sanitize:l,lazyTranslate:o}=R(),u=t.content.value.length>yt,c=n?t.content.value:ts(t.content.value,yt);return e.jsxs(cn,{canExpand:u,...s,children:[t.content.overrideValuesName?e.jsx("div",{children:e.jsx("span",{children:t.content.overrideValuesName})}):c.map((f,d)=>e.jsxs("div",{children:[e.jsx("span",{children:a(`common.filters.values.${t.content.field}.${l(f)}`,{defaultValue:o(f)})}),c.length-1>d&&e.jsx("span",{className:"px-1",children:t.op===j.All?Ss:As})]},`${f}-${d}`)),u&&e.jsx("div",{className:"absolute right-1 hover:cursor-pointer",children:n?e.jsx(ns,{size:16,onClick:f=>{f.preventDefault(),r(!1)}}):e.jsx(ss,{size:16,onClick:f=>{f.preventDefault(),r(!0)}})})]})}Je.__docgenInfo={description:`QueryPillValues display the selected values from the facets.
- Display the first 3 selected values
- Clicking on [>] or [ < ] change the expand state

                        ┌──────────┐
┌───────┌──────────────────────────────────────────┐─────────────────┐
| [] Q1 | Loremp Ipsum = [1,2, 3 >] [X]     | 389K | [copy] [trash]  |
└───────└──────────────────────────────────────────┘─────────────────┘
                        └──────────┘`,methods:[],displayName:"QueryPillValues",props:{valueFacet:{required:!0,tsType:{name:"IValueFacet"},description:""}}};function dn({content:t}){const{aggregations:s}=G(),n=ln(s,t.content.field),r=H(),a=i.useCallback(()=>{r({type:Q.REMOVE_FACET_PILL,payload:t})},[t]);return e.jsx(He,{onRemovePill:a,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Xe,{field:t.content.field,operator:e.jsx(Ke,{size:14,type:t.op})}),e.jsxs(Qe,{children:[e.jsx(De,{children:e.jsx(Je,{valueFacet:t})}),e.jsx(Pe,{align:"start",className:"p-2.5",children:e.jsx(sn,{field:n,isOpen:!0})})]})]})})}dn.__docgenInfo={description:`┌───────────────────┐
┌───────┌──────────────────────────────────────────┐─────────────────┐
| [] Q1 | Loremp Ipsum = true [X]     | 389K | [copy] [trash]  |
└───────└──────────────────────────────────────────┘─────────────────┘
         └───────────────────┘`,methods:[],displayName:"BooleanQueryPill",props:{content:{required:!0,tsType:{name:"IValueFacet"},description:""}}};function un({content:t}){const{aggregations:s}=G(),n=ln(s,t.content.field),r=H(),a=i.useCallback(()=>{r({type:Q.REMOVE_FACET_PILL,payload:t})},[t]);return e.jsx(He,{onRemovePill:a,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Xe,{field:t.content.field,operator:e.jsx(Ke,{size:14,type:t.op})}),e.jsxs(Qe,{children:[e.jsx(De,{children:e.jsx(Je,{valueFacet:t})}),e.jsx(Pe,{align:"start",className:"p-2.5",children:e.jsx(sn,{field:n,isOpen:!0})})]})]})})}un.__docgenInfo={description:`┌────────────────────────┐
┌───────┌──────────────────────────────────────────┐─────────────────┐
| [] Q1 | Loremp Ipsum = [1,2, 3 >] [X]     | 389K | [copy] [trash]  |
└───────└──────────────────────────────────────────┘─────────────────┘
         └────────────────────────┘`,methods:[],displayName:"MultiSelectQueryPill",props:{content:{required:!0,tsType:{name:"IValueFacet"},description:""}}};function Fe(){const{t}=R(),s=Y(),n=H(),r=i.useCallback(a=>{a.stopPropagation(),n({type:Q.CHANGE_COMBINER_OPERATOR,payload:{operator:s.op===U.And?U.Or:U.And}})},[]);return e.jsx("div",{className:"px-2",onClick:r,children:e.jsxs(fe,{children:[e.jsx(he,{asChild:!0,children:e.jsx(T,{variant:"link",className:"text-current text-sm p-0 h-auto font-normal",onClick:()=>{console.warn("CombinerOperator:onClick is not implemented")},children:t(`common.query_pill.operator.${s.op}`)})}),e.jsxs(ye,{children:[t("common.query_pill.operator.change_operator_to"),s.op===U.And?t("common.query_pill.operator.or"):t("common.query_pill.operator.and")]})]})})}Fe.__docgenInfo={description:`Combiner is "and" or "or" operator that link every pill

                                      ┌───┐
┌───────┌───────────────────────────────────────────────────────────┐─────────────────┐
| [] Q1 | Loremp Ipsum = [1,2, 3 >][X] and Ipsum < 60[x]     | 389K | [copy] [trash]  |
└───────└───────────────────────────────────────────────────────────┘─────────────────┘
                                      └───┘`,methods:[],displayName:"CombinerOperator"};function Os(t,s){return ds(t)?e.jsxs(e.Fragment,{children:[e.jsx(dn,{content:t}),s&&e.jsx(Fe,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{content:t})," ",s&&e.jsx(Fe,{})]})}function pn({sqon:t,active:s}){var d;const{t:n}=R(),{fetcher:r}=G(),a=H(),l=i.useCallback(()=>({"border-primary/75 bg-primary/10":s,"border-muted-foreground/20 bg-muted/35 text-muted-foreground":!s}),[s])(),o=z(`${JSON.stringify(t)}-count`,()=>r.count({countBody:{sqon:{content:t.content,op:t.op}}}),{revalidateOnFocus:!1,revalidateOnMount:!0,shouldRetryOnError:!1}),u=i.useCallback(()=>{console.warn("QueryBar:handleSelection has not be implemented")},[t]),c=i.useCallback(()=>{console.warn("QueryBar:handleDuplicate has not be implemented")},[t]),f=i.useCallback(()=>{a({type:Q.REMOVE_QUERY,payload:t})},[t]);return e.jsxs("div",{className:"flex flex-1 group/query","data-query-active":s,children:[e.jsxs("div",{className:J("flex gap-2 items-center py-4 px-4 border-l border-t border-b",l),children:[e.jsx(zt,{size:"sm",checked:!1,onClick:u}),e.jsx("span",{className:"text-xs font-medium",children:n("common.query_bar.selector",{index:1})})]}),e.jsxs("div",{className:J("flex flex-1 justify-between py-3 px-3 border",l),children:[e.jsx("div",{className:"flex flex-1 flex-wrap max-h-[30vh]",children:t.content.map((m,k)=>e.jsx("div",{className:"flex mt-1",children:Os(m,k<t.content.length-1)},k))}),e.jsx("div",{className:"flex items-center gap-1",children:o.isLoading?e.jsx(Zn,{}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{size:14}),e.jsx("span",{className:"font-medium",children:Xn(((d=o.data)==null?void 0:d.count)??0)})]})})]}),e.jsxs("div",{className:J("flex items-center py-2 px-3 border-r border-t border-b",l),onClick:m=>m.stopPropagation(),children:[e.jsx(T,{iconOnly:!0,variant:"ghost",size:"sm",onClick:c,children:e.jsx(On,{})}),e.jsxs(Qe,{children:[e.jsx(De,{asChild:!0,children:e.jsx(T,{iconOnly:!0,variant:"ghost",size:"sm",children:e.jsx(rs,{})})}),e.jsxs(Pe,{side:"left",className:"w-[200px] space-y-3",children:[e.jsx("div",{className:"text-sm",children:n("common.query_bar.delete_popover.title")}),e.jsxs("div",{className:"flex gap-1 justify-end",children:[e.jsx(ct,{asChild:!0,children:e.jsx(T,{size:"xs",variant:"outline",children:n("common.query_bar.delete_popover.cancel")})}),e.jsx(ct,{asChild:!0,children:e.jsx(T,{size:"xs",variant:"destructive",onClick:f,children:n("common.query_bar.delete_popover.ok")})})]})]})]})]})]})}pn.__docgenInfo={description:`Represent a single query.
A query is a combinaison of multiple sqon (multi-select, numerical, boolean etc.)

┌───────┌──────────────────────────────────────────┐─────────────────┐
| [] Q1 | Loremp Ipsum = [1,2, 3 >][X]      | 389K | [copy] [trash]  |
└───────└──────────────────────────────────────────┘─────────────────┘`,methods:[],displayName:"QueryBar",props:{sqon:{required:!0,tsType:{name:"ISyntheticSqon"},description:""},active:{required:!0,tsType:{name:"boolean"},description:""}}};function mn(){const{t}=R(),{sqons:s,activeQueryId:n}=G(),r=Y();return e.jsx(ge,{className:"py-0",children:e.jsx(Kt,{type:"multiple",defaultValue:["query-builder"],children:e.jsxs(Gt,{value:"query-builder",className:"border-none",children:[e.jsx(Ht,{className:"border-b py-0 px-6 data-[state=closed]:rounded-sm data-[state=closed]:border-none hover:cursor-pointer",asChild:!0,children:"TODO"}),e.jsx(Xt,{className:"py-4 px-6 space-y-4",children:e.jsxs("div",{className:"flex gap-2 max-h-[30vh] overflow-y-scroll",children:[s.filter(a=>!pt(a)).map(a=>e.jsx(pn,{sqon:a,active:n===a.id},a.id)),pt(r)&&t("common.query_bar.empty")]})})]})})})}mn.__docgenInfo={description:`Card that display all queries for query-builder

┌─────────────────────────────────────────────────────────────────────────┐
| Title                                                                   |
|─────────────────────────────────────────────────────────────────────────|
|  ┌───────┌──────────────────────────────────────────┐─────────────────┐ |
|  | [] Q1 | Loremp Ipsum = [1,2, 3 >][X]      | 389K | [copy] [trash]  | |
|  └───────└──────────────────────────────────────────┘─────────────────┘ |
|  ┌───────┌──────────────────────────────────────────┐─────────────────┐ |
|  | [] Q2 | Ipsum > 60 [X]                  | 389K | [copy] [trash]  | |
|  └───────└──────────────────────────────────────────┘─────────────────┘ |
|  [New Query] (*) Label                                                  |
└─────────────────────────────────────────────────────────────────────────┘`,methods:[],displayName:"QueriesBarCard"};function fn({defaultSidebarOpen:t,aggregations:s}){return e.jsx("div",{className:"bg-muted w-full",children:e.jsxs("div",{className:"flex flex-1 h-screen overflow-hidden",children:[e.jsx("aside",{className:"w-auto min-w-fit h-full shrink-0",children:e.jsx("div",{className:"z-10",children:e.jsx(Mt,{open:t,className:"h-full flex flex-row",children:e.jsx(Et,{variant:"sidebar",collapsible:"icon",className:"static! flex flex-col w-full bg-primary dark:bg-secondary ",children:e.jsx(Lt,{children:e.jsxs(qt,{children:[e.jsx(L,{className:"size-8 mb-1"}),e.jsx(Rt,{children:Object.keys(s).map(n=>e.jsx(L,{className:"size-8 w-full"},n))})]})})})})})}),e.jsx("main",{className:"flex-1 shrink px-3 pb-3 overflow-auto",children:e.jsx("div",{className:"py-3 space-y-2",children:e.jsx(ge,{className:"py-0",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"py-4 px-6 flex justify-between",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(L,{className:"h-8 w-32"}),new Array(2).fill(0).map((n,r)=>e.jsx(L,{className:"size-8"},r))]}),e.jsxs("div",{className:"flex gap-2",children:[new Array(5).fill(0).map((n,r)=>e.jsx(L,{className:"size-8"},r)),e.jsx(L,{className:"h-8 w-36"})]})]}),e.jsx(Bt,{}),e.jsxs("div",{className:"flex flex-col py-4 gap-4",children:[e.jsxs("div",{className:"px-6 flex flex-col gap-2",children:[e.jsx(L,{className:"h-[50px] w-full"}),e.jsx(L,{className:"h-[50px] w-full"})]}),e.jsxs("div",{className:"px-6 flex gap-3",children:[e.jsx(L,{className:"h-7 w-26"}),e.jsx(L,{className:"h-7 w-16"})]})]})]})})})})]})})}fn.__docgenInfo={description:"",methods:[],displayName:"QueryBuilderSkeleton",props:{aggregations:{required:!0,tsType:{name:"AggregationConfig"},description:""},defaultSidebarOpen:{required:!0,tsType:{name:"boolean"},description:""}}};function W({appId:t,defaultSidebarOpen:s=!1,fetcher:n,children:r}){const[a,l]=i.useState(s),u=Dn()[t].aggregations,c=Is(u),[f,d]=i.useState(null),[m,k]=i.useState(),_=vs(t);return Ns({appId:t,setPreference:k}),m?e.jsx(en,{...m,aggregations:u,fetcher:n,children:e.jsx($e,{value:{appId:t,..._},children:e.jsx("div",{className:"bg-muted w-full",children:e.jsxs("div",{className:"flex flex-1 h-screen overflow-hidden",children:[e.jsx("aside",{className:"w-auto min-w-fit h-full shrink-0",children:e.jsxs(Mt,{open:a,onOpenChange:l,className:"h-full flex flex-row",children:[e.jsx("div",{className:"z-10",children:e.jsx(Yt,{aggregationGroups:c,selectedItemId:f,onItemSelect:d})}),e.jsx("div",{className:J("overflow-auto mb-16 border-r transition-[width] duration-300 ease-in-out",{"w-[280px] p-4 opacity-100 relative":f,"w-0 opacity-0":!f}),children:e.jsxs("div",{className:"whitespace-nowrap",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx("button",{onClick:()=>d(null),className:"text-muted-foreground hover:text-foreground",children:e.jsx(Jt,{size:16})})}),e.jsx(on,{aggregations:c,groupKey:f})]})})]})}),e.jsxs("main",{className:"flex-1 shrink px-3 pb-3 overflow-auto",children:[e.jsx("div",{className:"py-3 space-y-2",children:e.jsx(mn,{})}),r]})]})})})}):e.jsx(fn,{defaultSidebarOpen:s,aggregations:u})}W.__docgenInfo={description:"Query-Builder (facets + query-bar)",methods:[],displayName:"QueryBuilder",props:{appId:{required:!0,tsType:{name:"ApplicationId"},description:""},children:{required:!0,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""},defaultSidebarOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},fetcher:{required:!0,tsType:{name:"IQBFetcher"},description:""}}};function se({...t}){var m;const s=Y(),{fetcher:n}=G(),[r,a]=i.useState([]),[l,o]=i.useState({pageIndex:0,pageSize:10}),[u,c]=i.useState([]),f=z(`${JSON.stringify(s)}-list`,()=>n.list({listBody:{additional_fields:r,limit:l.pageSize,page_index:l.pageIndex,sort:u,sqon:{content:s.content,op:s.op}}}),{revalidateOnFocus:!1,revalidateOnMount:!0,shouldRetryOnError:!1}),d=z(`${JSON.stringify(s)}-count`,()=>n.count({countBody:{sqon:{content:s.content,op:s.op}}}),{revalidateOnFocus:!1,revalidateOnMount:!0,shouldRetryOnError:!1});return e.jsx(ge,{children:e.jsx(Be,{children:e.jsx(Wn,{data:f.data??[],total:((m=d.data)==null?void 0:m.count)??0,loadingStates:{list:f.isLoading,total:d.isLoading},serverOptions:{setAdditionalFields:a,onSortingChange:c},pagination:{state:l,type:"server",onPaginationChange:o},...t})})})}se.__docgenInfo={description:`Wrapper for data-table
Used to access QBContext and create list and count query`,methods:[],displayName:"QueryBuilderDataTable"};const Se="api/users/preferences/:key",re="api/mock/list",ae="api/mock/count";function xt(t,s){var o;const{op:n}=s,r=s.content.field,a=s.content.value,l=(o=t[r])==null?void 0:o.toString().toLowerCase();switch(n){case j.In:return a.includes(l);case j.And:return console.warn(`mock-api:filtercontent ${n} operator has not been coded`),!0;case j.Or:return console.warn(`mock-api:filtercontent ${n} operator has not been coded`),!0;case j.Not:return console.warn(`mock-api:filtercontent ${n} operator has not been coded`),!0;case j.Between:return console.warn(`mock-api:filtercontent ${n} operator has not been coded`),!0;case j.GreaterThan:return console.warn(`mock-api:filtercontent ${n} operator has not been coded`),!0;case j.LessThan:return console.warn(`mock-api:filtercontent ${n} operator has not been coded`),!0;case j.GreaterThanOrEqualTo:return console.warn(`mock-api:filtercontent ${n} operator has not been coded`),!0;case j.LessThanOrEqualTo:return console.warn(`mock-api:filtercontent ${n} operator has not been coded`),!0;case j.NotIn:return!a.includes(l);case j.All:return console.warn(`mock-api:filtercontent ${n} operator has not been coded`),!0}return!1}function hn(t){return Ve.filter(s=>{switch(t.op){case j.Or:return t.content.map(r=>xt(s,r)).includes(!0);default:return t.content.map(r=>xt(s,r)).every(r=>r===!0)}})}async function Oe({request:t}){var r;const n=(r=(await t.clone().json()).listBody)==null?void 0:r.sqon;return n&&n.content.length>0?V.json(hn(n)):V.json(Ve)}async function Ce({request:t}){var r;const n=(r=(await t.clone().json()).countBody)==null?void 0:r.sqon;if(n&&n.content.length>0){const a=hn(n);return V.json({count:a.length})}return V.json({count:Ve.length})}const{mocked:gt}=__STORYBOOK_MODULE_TEST__,Cs={variant_entity:{app_id:B.variant_entity},snv_occurrence:{app_id:B.snv_occurrence,aggregations:{variant:{items:[{key:"firstName",translation_key:"multiple",type:b.MULTIPLE},{key:"lastName",translation_key:"multiple (with dictionary)",type:b.MULTIPLE},{key:"status",translation_key:"status (with dictionary)",type:b.MULTIPLE,withDictionary:!0},{key:"divider",translation_key:"Divider",type:b.DIVIDER},{key:"progress",translation_key:"numerical (decimal)",type:b.NUMERICAL,defaults:{min:0,max:100,defaultOperator:P.LessThan,defaultMin:0,defaultMax:100}},{key:"age",translation_key:"Age (integer)",type:b.NUMERICAL,defaults:{min:0,max:100,defaultOperator:P.LessThan,defaultMin:0,defaultMax:100}},{key:"visits",translation_key:"Visits (integer)",type:b.NUMERICAL,defaults:{min:0,max:1e3,defaultOperator:P.LessThan,defaultMin:0,defaultMax:1e3}},{key:"isActive",translation_key:"isActive (boolean)",type:b.BOOLEAN}]},gene:{items:[{key:"lastName",translation_key:"multiple (with dictionary)",type:b.MULTIPLE},{key:"progress",translation_key:"numerical (decimal)",type:b.NUMERICAL,defaults:{min:0,max:100,defaultOperator:P.LessThan,defaultMin:0,defaultMax:100}},{key:"age",translation_key:"Age (integer)",type:b.NUMERICAL,defaults:{min:0,max:100,defaultOperator:P.LessThan,defaultMin:0,defaultMax:100}},{key:"newsletterSubscribed",translation_key:"newsletterSubscribed (boolean)",type:b.BOOLEAN}]}}},cnv_occurrence:{app_id:B.cnv_occurrence,aggregations:{pathogenicity:{items:[{key:"firstName",translation_key:"multiple",type:b.MULTIPLE},{key:"lastName",translation_key:"multiple (with dictionary)",type:b.MULTIPLE},{key:"status",translation_key:"status (with dictionary)",type:b.MULTIPLE,withDictionary:!0},{key:"divider",translation_key:"Divider",type:b.DIVIDER},{key:"progress",translation_key:"numerical (decimal)",type:b.NUMERICAL,defaults:{min:0,max:100,defaultOperator:P.LessThan,defaultMin:0,defaultMax:100}},{key:"age",translation_key:"Age (integer)",type:b.NUMERICAL,defaults:{min:0,max:100,defaultOperator:P.LessThan,defaultMin:0,defaultMax:100}},{key:"visits",translation_key:"Visits (integer)",type:b.NUMERICAL,defaults:{min:0,max:1e3,defaultOperator:P.LessThan,defaultMin:0,defaultMax:1e3}},{key:"isActive",translation_key:"isActive (boolean)",type:b.BOOLEAN}]},frequency:{items:[{key:"lastName",translation_key:"multiple (with dictionary)",type:b.MULTIPLE},{key:"progress",translation_key:"numerical (decimal)",type:b.NUMERICAL,defaults:{min:0,max:100,defaultOperator:P.LessThan,defaultMin:0,defaultMax:100}},{key:"age",translation_key:"Age (integer)",type:b.NUMERICAL,defaults:{min:0,max:100,defaultOperator:P.LessThan,defaultMin:0,defaultMax:100}},{key:"isActive",translation_key:"isActive (boolean)",type:b.BOOLEAN}]}}},admin:{admin_code:"admin",app_id:B.admin},portal:{name:"",navigation:{}}},Hr={title:"QueryBuilder/QueryBuilderV3",component:W,beforeEach:async()=>{gt(te).mockReturnValue(1),gt(ne).mockReturnValue(1)},args:{fetcher:{list:async t=>tt.post(re,{listBody:t.listBody}).then(s=>s.data),count:async t=>tt.post(ae,{countBody:t.countBody}).then(s=>s.data)}},decorators:[t=>e.jsx(os,{initialEntries:["/case/1?seq_id=1"],children:e.jsx(is,{children:e.jsx(ls,{path:"/case/:caseId",element:e.jsx(Pn,{config:Cs,children:e.jsx(t,{})})})})})]},le={parameters:{msw:{handlers:[A.post(re,Oe),A.post(ae,Ce),A.post(ve,je),A.post(ke,_e),A.get(Se,async()=>(await as(1e4),new V(null,{status:403})))]}},args:{appId:B.snv_occurrence,children:e.jsx(e.Fragment,{}),defaultSidebarOpen:!0},render:t=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bold font-mono text-red",children:"Do a hard refresh to reset loading state"}),e.jsx(W,{appId:t.appId,defaultSidebarOpen:t.defaultSidebarOpen,fetcher:t.fetcher,children:e.jsx(se,{id:"storybook-query-builder",columns:[...Ne,Ie.accessor("isActive",{header:"Active"})],defaultColumnSettings:[]})})]})},ce={parameters:{msw:{handlers:[A.post(re,Oe),A.post(ae,Ce),A.post(ve,je),A.post(ke,_e),A.get(Se,()=>new V(null,{status:404}))]}},args:{appId:B.cnv_occurrence,children:e.jsx(e.Fragment,{}),defaultSidebarOpen:!0},render:t=>e.jsx(W,{appId:t.appId,defaultSidebarOpen:t.defaultSidebarOpen,fetcher:t.fetcher,children:e.jsx(se,{id:"storybook-query-builder",columns:[...Ne,Ie.accessor("isActive",{header:"Active"})],defaultColumnSettings:[]})})},de={parameters:{msw:{handlers:[A.post(re,Oe),A.post(ae,Ce),A.post(ve,je),A.post(ke,_e),A.get(Se,({params:t})=>t.key==="data-table-storybook-query-builder"?new V(null,{status:404}):V.json({activeQueryId:"3593dbdf-44e7-49c9-934a-7b10db87b603",sqons:[{id:"3593dbdf-44e7-49c9-934a-7b10db87b603",content:[{content:{field:"firstName",value:["henry","jack","irene","liam","olivia","tanner"]},op:"in"},{content:{field:"lastName",value:["tremblay","anderson","young"]},op:"in"},{content:{field:"status",value:["single"]},op:"in"}],op:"and"}],savedFilters:[],selectedQueryIndexes:[0]}))]}},args:{appId:B.snv_occurrence,children:e.jsx(e.Fragment,{}),defaultSidebarOpen:!0},render:t=>e.jsx(W,{appId:t.appId,defaultSidebarOpen:t.defaultSidebarOpen,fetcher:t.fetcher,children:e.jsx(se,{id:"storybook-query-builder",columns:[...Ne,Ie.accessor("isActive",{header:"Active"})],defaultColumnSettings:[]})})},ue={parameters:{msw:{handlers:[A.post(re,Oe),A.post(ae,Ce),A.post(ve,je),A.post(ke,_e),A.get(Se,({params:t})=>t.key==="data-table-storybook-query-builder"?new V(null,{status:404}):V.json({activeQueryId:"3593dbdf-44e7-49c9-934a-7b10db87b603",sqons:[{id:"3593dbdf-44e7-49c9-934a-7b10db87b603",content:[{content:{field:"isActive",value:["true"]},op:"in"}],op:"and"}],savedFilters:[],selectedQueryIndexes:[0]}))]}},args:{appId:B.snv_occurrence,children:e.jsx(e.Fragment,{}),defaultSidebarOpen:!0},render:t=>e.jsx(W,{appId:t.appId,defaultSidebarOpen:t.defaultSidebarOpen,fetcher:t.fetcher,children:e.jsx(se,{id:"storybook-query-builder",columns:[...Ne,Ie.accessor("isActive",{header:"Active"})],defaultColumnSettings:[]})})};var bt,vt,jt;le.parameters={...le.parameters,docs:{...(bt=le.parameters)==null?void 0:bt.docs,source:{originalSource:`{
  parameters: {
    msw: {
      handlers: [http.post(mockListApi, httpMockListApiResponse), http.post(mockCountApi, httpMockCountApiResponse), http.post(occurrenceAggregateApi, httpOccurrenceAggregateApiResponse), http.post(occurrenceAggregateStatisticApi, httpOccurrenceAggregateStatisticsApiResponse), http.get(userPreferenceApi, async () => {
        await delay(10000);
        return new HttpResponse(null, {
          status: 403
        });
      })]
    }
  },
  args: {
    appId: ApplicationId.snv_occurrence,
    children: <></>,
    // unused
    defaultSidebarOpen: true
  },
  render: args => <>
      <div className="bold font-mono text-red">Do a hard refresh to reset loading state</div>
      <QueryBuilder appId={args.appId} defaultSidebarOpen={args.defaultSidebarOpen} fetcher={args.fetcher}>
        <QueryBuilderDataTable id="storybook-query-builder" columns={[...mockColumns, mockColumnHelper.accessor('isActive', {
        header: 'Active'
      })] as TableColumnDef<TableMockData, any>[]} defaultColumnSettings={[]} />
      </QueryBuilder>
    </>
}`,...(jt=(vt=le.parameters)==null?void 0:vt.docs)==null?void 0:jt.source}}};var kt,_t,Nt;ce.parameters={...ce.parameters,docs:{...(kt=ce.parameters)==null?void 0:kt.docs,source:{originalSource:`{
  parameters: {
    msw: {
      handlers: [http.post(mockListApi, httpMockListApiResponse), http.post(mockCountApi, httpMockCountApiResponse), http.post(occurrenceAggregateApi, httpOccurrenceAggregateApiResponse), http.post(occurrenceAggregateStatisticApi, httpOccurrenceAggregateStatisticsApiResponse), http.get(userPreferenceApi, () => new HttpResponse(null, {
        status: 404
      }))]
    }
  },
  args: {
    appId: ApplicationId.cnv_occurrence,
    children: <></>,
    // unused
    defaultSidebarOpen: true
  },
  render: args => <QueryBuilder appId={args.appId} defaultSidebarOpen={args.defaultSidebarOpen} fetcher={args.fetcher}>
      <QueryBuilderDataTable id="storybook-query-builder" columns={[...mockColumns, mockColumnHelper.accessor('isActive', {
      header: 'Active'
    })] as TableColumnDef<TableMockData, any>[]} defaultColumnSettings={[]} />
    </QueryBuilder>
}`,...(Nt=(_t=ce.parameters)==null?void 0:_t.docs)==null?void 0:Nt.source}}};var It,At,St;de.parameters={...de.parameters,docs:{...(It=de.parameters)==null?void 0:It.docs,source:{originalSource:`{
  parameters: {
    msw: {
      handlers: [http.post(mockListApi, httpMockListApiResponse), http.post(mockCountApi, httpMockCountApiResponse), http.post(occurrenceAggregateApi, httpOccurrenceAggregateApiResponse), http.post(occurrenceAggregateStatisticApi, httpOccurrenceAggregateStatisticsApiResponse), http.get(userPreferenceApi, ({
        params
      }: any) => {
        const key = params.key;
        if (key === 'data-table-storybook-query-builder') {
          return new HttpResponse(null, {
            status: 404
          });
        }
        return HttpResponse.json({
          activeQueryId: '3593dbdf-44e7-49c9-934a-7b10db87b603',
          sqons: [{
            id: '3593dbdf-44e7-49c9-934a-7b10db87b603',
            content: [{
              content: {
                field: 'firstName',
                value: ['henry', 'jack', 'irene', 'liam', 'olivia', 'tanner']
              },
              op: 'in'
            }, {
              content: {
                field: 'lastName',
                value: ['tremblay', 'anderson', 'young']
              },
              op: 'in'
            }, {
              content: {
                field: 'status',
                value: ['single']
              },
              op: 'in'
            }],
            op: 'and'
          }],
          savedFilters: [],
          selectedQueryIndexes: [0]
        });
      })]
    }
  },
  args: {
    appId: ApplicationId.snv_occurrence,
    children: <></>,
    // unused
    defaultSidebarOpen: true
  },
  render: args => <QueryBuilder appId={args.appId} defaultSidebarOpen={args.defaultSidebarOpen} fetcher={args.fetcher}>
      <QueryBuilderDataTable id="storybook-query-builder" columns={[...mockColumns, mockColumnHelper.accessor('isActive', {
      header: 'Active'
    })] as TableColumnDef<TableMockData, any>[]} defaultColumnSettings={[]} />
    </QueryBuilder>
}`,...(St=(At=de.parameters)==null?void 0:At.docs)==null?void 0:St.source}}};var Ot,Ct,Tt;ue.parameters={...ue.parameters,docs:{...(Ot=ue.parameters)==null?void 0:Ot.docs,source:{originalSource:`{
  parameters: {
    msw: {
      handlers: [http.post(mockListApi, httpMockListApiResponse), http.post(mockCountApi, httpMockCountApiResponse), http.post(occurrenceAggregateApi, httpOccurrenceAggregateApiResponse), http.post(occurrenceAggregateStatisticApi, httpOccurrenceAggregateStatisticsApiResponse), http.get(userPreferenceApi, ({
        params
      }: any) => {
        const key = params.key;
        if (key === 'data-table-storybook-query-builder') {
          return new HttpResponse(null, {
            status: 404
          });
        }
        return HttpResponse.json({
          activeQueryId: '3593dbdf-44e7-49c9-934a-7b10db87b603',
          sqons: [{
            id: '3593dbdf-44e7-49c9-934a-7b10db87b603',
            content: [{
              content: {
                field: 'isActive',
                value: ['true']
              },
              op: 'in'
            }],
            op: 'and'
          }],
          savedFilters: [],
          selectedQueryIndexes: [0]
        });
      })]
    }
  },
  args: {
    appId: ApplicationId.snv_occurrence,
    children: <></>,
    // unused
    defaultSidebarOpen: true
  },
  render: args => <QueryBuilder appId={args.appId} defaultSidebarOpen={args.defaultSidebarOpen} fetcher={args.fetcher}>
      <QueryBuilderDataTable id="storybook-query-builder" columns={[...mockColumns, mockColumnHelper.accessor('isActive', {
      header: 'Active'
    })] as TableColumnDef<TableMockData, any>[]} defaultColumnSettings={[]} />
    </QueryBuilder>
}`,...(Tt=(Ct=ue.parameters)==null?void 0:Ct.docs)==null?void 0:Tt.source}}};const Xr=["Loading","Default","Multiselect","Boolean"];export{ue as Boolean,ce as Default,le as Loading,de as Multiselect,Xr as __namedExportsOrder,Hr as default};
