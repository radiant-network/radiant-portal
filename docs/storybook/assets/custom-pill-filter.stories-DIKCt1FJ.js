import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as N}from"./index-CBYaBgW8.js";import{a as u}from"./index-B-lxVbXh.js";import{b as T}from"./api-CXUGxQj_.js";import{a as E}from"./alert-dialog-store-CZoSfA8g.js";import{u as b,a as B,Q,b as R,P as U,c as k}from"./query-pill-boolean-D3mSdI4T.js";import{B as c,a as z}from"./button-KqHaQCat.js";import{H as L,a as M,b as V}from"./hover-card-DGWDDH_5.js";import{c as O}from"./query-builder-remote-ey8YFat1.js";import{u as G}from"./i18n-CRBBOSmd.js";import{C as H,a as A,b as Y,c as $}from"./chart-scatter-DVTaxjlK.js";import{E as J}from"./external-link-BUY0T_tU.js";import{I as K}from"./info-1oMsIW1a.js";import{T as W}from"./trash-EX7KNg_H.js";import{a as m}from"./utils-DprrQIuh.js";import"./v4-CtRu48qb.js";import"./tooltip-0vX-MTK3.js";import"./index-D9mtqW9-.js";import"./index-sTUCEGFJ.js";import"./index-BWnBDfn-.js";import"./index-Dy6y0jaD.js";import"./index-C8BBKGwP.js";import"./index-BL8Z-moU.js";import"./index-DnEzm5An.js";import"./index-iyInEJkZ.js";import"./index-C2iKAgIe.js";import"./index-CWHKeK-O.js";import"./index-CfXWnpL9.js";import"./utils-CDN07tui.js";import"./sqon-BpmWAJ8m.js";import"./x-4HkHZ1eq.js";import"./createLucideIcon-B119WVF5.js";import"./input-Bj-MPxry.js";import"./index-C66Dxnp2.js";import"./dialog-CFmQA3Ol.js";import"./index-Cq0TEE3l.js";import"./Combination-CrkgvPnV.js";import"./separator-ChZWIdMg.js";import"./index-C-d7IIsQ.js";import"./conditional-wrapper-BBX8pIPQ.js";import"./popover-CV3rAFUt.js";import"./less-than-or-equal-operator-icon-BI5aNTvi.js";import"./not-in-operator-icon-DdiM-lgK.js";import"./chevron-left-D5mG_tkl.js";import"./chevron-right-BONyyZTy.js";import"./action-button-9r-08jXC.js";import"./dropdown-menu-DPm_FhUX.js";import"./index-BCzuw4Jg.js";import"./index-CfgEC-S9.js";import"./check-DSe_yRo5.js";import"./button.variants-Du9eY_ux.js";import"./spinner-D7tBPZCQ.js";import"./iframe-Bl7tlAti.js";import"./i18next-CYn7LYXT.js";function y({customPills:o,onSelectPill:n,onSavePill:t,onDuplicatePill:r,onDeletePill:l,validateCustomPillTitle:d,fetchSavedFiltersByCustomPillId:s,learnMoreLink:_,savedFilterType:w}){const{t:a}=G(),q=b(),[P,x]=N.useState(null),f=B({id:"customPillFilterQueryBuilder",state:{activeQueryId:"",selectedQueryIndexes:[],queries:[],savedFilters:o},onCustomPillUpdate:async i=>await t(i),savedFilterType:w}),D=i=>E.open({type:"warning",title:a("common.custom_pill_filter.delete_dialog.title",{defaultValue:"Delete this query?"}),description:a("common.custom_pill_filter.delete_dialog.description",{title:i.name,defaultValue:`You are about to delete this custom query "${i.name}", which may affect your results."`}),cancelProps:{children:a("common.custom_pill_filter.delete_dialog.cancel",{defaultValue:"Cancel"})},actionProps:{color:"destructive",onClick:()=>l(+i.id),children:a("common.custom_pill_filter.delete_dialog.ok",{defaultValue:"Delete"})}}),g=a("common.custom_pill_filter.info",{defaultValue:"You can create custom queries by adding criteria to the query bar and clicking the save button."});return o.length===0?e.jsxs("div",{className:"flex flex-col gap-3 justify-center",children:[e.jsxs("div",{className:"flex gap-1 justify-center items-center text-neutral",children:[e.jsx(H,{size:20}),e.jsx(A,{size:20}),e.jsx(Y,{size:20}),e.jsx($,{size:20})]}),e.jsx("div",{className:"text-sm text-center",children:g}),e.jsx("a",{className:"flex justify-center",href:_,target:"_blank",rel:"noreferrer",children:e.jsxs(c,{variant:"link",className:"py-0 h-5",children:[a("common.custom_pill_filter.learn_more",{defaultValue:"Learn more"}),e.jsx(J,{})]})})]}):e.jsx(Q.Provider,{value:q,children:e.jsxs(R.Provider,{value:{queryBuilder:f,fetchQueryCount:async()=>0,getQueryReferenceColor:()=>"",showLabels:!0,resolveSyntheticSqon:i=>i,customPillConfig:{enable:!0,queryBuilderEditId:"subCustomPillFilterQueryBuilder",fetchCustomPillById:(()=>{}),validateCustomPillTitle:d,fetchSavedFiltersByCustomPillId:s}},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:["My Queries"," ",e.jsxs(L,{children:[e.jsx(M,{asChild:!0,children:e.jsx(K,{size:16})}),e.jsx(V,{side:"left",className:"w-[200px] space-y-3",children:e.jsx("div",{className:"text-sm",children:g})})]})]}),e.jsx("div",{className:"space-y-3",children:o.map(i=>e.jsxs("div",{className:"flex gap-1.5 group",children:[e.jsx("button",{className:"flex items-center border-2 rounded-xs border-primary px-2 h-6 text-xs whitespace-nowrap overflow-hidden hover:underline",onClick:()=>n(i),children:e.jsx("span",{className:"overflow-hidden text-ellipsis",children:i.name})}),e.jsxs("div",{className:"hidden items-center group-hover:flex gap-1",children:[e.jsx(c,{iconOnly:!0,variant:"ghost",size:"xs",className:"[&_svg]:size-3.5 size-5",onClick:()=>x(i),children:e.jsx(U,{})}),e.jsx(c,{iconOnly:!0,variant:"ghost",size:"xs",className:"[&_svg]:size-3.5 size-5",onClick:()=>r(O(i,f).copy()),children:e.jsx(z,{})}),e.jsx(c,{iconOnly:!0,variant:"ghost",size:"xs",className:"[&_svg]:size-3.5 size-5",onClick:()=>D(i),children:e.jsx(W,{})})]})]},i.id))})]}),P&&e.jsx(k,{open:!0,onOpenChange:()=>x(null),queryPill:P})]})})}y.__docgenInfo={description:`validateCustomPillTitle
fetchSavedFiltersByCustomPillId`,methods:[],displayName:"CustomPillFilter",props:{customPills:{required:!0,tsType:{name:"Array",elements:[{name:"IUserSavedFilter"}],raw:"IUserSavedFilter[]"},description:""},onSelectPill:{required:!0,tsType:{name:"signature",type:"function",raw:"(pill: IUserSavedFilter) => void",signature:{arguments:[{type:{name:"IUserSavedFilter"},name:"pill"}],return:{name:"void"}}},description:""},onSavePill:{required:!0,tsType:{name:"signature",type:"function",raw:"(pill: ISavedFilter) => Promise<IUserSavedFilter>",signature:{arguments:[{type:{name:"ISavedFilter"},name:"pill"}],return:{name:"Promise",elements:[{name:"IUserSavedFilter"}],raw:"Promise<IUserSavedFilter>"}}},description:""},onDuplicatePill:{required:!0,tsType:{name:"signature",type:"function",raw:"(pill: ISavedFilter) => void",signature:{arguments:[{type:{name:"ISavedFilter"},name:"pill"}],return:{name:"void"}}},description:""},onDeletePill:{required:!0,tsType:{name:"signature",type:"function",raw:"(pillId: number) => void",signature:{arguments:[{type:{name:"number"},name:"pillId"}],return:{name:"void"}}},description:""},validateCustomPillTitle:{required:!0,tsType:{name:"signature",raw:"QueryPillCustomConfig['validateCustomPillTitle']"},description:""},fetchSavedFiltersByCustomPillId:{required:!0,tsType:{name:"signature",raw:"QueryPillCustomConfig['fetchSavedFiltersByCustomPillId']"},description:""},learnMoreLink:{required:!0,tsType:{name:"string"},description:""},savedFilterType:{required:!0,tsType:{name:"SavedFilterType"},description:""}}};const Xe={title:"QueryBuilder/Query Filters/Custom Pill Filter",component:y},p={args:{},render:()=>{const[o,n]=N.useState([m(),m(),m()]);return e.jsx("div",{className:"rounded-sm border p-5 max-w-[300px]",children:e.jsx(y,{customPills:o,onSelectPill:u("onSelectPill"),onDuplicatePill:t=>{u("onDuplicatePill"),n(r=>[...r,{...m(t),queries:t.queries}])},onDeletePill:t=>{u("onDeletePill")(),n(r=>r.filter(l=>String(l.id)!==String(t)))},onSavePill:async t=>new Promise(r=>{setTimeout(()=>{u("onSavePill")(t),n(l=>{const d=l.findIndex(s=>s.id===t.id);if(d>-1){const s=[...l];return s[d]={...m(t),queries:t.queries,name:t.name},s}return l}),r(t)},1e3)}),validateCustomPillTitle:()=>new Promise(t=>setTimeout(()=>t(!0),750)),fetchSavedFiltersByCustomPillId:()=>new Promise(t=>setTimeout(()=>t([]),750)),learnMoreLink:"https://google.com",savedFilterType:T.GERMLINE_SNV_OCCURRENCE})})}},v={args:{},render:()=>e.jsx("div",{className:"rounded-sm border p-5 max-w-[300px]",children:e.jsx(y,{customPills:[],onSelectPill:(()=>{}),onDuplicatePill:(()=>{}),onDeletePill:()=>{},onSavePill:(()=>{}),validateCustomPillTitle:(()=>{}),fetchSavedFiltersByCustomPillId:(()=>{}),learnMoreLink:"https://google.com",savedFilterType:T.GERMLINE_SNV_OCCURRENCE})})};var h,C,S;p.parameters={...p.parameters,docs:{...(h=p.parameters)==null?void 0:h.docs,source:{originalSource:`{
  args: {} as any,
  // No args needed for this story
  render: () => {
    // This is to simulate a dynamic list of custom pills
    // eslint-disable-next-line react-hooks/rules-of-hooks
    const [customPills, setCustomPills] = useState([generateRandomUserSavedFilter(), generateRandomUserSavedFilter(), generateRandomUserSavedFilter()]);
    return <div className="rounded-sm border p-5 max-w-[300px]">
        <CustomPillFilter customPills={customPills} onSelectPill={action('onSelectPill')} onDuplicatePill={pill => {
        action('onDuplicatePill');
        setCustomPills(prev => [...prev, {
          ...generateRandomUserSavedFilter(pill),
          queries: pill.queries
        }]);
      }} onDeletePill={pillId => {
        action('onDeletePill')();
        setCustomPills(prev => prev.filter(pill => String(pill.id) !== String(pillId)));
      }} onSavePill={async pill =>
      // Simulate saving the pill
      new Promise(resolve => {
        setTimeout(() => {
          action('onSavePill')(pill);
          setCustomPills(prev => {
            const existingPillIndex = prev.findIndex(p => p.id === pill.id);
            if (existingPillIndex > -1) {
              const updatedPills = [...prev];
              updatedPills[existingPillIndex] = {
                ...generateRandomUserSavedFilter(pill),
                queries: pill.queries,
                name: pill.name
              };
              return updatedPills;
            }
            return prev;
          });
          resolve(pill as any);
        }, 1000);
      })} validateCustomPillTitle={() => new Promise(resolve => setTimeout(() => resolve(true), 750))} fetchSavedFiltersByCustomPillId={() => new Promise(resolve => setTimeout(() => resolve([]), 750))} learnMoreLink="https://google.com" savedFilterType={SavedFilterType.GERMLINE_SNV_OCCURRENCE} />
      </div>;
  }
}`,...(S=(C=p.parameters)==null?void 0:C.docs)==null?void 0:S.source}}};var F,j,I;v.parameters={...v.parameters,docs:{...(F=v.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {} as any,
  // No args needed for this story
  render: () => <div className="rounded-sm border p-5 max-w-[300px]">
      <CustomPillFilter customPills={[]} onSelectPill={(() => {}) as any} onDuplicatePill={(() => {}) as any} onDeletePill={() => {}} onSavePill={(() => {}) as any} validateCustomPillTitle={(() => {}) as any} fetchSavedFiltersByCustomPillId={(() => {}) as any} learnMoreLink="https://google.com" savedFilterType={SavedFilterType.GERMLINE_SNV_OCCURRENCE} />
    </div>
}`,...(I=(j=v.parameters)==null?void 0:j.docs)==null?void 0:I.source}}};const Ze=["Default","Empty"];export{p as Default,v as Empty,Ze as __namedExportsOrder,Xe as default};
