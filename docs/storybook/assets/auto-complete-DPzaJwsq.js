import{r as l,j as t,c as S}from"./iframe-ic5Qxcay.js";import{_ as g,C as F,a as G,c as X,d as H,b as J}from"./command-by36HEmY.js";import{S as Q}from"./skeleton-GjmtatcU.js";import{u as U}from"./i18n-Cigd5hm4.js";import{u as W}from"./useDebounce-CTf4ZIzC.js";import{X as Y}from"./x-DwTnIsGu.js";import{C as Z}from"./check-kaNqWciF.js";function V(r,f){return f.find(x=>r===x.value)}const $=({options:r=[],placeholder:f,emptyIndicator:x,noSearchIndicator:k,value:n,onChange:s,disabled:j,debounceDelay:I=500,onSearch:d,optionFilterProp:v="label",optionLabelProp:h="label",className:_,loading:c,leftAddon:E,minSearchLength:A=0})=>{const i=l.useRef(null),{t:N}=U(),[y,b]=l.useState(!1),[u,m]=l.useState(V(n,r)),[D,o]=l.useState(""),[w,L]=l.useState(""),p=W(w,I),R=l.useCallback(e=>{const a=i.current;if(a){if(y||b(!0),e.key==="Enter"&&a.value!==""){const T=r.find(M=>M[v]===a.value);T&&(m(T),s==null||s(T.value))}e.key==="Escape"&&a.blur()}},[y,r,s]),z=l.useCallback(()=>{b(!1),o((u==null?void 0:u[h])||"")},[u]),B=l.useCallback(e=>{o(e[h]),m(e),s==null||s(e.value),setTimeout(()=>{var a;(a=i==null?void 0:i.current)==null||a.blur()},0)},[s]);l.useEffect(()=>{if(n&&r.length>0){const e=V(n,r);e&&(m(e),o(e[h]))}},[n,r]),l.useEffect(()=>{!d||!open||p&&(d==null||d(p))},[p,open]);const q=r.filter(e=>e[v].toLowerCase().trim().includes(w.toLowerCase().trim())),C=p.length>=A,K=()=>C?x||t.jsx("div",{className:"text-center text-sm",children:N("common.auto_complete.no_data")}):k||t.jsx("div",{className:"text-center text-sm",children:N("common.auto_complete.type_to_search")});return t.jsxs(g,{onKeyDown:R,className:_,shouldFilter:!1,children:[t.jsx("div",{className:"w-full relative shadow-xs outline-none focus-within:ring-1 focus-within:ring-ring rounded-md",children:t.jsx(F,{ref:i,value:D,onValueChange:c?void 0:e=>{o(e),L(e)},onBlur:z,onFocus:()=>b(!0),placeholder:f,disabled:j,className:"text-sm",leftAddon:E,rightAddon:t.jsx("button",{type:"button",onClick:()=>{m(void 0),o(""),s==null||s("")},className:S("h-[26px] p-0",{hidden:!u||j}),children:t.jsx(Y,{size:16,className:""})})})}),t.jsx("div",{className:"relative",children:t.jsx("div",{className:S("animate-in fade-in-0 zoom-in-95 absolute top-0 z-10 w-full rounded-xl bg-popover outline-none shadow-md",y?"block mt-1":"hidden"),children:t.jsxs(G,{className:"rounded-lg border",children:[c?t.jsx(g.Loading,{children:t.jsx("div",{className:"p-1",children:t.jsx(Q,{className:"h-8 w-full"})})}):null,q.length>0&&!c?t.jsx(X,{children:q.map(e=>t.jsxs(H,{value:e[v],onMouseDown:a=>{a.preventDefault(),a.stopPropagation()},onSelect:()=>B(e),className:"cursor-pointer",children:[t.jsx("span",{className:"flex-1",children:e.label}),e.value===n?t.jsx(Z,{className:"w-4"}):null]},e.value))}):null,!c&&t.jsx(J,{children:K()})]})})})]})};$.__docgenInfo={description:"",methods:[],displayName:"AutoComplete",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:"",defaultValue:{value:"[]",computed:!1}},emptyIndicator:{required:!1,tsType:{name:"ReactNode"},description:""},noSearchIndicator:{required:!1,tsType:{name:"ReactNode"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onSearch:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},debounceDelay:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}},optionLabelProp:{required:!1,tsType:{name:"T"},description:"",defaultValue:{value:"'label'",computed:!1}},optionFilterProp:{required:!1,tsType:{name:"T"},description:"",defaultValue:{value:"'label'",computed:!1}},loading:{required:!1,tsType:{name:"boolean"},description:""},leftAddon:{required:!1,tsType:{name:"ReactNode"},description:""},minSearchLength:{required:!1,tsType:{name:"number"},description:"Minimum length to consider a search has started. @default 0",defaultValue:{value:"0",computed:!1}}}};export{$ as A};
