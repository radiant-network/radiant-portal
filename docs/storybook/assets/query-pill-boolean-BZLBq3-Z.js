import{u as k}from"./i18n-DrzVMC28.js";import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{g as Ze,a as er,Q as le,r as rr,q as tr,b as ce,u as ir,S as nr,i as or,d as ar,e as de,f as sr,h as lr,j as cr,k as dr,l as ur,m as mr}from"./query-builder-remote-BvxINXQp.js";import{r as pr,a as fr,b as yr,c as _r,d as vr}from"./isEqual-BlEvgNkC.js";import{r as u,g as ke}from"./index-CBYaBgW8.js";import{B as h}from"./button-CbhBcUjT.js";import{T as gr,a as hr,b as xr}from"./tooltip-0vX-MTK3.js";import{B as E,T as ue}from"./sqon-DVtAmdMA.js";import{c as v}from"./utils-CDN07tui.js";import{X as qr}from"./x-4HkHZ1eq.js";import{I as br}from"./input-Bj-MPxry.js";import{c as jr}from"./createLucideIcon-B119WVF5.js";import{D as Pr,b as Cr,c as Tr,d as Ir,g as Sr,h as Qr}from"./dialog-TAP2eCwF.js";import{S as Er}from"./separator-ChZWIdMg.js";import{a as C}from"./alert-dialog-store-CZoSfA8g.js";import{C as kr}from"./conditional-wrapper-BBX8pIPQ.js";import{P as Dr,a as wr,b as Nr}from"./popover-CV3rAFUt.js";import{S as g}from"./api-D_2xklaw.js";import{a as Or,E as re,c as Rr,L as Br,b as Ar,G as Fr}from"./less-than-or-equal-operator-icon-D0t0YMSp.js";import{N as Lr}from"./not-in-operator-icon-DdiM-lgK.js";import{C as Vr}from"./chevron-left-D5mG_tkl.js";import{C as Ur}from"./chevron-right-BONyyZTy.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]],De=jr("PencilLine",Mr),At=()=>{const{t:e}=k();return{queryBar:{empty:e("common.query_bar.empty"),deletePopover:{title:e("common.query_bar.delete_popover.title"),cancel:e("common.query_bar.delete_popover.cancel"),ok:e("common.query_bar.delete_popover.ok")},customPill:{createTooltip:e("common.query_bar.custom_pill.create_tooltip"),cannotSaveAsCustomPill:e("common.query_bar.custom_pill.cannot_save_as_custom_pill")},saveDialog:{title:e("common.query_bar.save_dialog.title"),fields:{title:{label:e("common.query_bar.save_dialog.fields.title.label"),placeholder:e("common.query_bar.save_dialog.fields.title.placeholder")}},notice:e("common.query_bar.save_dialog.notice"),cancel:e("common.query_bar.save_dialog.cancel"),ok:e("common.query_bar.save_dialog.ok")}},queryPill:{operator:{changeOperatorTo:e("common.query_pill.operator.change_operator_to"),and:e("common.query_pill.operator.and"),or:e("common.query_pill.operator.or")},facet:r=>e(`common.filters.labels.${r}`,{defaultValue:r}),customPill:{editDialog:{title:e("common.query_pill.custom_pill.edit_dialog.title"),cancel:e("common.query_pill.custom_pill.edit_dialog.cancel"),ok:e("common.query_pill.custom_pill.edit_dialog.ok")},cantBeEmptyDialog:{title:e("common.query_pill.custom_pill.cant_be_empty_dialog.title"),description:e("common.query_pill.custom_pill.cant_be_empty_dialog.description"),ok:e("common.query_pill.custom_pill.cant_be_empty_dialog.ok")},titleExistsDialog:{title:e("common.query_pill.custom_pill.title_exists_dialog.title"),description:e("common.query_pill.custom_pill.title_exists_dialog.description"),ok:e("common.query_pill.custom_pill.title_exists_dialog.ok")},saveDialog:{title:e("common.query_pill.custom_pill.save_dialog.title"),confirmationMessage:e("common.query_pill.custom_pill.save_dialog.confirmation_message"),affectedFilters:e("common.query_pill.custom_pill.save_dialog.affected_filters"),cancel:e("common.query_pill.custom_pill.save_dialog.cancel"),ok:e("common.query_pill.custom_pill.save_dialog.ok")}}},toolbar:{combine:e("common.toolbar.combine"),newQuery:e("common.toolbar.newQuery"),clearAll:e("common.toolbar.clear_all"),clearAllDialog:{title:e("common.toolbar.clear_all_dialog.title"),description:e("common.toolbar.clear_all_dialog.description"),cancel:e("common.toolbar.clear_all_dialog.cancel"),ok:e("common.toolbar.clear_all_dialog.ok")},labels:e("common.toolbar.labels")},savedFilter:{deleteTooltip:e("common.saved_filter.delete_tooltip"),deleteDialog:{title:e("common.saved_filter.delete_dialog.title"),description:e("common.saved_filter.delete_dialog.description"),cancel:e("common.saved_filter.delete_dialog.cancel"),ok:e("common.saved_filter.delete_dialog.ok")},duplicateTooltip:e("common.saved_filter.duplicate_tooltip"),overwriteDialog:{title:e("common.saved_filter.overwrite_dialog.title"),description:e("common.saved_filter.overwrite_dialog.description"),cancel:e("common.saved_filter.overwrite_dialog.cancel"),ok:e("common.saved_filter.overwrite_dialog.ok")},editDialog:{title:e("common.saved_filter.edit_dialog.title"),cancel:e("common.saved_filter.edit_dialog.cancel"),ok:e("common.saved_filter.edit_dialog.ok"),fields:{title:{label:e("common.saved_filter.edit_dialog.fields.title.label"),placeholder:e("common.saved_filter.edit_dialog.fields.title.placeholder")}}},myFilters:e("common.saved_filter.my_filters"),manageFilters:e("common.saved_filter.manage_filters"),manageDialog:{title:e("common.saved_filter.manage_dialog.title"),close:e("common.saved_filter.manage_dialog.close"),lastSaveAt:e("common.saved_filter.manage_dialog.last_save_at")},newFilter:e("common.saved_filter.new_filter"),saveTooltip:{whenEmpty:e("common.saved_filter.save_tooltip.when_empty"),whenDirty:e("common.saved_filter.save_tooltip.when_dirty"),default:e("common.saved_filter.save_tooltip.default")},shareTooltip:{whenNotSaved:e("common.saved_filter.share_tooltip.when_not_saved"),default:e("common.saved_filter.share_tooltip.default")},favoriteTooltip:{set:e("common.saved_filter.favorite_tooltip.set"),unset:e("common.saved_filter.favorite_tooltip.unset")},discardTooltip:e("common.saved_filter.discard_tooltip"),noSavedFilters:e("common.saved_filter.no_saved_filters"),notifications:{created:e("common.saved_filter.notifications.created"),deleted:e("common.saved_filter.notifications.deleted"),updated:e("common.saved_filter.notifications.updated"),errors:{duplicated:e("common.saved_filter.notifications.errors.duplicated"),fetching:e("common.saved_filter.notifications.errors.fetching"),updated:e("common.saved_filter.notifications.errors.updated"),deleted:e("common.saved_filter.notifications.errors.deleted"),created:e("common.saved_filter.notifications.errors.created")}}}}},Ft=["#C31D7E","#328536","#AA00FF","#C2410C","#047ABE","#E5231F","#007D85","#C51162","#7B5A90","#B85C00","#722ED1","#4D7C0F","#9F1239","#2D7D9A","#847545"];function Gr(e){const{t:r}=k(),n={state:{...Ze(),savedFilters:[],selectedQueryIndexes:[]},onStateChange:()=>{},...e},[i]=u.useState(()=>({current:er(n)})),[o,a]=u.useState(()=>n.initialState||n.state);u.useEffect(()=>{var s;o&&((s=e.onStateChange)==null||s.call(e,o))},[o]),u.useEffect(()=>{const s=d=>{var l,m,f,y;if(d.queryBuilderId===e.id){if(d.eventType===ce.ADD_QUERY){const p=d.eventData;(l=e.onQueryCreate)==null||l.call(e,p),p.id===d.value.activeQueryId&&((m=e.onActiveQueryChange)==null||m.call(e,p))}else if(d.eventType===ce.UPDATE_QUERY){const p=d.eventData;(f=e.onQueryUpdate)==null||f.call(e,p),p.id===d.value.activeQueryId&&((y=e.onActiveQueryChange)==null||y.call(e,p))}a(p=>({...p,...e.state,...d.value}))}};return window.addEventListener(le,s),()=>{window.removeEventListener(le,s)}},[e.state]);const c={...o,...e.state};return i.current.setCoreProps(s=>({savedFilterDefaultTitle:r("common.saved_filter.untitled_filter"),...s,...e,state:{...c,queries:e.fieldsToIgnore&&c.queries?rr(c.queries,e.fieldsToIgnore):c.queries},onStateChange:d=>{a(d),tr.setLocalQueryBuilderState(e.id,{value:d,skipEvent:!0})}})),i.current}const we=u.createContext(null);function D(){const e=u.useContext(we);if(!e)throw new Error("useQueryBuilderContext must be used within a QueryBuilderContextProvider");return e}const zr=u.createContext(null);function x(){const e=u.useContext(zr);if(!e)throw new Error("useQueryBuilderDictContext must be used within a QueryBuilderDictContextProvider");return e}function Ne({className:e,...r}){const n=x();return t.jsx("span",{className:v("",e),...r,children:n.queryPill.operator.and})}Ne.__docgenInfo={description:"",methods:[],displayName:"AndOperator"};function Oe({className:e,...r}){const n=x();return t.jsx("span",{className:v("",e),...r,children:n.queryPill.operator.or})}Oe.__docgenInfo={description:"",methods:[],displayName:"OrOperator"};const Re=u.createContext(null);function q(){const e=u.useContext(Re);if(!e)throw new Error("useQueryBarContext must be used within a QueryBarContextProvider");return e}function Be(){const{query:e}=q(),r=x(),n=e.raw().op===E.And;return t.jsx("div",{className:"px-2",onClick:i=>i.stopPropagation(),children:t.jsxs(gr,{children:[t.jsx(hr,{asChild:!0,children:t.jsx(h,{variant:"link",className:"text-current text-sm p-0 h-auto font-normal",onClick:()=>e.changeCombineOperator(n?E.Or:E.And),children:n?t.jsx(Ne,{}):t.jsx(Oe,{})})}),t.jsxs(xr,{children:[r.queryPill.operator.changeOperatorTo,n?r.queryPill.operator.or:r.queryPill.operator.and]})]})})}Be.__docgenInfo={description:"",methods:[],displayName:"QueryCombiner"};function b({children:e,className:r,onRemovePill:n,...i}){return t.jsxs("div",{className:v("flex items-center rounded-xs p-[2px] bg-muted group-data-[query-active=true]/query:bg-primary/25",r),...i,children:[e,t.jsx(h,{iconOnly:!0,variant:"ghost",size:"sm",className:"mr-[2px] ml-[4px] py-[2px] enabled:hover:bg-transparent size-4",onClick:o=>{o.stopPropagation(),n()},children:t.jsx(qr,{})})]})}b.__docgenInfo={description:`Simple wrapper that X remove button

e.g.
In the UI, QueryPillContainer manage [ [....][X] ]
| ┌──────────────────────────────────────────┐ |
| | Loremp Ipsum = [1,2, 3 >][X]      | 389K | |
| └──────────────────────────────────────────┘ |`,methods:[],displayName:"QueryPillContainer",props:{onRemovePill:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Ae=({children:e,icon:r=De,onChangeText:n,...i})=>{const[o,a]=u.useState(!1),c=r;return t.jsx("div",{...i,children:o?t.jsx(br,{defaultValue:e,autoFocus:!0,onBlur:s=>{a(!1),n==null||n(s.currentTarget.value)},className:"max-w-96 w-full",onKeyUp:s=>{s.key==="Enter"&&(a(!1),n==null||n(s.currentTarget.value))}}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:e}),t.jsx(h,{iconOnly:!0,variant:"ghost",onClick:()=>a(!0),children:t.jsx(c,{})})]})})};Ae.__docgenInfo={description:"",methods:[],displayName:"EditableText",props:{icon:{required:!1,tsType:{name:"ReactForwardRefExoticComponent",raw:"React.ForwardRefExoticComponent<Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>>",elements:[{name:"intersection",raw:"Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>",elements:[{name:"Omit",elements:[{name:"LucideProps"},{name:"literal",value:"'ref'"}],raw:"Omit<LucideProps, 'ref'>"},{name:"ReactRefAttributes",raw:"React.RefAttributes<SVGSVGElement>",elements:[{name:"SVGSVGElement"}]}]}]},description:"",defaultValue:{value:"PencilLineIcon",computed:!0}},children:{required:!0,tsType:{name:"string"},description:""},onChangeText:{required:!1,tsType:{name:"signature",type:"function",raw:"(text: string) => void",signature:{arguments:[{type:{name:"string"},name:"text"}],return:{name:"void"}}},description:""}}};function Lt(e,r){C.open({type:"warning",title:r.savedFilter.deleteDialog.title,description:r.savedFilter.deleteDialog.description,cancelProps:{children:r.savedFilter.deleteDialog.cancel},actionProps:{color:"destructive",onClick:()=>e.delete(),children:r.savedFilter.deleteDialog.ok}})}function Vt(e,r){C.open({type:"warning",title:r.savedFilter.overwriteDialog.title,description:r.savedFilter.overwriteDialog.description,cancelProps:{children:r.savedFilter.overwriteDialog.cancel},actionProps:{onClick:()=>e.createSavedFilter(),children:r.savedFilter.overwriteDialog.ok}})}function Kr(e){C.open({type:"error",title:e.queryPill.customPill.cantBeEmptyDialog.title,description:e.queryPill.customPill.cantBeEmptyDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.cantBeEmptyDialog.ok}})}function Xr(e){C.open({type:"error",title:e.queryPill.customPill.titleExistsDialog.title,description:e.queryPill.customPill.titleExistsDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.titleExistsDialog.ok}})}function $r(e,r,n,i){C.open({type:"warning",title:e.queryPill.customPill.saveDialog.title,description:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:e.queryPill.customPill.saveDialog.confirmationMessage.replace("{title}",r)}),!!(n!=null&&n.length)&&t.jsxs("div",{className:"border rounded-sm p-4 space-y-2",children:[t.jsx("div",{className:"font-medium text-foreground",children:e.queryPill.customPill.saveDialog.affectedFilters}),t.jsx("ul",{className:"list-disc list-inside",children:n.map((o,a)=>t.jsx("li",{className:"list-item",children:o.name},a))})]})]}),cancelProps:{children:e.queryPill.customPill.saveDialog.cancel},actionProps:{children:e.queryPill.customPill.saveDialog.ok,onClick:async o=>(o.preventDefault(),i())}})}function Fe({open:e,onOpenChange:r,queryPill:n}){const i=x(),{queryBuilder:o,customPillConfig:a}=D(),c=Gr({id:a==null?void 0:a.queryBuilderEditId,initialState:{activeQueryId:n.queries[0].id,queries:n.queries,savedFilters:[n],selectedQueryIndexes:[]},onCustomPillUpdate:async _=>{var S,Q;return await Promise.resolve((Q=(S=o.coreProps).onCustomPillUpdate)==null?void 0:Q.call(S,_)).then(O=>(o.setState(se=>({...se,queries:ir(se.queries,_)})),r(!1),O))},savedFilterType:n.type}),[s,d]=u.useState(n.name),[l,m]=u.useState(!1),f=c.getQueries()[0],y=c.getSelectedSavedFilter(),p=s!==n.name,j=p||(y==null?void 0:y.isDirty()),I=u.useCallback(_=>{if(_){r(!0);return}c.reset(),r(!1)},[r,c]),N=u.useCallback(async()=>{if(f.isEmpty()){Kr(i);return}if(m(!0),p){const P=await(a==null?void 0:a.validateCustomPillTitle(s));if(P!==void 0&&P===!1){m(!1),Xr(i);return}}const _=await(a==null?void 0:a.fetchSavedFiltersByCustomPillId(n.id).finally(()=>m(!1)));$r(i,s,_,async()=>y==null?void 0:y.save(nr.Query,{name:s}))},[f,y,i,s,n.id,a]);return t.jsx(Pr,{open:e,onOpenChange:I,children:t.jsx(we.Provider,{value:{queryBuilder:c,fetchQueryCount:async()=>0,getQueryReferenceColor:()=>"",showLabels:!0,resolveSyntheticSqon:_=>_},children:t.jsxs(Cr,{className:"flex flex-row gap-0 h-screen w-screen max-w-screen rounded-none border-none sm:rounded-none p-0",children:[t.jsx("aside",{className:"flex flex-col min-w-48 bg-primary",children:t.jsx("span",{className:"italic",children:"TODO Insert filters"})}),t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[t.jsx(Tr,{children:t.jsx(Ir,{children:i.queryPill.customPill.editDialog.title})}),t.jsx(Er,{}),t.jsx("div",{children:t.jsx(Ae,{onChangeText:d,children:s})}),t.jsx("div",{"data-query-active":!0,className:"flex flex-wrap group/query",children:t.jsx(Re.Provider,{value:{query:f},children:t.jsx(ae,{sqon:f.raw(),customPillEditEnabled:!0})})}),t.jsxs(Sr,{className:"mt-5",children:[t.jsx(Qr,{asChild:!0,children:t.jsx(h,{variant:"outline",children:i.queryPill.customPill.editDialog.cancel})}),t.jsx(h,{type:"submit",loading:l,disabled:!j,onClick:N,children:i.queryPill.customPill.editDialog.ok})]})]})})]})})})}Fe.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustomEditDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},queryPill:{required:!0,tsType:{name:"ISavedFilter"},description:""}}};function T({canExpand:e,className:r,classNameContent:n,children:i,clickable:o,...a}){return t.jsx("div",{className:v("bg-background rounded-xs pl-2 text-xs font-medium leading-5 relative",e?"pr-[22px]":"pr-2",r),...a,children:t.jsx("div",{className:v("flex flex-wrap items-center",o?"hover:shadow-[inset_0_-4px_0_-2.5px_black] hover:cursor-pointer":"",n),children:i})})}T.__docgenInfo={description:`Wrapper for QueryPillValues

e.g.
Wrap [ [1,2, 3 >][X] ]
| ┌──────────────────────────────────────────┐ |
| | Loremp Ipsum = [1,2, 3 >][X]      | 389K | |
| └──────────────────────────────────────────┘ |`,methods:[],displayName:"QueryPillValuesContainer",props:{canExpand:{required:!1,tsType:{name:"boolean"},description:""},clickable:{required:!1,tsType:{name:"boolean"},description:""},classNameContent:{required:!1,tsType:{name:"string"},description:""}}};function Le({valueQuery:e}){const{query:r}=q(),[n,i]=u.useState(!1),{name:o,...a}=e,c={id:e.id,name:o,queries:[a],favorite:!1};return t.jsxs(t.Fragment,{children:[t.jsx(b,{onRemovePill:()=>r.removePillById(e.id),children:t.jsxs(T,{className:"pr-1",classNameContent:"space-x-1",children:[t.jsx("span",{children:e.name}),t.jsx(h,{iconOnly:!0,size:"xs",variant:"ghost",className:"size-auto p-[2px]",onClick:()=>i(!0),children:t.jsx(De,{})})]})}),n&&t.jsx(Fe,{open:n,onOpenChange:i,queryPill:c})]})}Le.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustom",props:{valueQuery:{required:!0,tsType:{name:"IValueQuery"},description:""}}};function te({valueFilter:e,operator:r,className:n,...i}){const o=x(),{showLabels:a}=D();return t.jsx("div",{className:v("flex items-center",n),...i,children:(a||or(e)||ar(e))&&t.jsxs(t.Fragment,{children:[t.jsx(ne,{children:o.queryPill.facet(e.content.field)}),t.jsx(ie,{children:r})]})})}const ie=({className:e,children:r,...n})=>t.jsx("span",{className:v("ml-[2px] mr-[4px]",e),...n,children:r});function ne({className:e,children:r,...n}){return t.jsx("span",{className:v("ml-[4px] mr-[2px] text-xs font-medium",e),...n,children:r})}ie.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperatorContainer"};ne.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelContainer"};te.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelOperator",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},operator:{required:!0,tsType:{name:"ReactNode"},description:""}}};function Ve({type:e,size:r,className:n}){switch(e){case g.GreaterThan:return t.jsx(Fr,{size:r,className:n});case g.GreaterThanOrEqualTo:return t.jsx(Ar,{size:r,className:n});case g.LessThan:return t.jsx(Br,{size:r,className:n});case g.LessThanOrEqualTo:return t.jsx(Rr,{size:r,className:n});case g.Between:return t.jsx(re,{size:r,className:n});case g.NotIn:return t.jsx(Lr,{size:r,className:n});default:return t.jsx(Or,{size:r,className:n})}}Ve.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperator",props:{size:{required:!1,tsType:{name:"number"},description:""},type:{required:!0,tsType:{name:"union",raw:"SqonOpEnum | (string & {})",elements:[{name:"SqonOpEnum"},{name:"unknown"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};var R,me;function Ue(){if(me)return R;me=1;function e(r,n,i){var o=-1,a=r.length;n<0&&(n=-n>a?0:a+n),i=i>a?a:i,i<0&&(i+=a),a=n>i?0:i-n>>>0,n>>>=0;for(var c=Array(a);++o<a;)c[o]=r[o+n];return c}return R=e,R}var B,pe;function Wr(){if(pe)return B;pe=1;var e=/\s/;function r(n){for(var i=n.length;i--&&e.test(n.charAt(i)););return i}return B=r,B}var A,fe;function Hr(){if(fe)return A;fe=1;var e=Wr(),r=/^\s+/;function n(i){return i&&i.slice(0,e(i)+1).replace(r,"")}return A=n,A}var F,ye;function Me(){if(ye)return F;ye=1;var e=pr(),r=fr(),n="[object Symbol]";function i(o){return typeof o=="symbol"||r(o)&&e(o)==n}return F=i,F}var L,_e;function Yr(){if(_e)return L;_e=1;var e=Hr(),r=yr(),n=Me(),i=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,s=parseInt;function d(l){if(typeof l=="number")return l;if(n(l))return i;if(r(l)){var m=typeof l.valueOf=="function"?l.valueOf():l;l=r(m)?m+"":m}if(typeof l!="string")return l===0?l:+l;l=e(l);var f=a.test(l);return f||c.test(l)?s(l.slice(2),f?2:8):o.test(l)?i:+l}return L=d,L}var V,ve;function Jr(){if(ve)return V;ve=1;var e=Yr(),r=1/0,n=17976931348623157e292;function i(o){if(!o)return o===0?o:0;if(o=e(o),o===r||o===-r){var a=o<0?-1:1;return a*n}return o===o?o:0}return V=i,V}var U,ge;function Zr(){if(ge)return U;ge=1;var e=Jr();function r(n){var i=e(n),o=i%1;return i===i?o?i-o:i:0}return U=r,U}var M,he;function et(){if(he)return M;he=1;var e=Ue(),r=Zr();function n(i,o,a){return i&&i.length?(o=a||o===void 0?1:r(o),e(i,0,o<0?0:o)):[]}return M=n,M}var rt=et();const tt=ke(rt);function Ge({className:e,...r}){return t.jsx("span",{className:e,...r,children:"&"})}Ge.__docgenInfo={description:"",methods:[],displayName:"IntersectionOperator"};function ze({className:e,...r}){return t.jsx("span",{className:e,...r,children:","})}ze.__docgenInfo={description:"",methods:[],displayName:"UnionOperator"};function w({valueFilter:e,...r}){const[n,i]=u.useState(!1),{t:o,sanitize:a,lazyTranslate:c}=k(),s=e.content.value.length>3,d=n?e.content.value:tt(e.content.value,3);return t.jsxs(T,{canExpand:s,...r,children:[e.content.overrideValuesName?t.jsx("div",{children:t.jsx("span",{children:e.content.overrideValuesName})}):d.map((l,m)=>t.jsxs("div",{children:[t.jsx("span",{children:o(`common.filters.values.${e.content.field}.${a(l)}`,{defaultValue:c(l)})}),d.length-1>m&&(e.op===g.All?t.jsx(Ge,{className:"px-1"}):t.jsx(ze,{className:"px-1"}))]},`${l}-${m}`)),s&&t.jsx("div",{className:"absolute right-1 hover:cursor-pointer",children:n?t.jsx(Vr,{size:16,onClick:l=>{l.preventDefault(),i(!1)}}):t.jsx(Ur,{size:16,onClick:l=>{l.preventDefault(),i(!0)}})})]})}w.__docgenInfo={description:`QueryPillValues display the selected values from the facets.
- Display the first 3 selected values
- Clicking on [>] or [ < ] change the expand state

e.g.
In the UI, QueryPillValues manage [ [1,2, 3 >] ]
| ┌──────────────────────────────────────────┐ |
| | Loremp Ipsum = [1,2, 3 >][X]      | 389K | |
| └──────────────────────────────────────────┘ |`,methods:[],displayName:"QueryPillValues",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function oe({valueFilter:e,customPillEditEnabled:r}){var d;const{query:n}=q(),{queryPillFacetFilterConfig:i}=D(),[o,a]=u.useState(),c=!!(!r&&(i!=null&&i.enable)&&!((d=i==null?void 0:i.blacklistedFacets)!=null&&d.includes(e.content.field))),s=u.useCallback(()=>{i!=null&&i.onFacetClick&&!o&&a(i.onFacetClick(e))},[o,i==null?void 0:i.onFacetClick]);return t.jsxs(b,{onRemovePill:()=>n.removePillByFieldOrIndex(e.content.field),children:[t.jsx(te,{valueFilter:e,operator:t.jsx(Ve,{size:14,type:e.op})}),t.jsx(kr,{condition:c,wrapper:l=>t.jsxs(Dr,{children:[t.jsx(wr,{onClick:s,children:l}),t.jsx(Nr,{align:"start",className:"p-2.5",children:o})]}),children:t.jsx(w,{valueFilter:e,clickable:c})})]})}oe.__docgenInfo={description:`Display a query
- Allow the user to change a query value by clicking on <QueryPillValues />
- onFacetClick is defined inside queryPillFacetFilterConfig on the QueryBuilder component

e.g.
| ┌──────────────────────────────────────────┐ |
| | Loremp Ipsum = [1,2, 3 >][X]      | 389K | |
| └──────────────────────────────────────────┘ |
    ┌───────────────────────────────────────────┐
    |  [ Search...]                             |
    |                                           |
    |  All   None          Dictionary [ON]      |
    |                                           |
    |   ☐  Value 1         389K                 |
    |   ☐  Value 2         374K                 |
    |   ☐  Value 3         343K                 |
    |   ... 19 More                             |
    |                                           |
    |  [ Clear ]   [ Apply ▾ ]                  |
    └───────────────────────────────────────────┘`,methods:[],displayName:"QueryPillField",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};function Ke({groupFilter:e}){const r={},n=u.useMemo(()=>(e.content.forEach(i=>{Object.prototype.hasOwnProperty.call(r,i.content.field)?(r[i.content.field]=de(r[i.content.field]),r[i.content.field].content.value=r[i.content.field].content.value.concat(i.content.value),i.op===ue.In&&e.op===E.And&&e.skipBooleanOperatorCheck&&(r[i.content.field].op=ue.All)):r[i.content.field]=de(i)}),{...e,content:Object.entries(r).map(i=>i[1])}),[e]);return t.jsx(oe,{valueFilter:n.content[0]})}Ke.__docgenInfo={description:"",methods:[],displayName:"QueryPillIsolatedBoolean",props:{groupFilter:{required:!0,tsType:{name:"ISqonGroupFilter"},description:""}}};function Xe({refIndex:e}){const{query:r}=q(),{getQueryReferenceColor:n}=D(),i=n(e);return t.jsx(b,{onRemovePill:()=>r.removePillByFieldOrIndex(e),children:t.jsx(T,{children:t.jsx("span",{style:{color:i},children:`Q${e+1}`})})})}Xe.__docgenInfo={description:"",methods:[],displayName:"QueryPillReference",props:{refIndex:{required:!0,tsType:{name:"number"},description:""}}};function $e(){const{t:e}=k();return t.jsx("div",{children:e("common.components.query_pill_remote")})}$e.__docgenInfo={description:"",methods:[],displayName:"QueryPillRemoteComponent"};var G,xe;function it(){if(xe)return G;xe=1;function e(r,n){for(var i=-1,o=r==null?0:r.length,a=Array(o);++i<o;)a[i]=n(r[i],i,r);return a}return G=e,G}var z,qe;function nt(){if(qe)return z;qe=1;var e=_r(),r=it(),n=vr(),i=Me(),o=e?e.prototype:void 0,a=o?o.toString:void 0;function c(s){if(typeof s=="string")return s;if(n(s))return r(s,c)+"";if(i(s))return a?a.call(s):"";var d=s+"";return d=="0"&&1/s==-1/0?"-0":d}return z=c,z}var K,be;function We(){if(be)return K;be=1;var e=nt();function r(n){return n==null?"":e(n)}return K=r,K}var X,je;function ot(){if(je)return X;je=1;var e=Ue();function r(n,i,o){var a=n.length;return o=o===void 0?a:o,!i&&o>=a?n:e(n,i,o)}return X=r,X}var $,Pe;function He(){if(Pe)return $;Pe=1;var e="\\ud800-\\udfff",r="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=r+n+i,a="\\ufe0e\\ufe0f",c="\\u200d",s=RegExp("["+c+e+o+a+"]");function d(l){return s.test(l)}return $=d,$}var W,Ce;function at(){if(Ce)return W;Ce=1;function e(r){return r.split("")}return W=e,W}var H,Te;function st(){if(Te)return H;Te=1;var e="\\ud800-\\udfff",r="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=r+n+i,a="\\ufe0e\\ufe0f",c="["+e+"]",s="["+o+"]",d="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+d+")",m="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",j=l+"?",I="["+a+"]?",N="(?:"+p+"(?:"+[m,f,y].join("|")+")"+I+j+")*",_=I+j+N,P="(?:"+[m+s+"?",s,f,y,c].join("|")+")",S=RegExp(d+"(?="+d+")|"+P+_,"g");function Q(O){return O.match(S)||[]}return H=Q,H}var Y,Ie;function lt(){if(Ie)return Y;Ie=1;var e=at(),r=He(),n=st();function i(o){return r(o)?n(o):e(o)}return Y=i,Y}var J,Se;function ct(){if(Se)return J;Se=1;var e=ot(),r=He(),n=lt(),i=We();function o(a){return function(c){c=i(c);var s=r(c)?n(c):void 0,d=s?s[0]:c.charAt(0),l=s?e(s,1).join(""):c.slice(1);return d[a]()+l}}return J=o,J}var Z,Qe;function dt(){if(Qe)return Z;Qe=1;var e=ct(),r=e("toUpperCase");return Z=r,Z}var ee,Ee;function ut(){if(Ee)return ee;Ee=1;var e=We(),r=dt();function n(i){return r(e(i).toLowerCase())}return ee=n,ee}var mt=ut();const pt=ke(mt);function Ye({valueFilter:e}){const{query:r}=q(),n=x();return t.jsxs(b,{onRemovePill:()=>r.removePillByFieldOrIndex(e.content.field),children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(ne,{children:e.content.index?pt(e.content.index):n.queryPill.facet(e.content.field)}),t.jsx(ie,{children:t.jsx(re,{size:14})})]}),t.jsx(T,{children:t.jsx(w,{valueFilter:e})})]})}Ye.__docgenInfo={description:"",methods:[],displayName:"QueryPillSet",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function Je({valueFilter:e}){const{query:r}=q();return t.jsxs(b,{onRemovePill:()=>r.removePillByFieldOrIndex(e.content.field),children:[t.jsx(te,{valueFilter:e,operator:t.jsx(re,{size:14,type:e.op})}),t.jsx(w,{valueFilter:e})]})}Je.__docgenInfo={description:"",methods:[],displayName:"QueryPillUploadList",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function ft(e,r){return e.skipBooleanOperatorCheck?t.jsx(Ke,{groupFilter:e}):sr(e)?t.jsx(Le,{valueQuery:e}):lr(e)?t.jsx(ae,{sqon:e}):cr(e)?t.jsx(Xe,{refIndex:e}):dr(e)?t.jsx(Ye,{valueFilter:e}):ur(e)?t.jsx(Je,{valueFilter:e}):mr(e)?t.jsx($e,{}):t.jsx(oe,{valueFilter:e,customPillEditEnabled:r})}function ae({sqon:e,customPillEditEnabled:r}){return t.jsx(t.Fragment,{children:e.content.map((n,i)=>t.jsxs("div",{className:"flex items-center py-[2px]",children:[ft(n,r),yt(e.content,i)&&t.jsx(Be,{})]},i))})}const yt=(e,r)=>e.length-1>r;ae.__docgenInfo={description:"",methods:[],displayName:"QueryPillBoolean",props:{sqon:{required:!0,tsType:{name:"ISyntheticSqon"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};export{De as P,zr as Q,Gr as a,we as b,Fe as c,Ft as d,q as e,x as f,D as g,Re as h,ae as i,pt as j,Vt as k,Lt as o,At as u};
