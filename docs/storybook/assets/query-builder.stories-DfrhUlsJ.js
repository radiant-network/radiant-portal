import{g as te,r as c,j as t,c as P,b as D,d as w,e as Q,a as E,S as cr,f as dr}from"./iframe-ZUKLh1y0.js";import{u as V}from"./i18n-Dldl3Adp.js";import{c as ur,A as mr,a as fr,b as pr}from"./accordion-BrxG3Pqk.js";import{C as He}from"./card-BJaUWu9Z.js";import{S as $e}from"./separator-BkcTXRGq.js";import{S as F}from"./skeleton-DVKLhB9l.js";import{g as hr,c as yr,Q as Qe,r as vr,q as M,a as Fe,u as xr,S as re,i as gr,b as jr,d as Ne,e as br,f as Je,h as _r,j as Cr,k as Sr,l as qr,m as Pr,v as A}from"./query-builder-remote-DaswBZOG.js";import{F as Dr}from"./isEqual-FbUKspK5.js";import{B as f,a as Ge}from"./button-Dpxyi3qN.js";import{B as N,T as Te}from"./sqon-C0f5UNeg.js";import{X as wr}from"./x-CROx2gUU.js";import{I as ye}from"./input-CUp2Ia9w.js";import{D as ne,b as ie,c as ae,d as oe,g as se,h as le,f as ve}from"./dialog-DMmB8kc7.js";import{C as Qr}from"./conditional-wrapper-BBX8pIPQ.js";import{P as Ke,a as Ze,b as et,c as Ie}from"./popover-HBAGTgrm.js";import{S as j}from"./api-Bd3rgHIX.js";import{a as Fr,E as xe,c as Nr,L as Tr,b as Ir,G as Ar}from"./less-than-or-equal-operator-icon-DDbjGlB_.js";import{N as kr}from"./not-in-operator-icon-DWYgObez.js";import{t as Br}from"./take-DqgViHFE.js";import{C as Mr}from"./chevron-left-CTURWhXI.js";import{C as Or}from"./chevron-right-B_JXpp1L.js";import{c as pe,u as tt,s as rt,F as nt,a as it,b as at,d as ot,e as st,f as lt,o as ct,g as dt,P as ut,t as k,n as ge,h as Ae,i as Er,j as Lr,m as ke,k as $,l as O,p as Rr,q as Ur,r as zr,v as R,w as U,x as Vr}from"./en-US-eMuFBMs1.js";import{T as mt,a as Wr,L as Xr,S as Yr}from"./list-item-with-action-ByHuEuXY.js";import{n as Hr}from"./number-format-B1bJFRvZ.js";import{C as $r}from"./checkbox-CeTobp7-.js";import{A as Jr}from"./action-button-CS0baHSH.js";import{S as Gr}from"./switch-DUa-S6yM.js";import{t as q}from"./index-B6ft-1rc.js";import{S as Kr}from"./star-DV1HRh6b.js";import{S as Zr,a as en,c as tn,d as rn,g as nn}from"./select-Du_1k5k2.js";import{U as an}from"./user-Cu4VtUhv.js";import"./preload-helper-Dp1pzeXC.js";import"./index-BlRbp4g_.js";import"./index-BC806cF2.js";import"./chevron-down-HLnOMn69.js";import"./index-CG-ZRbHY.js";import"./check-tJGMWMh_.js";import"./_baseSlice-DkFNCYmM.js";import"./toString-C3XxALAV.js";import"./label-CQtELn_-.js";import"./hover-card-BqmLIpxE.js";import"./pen-BfPbwJjY.js";import"./index-CZZH5dTU.js";import"./dropdown-menu-lWueQF7S.js";import"./circle-DQ25Nq_E.js";import"./chevron-up-B-mKc_Ib.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],sn=te("Folder",on);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]],je=te("PencilLine",ln);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],dn=te("RotateCcw",cn);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ft=te("Save",un),mn=()=>{const{t:e}=V();return{queryBar:{empty:e("common.query_bar.empty"),deletePopover:{title:e("common.query_bar.delete_popover.title"),cancel:e("common.query_bar.delete_popover.cancel"),ok:e("common.query_bar.delete_popover.ok")},customPill:{createTooltip:e("common.query_bar.custom_pill.create_tooltip"),cannotSaveAsCustomPill:e("common.query_bar.custom_pill.cannot_save_as_custom_pill")},saveDialog:{title:e("common.query_bar.save_dialog.title"),fields:{title:{label:e("common.query_bar.save_dialog.fields.title.label"),placeholder:e("common.query_bar.save_dialog.fields.title.placeholder")}},notice:e("common.query_bar.save_dialog.notice"),cancel:e("common.query_bar.save_dialog.cancel"),ok:e("common.query_bar.save_dialog.ok")}},queryPill:{operator:{changeOperatorTo:e("common.query_pill.operator.change_operator_to"),and:e("common.query_pill.operator.and"),or:e("common.query_pill.operator.or")},facet:n=>e(`common.filters.labels.${n}`,{defaultValue:n}),customPill:{editDialog:{title:e("common.query_pill.custom_pill.edit_dialog.title"),cancel:e("common.query_pill.custom_pill.edit_dialog.cancel"),ok:e("common.query_pill.custom_pill.edit_dialog.ok")},cantBeEmptyDialog:{title:e("common.query_pill.custom_pill.cant_be_empty_dialog.title"),description:e("common.query_pill.custom_pill.cant_be_empty_dialog.description"),ok:e("common.query_pill.custom_pill.cant_be_empty_dialog.ok")},titleExistsDialog:{title:e("common.query_pill.custom_pill.title_exists_dialog.title"),description:e("common.query_pill.custom_pill.title_exists_dialog.description"),ok:e("common.query_pill.custom_pill.title_exists_dialog.ok")},saveDialog:{title:e("common.query_pill.custom_pill.save_dialog.title"),confirmationMessage:e("common.query_pill.custom_pill.save_dialog.confirmation_message"),affectedFilters:e("common.query_pill.custom_pill.save_dialog.affected_filters"),cancel:e("common.query_pill.custom_pill.save_dialog.cancel"),ok:e("common.query_pill.custom_pill.save_dialog.ok")}}},toolbar:{combine:e("common.toolbar.combine"),newQuery:e("common.toolbar.newQuery"),clearAll:e("common.toolbar.clear_all"),clearAllDialog:{title:e("common.toolbar.clear_all_dialog.title"),description:e("common.toolbar.clear_all_dialog.description"),cancel:e("common.toolbar.clear_all_dialog.cancel"),ok:e("common.toolbar.clear_all_dialog.ok")},labels:e("common.toolbar.labels")},savedFilter:{deleteTooltip:e("common.saved_filter.delete_tooltip"),deleteDialog:{title:e("common.saved_filter.delete_dialog.title"),description:e("common.saved_filter.delete_dialog.description"),cancel:e("common.saved_filter.delete_dialog.cancel"),ok:e("common.saved_filter.delete_dialog.ok")},duplicateTooltip:e("common.saved_filter.duplicate_tooltip"),overwriteDialog:{title:e("common.saved_filter.overwrite_dialog.title"),description:e("common.saved_filter.overwrite_dialog.description"),cancel:e("common.saved_filter.overwrite_dialog.cancel"),ok:e("common.saved_filter.overwrite_dialog.ok")},editDialog:{title:e("common.saved_filter.edit_dialog.title"),cancel:e("common.saved_filter.edit_dialog.cancel"),ok:e("common.saved_filter.edit_dialog.ok"),fields:{title:{label:e("common.saved_filter.edit_dialog.fields.title.label"),placeholder:e("common.saved_filter.edit_dialog.fields.title.placeholder")}}},myFilters:e("common.saved_filter.my_filters"),manageFilters:e("common.saved_filter.manage_filters"),manageDialog:{title:e("common.saved_filter.manage_dialog.title"),close:e("common.saved_filter.manage_dialog.close"),lastSaveAt:e("common.saved_filter.manage_dialog.last_save_at")},newFilter:e("common.saved_filter.new_filter"),saveTooltip:{whenEmpty:e("common.saved_filter.save_tooltip.when_empty"),whenDirty:e("common.saved_filter.save_tooltip.when_dirty"),default:e("common.saved_filter.save_tooltip.default")},shareTooltip:{whenNotSaved:e("common.saved_filter.share_tooltip.when_not_saved"),default:e("common.saved_filter.share_tooltip.default")},favoriteTooltip:{set:e("common.saved_filter.favorite_tooltip.set"),unset:e("common.saved_filter.favorite_tooltip.unset")},discardTooltip:e("common.saved_filter.discard_tooltip"),noSavedFilters:e("common.saved_filter.no_saved_filters"),notifications:{created:e("common.saved_filter.notifications.created"),deleted:e("common.saved_filter.notifications.deleted"),updated:e("common.saved_filter.notifications.updated"),errors:{duplicated:e("common.saved_filter.notifications.errors.duplicated"),fetching:e("common.saved_filter.notifications.errors.fetching"),updated:e("common.saved_filter.notifications.errors.updated"),deleted:e("common.saved_filter.notifications.errors.deleted"),created:e("common.saved_filter.notifications.errors.created")}}}}},pt=["#C31D7E","#328536","#AA00FF","#C2410C","#047ABE","#E5231F","#007D85","#C51162","#7B5A90","#B85C00","#722ED1","#4D7C0F","#9F1239","#2D7D9A","#847545"];function ht(e){const{t:n}=V(),r={state:{...hr(),savedFilters:[],selectedQueryIndexes:[]},onStateChange:()=>{},...e},[i]=c.useState(()=>({current:yr(r)})),[a,o]=c.useState(()=>r.initialState||r.state);c.useEffect(()=>{var s;a&&((s=e.onStateChange)==null||s.call(e,a))},[a]),c.useEffect(()=>{const s=d=>{var p,m,g,h;if(d.queryBuilderId===e.id){if(d.eventType===Fe.ADD_QUERY){const x=d.eventData;(p=e.onQueryCreate)==null||p.call(e,x),x.id===d.value.activeQueryId&&((m=e.onActiveQueryChange)==null||m.call(e,x))}else if(d.eventType===Fe.UPDATE_QUERY){const x=d.eventData;(g=e.onQueryUpdate)==null||g.call(e,x),x.id===d.value.activeQueryId&&((h=e.onActiveQueryChange)==null||h.call(e,x))}o(x=>({...x,...e.state,...d.value}))}};return window.addEventListener(Qe,s),()=>{window.removeEventListener(Qe,s)}},[e.state]);const l={...a,...e.state};return i.current.setCoreProps(s=>({savedFilterDefaultTitle:n("common.saved_filter.untitled_filter"),...s,...e,state:{...l,queries:e.fieldsToIgnore&&l.queries?vr(l.queries,e.fieldsToIgnore):l.queries},onStateChange:d=>{o(d),M.setLocalQueryBuilderState(e.id,{value:d,skipEvent:!0})}})),i.current}function ue(e){return e&&typeof e=="object"&&!Array.isArray(e)}function yt(e,n){const r={...e},i=n;return ue(e)&&ue(n)&&Object.keys(n).forEach(a=>{ue(i[a])&&a in e?r[a]=yt(r[a],i[a]):r[a]=i[a]}),r}const be=c.createContext(null);function v(){const e=c.useContext(be);if(!e)throw new Error("useQueryBuilderContext must be used within a QueryBuilderContextProvider");return e}const vt=c.createContext(null);function y(){const e=c.useContext(vt);if(!e)throw new Error("useQueryBuilderDictContext must be used within a QueryBuilderDictContextProvider");return e}function xt({className:e,...n}){const r=y();return t.jsx("span",{className:P("",e),...n,children:r.queryPill.operator.and})}xt.__docgenInfo={description:"",methods:[],displayName:"AndOperator"};function gt({className:e,...n}){const r=y();return t.jsx("span",{className:P("",e),...n,children:r.queryPill.operator.or})}gt.__docgenInfo={description:"",methods:[],displayName:"OrOperator"};const _e=c.createContext(null);function C(){const e=c.useContext(_e);if(!e)throw new Error("useQueryBarContext must be used within a QueryBarContextProvider");return e}function jt(){const{query:e}=C(),n=y(),r=e.raw().op===N.And;return t.jsx("div",{className:"px-2",onClick:i=>i.stopPropagation(),children:t.jsxs(D,{children:[t.jsx(w,{asChild:!0,children:t.jsx(f,{variant:"link",className:"text-current text-sm p-0 h-auto font-normal",onClick:()=>e.changeCombineOperator(r?N.Or:N.And),children:r?t.jsx(xt,{}):t.jsx(gt,{})})}),t.jsxs(Q,{children:[n.queryPill.operator.changeOperatorTo,r?n.queryPill.operator.or:n.queryPill.operator.and]})]})})}jt.__docgenInfo={description:"",methods:[],displayName:"QueryCombiner"};function L({children:e,className:n,onRemovePill:r,...i}){return t.jsxs("div",{className:P("flex items-center rounded-xs p-[2px] bg-muted group-data-[query-active=true]/query:bg-primary/25",n),...i,children:[e,t.jsx(f,{iconOnly:!0,variant:"ghost",size:"sm",className:"mr-[2px] ml-[4px] py-[2px] enabled:hover:bg-transparent size-4",onClick:a=>{a.stopPropagation(),r()},children:t.jsx(wr,{})})]})}L.__docgenInfo={description:`Simple wrapper that X remove button

e.g.
In the UI, QueryPillContainer manage [ [....][X] ]
| ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê |
| | Loremp Ipsum = [1,2, 3 >][X]      | 389K | |
| ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò |`,methods:[],displayName:"QueryPillContainer",props:{onRemovePill:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const bt=({children:e,icon:n=je,onChangeText:r,...i})=>{const[a,o]=c.useState(!1),l=n;return t.jsx("div",{...i,children:a?t.jsx(ye,{defaultValue:e,autoFocus:!0,onBlur:s=>{o(!1),r==null||r(s.currentTarget.value)},className:"max-w-96 w-full",onKeyUp:s=>{s.key==="Enter"&&(o(!1),r==null||r(s.currentTarget.value))}}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:e}),t.jsx(f,{iconOnly:!0,variant:"ghost",onClick:()=>o(!0),children:t.jsx(l,{})})]})})};bt.__docgenInfo={description:"",methods:[],displayName:"EditableText",props:{icon:{required:!1,tsType:{name:"ReactForwardRefExoticComponent",raw:"React.ForwardRefExoticComponent<Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>>",elements:[{name:"intersection",raw:"Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>",elements:[{name:"Omit",elements:[{name:"LucideProps"},{name:"literal",value:"'ref'"}],raw:"Omit<LucideProps, 'ref'>"},{name:"ReactRefAttributes",raw:"React.RefAttributes<SVGSVGElement>",elements:[{name:"SVGSVGElement"}]}]}]},description:"",defaultValue:{value:"PencilLineIcon",computed:!0}},children:{required:!0,tsType:{name:"string"},description:""},onChangeText:{required:!1,tsType:{name:"signature",type:"function",raw:"(text: string) => void",signature:{arguments:[{type:{name:"string"},name:"text"}],return:{name:"void"}}},description:""}}};function _t(e,n){E.open({type:"warning",title:n.savedFilter.deleteDialog.title,description:n.savedFilter.deleteDialog.description,cancelProps:{children:n.savedFilter.deleteDialog.cancel},actionProps:{color:"destructive",onClick:()=>e.delete(),children:n.savedFilter.deleteDialog.ok}})}function Ct(e,n){E.open({type:"warning",title:n.savedFilter.overwriteDialog.title,description:n.savedFilter.overwriteDialog.description,cancelProps:{children:n.savedFilter.overwriteDialog.cancel},actionProps:{onClick:()=>e.createSavedFilter(),children:n.savedFilter.overwriteDialog.ok}})}function fn(e){E.open({type:"error",title:e.queryPill.customPill.cantBeEmptyDialog.title,description:e.queryPill.customPill.cantBeEmptyDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.cantBeEmptyDialog.ok}})}function pn(e){E.open({type:"error",title:e.queryPill.customPill.titleExistsDialog.title,description:e.queryPill.customPill.titleExistsDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.titleExistsDialog.ok}})}function hn(e,n,r,i){E.open({type:"warning",title:e.queryPill.customPill.saveDialog.title,description:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:e.queryPill.customPill.saveDialog.confirmationMessage.replace("{title}",n)}),!!(r!=null&&r.length)&&t.jsxs("div",{className:"border rounded-sm p-4 space-y-2",children:[t.jsx("div",{className:"font-medium text-foreground",children:e.queryPill.customPill.saveDialog.affectedFilters}),t.jsx("ul",{className:"list-disc list-inside",children:r.map((a,o)=>t.jsx("li",{className:"list-item",children:a.name},o))})]})]}),cancelProps:{children:e.queryPill.customPill.saveDialog.cancel},actionProps:{children:e.queryPill.customPill.saveDialog.ok,onClick:async a=>(a.preventDefault(),i())}})}function St({open:e,onOpenChange:n,queryPill:r}){const i=y(),{queryBuilder:a,customPillConfig:o}=v(),l=ht({id:o==null?void 0:o.queryBuilderEditId,initialState:{activeQueryId:r.queries[0].id,queries:r.queries,savedFilters:[r],selectedQueryIndexes:[]},onCustomPillUpdate:async S=>{var H,I;return await Promise.resolve((I=(H=a.coreProps).onCustomPillUpdate)==null?void 0:I.call(H,S)).then(lr=>(a.setState(we=>({...we,queries:xr(we.queries,S)})),n(!1),lr))},savedFilterType:r.type}),[s,d]=c.useState(r.name),[p,m]=c.useState(!1),g=l.getQueries()[0],h=l.getSelectedSavedFilter(),x=s!==r.name,b=x||(h==null?void 0:h.isDirty()),T=c.useCallback(S=>{if(S){n(!0);return}l.reset(),n(!1)},[n,l]),Y=c.useCallback(async()=>{if(g.isEmpty()){fn(i);return}if(m(!0),x){const B=await(o==null?void 0:o.validateCustomPillTitle(s));if(B!==void 0&&B===!1){m(!1),pn(i);return}}const S=await(o==null?void 0:o.fetchSavedFiltersByCustomPillId(r.id).finally(()=>m(!1)));hn(i,s,S,async()=>h==null?void 0:h.save(re.Query,{name:s}))},[g,h,i,s,r.id,o]);return t.jsx(ne,{open:e,onOpenChange:T,children:t.jsx(be.Provider,{value:{queryBuilder:l,fetchQueryCount:async()=>0,getQueryReferenceColor:()=>"",showLabels:!0,resolveSyntheticSqon:S=>S},children:t.jsxs(ie,{className:"flex flex-row gap-0 h-screen w-screen max-w-screen rounded-none border-none sm:rounded-none p-0",children:[t.jsx("aside",{className:"flex flex-col min-w-48 bg-primary",children:t.jsx("span",{className:"italic",children:"TODO Insert filters"})}),t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[t.jsx(ae,{children:t.jsx(oe,{children:i.queryPill.customPill.editDialog.title})}),t.jsx($e,{}),t.jsx("div",{children:t.jsx(bt,{onChangeText:d,children:s})}),t.jsx("div",{"data-query-active":!0,className:"flex flex-wrap group/query",children:t.jsx(_e.Provider,{value:{query:g},children:t.jsx(de,{sqon:g.raw(),customPillEditEnabled:!0})})}),t.jsxs(se,{className:"mt-5",children:[t.jsx(le,{asChild:!0,children:t.jsx(f,{variant:"outline",children:i.queryPill.customPill.editDialog.cancel})}),t.jsx(f,{type:"submit",loading:p,disabled:!b,onClick:Y,children:i.queryPill.customPill.editDialog.ok})]})]})})]})})})}St.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustomEditDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},queryPill:{required:!0,tsType:{name:"ISavedFilter"},description:""}}};function W({canExpand:e,className:n,classNameContent:r,children:i,clickable:a,...o}){return t.jsx("div",{className:P("bg-background rounded-xs pl-2 text-xs font-medium leading-5 relative",e?"pr-[22px]":"pr-2",n),...o,children:t.jsx("div",{className:P("flex flex-wrap items-center",a?"hover:shadow-[inset_0_-4px_0_-2.5px_black] hover:cursor-pointer":"",r),children:i})})}W.__docgenInfo={description:`Wrapper for QueryPillValues

e.g.
Wrap [ [1,2, 3 >][X] ]
| ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê |
| | Loremp Ipsum = [1,2, 3 >][X]      | 389K | |
| ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò |`,methods:[],displayName:"QueryPillValuesContainer",props:{canExpand:{required:!1,tsType:{name:"boolean"},description:""},clickable:{required:!1,tsType:{name:"boolean"},description:""},classNameContent:{required:!1,tsType:{name:"string"},description:""}}};function qt({valueQuery:e}){const{query:n}=C(),[r,i]=c.useState(!1),{name:a,...o}=e,l={id:e.id,name:a,queries:[o],favorite:!1};return t.jsxs(t.Fragment,{children:[t.jsx(L,{onRemovePill:()=>n.removePillById(e.id),children:t.jsxs(W,{className:"pr-1",classNameContent:"space-x-1",children:[t.jsx("span",{children:e.name}),t.jsx(f,{iconOnly:!0,size:"xs",variant:"ghost",className:"size-auto p-[2px]",onClick:()=>i(!0),children:t.jsx(je,{})})]})}),r&&t.jsx(St,{open:r,onOpenChange:i,queryPill:l})]})}qt.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustom",props:{valueQuery:{required:!0,tsType:{name:"IValueQuery"},description:""}}};function Ce({valueFilter:e,operator:n,className:r,...i}){const a=y(),{showLabels:o}=v();return t.jsx("div",{className:P("flex items-center",r),...i,children:(o||gr(e)||jr(e))&&t.jsxs(t.Fragment,{children:[t.jsx(qe,{children:a.queryPill.facet(e.content.field)}),t.jsx(Se,{children:n})]})})}const Se=({className:e,children:n,...r})=>t.jsx("span",{className:P("ml-[2px] mr-[4px]",e),...r,children:n});function qe({className:e,children:n,...r}){return t.jsx("span",{className:P("ml-[4px] mr-[2px] text-xs font-medium",e),...r,children:n})}Se.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperatorContainer"};qe.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelContainer"};Ce.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelOperator",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},operator:{required:!0,tsType:{name:"ReactNode"},description:""}}};function Pt({type:e,size:n,className:r}){switch(e){case j.GreaterThan:return t.jsx(Ar,{size:n,className:r});case j.GreaterThanOrEqualTo:return t.jsx(Ir,{size:n,className:r});case j.LessThan:return t.jsx(Tr,{size:n,className:r});case j.LessThanOrEqualTo:return t.jsx(Nr,{size:n,className:r});case j.Between:return t.jsx(xe,{size:n,className:r});case j.NotIn:return t.jsx(kr,{size:n,className:r});default:return t.jsx(Fr,{size:n,className:r})}}Pt.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperator",props:{size:{required:!1,tsType:{name:"number"},description:""},type:{required:!0,tsType:{name:"union",raw:"SqonOpEnum | (string & {})",elements:[{name:"SqonOpEnum"},{name:"unknown"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};function Dt({className:e,...n}){return t.jsx("span",{className:e,...n,children:"&"})}Dt.__docgenInfo={description:"",methods:[],displayName:"IntersectionOperator"};function wt({className:e,...n}){return t.jsx("span",{className:e,...n,children:","})}wt.__docgenInfo={description:"",methods:[],displayName:"UnionOperator"};function ce({valueFilter:e,...n}){const[r,i]=c.useState(!1),{t:a,sanitize:o,lazyTranslate:l}=V(),s=e.content.value.length>3,d=r?e.content.value:Br(e.content.value,3);return t.jsxs(W,{canExpand:s,...n,children:[e.content.overrideValuesName?t.jsx("div",{children:t.jsx("span",{children:e.content.overrideValuesName})}):d.map((p,m)=>t.jsxs("div",{children:[t.jsx("span",{children:a(`common.filters.values.${e.content.field}.${o(p)}`,{defaultValue:l(p)})}),d.length-1>m&&(e.op===j.All?t.jsx(Dt,{className:"px-1"}):t.jsx(wt,{className:"px-1"}))]},`${p}-${m}`)),s&&t.jsx("div",{className:"absolute right-1 hover:cursor-pointer",children:r?t.jsx(Mr,{size:16,onClick:p=>{p.preventDefault(),i(!1)}}):t.jsx(Or,{size:16,onClick:p=>{p.preventDefault(),i(!0)}})})]})}ce.__docgenInfo={description:`QueryPillValues display the selected values from the facets.
- Display the first 3 selected values
- Clicking on [>] or [ < ] change the expand state

e.g.
In the UI, QueryPillValues manage [ [1,2, 3 >] ]
| ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê |
| | Loremp Ipsum = [1,2, 3 >][X]      | 389K | |
| ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò |`,methods:[],displayName:"QueryPillValues",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function Pe({valueFilter:e,customPillEditEnabled:n}){var d;const{query:r}=C(),{queryPillFacetFilterConfig:i}=v(),[a,o]=c.useState(),l=!!(!n&&(i!=null&&i.enable)&&!((d=i==null?void 0:i.blacklistedFacets)!=null&&d.includes(e.content.field))),s=c.useCallback(()=>{i!=null&&i.onFacetClick&&!a&&o(i.onFacetClick(e))},[a,i==null?void 0:i.onFacetClick]);return t.jsxs(L,{onRemovePill:()=>r.removePillByFieldOrIndex(e.content.field),children:[t.jsx(Ce,{valueFilter:e,operator:t.jsx(Pt,{size:14,type:e.op})}),t.jsx(Qr,{condition:l,wrapper:p=>t.jsxs(Ke,{children:[t.jsx(Ze,{onClick:s,children:p}),t.jsx(et,{align:"start",className:"p-2.5",children:a})]}),children:t.jsx(ce,{valueFilter:e,clickable:l})})]})}Pe.__docgenInfo={description:`Display a query
- Allow the user to change a query value by clicking on <QueryPillValues />
- onFacetClick is defined inside queryPillFacetFilterConfig on the QueryBuilder component

e.g.
| ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê |
| | Loremp Ipsum = [1,2, 3 >][X]      | 389K | |
| ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò |
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    |  [ Search...]                             |
    |                                           |
    |  All   None          Dictionary [ON]      |
    |                                           |
    |   ‚òê  Value 1         389K                 |
    |   ‚òê  Value 2         374K                 |
    |   ‚òê  Value 3         343K                 |
    |   ... 19 More                             |
    |                                           |
    |  [ Clear ]   [ Apply ‚ñæ ]                  |
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò`,methods:[],displayName:"QueryPillField",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};function Qt({groupFilter:e}){const n={},r=c.useMemo(()=>(e.content.forEach(i=>{Object.prototype.hasOwnProperty.call(n,i.content.field)?(n[i.content.field]=Ne(n[i.content.field]),n[i.content.field].content.value=n[i.content.field].content.value.concat(i.content.value),i.op===Te.In&&e.op===N.And&&e.skipBooleanOperatorCheck&&(n[i.content.field].op=Te.All)):n[i.content.field]=Ne(i)}),{...e,content:Object.entries(n).map(i=>i[1])}),[e]);return t.jsx(Pe,{valueFilter:r.content[0]})}Qt.__docgenInfo={description:"",methods:[],displayName:"QueryPillIsolatedBoolean",props:{groupFilter:{required:!0,tsType:{name:"ISqonGroupFilter"},description:""}}};function Ft({refIndex:e}){const{query:n}=C(),{getQueryReferenceColor:r}=v(),i=r(e);return t.jsx(L,{onRemovePill:()=>n.removePillByFieldOrIndex(e),children:t.jsx(W,{children:t.jsx("span",{style:{color:i},children:`Q${e+1}`})})})}Ft.__docgenInfo={description:"",methods:[],displayName:"QueryPillReference",props:{refIndex:{required:!0,tsType:{name:"number"},description:""}}};function Nt(){const{t:e}=V();return t.jsx("div",{children:e("common.components.query_pill_remote")})}Nt.__docgenInfo={description:"",methods:[],displayName:"QueryPillRemoteComponent"};function Tt({valueFilter:e}){const{query:n}=C(),r=y();return t.jsxs(L,{onRemovePill:()=>n.removePillByFieldOrIndex(e.content.field),children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(qe,{children:e.content.index?pe(e.content.index):r.queryPill.facet(e.content.field)}),t.jsx(Se,{children:t.jsx(xe,{size:14})})]}),t.jsx(W,{children:t.jsx(ce,{valueFilter:e})})]})}Tt.__docgenInfo={description:"",methods:[],displayName:"QueryPillSet",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function It({valueFilter:e}){const{query:n}=C();return t.jsxs(L,{onRemovePill:()=>n.removePillByFieldOrIndex(e.content.field),children:[t.jsx(Ce,{valueFilter:e,operator:t.jsx(xe,{size:14,type:e.op})}),t.jsx(ce,{valueFilter:e})]})}It.__docgenInfo={description:"",methods:[],displayName:"QueryPillUploadList",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function yn(e,n){return e.skipBooleanOperatorCheck?t.jsx(Qt,{groupFilter:e}):br(e)?t.jsx(qt,{valueQuery:e}):Je(e)?t.jsx(de,{sqon:e}):_r(e)?t.jsx(Ft,{refIndex:e}):Cr(e)?t.jsx(Tt,{valueFilter:e}):Sr(e)?t.jsx(It,{valueFilter:e}):qr(e)?t.jsx(Nt,{}):t.jsx(Pe,{valueFilter:e,customPillEditEnabled:n})}function de({sqon:e,customPillEditEnabled:n}){return t.jsx(t.Fragment,{children:e.content.map((r,i)=>t.jsxs("div",{className:"flex items-center py-[2px]",children:[yn(r,n),vn(e.content,i)&&t.jsx(jt,{})]},i))})}const vn=(e,n)=>e.length-1>n;de.__docgenInfo={description:"",methods:[],displayName:"QueryPillBoolean",props:{sqon:{required:!0,tsType:{name:"ISyntheticSqon"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};function At(){const{query:e}=C(),n=y();return t.jsxs(Ke,{children:[t.jsx(Ze,{asChild:!0,children:t.jsx(f,{iconOnly:!0,variant:"ghost",size:"sm",children:t.jsx(mt,{})})}),t.jsxs(et,{side:"left",className:"w-[200px] space-y-3",children:[t.jsx("div",{className:"text-sm",children:n.queryBar.deletePopover.title}),t.jsxs("div",{className:"flex gap-1 justify-end",children:[t.jsx(Ie,{asChild:!0,children:t.jsx(f,{size:"xs",variant:"outline",children:n.queryBar.deletePopover.cancel})}),t.jsx(Ie,{asChild:!0,children:t.jsx(f,{size:"xs",variant:"destructive",onClick:()=>e.delete(),children:n.queryBar.deletePopover.ok})})]})]})]})}At.__docgenInfo={description:"",methods:[],displayName:"QueryBarDeleteAction"};function kt(){const{query:e}=C();return t.jsx(f,{iconOnly:!0,variant:"ghost",size:"sm",onClick:()=>e.duplicate(),children:t.jsx(Ge,{})})}kt.__docgenInfo={description:"",methods:[],displayName:"QueryBarDuplicateAction"};const xn=ct({title:dt()});function Bt({open:e,onOpenChange:n,query:r}){const[i,a]=c.useState(!1),o=y(),l=tt({resolver:rt(xn),values:{title:""}}),s=async d=>(a(!0),Promise.resolve(r.saveAsCustomPill(d.title)).then(()=>n(!1)).finally(()=>a(!1)));return t.jsx(ne,{open:e,onOpenChange:n,children:t.jsxs(ie,{children:[t.jsx(ae,{children:t.jsx(oe,{children:o.queryBar.saveDialog.title})}),t.jsx(nt,{...l,children:t.jsxs("form",{onSubmit:l.handleSubmit(s),children:[t.jsxs(ve,{className:"space-y-6",children:[t.jsx(it,{control:l.control,name:"title",render:({field:d})=>t.jsxs(at,{children:[t.jsx(ot,{children:o.queryBar.saveDialog.fields.title.label}),t.jsx(st,{children:t.jsx(ye,{placeholder:o.queryBar.saveDialog.fields.title.placeholder,...d})}),t.jsx(lt,{})]})}),t.jsx("div",{className:"text-sm",children:o.queryBar.saveDialog.notice})]}),t.jsxs(se,{children:[t.jsx(le,{asChild:!0,children:t.jsx(f,{variant:"outline",children:o.queryBar.saveDialog.cancel})}),t.jsx(f,{type:"submit",color:"primary",loading:i,children:o.queryBar.saveDialog.ok})]})]})})]})})}Bt.__docgenInfo={description:"",methods:[],displayName:"QueryBarSaveDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},query:{required:!0,tsType:{name:"QueryInstance"},description:""}}};function Mt(){const{query:e}=C(),n=y(),[r,i]=c.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsxs(D,{children:[t.jsx(w,{asChild:!0,children:t.jsx(f,{iconOnly:!0,variant:"ghost",size:"sm",onClick:()=>i(!0),disabled:e.hasCustomPill(),children:t.jsx(ft,{})})}),t.jsx(Q,{className:"max-w-[200px]",children:e.hasCustomPill()?n.queryBar.customPill.cannotSaveAsCustomPill:n.queryBar.customPill.createTooltip})]}),t.jsx(Bt,{open:r,onOpenChange:i,query:e})]})}Mt.__docgenInfo={description:`Will be display only if customPillConfig is enabled
- Will displayed beside the query (not the saved filter at the top)

@TODO: What are custom pill? In witch context to we need them?`,methods:[],displayName:"QueryBarSaveAction"};function Ot(){const{customPillConfig:e}=v();return t.jsxs("div",{className:`
      flex items-center p-2 border-r border-t border-b 
      border-muted-foreground/20 bg-muted/35 text-muted-foreground
      group-data-[query-active=true]/query:border-primary/75
      group-data-[query-active=true]/query:bg-primary/10
      group-data-[query-active=true]/query:text-foreground`,onClick:n=>n.stopPropagation(),children:[(e==null?void 0:e.enable)&&t.jsx(Mt,{}),t.jsx(kt,{}),t.jsx(At,{})]})}Ot.__docgenInfo={description:"[+] [üíæ] [‚ßâ] [üóë] [share]    [ üìÅ My Filters ‚ñæ ]",methods:[],displayName:"QueryBarActions"};function Et(){const{queryBuilder:e,queryCountIcon:n,fetchQueryCount:r,loading:i}=v(),{query:a}=C(),o=c.useRef(null),[l,s]=c.useState(0),[d,p]=c.useState(!0);return c.useEffect(()=>{if(!i&&e.getRawQueries().find(m=>m.id===a.id)){const m=o.current,g=Pr(a.raw(),e.getRawQueries());(!o.current||!Dr(m,g))&&(o.current=g,p(!0),r(g).then(s).finally(()=>{p(!1)}))}},[r,a.raw(),e.getRawQueries(),i]),t.jsx("div",{className:"flex items-center gap-1",children:d?t.jsx(cr,{}):t.jsxs(t.Fragment,{children:[n,t.jsx("span",{className:"font-medium",children:Hr(l)})]})})}Et.__docgenInfo={description:"",methods:[],displayName:"QueryBarCount"};function Lt(){const{query:e}=C(),{getQueryReferenceColor:n}=v(),r=e.isReferencedInActiveQuery()?n(e.index()):null;return t.jsx("div",{className:"w-1 rounded-s-sm bg-muted-foreground group-data-[query-active=true]/query:bg-primary",style:r?{backgroundColor:r}:{}})}Lt.__docgenInfo={description:"",methods:[],displayName:"QueryBarIdentifier"};function Rt(){const{query:e}=C();return e.isSelectable()?t.jsxs("div",{className:`
      flex gap-2 items-center py-2 px-4 border-l border-t border-b 
      border-muted-foreground/20 bg-muted/35 text-muted-foreground
      group-data-[query-active=true]/query:border-primary/75
      group-data-[query-active=true]/query:bg-primary/10
      group-data-[query-active=true]/query:text-foreground
      `,children:[t.jsx($r,{size:"sm",checked:e.isSelected(),onClick:n=>{n.stopPropagation(),e.toggleSelect(!e.isSelected())}}),t.jsxs("span",{className:"text-xs font-medium",children:["Q",e.index()+1]})]}):null}Rt.__docgenInfo={description:"",methods:[],displayName:"QueryBarSelector"};const gn=dr({base:"flex flex-1 py-2 px-3 border ",variants:{active:{true:["border-primary/75 bg-primary/10"],false:["border-muted-foreground/20 bg-muted/35 text-muted-foreground"]}},defaultVariants:{active:!1}});function Ut({query:e}){const n=e.isActive(),r=y(),{enableCombine:i}=v(),a=()=>{n||e.setAsActive()};return t.jsx(_e.Provider,{value:{query:e},children:t.jsxs("div",{"data-query-active":n,className:"flex group/query",onClick:a,children:[t.jsx(Lt,{}),i&&t.jsx(Rt,{}),t.jsx("div",{className:gn({active:n}),children:t.jsx("div",{className:"flex flex-1 items-center justify-between",children:e.isEmpty()?t.jsx(t.Fragment,{children:r.queryBar.empty}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex-1",children:Je(e.raw())&&t.jsx("div",{className:"flex items-center flex-wrap pr-2",children:t.jsx(de,{sqon:e.raw()})})}),t.jsx(Et,{})]})})}),e.isNotEmpty()&&t.jsx(Ot,{})]})})}Ut.__docgenInfo={description:"",methods:[],displayName:"QueryBar",props:{query:{required:!0,tsType:{name:"QueryInstance"},description:""}}};function zt(){const e=y(),{queryBuilder:n}=v();return n.canCombine()?null:t.jsxs(f,{size:"xs",disabled:n.hasEmptyQuery(),onClick:()=>n.createQuery({op:N.And,content:[]}),children:[t.jsx(ut,{}),e.toolbar.newQuery]})}zt.__docgenInfo={description:"",methods:[],displayName:"QueryToolbarAddAction"};function Vt(){const e=y(),{queryBuilder:n}=v(),r=c.useCallback(()=>{E.open({type:"warning",title:e.toolbar.clearAllDialog.title,description:e.toolbar.clearAllDialog.description,cancelProps:{children:e.toolbar.clearAllDialog.cancel},actionProps:{variant:"destructive",onClick:()=>n.clearQueries(),children:e.toolbar.clearAllDialog.ok}})},[n,e]);return n.getQueries().length>1?t.jsx(f,{variant:"ghost",size:"sm",className:"no-underline enabled:hover:no-underline",onClick:r,children:e.toolbar.clearAll}):null}Vt.__docgenInfo={description:"",methods:[],displayName:"QueryToolbarClearAction"};function Wt(){const e=y(),{queryBuilder:n,enableCombine:r}=v();return n.canCombine()&&r?t.jsx(Jr,{actions:[{label:pe(e.queryPill.operator.and),onClick:()=>n.combineSelectedQueries(N.And)},{label:pe(e.queryPill.operator.or),onClick:()=>n.combineSelectedQueries(N.Or)}],onDefaultAction:()=>n.combineSelectedQueries(N.And),size:"xs",color:"primary",children:e.toolbar.combine}):null}Wt.__docgenInfo={description:"",methods:[],displayName:"QueryToolbarCombineAction"};function Xt(){const e=y(),{queryBuilder:n,enableShowHideLabels:r,showLabels:i,toggleLabels:a}=v();return!n.canCombine()&&r?t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(Gr,{size:"xs",checked:i,onCheckedChange:a})," ",e.toolbar.labels]}):null}Xt.__docgenInfo={description:"",methods:[],displayName:"QueryToolbarLabelsAction"};function Yt(){return t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(zt,{}),t.jsx(Wt,{}),t.jsx(Xt,{})]}),t.jsx("div",{children:t.jsx(Vt,{})})]})}Yt.__docgenInfo={description:"",methods:[],displayName:"QueriesToolbar"};const Be=ct({name:dt().min(2,"Min 2 characters").max(50,"Max 50 characters")});function De({open:e,onOpenChange:n,savedFilter:r}){const i=y(),{queryBuilder:a}=v(),o=tt({resolver:rt(Be),values:{name:(r==null?void 0:r.raw().name)||""}});function l(s){r&&!r.isNew()?r.save(re.Filter,{name:s.name}).then(()=>{q.success(i.savedFilter.notifications.updated)}).catch(()=>{q.error(i.savedFilter.notifications.errors.updated)}):a.saveNewFilter({name:s.name}).then(()=>{q.success(i.savedFilter.notifications.created)}).catch(()=>{q.error(i.savedFilter.notifications.errors.created)}),n(!1)}return t.jsx(ne,{open:e,onOpenChange:n,children:t.jsxs(ie,{children:[t.jsx(ae,{children:t.jsx(oe,{children:i.savedFilter.editDialog.title})}),t.jsx(nt,{...o,children:t.jsxs("form",{onSubmit:o.handleSubmit(l),children:[t.jsx(ve,{children:t.jsx(it,{control:o.control,name:"name",render:({field:s})=>t.jsxs(at,{children:[t.jsx(ot,{children:i.savedFilter.editDialog.fields.title.label}),t.jsx(st,{children:t.jsx(ye,{placeholder:i.savedFilter.editDialog.fields.title.placeholder,...s})}),t.jsx(lt,{})]}),schema:Be})}),t.jsxs(se,{children:[t.jsx(le,{asChild:!0,children:t.jsx(f,{variant:"outline",children:i.savedFilter.editDialog.cancel})}),t.jsx(f,{type:"submit",color:"primary",children:i.savedFilter.editDialog.ok})]})]})})]})})}De.__docgenInfo={description:`Saved Filters edit dialog
- Allow the use to change filter name
- Display a notification on success or error`,methods:[],displayName:"SavedFiltersEditDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},savedFilter:{required:!0,tsType:{name:"union",raw:"SavedFilterInstance | null",elements:[{name:"SavedFilterInstance"},{name:"null"}]},description:""}}};function Ht(){const{queryBuilder:e}=v(),[n,r]=c.useState(!1),i=e.getSelectedSavedFilter();return t.jsxs(t.Fragment,{children:[t.jsx(f,{iconOnly:!0,variant:"ghost",size:"sm",onClick:()=>r(!0),children:t.jsx(je,{})}),t.jsx(De,{open:n,onOpenChange:r,savedFilter:i})]})}Ht.__docgenInfo={description:`Pencils icon that allow to edit a filter's name
- Open saved-filter-edit-dialog`,methods:[],displayName:"SavedFiltersEditAction"};function $t(){const e=y(),{queryBuilder:n,enableFavorite:r}=v(),i=n.getSelectedSavedFilter();if(!r)return null;const a=function(){i?i.save(re.Filter,{favorite:!i.isFavorite()}).then(()=>{q.success(e.savedFilter.notifications.updated)}).catch(()=>{q.error(e.savedFilter.notifications.errors.updated)}):n.saveNewFilter({favorite:!0})};return t.jsxs(D,{children:[t.jsx(w,{asChild:!0,children:t.jsx(f,{iconOnly:!0,variant:"ghost",size:"sm",disabled:!i,onClick:a,children:t.jsx(Kr,{className:i!=null&&i.isFavorite()?"stroke-yellow-500 fill-yellow-500":""})})}),t.jsx(Q,{children:i!=null&&i.isFavorite()?e.savedFilter.favoriteTooltip.unset:e.savedFilter.favoriteTooltip.set})]})}$t.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersStarAction"};function Jt(){const e=y(),{queryBuilder:n}=v(),r=n.getSelectedSavedFilter();return r!=null&&r.isDirty()?t.jsxs(D,{children:[t.jsx(w,{asChild:!0,children:t.jsx(f,{iconOnly:!0,variant:"ghost",size:"sm",disabled:!r,onClick:()=>r.discardChanges(),children:t.jsx(dn,{})})}),t.jsx(Q,{children:e.savedFilter.discardTooltip})]}):null}Jt.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersUndoAction"};function Gt({className:e,...n}){const{queryBuilder:r}=v(),i=r.getSelectedSavedFilter();return t.jsxs("div",{className:P("flex items-center gap-4 whitespace-nowrap text-ellipsis overflow-hidden",e),...n,children:[t.jsx("div",{className:"text-ellipsis overflow-hidden text-base",children:(i==null?void 0:i.raw().name)??r.coreProps.savedFilterDefaultTitle}),t.jsxs("div",{className:"flex items-center",onClick:a=>a.stopPropagation(),children:[t.jsx(Ht,{}),t.jsx($t,{}),t.jsx(Jt,{})]})]})}Gt.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersLeftActions"};function Kt(){const e=y(),{queryBuilder:n}=v(),r=n.getSelectedSavedFilter();return t.jsxs(D,{children:[t.jsx(w,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(f,{iconOnly:!0,variant:"ghost",size:"sm",disabled:(r==null?void 0:r.isNew())||!r,onClick:()=>_t(r,e),children:t.jsx(mt,{})})})}),t.jsx(Q,{children:e.savedFilter.deleteTooltip})]})}Kt.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersDeleteAction"};function Zt(){const e=y(),{queryBuilder:n}=v(),r=n.getSelectedSavedFilter(),i=function(){r!=null&&r.isDirty()?Ct(n,e):r==null||r.duplicate()};return t.jsxs(D,{children:[t.jsx(w,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(f,{iconOnly:!0,variant:"ghost",size:"sm",disabled:(r==null?void 0:r.isNew())||!r,onClick:i,children:t.jsx(Ge,{})})})}),t.jsx(Q,{children:e.savedFilter.duplicateTooltip})]})}Zt.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersDuplicateAction"};function er(){const e=y(),{queryBuilder:n}=v(),r=n.getSelectedSavedFilter(),i=function(){r!=null&&r.isDirty()?Ct(n,e):n.createSavedFilter()};return t.jsxs(D,{children:[t.jsx(w,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(f,{iconOnly:!0,variant:"ghost",size:"sm",onClick:i,disabled:(r==null?void 0:r.isNew())||!r,children:t.jsx(ut,{})})})}),t.jsx(Q,{children:e.savedFilter.newFilter})]})}er.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersNewAction"};function tr(){const e=y(),{queryBuilder:n}=v(),r=n.getSelectedSavedFilter(),i=r&&!r.isNew()?!r.isDirty():n.isEmpty(),a=()=>{r&&!r.isNew()?r.save(re.Filter).then(()=>{q.success(e.savedFilter.notifications.updated)}).catch(()=>{q.error(e.savedFilter.notifications.errors.updated)}):n.saveNewFilter(r==null?void 0:r.raw()).then(()=>{q.success(e.savedFilter.notifications.created)}).catch(l=>{if(l.response.data.detail.includes("unique_saved_filter")){q.error(e.savedFilter.notifications.errors.duplicated);return}q.error(e.savedFilter.notifications.errors.created)})},o=()=>n.isEmpty()?e.savedFilter.saveTooltip.whenEmpty:r!=null&&r.isDirty()?e.savedFilter.saveTooltip.whenDirty:e.savedFilter.saveTooltip.default;return t.jsxs(D,{children:[t.jsx(w,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(f,{iconOnly:!0,variant:"ghost",size:"sm",disabled:i,className:r!=null&&r.isDirty()?"text-yellow-500":"",onClick:a,children:t.jsx(ft,{})})})}),t.jsx(Q,{children:o()})]})}tr.__docgenInfo={description:`Save button for query-builder savedfilter
- Detect state of the filter to change the color of the button to indicat between saved and unsaved changes`,methods:[],displayName:"SavedFiltersSaveAction"};function Z(e,n){const r=+k(e)-+k(n);return r<0?-1:r>0?1:r}function jn(e,n,r){const[i,a]=ge(r==null?void 0:r.in,e,n),o=i.getFullYear()-a.getFullYear(),l=i.getMonth()-a.getMonth();return o*12+l}function bn(e){return n=>{const i=(e?Math[e]:Math.trunc)(n);return i===0?0:i}}function _n(e,n){return+k(e)-+k(n)}function Cn(e,n){const r=k(e,n==null?void 0:n.in);return r.setHours(23,59,59,999),r}function Sn(e,n){const r=k(e,n==null?void 0:n.in),i=r.getMonth();return r.setFullYear(r.getFullYear(),i+1,0),r.setHours(23,59,59,999),r}function qn(e,n){const r=k(e,n==null?void 0:n.in);return+Cn(r,n)==+Sn(r,n)}function Pn(e,n,r){const[i,a,o]=ge(r==null?void 0:r.in,e,e,n),l=Z(a,o),s=Math.abs(jn(a,o));if(s<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-l*s);let d=Z(a,o)===-l;qn(i)&&s===1&&Z(i,o)===1&&(d=!1);const p=l*(s-+d);return p===0?0:p}function Dn(e,n,r){const i=_n(e,n)/1e3;return bn(r==null?void 0:r.roundingMethod)(i)}function wn(e,n,r){const i=Er(),a=(r==null?void 0:r.locale)??i.locale??Lr,o=2520,l=Z(e,n);if(isNaN(l))throw new RangeError("Invalid time value");const s=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:l}),[d,p]=ge(r==null?void 0:r.in,...l>0?[n,e]:[e,n]),m=Dn(p,d),g=(Ae(p)-Ae(d))/1e3,h=Math.round((m-g)/60);let x;if(h<2)return r!=null&&r.includeSeconds?m<5?a.formatDistance("lessThanXSeconds",5,s):m<10?a.formatDistance("lessThanXSeconds",10,s):m<20?a.formatDistance("lessThanXSeconds",20,s):m<40?a.formatDistance("halfAMinute",0,s):m<60?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",1,s):h===0?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",h,s);if(h<45)return a.formatDistance("xMinutes",h,s);if(h<90)return a.formatDistance("aboutXHours",1,s);if(h<ke){const b=Math.round(h/60);return a.formatDistance("aboutXHours",b,s)}else{if(h<o)return a.formatDistance("xDays",1,s);if(h<$){const b=Math.round(h/ke);return a.formatDistance("xDays",b,s)}else if(h<$*2)return x=Math.round(h/$),a.formatDistance("aboutXMonths",x,s)}if(x=Pn(p,d),x<12){const b=Math.round(h/$);return a.formatDistance("xMonths",b,s)}else{const b=x%12,T=Math.trunc(x/12);return b<3?a.formatDistance("aboutXYears",T,s):b<9?a.formatDistance("overXYears",T,s):a.formatDistance("almostXYears",T+1,s)}}const Qn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"a second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"a minute",other:"{{count}} minutes"},aboutXHours:{one:"about an hour",other:"about {{count}} hours"},xHours:{one:"an hour",other:"{{count}} hours"},xDays:{one:"a day",other:"{{count}} days"},aboutXWeeks:{one:"about a week",other:"about {{count}} weeks"},xWeeks:{one:"a week",other:"{{count}} weeks"},aboutXMonths:{one:"about a month",other:"about {{count}} months"},xMonths:{one:"a month",other:"{{count}} months"},aboutXYears:{one:"about a year",other:"about {{count}} years"},xYears:{one:"a year",other:"{{count}} years"},overXYears:{one:"over a year",other:"over {{count}} years"},almostXYears:{one:"almost a year",other:"almost {{count}} years"}},Fn=(e,n,r)=>{let i;const a=Qn[e];return typeof a=="string"?i=a:n===1?i=a.one:i=a.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i},Nn={full:"EEEE, MMMM do, yyyy",long:"MMMM do, yyyy",medium:"MMM d, yyyy",short:"yyyy-MM-dd"},Tn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},In={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},An={date:O({formats:Nn,defaultWidth:"full"}),time:O({formats:Tn,defaultWidth:"full"}),dateTime:O({formats:In,defaultWidth:"full"})},kn={code:"en-CA",formatDistance:Fn,formatLong:An,formatRelative:zr,localize:Ur,match:Rr,options:{weekStartsOn:0,firstWeekContainsDate:1}},Bn={lessThanXSeconds:{one:"moins d‚Äôune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d‚Äôune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d‚Äôun an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu‚Äôun an",other:"presque {{count}} ans"}},Mn=(e,n,r)=>{let i;const a=Bn[e];return typeof a=="string"?i=a:n===1?i=a.one:i=a.other.replace("{{count}}",String(n)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+i:"il y a "+i:i},On={lastWeek:"eeee 'dernier √†' p",yesterday:"'hier √†' p",today:"'aujourd‚Äôhui √†' p",tomorrow:"'demain √†' p'",nextWeek:"eeee 'prochain √†' p",other:"P"},En=(e,n,r,i)=>On[e],Ln={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant J√©sus-Christ","apr√®s J√©sus-Christ"]},Rn={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2√®me trim.","3√®me trim.","4√®me trim."],wide:["1er trimestre","2√®me trimestre","3√®me trimestre","4√®me trimestre"]},Un={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","f√©vr.","mars","avr.","mai","juin","juil.","ao√ªt","sept.","oct.","nov.","d√©c."],wide:["janvier","f√©vrier","mars","avril","mai","juin","juillet","ao√ªt","septembre","octobre","novembre","d√©cembre"]},zn={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Vn={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"apr√®s-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l‚Äôapr√®s-midi",evening:"du soir",night:"du matin"}},Wn=(e,n)=>{const r=Number(e),i=n==null?void 0:n.unit;if(r===0)return"0";const a=["year","week","hour","minute","second"];let o;return r===1?o=i&&a.includes(i)?"√®re":"er":o="√®me",r+o},Xn=["MMM","MMMM"],Yn={preprocessor:(e,n)=>e.getDate()===1||!n.some(i=>i.isToken&&Xn.includes(i.value))?n:n.map(i=>i.isToken&&i.value==="do"?{isToken:!0,value:"d"}:i),ordinalNumber:Wn,era:R({values:Ln,defaultWidth:"wide"}),quarter:R({values:Rn,defaultWidth:"wide",argumentCallback:e=>e-1}),month:R({values:Un,defaultWidth:"wide"}),day:R({values:zn,defaultWidth:"wide"}),dayPeriod:R({values:Vn,defaultWidth:"wide"})},Hn=/^(\d+)(i√®me|√®re|√®me|er|e)?/i,$n=/\d+/i,Jn={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant J√©sus-Christ|apr√®s J√©sus-Christ)/i},Gn={any:[/^av/i,/^ap/i]},Kn={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|√®me|e)? trim\.?/i,wide:/^[1234](er|√®me|e)? trimestre/i},Zn={any:[/1/i,/2/i,/3/i,/4/i]},ei={narrow:/^[jfmasond]/i,abbreviated:/^(janv|f√©vr|mars|avr|mai|juin|juill|juil|ao√ªt|sept|oct|nov|d√©c)\.?/i,wide:/^(janvier|f√©vrier|mars|avril|mai|juin|juillet|ao√ªt|septembre|octobre|novembre|d√©cembre)/i},ti={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},ri={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},ni={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},ii={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'apr√®s[-\s]midi|du soir|de la nuit)/i},ai={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},oi={ordinalNumber:Vr({matchPattern:Hn,parsePattern:$n,valueCallback:e=>parseInt(e)}),era:U({matchPatterns:Jn,defaultMatchWidth:"wide",parsePatterns:Gn,defaultParseWidth:"any"}),quarter:U({matchPatterns:Kn,defaultMatchWidth:"wide",parsePatterns:Zn,defaultParseWidth:"any",valueCallback:e=>e+1}),month:U({matchPatterns:ei,defaultMatchWidth:"wide",parsePatterns:ti,defaultParseWidth:"any"}),day:U({matchPatterns:ri,defaultMatchWidth:"wide",parsePatterns:ni,defaultParseWidth:"any"}),dayPeriod:U({matchPatterns:ii,defaultMatchWidth:"any",parsePatterns:ai,defaultParseWidth:"any"})},si={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"yy-MM-dd"},li={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},ci={full:"{{date}} '√†' {{time}}",long:"{{date}} '√†' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},di={date:O({formats:si,defaultWidth:"full"}),time:O({formats:li,defaultWidth:"full"}),dateTime:O({formats:ci,defaultWidth:"full"})},ui={code:"fr-CA",formatDistance:Mn,formatLong:di,formatRelative:En,localize:Yn,match:oi,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rr({open:e,onOpenChange:n}){const r=y(),{queryBuilder:i}=v(),a=i.getSavedFilters().filter(o=>!o.isNew());return c.useEffect(()=>{a.length===0&&n(!1)},[a]),t.jsx(t.Fragment,{children:t.jsx(ne,{open:e,onOpenChange:n,children:t.jsxs(ie,{className:"w-full max-w-[550px]",children:[t.jsx(ae,{children:t.jsx(oe,{children:r.savedFilter.manageDialog.title})}),t.jsx(ve,{children:t.jsx(Wr,{bordered:!0,className:"max-h-[250px]",children:a.map(o=>t.jsx(mi,{savedFilter:o},o.id))})}),t.jsx(se,{children:t.jsx(le,{asChild:!0,children:t.jsx(f,{children:r.savedFilter.manageDialog.close})})})]})})})}const mi=({savedFilter:e})=>{const n=y(),{currentLanguage:r}=V(),[i,a]=c.useState(!1),o=c.useCallback(()=>{const l=e.raw();if(!l.updated_on)return n.savedFilter.manageDialog.lastSaveAt.replace("{lastSaveAt}","n/a");const s=wn(new Date,new Date(l.updated_on),{locale:r==="fr"?ui:kn});return n.savedFilter.manageDialog.lastSaveAt.replace("{lastSaveAt}",s)},[e.raw()]);return t.jsxs(t.Fragment,{children:[t.jsx(Xr,{title:e.raw().name,description:o(),className:"border-b last:border-b-0 relative px-3 py-2 group",onEdit:()=>a(!0),onDelete:()=>_t(e,n)},e.id),t.jsx(De,{open:i,onOpenChange:a,savedFilter:e})]})};rr.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersManageDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}};function nr(){const e=y(),{queryBuilder:n}=v(),r=n.getSavedFilters().filter(m=>!m.isNew()),[i,a]=c.useState(!1),[o,l]=c.useState(!1),s=n.getSelectedSavedFilter(),d=function(){a(!1),l(!0)},p=c.useMemo(()=>new Date,[s==null?void 0:s.id]);return t.jsxs(t.Fragment,{children:[t.jsxs(Zr,{value:s==null?void 0:s.id,onValueChange:m=>{var g;return(g=r.find(h=>h.id===m))==null?void 0:g.select()},open:i,onOpenChange:a,disabled:r.length===0,children:[t.jsxs(D,{open:r.length>0?!1:void 0,children:[t.jsx(w,{asChild:!0,children:t.jsx(en,{className:"w-[135px] h-7",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(sn,{size:14})," ",e.savedFilter.myFilters]})})}),t.jsx(Q,{children:e.savedFilter.noSavedFilters})]}),t.jsxs(tn,{children:[r.map(m=>t.jsx(rn,{value:m.id,children:m.raw().name},m.id)),t.jsx(nn,{}),t.jsx(f,{size:"sm",variant:"ghost",className:"w-full pl-2 justify-start",onClick:d,children:e.savedFilter.manageFilters})]})]},+p),t.jsx(rr,{open:o,onOpenChange:l})]})}nr.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersSelect"};function ir(){const e=y(),{queryBuilder:n}=v(),r=n.getSelectedSavedFilter(),i=function(){};return t.jsxs(D,{children:[t.jsx(w,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(f,{iconOnly:!0,variant:"ghost",size:"sm",disabled:(r==null?void 0:r.isDirty())||(r==null?void 0:r.isNew())||!r,onClick:i,children:t.jsx(Yr,{})})})}),t.jsx(Q,{children:r!=null&&r.isDirty()||!r?e.savedFilter.shareTooltip.whenNotSaved:e.savedFilter.shareTooltip.default})]})}ir.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersShareAction"};function ar({className:e,...n}){return t.jsx("div",{className:P("flex",e),...n,children:t.jsxs("div",{className:"flex gap-4 items-center",onClick:r=>r.stopPropagation(),children:[t.jsxs("div",{className:"flex whitespace-nowrap",children:[t.jsx(er,{}),t.jsx(tr,{}),t.jsx(Zt,{}),t.jsx(Kt,{}),t.jsx(ir,{})]}),t.jsx(nr,{})]})})}ar.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersRightActions"};function X({enableCombine:e=!0,enableFavorite:n=!1,enableShowHideLabels:r,initialShowHideLabels:i=!0,queryReferenceColors:a=pt,queryCountIcon:o,fetchQueryCount:l,dictionary:s,customPillConfig:d,queryPillFacetFilterConfig:p,resolveSyntheticSqon:m,loading:g,...h}){const x=ht(h),b=mn(),T=c.useMemo(()=>yt(b,s||{}),[s,b]),[Y,S]=c.useState(i),B=c.useCallback(I=>a[I%a.length],[a]),H=c.useMemo(()=>({queryBuilder:x,enableCombine:e,enableFavorite:n,enableShowHideLabels:r,showLabels:Y,toggleLabels:S,queryCountIcon:o,getQueryReferenceColor:B,fetchQueryCount:l,dictionary:s,customPillConfig:d,queryPillFacetFilterConfig:p,resolveSyntheticSqon:m,loading:g}),[x,e,n,r,Y,S,o,B,l,s,d,p,m,g]);return g?t.jsx(fi,{}):t.jsx(vt.Provider,{value:T,children:t.jsx(be.Provider,{value:H,children:t.jsx(He,{className:"py-0",children:t.jsx(ur,{type:"multiple",defaultValue:["query-builder"],children:t.jsxs(mr,{value:"query-builder",className:"border-none",children:[t.jsxs(fr,{className:"border-b py-0 px-6 data-[state=closed]:rounded-sm data-[state=closed]:border-none hover:cursor-pointer",asChild:!0,children:[t.jsx(Gt,{className:"py-4 pr-4"}),t.jsx(ar,{className:"ml-auto py-4"})]}),t.jsxs(pr,{className:"py-4 px-6 space-y-4",children:[t.jsx("div",{className:"flex flex-col gap-2 max-h-[30vh] overflow-y-scroll",children:x.getQueries().map(I=>t.jsx(Ut,{query:I},I.id))}),t.jsx(Yt,{})]})]})})})})})}function fi(){return t.jsx(He,{className:"py-0",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"py-4 px-6 flex justify-between",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsx(F,{className:"h-8 w-32"}),new Array(2).fill(0).map((e,n)=>t.jsx(F,{className:"size-8"},n))]}),t.jsxs("div",{className:"flex gap-2",children:[new Array(5).fill(0).map((e,n)=>t.jsx(F,{className:"size-8"},n)),t.jsx(F,{className:"h-8 w-36"})]})]}),t.jsx($e,{}),t.jsxs("div",{className:"flex flex-col py-4 gap-4",children:[t.jsxs("div",{className:"px-6 flex flex-col gap-2",children:[t.jsx(F,{className:"h-[50px] w-full"}),t.jsx(F,{className:"h-[50px] w-full"})]}),t.jsxs("div",{className:"px-6 flex gap-3",children:[t.jsx(F,{className:"h-7 w-26"}),t.jsx(F,{className:"h-7 w-16"})]})]})]})})}X.__docgenInfo={description:"",methods:[],displayName:"QueryBuilder",props:{enableCombine:{defaultValue:{value:"true",computed:!1},required:!1},enableFavorite:{defaultValue:{value:"false",computed:!1},required:!1},initialShowHideLabels:{defaultValue:{value:"true",computed:!1},required:!1},queryReferenceColors:{defaultValue:{value:`[
  '#C31D7E',
  '#328536',
  '#AA00FF',
  '#C2410C',
  '#047ABE',
  '#E5231F',
  '#007D85',
  '#C51162',
  '#7B5A90',
  '#B85C00',
  '#722ED1',
  '#4D7C0F',
  '#9F1239',
  '#2D7D9A',
  '#847545',
]`,computed:!1},required:!1}}};function Me(e){return e[Math.floor(Math.random()*e.length)]}function ee(e=1,n=100){return Math.floor(Math.random()*(n-e+1))+e}function or(){return Math.random().toString(36).substring(7)}const pi=[j.GreaterThan,j.LessThan,j.Between,j.GreaterThanOrEqualTo,j.LessThanOrEqualTo];function z(e){return{id:A(),title:(e==null?void 0:e.title)||`Custom Pill ${ee(1,50)}`,queries:[_()],keycloak_id:A(),creation_date:new Date().toISOString(),updated_date:new Date().toISOString(),tag:"tag",favorite:!1}}function hi(e){return pi.includes(e)?Array.from({length:2},()=>ee()):Array.from({length:ee(2,5)},()=>or())}function _(e=A()){const n=ee(1,3),r=Array.from({length:n},()=>{const i=Object.values(j).filter(o=>o!==j.And&&o!==j.Or&&o!==j.Not),a=Me(i);return{op:a,content:{field:`field_${or()}`,value:hi(a)}}});return{id:e,op:Me(["and","or"]),content:r}}const{action:he}=__STORYBOOK_MODULE_ACTIONS__,{fn:u}=__STORYBOOK_MODULE_TEST__,yi={queryBar:{empty:"Use the search tools & facets on the left to build a query",deletePopover:{title:"Delete this query?",cancel:"Cancel",ok:"Delete"},customPill:{createTooltip:"Create a custom query",cannotSaveAsCustomPill:"Custom queries cannot include other custom queries"},saveDialog:{title:"Save this query",fields:{title:{label:"Query name",placeholder:"Untitled query"}},notice:'You will find your saved queries in the sidebar under the "Queries" heading.',cancel:"Cancel",ok:"Save"}},queryPill:{operator:{changeOperatorTo:"Change operator to",and:"and",or:"or"},facet:e=>e,customPill:{editDialog:{title:"Edit custom query",cancel:"Cancel",ok:"Save"},cantBeEmptyDialog:{title:"Query cannot be empty",description:"Your custom query must contain at least one criteria.",ok:"Close"},titleExistsDialog:{title:"Name already in use",description:"A custom query with this name already exists. Please assign a unique name.",ok:"Close"},saveDialog:{title:"Edit this query?",confirmationMessage:'You are about to edit the custom query "{title}", which may affect your results.',affectedFilters:"Affected saved filters:",cancel:"Cancel",ok:"Save"}}},toolbar:{combine:"Combine",newQuery:"New query",clearAll:"Clear all",clearAllDialog:{title:"Delete all queries?",description:"You are about to delete all your queries. They will be lost forever.",cancel:"Cancel",ok:"Delete"},labels:"Labels"},savedFilter:{deleteTooltip:"Delete filter",deleteDialog:{title:"Permanently delete this filter?",description:"You are about to permanently delete this filter and all of its queries.",cancel:"Cancel",ok:"Delete filter"},duplicateTooltip:"Duplicate filter",overwriteDialog:{title:"Unsaved changes",description:"You are about to create a new filter; all modifications will be lost.",cancel:"Cancel",ok:"Create"},editDialog:{title:"Edit filter",cancel:"Cancel",ok:"Save",fields:{title:{label:"Title",placeholder:"Untitled query"}}},myFilters:"My Filters",manageFilters:"Manage filters",manageDialog:{title:"Manage filters",close:"Close",lastSaveAt:"Last saved at: {lastSaveAt} ago"},newFilter:"New filter",saveTooltip:{whenEmpty:"Add a query to save",whenDirty:"Save changes",default:"Save filter"},shareTooltip:{whenNotSaved:"Save filter to share",default:"Share (Copy url)"},favoriteTooltip:{set:"Set as default filter",unset:"Unset default filter"},discardTooltip:"Discard unsaved changes",noSavedFilters:"You have no saved filters"}},da={title:"QueryBuilder/Query Builder",component:X,args:{id:"query-builder-id",enableCombine:!0,enableFavorite:!0,enableShowHideLabels:!0,initialShowHideLabels:!0,queryReferenceColors:pt,resolveSyntheticSqon:u(),dictionary:yi}},me="query-builder-id",vi="query-builder-custom-pill-id",fe="query-builder-query-pill-filter-id";function sr({queryBuilderId:e}){return t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{children:"Testing Tools:"}),t.jsxs("div",{className:"flex border p-4 gap-2",children:[t.jsx(f,{color:"primary",size:"sm",onClick:()=>M.addQuery(e,_()),children:"Add query"}),t.jsx(f,{color:"primary",size:"sm",onClick:()=>{M.updateActiveQueryField(e,{field:"field",value:["new-value"]})},children:"Add field to active query"}),t.jsx(f,{color:"primary",size:"sm",onClick:()=>{M.updateActiveQueryField(e,{field:"field",value:[]})},children:"Remove field from active query"})]})]})}const J={args:{id:me,initialState:{...M.getLocalQueryBuilderState(me),savedFilters:[{id:A(),title:"Olivier's Filter",favorite:!1,queries:[_(),_(),_()]},{id:A(),title:"Francis' Filter",favorite:!1,queries:[_(),_()]},{id:A(),title:"Luc's Filter",favorite:!1,queries:[_(),_(),_()]}],selectedQueryIndexes:[]},fetchQueryCount:async()=>Promise.resolve(15),onStateChange:u(),onActiveQueryChange:u(),onQueryCreate:u(),onQueryDelete:u(),onQuerySelectChange:u(),onQueryUpdate:u(),onCustomPillSave:u(),onCustomPillUpdate:u(),onSavedFilterCreate:u(),onSavedFilterDelete:u(),onSavedFilterSave:u(),onSavedFilterUpdate:u()},render:e=>t.jsxs("div",{className:"space-y-3",children:[t.jsx(X,{...e}),t.jsx(sr,{queryBuilderId:me})]})},Oe=A(),G={args:{id:vi,queryCountIcon:t.jsx(an,{size:14}),initialState:{activeQueryId:Oe,queries:[_(Oe),_()],savedFilters:[],selectedQueryIndexes:[]},fetchQueryCount:async()=>Promise.resolve(15),onStateChange:u(),onActiveQueryChange:u(),onQueryCreate:u(),onQueryDelete:u(),onQuerySelectChange:u(),onQueryUpdate:u(),onCustomPillSave:e=>(he("onCustomPillSave")(e),new Promise(n=>setTimeout(()=>n(z(e)),750))),onCustomPillUpdate:e=>(he("onCustomPillUpdate")(e),new Promise(n=>setTimeout(()=>n(z(e)),750))),onSavedFilterCreate:u(),onSavedFilterDelete:u(),onSavedFilterSave:u(),onSavedFilterUpdate:u(),customPillConfig:{enable:!0,queryBuilderEditId:"qb-custom-pill-edit-id",fetchCustomPillById:()=>new Promise(e=>setTimeout(()=>e(z()),750)),validateCustomPillTitle:()=>new Promise(e=>setTimeout(()=>e(!0),750)),fetchSavedFiltersByCustomPillId:()=>new Promise(e=>setTimeout(()=>e([z(),z()]),750))}},render:e=>t.jsx(X,{...e})},K={args:{id:fe,initialState:{...M.getLocalQueryBuilderState(fe),savedFilters:[],selectedQueryIndexes:[]},fetchQueryCount:async()=>Promise.resolve(15),onStateChange:u(),onActiveQueryChange:u(),onQueryCreate:u(),onQueryDelete:u(),onQuerySelectChange:u(),onQueryUpdate:u(),onSavedFilterCreate:u(),onSavedFilterDelete:u(),onSavedFilterSave:u(),onSavedFilterUpdate:u(),queryPillFacetFilterConfig:{enable:!0,onFacetClick:e=>(he("onFacetClick")(e),t.jsx("div",{className:"italic text-sm",children:"Insert Filter Content"}))}},render:e=>t.jsxs("div",{className:"space-y-3",children:[t.jsx(X,{...e}),t.jsx(sr,{queryBuilderId:fe})]})};var Ee,Le,Re;J.parameters={...J.parameters,docs:{...(Ee=J.parameters)==null?void 0:Ee.docs,source:{originalSource:`{
  args: {
    id: qbId,
    initialState: {
      ...queryBuilderRemote.getLocalQueryBuilderState(qbId),
      savedFilters: [{
        id: v4(),
        title: "Olivier's Filter",
        favorite: false,
        queries: [generateRandomQuery(), generateRandomQuery(), generateRandomQuery()]
      }, {
        id: v4(),
        title: "Francis' Filter",
        favorite: false,
        queries: [generateRandomQuery(), generateRandomQuery()]
      }, {
        id: v4(),
        title: "Luc's Filter",
        favorite: false,
        queries: [generateRandomQuery(), generateRandomQuery(), generateRandomQuery()]
      }],
      selectedQueryIndexes: []
    },
    fetchQueryCount: async () => Promise.resolve(15),
    onStateChange: fn(),
    onActiveQueryChange: fn(),
    onQueryCreate: fn(),
    onQueryDelete: fn(),
    onQuerySelectChange: fn(),
    onQueryUpdate: fn(),
    onCustomPillSave: fn(),
    onCustomPillUpdate: fn(),
    onSavedFilterCreate: fn(),
    onSavedFilterDelete: fn(),
    onSavedFilterSave: fn(),
    onSavedFilterUpdate: fn()
  },
  render: args => <div className="space-y-3">
      <QueryBuilder {...args} />
      <TestingTools queryBuilderId={qbId} />
    </div>
}`,...(Re=(Le=J.parameters)==null?void 0:Le.docs)==null?void 0:Re.source}}};var Ue,ze,Ve;G.parameters={...G.parameters,docs:{...(Ue=G.parameters)==null?void 0:Ue.docs,source:{originalSource:`{
  args: {
    id: qbCustomPillId,
    queryCountIcon: <UserIcon size={14} />,
    initialState: {
      activeQueryId: customPillActiveQueryId,
      queries: [generateRandomQuery(customPillActiveQueryId), generateRandomQuery()],
      savedFilters: [],
      selectedQueryIndexes: []
    },
    fetchQueryCount: async () => Promise.resolve(15),
    onStateChange: fn(),
    onActiveQueryChange: fn(),
    onQueryCreate: fn(),
    onQueryDelete: fn(),
    onQuerySelectChange: fn(),
    onQueryUpdate: fn(),
    onCustomPillSave: filter => {
      action('onCustomPillSave')(filter);
      return new Promise(resolve => setTimeout(() => resolve(generateRandomUserSavedFilter(filter)), 750));
    },
    onCustomPillUpdate: filter => {
      action('onCustomPillUpdate')(filter);
      return new Promise(resolve => setTimeout(() => resolve(generateRandomUserSavedFilter(filter)), 750));
    },
    onSavedFilterCreate: fn(),
    onSavedFilterDelete: fn(),
    onSavedFilterSave: fn(),
    onSavedFilterUpdate: fn(),
    customPillConfig: {
      enable: true,
      queryBuilderEditId: 'qb-custom-pill-edit-id',
      fetchCustomPillById: () => new Promise(resolve => setTimeout(() => resolve(generateRandomUserSavedFilter()), 750)),
      validateCustomPillTitle: () => new Promise(resolve => setTimeout(() => resolve(true), 750)),
      fetchSavedFiltersByCustomPillId: () => new Promise(resolve => setTimeout(() => resolve([generateRandomUserSavedFilter(), generateRandomUserSavedFilter()]), 750))
    }
  },
  render: args => <QueryBuilder {...args} />
}`,...(Ve=(ze=G.parameters)==null?void 0:ze.docs)==null?void 0:Ve.source}}};var We,Xe,Ye;K.parameters={...K.parameters,docs:{...(We=K.parameters)==null?void 0:We.docs,source:{originalSource:`{
  args: {
    id: qbQueryPillFilterId,
    initialState: {
      ...queryBuilderRemote.getLocalQueryBuilderState(qbQueryPillFilterId),
      savedFilters: [],
      selectedQueryIndexes: []
    },
    fetchQueryCount: async () => Promise.resolve(15),
    onStateChange: fn(),
    onActiveQueryChange: fn(),
    onQueryCreate: fn(),
    onQueryDelete: fn(),
    onQuerySelectChange: fn(),
    onQueryUpdate: fn(),
    onSavedFilterCreate: fn(),
    onSavedFilterDelete: fn(),
    onSavedFilterSave: fn(),
    onSavedFilterUpdate: fn(),
    queryPillFacetFilterConfig: {
      enable: true,
      onFacetClick: filter => {
        action('onFacetClick')(filter);
        return <div className="italic text-sm">Insert Filter Content</div>;
      }
    }
  },
  render: args => <div className="space-y-3">
      <QueryBuilder {...args} />
      <TestingTools queryBuilderId={qbQueryPillFilterId} />
    </div>
}`,...(Ye=(Xe=K.parameters)==null?void 0:Xe.docs)==null?void 0:Ye.source}}};const ua=["Default","CustomPill","QueryPillFilter"];export{G as CustomPill,J as Default,K as QueryPillFilter,ua as __namedExportsOrder,da as default};
