import{_ as J}from"./iframe-Ds0Wr_S2.js";import{I as G,g as W,R as Y,a as Z,i as y,b as V}from"./context-DkqwYzW-.js";import{r as m}from"./index-CGj_12n1.js";function X(){if(console&&console.warn){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];v(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const P={};function T(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];v(e[0])&&P[e[0]]||(v(e[0])&&(P[e[0]]=new Date),X(...e))}const M=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},U=(n,e,t)=>{n.loadNamespaces(e,M(n,t))},$=(n,e,t,o)=>{v(t)&&(t=[t]),t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,M(n,o))},K=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=e.languages[0],r=e.options?e.options.fallbackLng:!1,a=e.languages[e.languages.length-1];if(o.toLowerCase()==="cimode")return!0;const i=(l,c)=>{const s=e.services.backendConnector.state[`${l}|${c}`];return s===-1||s===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!i(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(o,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||i(o,n)&&(!r||i(a,n)))},ee=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(T("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,a)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!a(r.isLanguageChangingTo,n))return!1}}):K(n,e,t)},v=n=>typeof n=="string",te=n=>typeof n=="object"&&n!==null,ne=(n,e)=>{const t=m.useRef();return m.useEffect(()=>{t.current=n},[n,e]),t.current},B=(n,e,t,o)=>n.getFixedT(e,t,o),oe=(n,e,t,o)=>m.useCallback(B(n,e,t,o),[n,e,t,o]),ae=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:o,defaultNS:r}=m.useContext(G)||{},a=t||o||W();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new Y),!a){T("You will need to pass in an i18next instance by using initReactI18next");const u=(g,d)=>v(d)?d:te(d)&&v(d.defaultValue)?d.defaultValue:Array.isArray(g)?g[g.length-1]:g,f=[u,{},!1];return f.t=u,f.i18n={},f.ready=!1,f}a.options.react&&a.options.react.wait!==void 0&&T("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const i={...Z(),...a.options.react,...e},{useSuspense:l,keyPrefix:c}=i;let s=r||a.options&&a.options.defaultNS;s=v(s)?[s]:s||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(s);const p=(a.isInitialized||a.initializedStoreOnce)&&s.every(u=>ee(u,a,i)),H=oe(a,e.lng||null,i.nsMode==="fallback"?s:s[0],c),E=()=>H,C=()=>B(a,e.lng||null,i.nsMode==="fallback"?s:s[0],c),[D,w]=m.useState(E);let S=s.join();e.lng&&(S=`${e.lng}${S}`);const F=ne(S),h=m.useRef(!0);m.useEffect(()=>{const{bindI18n:u,bindI18nStore:f}=i;h.current=!0,!p&&!l&&(e.lng?$(a,e.lng,s,()=>{h.current&&w(C)}):U(a,s,()=>{h.current&&w(C)})),p&&F&&F!==S&&h.current&&w(C);const g=()=>{h.current&&w(C)};return u&&a&&a.on(u,g),f&&a&&a.store.on(f,g),()=>{h.current=!1,u&&a&&u.split(" ").forEach(d=>a.off(d,g)),f&&a&&f.split(" ").forEach(d=>a.store.off(d,g))}},[a,S]),m.useEffect(()=>{h.current&&p&&w(E)},[a,c,p]);const k=[D,a,p];if(k.t=D,k.i18n=a,k.ready=p,p||!p&&!l)return k;throw new Promise(u=>{e.lng?$(a,e.lng,s,()=>u()):U(a,s,()=>u())})};function re(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function L(n){"@babel/helpers - typeof";return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(n)}function ie(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var o=t.call(n,e);if(L(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function se(n){var e=ie(n,"string");return L(e)=="symbol"?e:e+""}function ue(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,se(o.key),o)}}function le(n,e,t){return e&&ue(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var _=[],ce=_.forEach,fe=_.slice;function ge(n){return ce.call(fe.call(arguments,1),function(e){if(e)for(var t in e)n[t]===void 0&&(n[t]=e[t])}),n}var R=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,de=function(e,t,o){var r=o||{};r.path=r.path||"/";var a=encodeURIComponent(t),i="".concat(e,"=").concat(a);if(r.maxAge>0){var l=r.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");i+="; Max-Age=".concat(Math.floor(l))}if(r.domain){if(!R.test(r.domain))throw new TypeError("option domain is invalid");i+="; Domain=".concat(r.domain)}if(r.path){if(!R.test(r.path))throw new TypeError("option path is invalid");i+="; Path=".concat(r.path)}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+="; Expires=".concat(r.expires.toUTCString())}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite){var c=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(c){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return i},A={create:function(e,t,o,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};o&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+o*60*1e3)),r&&(a.domain=r),document.cookie=de(e,encodeURIComponent(t),a)},read:function(e){for(var t="".concat(e,"="),o=document.cookie.split(";"),r=0;r<o.length;r++){for(var a=o[r];a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(t)===0)return a.substring(t.length,a.length)}return null},remove:function(e){this.create(e,"",-1)}},pe={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&typeof document<"u"){var o=A.read(e.lookupCookie);o&&(t=o)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&typeof document<"u"&&A.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},me={name:"querystring",lookup:function(e){var t;if(typeof window<"u"){var o=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(o=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=o.substring(1),a=r.split("&"),i=0;i<a.length;i++){var l=a[i].indexOf("=");if(l>0){var c=a[i].substring(0,l);c===e.lookupQuerystring&&(t=a[i].substring(l+1))}}}return t}},b=null,O=function(){if(b!==null)return b;try{b=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{b=!1}return b},he={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&O()){var o=window.localStorage.getItem(e.lookupLocalStorage);o&&(t=o)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&O()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},x=null,z=function(){if(x!==null)return x;try{x=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{x=!1}return x},ve={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&z()){var o=window.sessionStorage.getItem(e.lookupSessionStorage);o&&(t=o)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&z()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},we={name:"navigator",lookup:function(e){var t=[];if(typeof navigator<"u"){if(navigator.languages)for(var o=0;o<navigator.languages.length;o++)t.push(navigator.languages[o]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},Se={name:"htmlTag",lookup:function(e){var t,o=e.htmlTag||(typeof document<"u"?document.documentElement:null);return o&&typeof o.getAttribute=="function"&&(t=o.getAttribute("lang")),t}},ke={name:"path",lookup:function(e){var t;if(typeof window<"u"){var o=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(o instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof o[e.lookupFromPathIndex]!="string")return;t=o[e.lookupFromPathIndex].replace("/","")}else t=o[0].replace("/","")}return t}},ye={name:"subdomain",lookup:function(e){var t=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,o=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(o)return o[t]}},j=!1;try{document.cookie,j=!0}catch{}var q=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];j||q.splice(1,1);function be(){return{order:q,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var Q=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};re(this,n),this.type="languageDetector",this.detectors={},this.init(e,t)}return le(n,[{key:"init",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t||{languageUtils:{}},this.options=ge(o,this.options||{},be()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(a){return a.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(pe),this.addDetector(me),this.addDetector(he),this.addDetector(ve),this.addDetector(we),this.addDetector(Se),this.addDetector(ke),this.addDetector(ye)}},{key:"addDetector",value:function(t){return this.detectors[t.name]=t,this}},{key:"detect",value:function(t){var o=this;t||(t=this.options.order);var r=[];return t.forEach(function(a){if(o.detectors[a]){var i=o.detectors[a].lookup(o.options);i&&typeof i=="string"&&(i=[i]),i&&(r=r.concat(i))}}),r=r.map(function(a){return o.options.convertDetectedLanguage(a)}),this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}},{key:"cacheUserLanguage",value:function(t,o){var r=this;o||(o=this.options.caches),o&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||o.forEach(function(a){r.detectors[a]&&r.detectors[a].cacheUserLanguage(t,r.options)}))}}])}();Q.type="languageDetector";const N=async n=>{try{return(await J(()=>import(`@translations-merged/${n}.json`),[],import.meta.url)).default}catch{throw console.error(`Failed to load merged translations for ${n}. Make sure the build process has run to generate merged translation files.`),new Error(`Missing merged translation file for language: ${n}`)}};let I=null;const xe=async()=>I||(I=(async()=>{await y.use(V).use(Q).init({debug:!1,fallbackLng:"en",supportedLngs:["en","fr"],defaultNS:"common",ns:["common"],detection:{order:["querystring","cookie","localStorage","navigator"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",caches:["localStorage","cookie"]},interpolation:{escapeValue:!1}});const n=y.language;console.log(`LanguageDetector detected language: ${n}`);try{console.log(`Loading initial translations for ${n}...`);const e=await N(n);y.addResourceBundle(n,"common",e,!0,!0),console.log(`✅ Initial translations loaded for ${n}`)}catch(e){if(console.error(`Failed to load initial translations for ${n}:`,e),n!=="en")try{const t=await N("en");y.addResourceBundle("en","common",t,!0,!0),await y.changeLanguage("en"),console.log("✅ Fallback English translations loaded")}catch(t){console.error("Failed to load fallback translations:",t)}}console.log("✅ i18n initialization complete")})(),I),Te=()=>{const{t:n,i18n:e}=ae(),t=async o=>{if(!e.hasResourceBundle(o,"common"))try{console.log(`Loading translations for ${o}...`);const r=await N(o);e.addResourceBundle(o,"common",r,!0,!0),console.log(`✅ Translations loaded for ${o}`)}catch(r){console.error(`Failed to load translations for ${o}:`,r);return}await e.changeLanguage(o)};return{t:n,changeLanguage:t,language:e.language,languages:["en","fr"],setLanguage:t,currentLanguage:e.language,i18n:e}};xe();export{Te as u};
