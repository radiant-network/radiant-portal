var Wu=Object.defineProperty;var $u=(r,e,n)=>e in r?Wu(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var re=(r,e,n)=>$u(r,typeof e!="symbol"?e+"":e,n);import{S as D}from"./api-B-gH50Ma.js";import{c as Ie,g as se}from"./index-DQLiH3RP.js";var De,Bn;function Ms(){if(Bn)return De;Bn=1;var r=typeof Ie=="object"&&Ie&&Ie.Object===Object&&Ie;return De=r,De}var Fe,Yn;function F(){if(Yn)return Fe;Yn=1;var r=Ms(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=r||e||Function("return this")();return Fe=n,Fe}var Le,Wn;function ue(){if(Wn)return Le;Wn=1;var r=F(),e=r.Symbol;return Le=e,Le}var Ue,$n;function W(){if($n)return Ue;$n=1;var r=Array.isArray;return Ue=r,Ue}var Ne,kn;function ku(){if(kn)return Ne;kn=1;var r=ue(),e=Object.prototype,n=e.hasOwnProperty,t=e.toString,a=r?r.toStringTag:void 0;function i(s){var u=n.call(s,a),o=s[a];try{s[a]=void 0;var c=!0}catch{}var f=t.call(s);return c&&(u?s[a]=o:delete s[a]),f}return Ne=i,Ne}var Me,zn;function zu(){if(zn)return Me;zn=1;var r=Object.prototype,e=r.toString;function n(t){return e.call(t)}return Me=n,Me}var Ge,Jn;function oe(){if(Jn)return Ge;Jn=1;var r=ue(),e=ku(),n=zu(),t="[object Null]",a="[object Undefined]",i=r?r.toStringTag:void 0;function s(u){return u==null?u===void 0?a:t:i&&i in Object(u)?e(u):n(u)}return Ge=s,Ge}var Ke,Xn;function K(){if(Xn)return Ke;Xn=1;function r(e){return e!=null&&typeof e=="object"}return Ke=r,Ke}const Zn={GreaterThan:D.GreaterThan,LessThan:D.LessThan,Between:D.Between,GreaterThanOrEqualTo:D.GreaterThanOrEqualTo,LessThanOrEqualTo:D.LessThanOrEqualTo,In:D.In},Gs={In:D.In,NotIn:D.NotIn,All:D.All},Re={And:D.And,Or:D.Or,Not:D.Not},Ju="set_id:";var Z=(r=>(r.DEFAULT="OVERRIDE_VALUES",r.OVERRIDE_VALUES="OVERRIDE_VALUES",r.APPEND_VALUES="APPEND_VALUES",r))(Z||{}),Te=(r=>(r.DEFAULT="OVERRIDE_OPERATOR",r.OVERRIDE_OPERATOR="OVERRIDE_OPERATOR",r.KEEP_OPERATOR="KEEP_OPERATOR",r))(Te||{});const E=[];for(let r=0;r<256;++r)E.push((r+256).toString(16).slice(1));function Xu(r,e=0){return(E[r[e+0]]+E[r[e+1]]+E[r[e+2]]+E[r[e+3]]+"-"+E[r[e+4]]+E[r[e+5]]+"-"+E[r[e+6]]+E[r[e+7]]+"-"+E[r[e+8]]+E[r[e+9]]+"-"+E[r[e+10]]+E[r[e+11]]+E[r[e+12]]+E[r[e+13]]+E[r[e+14]]+E[r[e+15]]).toLowerCase()}let Ve;const Zu=new Uint8Array(16);function eo(){if(!Ve){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ve=crypto.getRandomValues.bind(crypto)}return Ve(Zu)}const ro=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ea={randomUUID:ro};function x(r,e,n){var a;if(ea.randomUUID&&!r)return ea.randomUUID();r=r||{};const t=r.random??((a=r.rng)==null?void 0:a.call(r))??eo();if(t.length<16)throw new Error("Random bytes length must be >= 16");return t[6]=t[6]&15|64,t[8]=t[8]&63|128,Xu(t)}var He,ra;function Oe(){if(ra)return He;ra=1;var r=Object.prototype;function e(n){var t=n&&n.constructor,a=typeof t=="function"&&t.prototype||r;return n===a}return He=e,He}var Be,ta;function Ks(){if(ta)return Be;ta=1;function r(e,n){return function(t){return e(n(t))}}return Be=r,Be}var Ye,na;function to(){if(na)return Ye;na=1;var r=Ks(),e=r(Object.keys,Object);return Ye=e,Ye}var We,aa;function Vs(){if(aa)return We;aa=1;var r=Oe(),e=to(),n=Object.prototype,t=n.hasOwnProperty;function a(i){if(!r(i))return e(i);var s=[];for(var u in Object(i))t.call(i,u)&&u!="constructor"&&s.push(u);return s}return We=a,We}var $e,ia;function V(){if(ia)return $e;ia=1;function r(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return $e=r,$e}var ke,sa;function Cn(){if(sa)return ke;sa=1;var r=oe(),e=V(),n="[object AsyncFunction]",t="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(u){if(!e(u))return!1;var o=r(u);return o==t||o==a||o==n||o==i}return ke=s,ke}var ze,ua;function no(){if(ua)return ze;ua=1;var r=F(),e=r["__core-js_shared__"];return ze=e,ze}var Je,oa;function ao(){if(oa)return Je;oa=1;var r=no(),e=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function n(t){return!!e&&e in t}return Je=n,Je}var Xe,ca;function Hs(){if(ca)return Xe;ca=1;var r=Function.prototype,e=r.toString;function n(t){if(t!=null){try{return e.call(t)}catch{}try{return t+""}catch{}}return""}return Xe=n,Xe}var Ze,fa;function io(){if(fa)return Ze;fa=1;var r=Cn(),e=ao(),n=V(),t=Hs(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,u=Object.prototype,o=s.toString,c=u.hasOwnProperty,f=RegExp("^"+o.call(c).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l(v){if(!n(v)||e(v))return!1;var d=r(v)?f:i;return d.test(t(v))}return Ze=l,Ze}var er,la;function so(){if(la)return er;la=1;function r(e,n){return e==null?void 0:e[n]}return er=r,er}var rr,va;function $(){if(va)return rr;va=1;var r=io(),e=so();function n(t,a){var i=e(t,a);return r(i)?i:void 0}return rr=n,rr}var tr,da;function uo(){if(da)return tr;da=1;var r=$(),e=F(),n=r(e,"DataView");return tr=n,tr}var nr,_a;function mn(){if(_a)return nr;_a=1;var r=$(),e=F(),n=r(e,"Map");return nr=n,nr}var ar,pa;function oo(){if(pa)return ar;pa=1;var r=$(),e=F(),n=r(e,"Promise");return ar=n,ar}var ir,ga;function Bs(){if(ga)return ir;ga=1;var r=$(),e=F(),n=r(e,"Set");return ir=n,ir}var sr,ha;function co(){if(ha)return sr;ha=1;var r=$(),e=F(),n=r(e,"WeakMap");return sr=n,sr}var ur,ya;function ce(){if(ya)return ur;ya=1;var r=uo(),e=mn(),n=oo(),t=Bs(),a=co(),i=oe(),s=Hs(),u="[object Map]",o="[object Object]",c="[object Promise]",f="[object Set]",l="[object WeakMap]",v="[object DataView]",d=s(r),b=s(e),_=s(n),h=s(t),S=s(a),p=i;return(r&&p(new r(new ArrayBuffer(1)))!=v||e&&p(new e)!=u||n&&p(n.resolve())!=c||t&&p(new t)!=f||a&&p(new a)!=l)&&(p=function(R){var q=i(R),m=q==o?R.constructor:void 0,A=m?s(m):"";if(A)switch(A){case d:return v;case b:return u;case _:return c;case h:return f;case S:return l}return q}),ur=p,ur}var or,ba;function fo(){if(ba)return or;ba=1;var r=oe(),e=K(),n="[object Arguments]";function t(a){return e(a)&&r(a)==n}return or=t,or}var cr,Aa;function Ce(){if(Aa)return cr;Aa=1;var r=fo(),e=K(),n=Object.prototype,t=n.hasOwnProperty,a=n.propertyIsEnumerable,i=r(function(){return arguments}())?r:function(s){return e(s)&&t.call(s,"callee")&&!a.call(s,"callee")};return cr=i,cr}var fr,qa;function Ys(){if(qa)return fr;qa=1;var r=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=r}return fr=e,fr}var lr,Sa;function fe(){if(Sa)return lr;Sa=1;var r=Cn(),e=Ys();function n(t){return t!=null&&e(t.length)&&!r(t)}return lr=n,lr}var te={exports:{}},vr,Ia;function lo(){if(Ia)return vr;Ia=1;function r(){return!1}return vr=r,vr}te.exports;var Ra;function le(){return Ra||(Ra=1,function(r,e){var n=F(),t=lo(),a=e&&!e.nodeType&&e,i=a&&!0&&r&&!r.nodeType&&r,s=i&&i.exports===a,u=s?n.Buffer:void 0,o=u?u.isBuffer:void 0,c=o||t;r.exports=c}(te,te.exports)),te.exports}var dr,Ta;function vo(){if(Ta)return dr;Ta=1;var r=oe(),e=Ys(),n=K(),t="[object Arguments]",a="[object Array]",i="[object Boolean]",s="[object Date]",u="[object Error]",o="[object Function]",c="[object Map]",f="[object Number]",l="[object Object]",v="[object RegExp]",d="[object Set]",b="[object String]",_="[object WeakMap]",h="[object ArrayBuffer]",S="[object DataView]",p="[object Float32Array]",R="[object Float64Array]",q="[object Int8Array]",m="[object Int16Array]",A="[object Int32Array]",g="[object Uint8Array]",I="[object Uint8ClampedArray]",T="[object Uint16Array]",C="[object Uint32Array]",y={};y[p]=y[R]=y[q]=y[m]=y[A]=y[g]=y[I]=y[T]=y[C]=!0,y[t]=y[a]=y[h]=y[i]=y[S]=y[s]=y[u]=y[o]=y[c]=y[f]=y[l]=y[v]=y[d]=y[b]=y[_]=!1;function Q(w){return n(w)&&e(w.length)&&!!y[r(w)]}return dr=Q,dr}var _r,Oa;function Pn(){if(Oa)return _r;Oa=1;function r(e){return function(n){return e(n)}}return _r=r,_r}var ne={exports:{}};ne.exports;var Ca;function Qn(){return Ca||(Ca=1,function(r,e){var n=Ms(),t=e&&!e.nodeType&&e,a=t&&!0&&r&&!r.nodeType&&r,i=a&&a.exports===t,s=i&&n.process,u=function(){try{var o=a&&a.require&&a.require("util").types;return o||s&&s.binding&&s.binding("util")}catch{}}();r.exports=u}(ne,ne.exports)),ne.exports}var pr,ma;function me(){if(ma)return pr;ma=1;var r=vo(),e=Pn(),n=Qn(),t=n&&n.isTypedArray,a=t?e(t):r;return pr=a,pr}var gr,Pa;function _o(){if(Pa)return gr;Pa=1;var r=Vs(),e=ce(),n=Ce(),t=W(),a=fe(),i=le(),s=Oe(),u=me(),o="[object Map]",c="[object Set]",f=Object.prototype,l=f.hasOwnProperty;function v(d){if(d==null)return!0;if(a(d)&&(t(d)||typeof d=="string"||typeof d.splice=="function"||i(d)||u(d)||n(d)))return!d.length;var b=e(d);if(b==o||b==c)return!d.size;if(s(d))return!r(d).length;for(var _ in d)if(l.call(d,_))return!1;return!0}return gr=v,gr}var po=_o();const M=se(po);var hr,Qa;function go(){if(Qa)return hr;Qa=1;function r(){this.__data__=[],this.size=0}return hr=r,hr}var yr,wa;function ve(){if(wa)return yr;wa=1;function r(e,n){return e===n||e!==e&&n!==n}return yr=r,yr}var br,Ea;function Pe(){if(Ea)return br;Ea=1;var r=ve();function e(n,t){for(var a=n.length;a--;)if(r(n[a][0],t))return a;return-1}return br=e,br}var Ar,ja;function ho(){if(ja)return Ar;ja=1;var r=Pe(),e=Array.prototype,n=e.splice;function t(a){var i=this.__data__,s=r(i,a);if(s<0)return!1;var u=i.length-1;return s==u?i.pop():n.call(i,s,1),--this.size,!0}return Ar=t,Ar}var qr,xa;function yo(){if(xa)return qr;xa=1;var r=Pe();function e(n){var t=this.__data__,a=r(t,n);return a<0?void 0:t[a][1]}return qr=e,qr}var Sr,Da;function bo(){if(Da)return Sr;Da=1;var r=Pe();function e(n){return r(this.__data__,n)>-1}return Sr=e,Sr}var Ir,Fa;function Ao(){if(Fa)return Ir;Fa=1;var r=Pe();function e(n,t){var a=this.__data__,i=r(a,n);return i<0?(++this.size,a.push([n,t])):a[i][1]=t,this}return Ir=e,Ir}var Rr,La;function Qe(){if(La)return Rr;La=1;var r=go(),e=ho(),n=yo(),t=bo(),a=Ao();function i(s){var u=-1,o=s==null?0:s.length;for(this.clear();++u<o;){var c=s[u];this.set(c[0],c[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=n,i.prototype.has=t,i.prototype.set=a,Rr=i,Rr}var Tr,Ua;function qo(){if(Ua)return Tr;Ua=1;var r=Qe();function e(){this.__data__=new r,this.size=0}return Tr=e,Tr}var Or,Na;function So(){if(Na)return Or;Na=1;function r(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}return Or=r,Or}var Cr,Ma;function Io(){if(Ma)return Cr;Ma=1;function r(e){return this.__data__.get(e)}return Cr=r,Cr}var mr,Ga;function Ro(){if(Ga)return mr;Ga=1;function r(e){return this.__data__.has(e)}return mr=r,mr}var Pr,Ka;function we(){if(Ka)return Pr;Ka=1;var r=$(),e=r(Object,"create");return Pr=e,Pr}var Qr,Va;function To(){if(Va)return Qr;Va=1;var r=we();function e(){this.__data__=r?r(null):{},this.size=0}return Qr=e,Qr}var wr,Ha;function Oo(){if(Ha)return wr;Ha=1;function r(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return wr=r,wr}var Er,Ba;function Co(){if(Ba)return Er;Ba=1;var r=we(),e="__lodash_hash_undefined__",n=Object.prototype,t=n.hasOwnProperty;function a(i){var s=this.__data__;if(r){var u=s[i];return u===e?void 0:u}return t.call(s,i)?s[i]:void 0}return Er=a,Er}var jr,Ya;function mo(){if(Ya)return jr;Ya=1;var r=we(),e=Object.prototype,n=e.hasOwnProperty;function t(a){var i=this.__data__;return r?i[a]!==void 0:n.call(i,a)}return jr=t,jr}var xr,Wa;function Po(){if(Wa)return xr;Wa=1;var r=we(),e="__lodash_hash_undefined__";function n(t,a){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=r&&a===void 0?e:a,this}return xr=n,xr}var Dr,$a;function Qo(){if($a)return Dr;$a=1;var r=To(),e=Oo(),n=Co(),t=mo(),a=Po();function i(s){var u=-1,o=s==null?0:s.length;for(this.clear();++u<o;){var c=s[u];this.set(c[0],c[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=n,i.prototype.has=t,i.prototype.set=a,Dr=i,Dr}var Fr,ka;function wo(){if(ka)return Fr;ka=1;var r=Qo(),e=Qe(),n=mn();function t(){this.size=0,this.__data__={hash:new r,map:new(n||e),string:new r}}return Fr=t,Fr}var Lr,za;function Eo(){if(za)return Lr;za=1;function r(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return Lr=r,Lr}var Ur,Ja;function Ee(){if(Ja)return Ur;Ja=1;var r=Eo();function e(n,t){var a=n.__data__;return r(t)?a[typeof t=="string"?"string":"hash"]:a.map}return Ur=e,Ur}var Nr,Xa;function jo(){if(Xa)return Nr;Xa=1;var r=Ee();function e(n){var t=r(this,n).delete(n);return this.size-=t?1:0,t}return Nr=e,Nr}var Mr,Za;function xo(){if(Za)return Mr;Za=1;var r=Ee();function e(n){return r(this,n).get(n)}return Mr=e,Mr}var Gr,ei;function Do(){if(ei)return Gr;ei=1;var r=Ee();function e(n){return r(this,n).has(n)}return Gr=e,Gr}var Kr,ri;function Fo(){if(ri)return Kr;ri=1;var r=Ee();function e(n,t){var a=r(this,n),i=a.size;return a.set(n,t),this.size+=a.size==i?0:1,this}return Kr=e,Kr}var Vr,ti;function Ws(){if(ti)return Vr;ti=1;var r=wo(),e=jo(),n=xo(),t=Do(),a=Fo();function i(s){var u=-1,o=s==null?0:s.length;for(this.clear();++u<o;){var c=s[u];this.set(c[0],c[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=n,i.prototype.has=t,i.prototype.set=a,Vr=i,Vr}var Hr,ni;function Lo(){if(ni)return Hr;ni=1;var r=Qe(),e=mn(),n=Ws(),t=200;function a(i,s){var u=this.__data__;if(u instanceof r){var o=u.__data__;if(!e||o.length<t-1)return o.push([i,s]),this.size=++u.size,this;u=this.__data__=new n(o)}return u.set(i,s),this.size=u.size,this}return Hr=a,Hr}var Br,ai;function wn(){if(ai)return Br;ai=1;var r=Qe(),e=qo(),n=So(),t=Io(),a=Ro(),i=Lo();function s(u){var o=this.__data__=new r(u);this.size=o.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=t,s.prototype.has=a,s.prototype.set=i,Br=s,Br}var Yr,ii;function Uo(){if(ii)return Yr;ii=1;function r(e,n){for(var t=-1,a=e==null?0:e.length;++t<a&&n(e[t],t,e)!==!1;);return e}return Yr=r,Yr}var Wr,si;function $s(){if(si)return Wr;si=1;var r=$(),e=function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Wr=e,Wr}var $r,ui;function En(){if(ui)return $r;ui=1;var r=$s();function e(n,t,a){t=="__proto__"&&r?r(n,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[t]=a}return $r=e,$r}var kr,oi;function ks(){if(oi)return kr;oi=1;var r=En(),e=ve(),n=Object.prototype,t=n.hasOwnProperty;function a(i,s,u){var o=i[s];(!(t.call(i,s)&&e(o,u))||u===void 0&&!(s in i))&&r(i,s,u)}return kr=a,kr}var zr,ci;function de(){if(ci)return zr;ci=1;var r=ks(),e=En();function n(t,a,i,s){var u=!i;i||(i={});for(var o=-1,c=a.length;++o<c;){var f=a[o],l=s?s(i[f],t[f],f,i,t):void 0;l===void 0&&(l=t[f]),u?e(i,f,l):r(i,f,l)}return i}return zr=n,zr}var Jr,fi;function No(){if(fi)return Jr;fi=1;function r(e,n){for(var t=-1,a=Array(e);++t<e;)a[t]=n(t);return a}return Jr=r,Jr}var Xr,li;function zs(){if(li)return Xr;li=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(t,a){var i=typeof t;return a=a??r,!!a&&(i=="number"||i!="symbol"&&e.test(t))&&t>-1&&t%1==0&&t<a}return Xr=n,Xr}var Zr,vi;function Js(){if(vi)return Zr;vi=1;var r=No(),e=Ce(),n=W(),t=le(),a=zs(),i=me(),s=Object.prototype,u=s.hasOwnProperty;function o(c,f){var l=n(c),v=!l&&e(c),d=!l&&!v&&t(c),b=!l&&!v&&!d&&i(c),_=l||v||d||b,h=_?r(c.length,String):[],S=h.length;for(var p in c)(f||u.call(c,p))&&!(_&&(p=="length"||d&&(p=="offset"||p=="parent")||b&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||a(p,S)))&&h.push(p);return h}return Zr=o,Zr}var et,di;function jn(){if(di)return et;di=1;var r=Js(),e=Vs(),n=fe();function t(a){return n(a)?r(a):e(a)}return et=t,et}var rt,_i;function Mo(){if(_i)return rt;_i=1;var r=de(),e=jn();function n(t,a){return t&&r(a,e(a),t)}return rt=n,rt}var tt,pi;function Go(){if(pi)return tt;pi=1;function r(e){var n=[];if(e!=null)for(var t in Object(e))n.push(t);return n}return tt=r,tt}var nt,gi;function Ko(){if(gi)return nt;gi=1;var r=V(),e=Oe(),n=Go(),t=Object.prototype,a=t.hasOwnProperty;function i(s){if(!r(s))return n(s);var u=e(s),o=[];for(var c in s)c=="constructor"&&(u||!a.call(s,c))||o.push(c);return o}return nt=i,nt}var at,hi;function _e(){if(hi)return at;hi=1;var r=Js(),e=Ko(),n=fe();function t(a){return n(a)?r(a,!0):e(a)}return at=t,at}var it,yi;function Vo(){if(yi)return it;yi=1;var r=de(),e=_e();function n(t,a){return t&&r(a,e(a),t)}return it=n,it}var ae={exports:{}};ae.exports;var bi;function Xs(){return bi||(bi=1,function(r,e){var n=F(),t=e&&!e.nodeType&&e,a=t&&!0&&r&&!r.nodeType&&r,i=a&&a.exports===t,s=i?n.Buffer:void 0,u=s?s.allocUnsafe:void 0;function o(c,f){if(f)return c.slice();var l=c.length,v=u?u(l):new c.constructor(l);return c.copy(v),v}r.exports=o}(ae,ae.exports)),ae.exports}var st,Ai;function Zs(){if(Ai)return st;Ai=1;function r(e,n){var t=-1,a=e.length;for(n||(n=Array(a));++t<a;)n[t]=e[t];return n}return st=r,st}var ut,qi;function Ho(){if(qi)return ut;qi=1;function r(e,n){for(var t=-1,a=e==null?0:e.length,i=0,s=[];++t<a;){var u=e[t];n(u,t,e)&&(s[i++]=u)}return s}return ut=r,ut}var ot,Si;function eu(){if(Si)return ot;Si=1;function r(){return[]}return ot=r,ot}var ct,Ii;function xn(){if(Ii)return ct;Ii=1;var r=Ho(),e=eu(),n=Object.prototype,t=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(s){return s==null?[]:(s=Object(s),r(a(s),function(u){return t.call(s,u)}))}:e;return ct=i,ct}var ft,Ri;function Bo(){if(Ri)return ft;Ri=1;var r=de(),e=xn();function n(t,a){return r(t,e(t),a)}return ft=n,ft}var lt,Ti;function Dn(){if(Ti)return lt;Ti=1;function r(e,n){for(var t=-1,a=n.length,i=e.length;++t<a;)e[i+t]=n[t];return e}return lt=r,lt}var vt,Oi;function Fn(){if(Oi)return vt;Oi=1;var r=Ks(),e=r(Object.getPrototypeOf,Object);return vt=e,vt}var dt,Ci;function ru(){if(Ci)return dt;Ci=1;var r=Dn(),e=Fn(),n=xn(),t=eu(),a=Object.getOwnPropertySymbols,i=a?function(s){for(var u=[];s;)r(u,n(s)),s=e(s);return u}:t;return dt=i,dt}var _t,mi;function Yo(){if(mi)return _t;mi=1;var r=de(),e=ru();function n(t,a){return r(t,e(t),a)}return _t=n,_t}var pt,Pi;function tu(){if(Pi)return pt;Pi=1;var r=Dn(),e=W();function n(t,a,i){var s=a(t);return e(t)?s:r(s,i(t))}return pt=n,pt}var gt,Qi;function nu(){if(Qi)return gt;Qi=1;var r=tu(),e=xn(),n=jn();function t(a){return r(a,n,e)}return gt=t,gt}var ht,wi;function Wo(){if(wi)return ht;wi=1;var r=tu(),e=ru(),n=_e();function t(a){return r(a,n,e)}return ht=t,ht}var yt,Ei;function $o(){if(Ei)return yt;Ei=1;var r=Object.prototype,e=r.hasOwnProperty;function n(t){var a=t.length,i=new t.constructor(a);return a&&typeof t[0]=="string"&&e.call(t,"index")&&(i.index=t.index,i.input=t.input),i}return yt=n,yt}var bt,ji;function au(){if(ji)return bt;ji=1;var r=F(),e=r.Uint8Array;return bt=e,bt}var At,xi;function Ln(){if(xi)return At;xi=1;var r=au();function e(n){var t=new n.constructor(n.byteLength);return new r(t).set(new r(n)),t}return At=e,At}var qt,Di;function ko(){if(Di)return qt;Di=1;var r=Ln();function e(n,t){var a=t?r(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}return qt=e,qt}var St,Fi;function zo(){if(Fi)return St;Fi=1;var r=/\w*$/;function e(n){var t=new n.constructor(n.source,r.exec(n));return t.lastIndex=n.lastIndex,t}return St=e,St}var It,Li;function Jo(){if(Li)return It;Li=1;var r=ue(),e=r?r.prototype:void 0,n=e?e.valueOf:void 0;function t(a){return n?Object(n.call(a)):{}}return It=t,It}var Rt,Ui;function iu(){if(Ui)return Rt;Ui=1;var r=Ln();function e(n,t){var a=t?r(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}return Rt=e,Rt}var Tt,Ni;function Xo(){if(Ni)return Tt;Ni=1;var r=Ln(),e=ko(),n=zo(),t=Jo(),a=iu(),i="[object Boolean]",s="[object Date]",u="[object Map]",o="[object Number]",c="[object RegExp]",f="[object Set]",l="[object String]",v="[object Symbol]",d="[object ArrayBuffer]",b="[object DataView]",_="[object Float32Array]",h="[object Float64Array]",S="[object Int8Array]",p="[object Int16Array]",R="[object Int32Array]",q="[object Uint8Array]",m="[object Uint8ClampedArray]",A="[object Uint16Array]",g="[object Uint32Array]";function I(T,C,y){var Q=T.constructor;switch(C){case d:return r(T);case i:case s:return new Q(+T);case b:return e(T,y);case _:case h:case S:case p:case R:case q:case m:case A:case g:return a(T,y);case u:return new Q;case o:case l:return new Q(T);case c:return n(T);case f:return new Q;case v:return t(T)}}return Tt=I,Tt}var Ot,Mi;function Zo(){if(Mi)return Ot;Mi=1;var r=V(),e=Object.create,n=function(){function t(){}return function(a){if(!r(a))return{};if(e)return e(a);t.prototype=a;var i=new t;return t.prototype=void 0,i}}();return Ot=n,Ot}var Ct,Gi;function su(){if(Gi)return Ct;Gi=1;var r=Zo(),e=Fn(),n=Oe();function t(a){return typeof a.constructor=="function"&&!n(a)?r(e(a)):{}}return Ct=t,Ct}var mt,Ki;function ec(){if(Ki)return mt;Ki=1;var r=ce(),e=K(),n="[object Map]";function t(a){return e(a)&&r(a)==n}return mt=t,mt}var Pt,Vi;function rc(){if(Vi)return Pt;Vi=1;var r=ec(),e=Pn(),n=Qn(),t=n&&n.isMap,a=t?e(t):r;return Pt=a,Pt}var Qt,Hi;function tc(){if(Hi)return Qt;Hi=1;var r=ce(),e=K(),n="[object Set]";function t(a){return e(a)&&r(a)==n}return Qt=t,Qt}var wt,Bi;function nc(){if(Bi)return wt;Bi=1;var r=tc(),e=Pn(),n=Qn(),t=n&&n.isSet,a=t?e(t):r;return wt=a,wt}var Et,Yi;function ac(){if(Yi)return Et;Yi=1;var r=wn(),e=Uo(),n=ks(),t=Mo(),a=Vo(),i=Xs(),s=Zs(),u=Bo(),o=Yo(),c=nu(),f=Wo(),l=ce(),v=$o(),d=Xo(),b=su(),_=W(),h=le(),S=rc(),p=V(),R=nc(),q=jn(),m=_e(),A=1,g=2,I=4,T="[object Arguments]",C="[object Array]",y="[object Boolean]",Q="[object Date]",w="[object Error]",L="[object Function]",k="[object GeneratorFunction]",xe="[object Map]",Cu="[object Number]",Mn="[object Object]",mu="[object RegExp]",Pu="[object Set]",Qu="[object String]",wu="[object Symbol]",Eu="[object WeakMap]",ju="[object ArrayBuffer]",xu="[object DataView]",Du="[object Float32Array]",Fu="[object Float64Array]",Lu="[object Int8Array]",Uu="[object Int16Array]",Nu="[object Int32Array]",Mu="[object Uint8Array]",Gu="[object Uint8ClampedArray]",Ku="[object Uint16Array]",Vu="[object Uint32Array]",P={};P[T]=P[C]=P[ju]=P[xu]=P[y]=P[Q]=P[Du]=P[Fu]=P[Lu]=P[Uu]=P[Nu]=P[xe]=P[Cu]=P[Mn]=P[mu]=P[Pu]=P[Qu]=P[wu]=P[Mu]=P[Gu]=P[Ku]=P[Vu]=!0,P[w]=P[L]=P[Eu]=!1;function be(O,z,J,Hu,Ae,U){var j,qe=z&A,Se=z&g,Bu=z&I;if(J&&(j=Ae?J(O,Hu,Ae,U):J(O)),j!==void 0)return j;if(!p(O))return O;var Gn=_(O);if(Gn){if(j=v(O),!qe)return s(O,j)}else{var X=l(O),Kn=X==L||X==k;if(h(O))return i(O,qe);if(X==Mn||X==T||Kn&&!Ae){if(j=Se||Kn?{}:b(O),!qe)return Se?o(O,a(j,O)):u(O,t(j,O))}else{if(!P[X])return Ae?O:{};j=d(O,X,qe)}}U||(U=new r);var Vn=U.get(O);if(Vn)return Vn;U.set(O,j),R(O)?O.forEach(function(N){j.add(be(N,z,J,N,O,U))}):S(O)&&O.forEach(function(N,H){j.set(H,be(N,z,J,H,O,U))});var Yu=Bu?Se?f:c:Se?m:q,Hn=Gn?void 0:Yu(O);return e(Hn||O,function(N,H){Hn&&(H=N,N=O[H]),n(j,H,be(N,z,J,H,O,U))}),j}return Et=be,Et}var jt,Wi;function ic(){if(Wi)return jt;Wi=1;var r=ac(),e=1,n=4;function t(a){return r(a,e|n)}return jt=t,jt}var sc=ic();const B=se(sc);var xt,$i;function uu(){if($i)return xt;$i=1;var r=En(),e=ve();function n(t,a,i){(i!==void 0&&!e(t[a],i)||i===void 0&&!(a in t))&&r(t,a,i)}return xt=n,xt}var Dt,ki;function uc(){if(ki)return Dt;ki=1;function r(e){return function(n,t,a){for(var i=-1,s=Object(n),u=a(n),o=u.length;o--;){var c=u[e?o:++i];if(t(s[c],c,s)===!1)break}return n}}return Dt=r,Dt}var Ft,zi;function oc(){if(zi)return Ft;zi=1;var r=uc(),e=r();return Ft=e,Ft}var Lt,Ji;function ou(){if(Ji)return Lt;Ji=1;var r=fe(),e=K();function n(t){return e(t)&&r(t)}return Lt=n,Lt}var Ut,Xi;function cc(){if(Xi)return Ut;Xi=1;var r=oe(),e=Fn(),n=K(),t="[object Object]",a=Function.prototype,i=Object.prototype,s=a.toString,u=i.hasOwnProperty,o=s.call(Object);function c(f){if(!n(f)||r(f)!=t)return!1;var l=e(f);if(l===null)return!0;var v=u.call(l,"constructor")&&l.constructor;return typeof v=="function"&&v instanceof v&&s.call(v)==o}return Ut=c,Ut}var Nt,Zi;function cu(){if(Zi)return Nt;Zi=1;function r(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return Nt=r,Nt}var Mt,es;function fc(){if(es)return Mt;es=1;var r=de(),e=_e();function n(t){return r(t,e(t))}return Mt=n,Mt}var Gt,rs;function lc(){if(rs)return Gt;rs=1;var r=uu(),e=Xs(),n=iu(),t=Zs(),a=su(),i=Ce(),s=W(),u=ou(),o=le(),c=Cn(),f=V(),l=cc(),v=me(),d=cu(),b=fc();function _(h,S,p,R,q,m,A){var g=d(h,p),I=d(S,p),T=A.get(I);if(T){r(h,p,T);return}var C=m?m(g,I,p+"",h,S,A):void 0,y=C===void 0;if(y){var Q=s(I),w=!Q&&o(I),L=!Q&&!w&&v(I);C=I,Q||w||L?s(g)?C=g:u(g)?C=t(g):w?(y=!1,C=e(I,!0)):L?(y=!1,C=n(I,!0)):C=[]:l(I)||i(I)?(C=g,i(g)?C=b(g):(!f(g)||c(g))&&(C=a(I))):y=!1}y&&(A.set(I,C),q(C,I,R,m,A),A.delete(I)),r(h,p,C)}return Gt=_,Gt}var Kt,ts;function vc(){if(ts)return Kt;ts=1;var r=wn(),e=uu(),n=oc(),t=lc(),a=V(),i=_e(),s=cu();function u(o,c,f,l,v){o!==c&&n(c,function(d,b){if(v||(v=new r),a(d))t(o,c,b,f,u,l,v);else{var _=l?l(s(o,b),d,b+"",o,c,v):void 0;_===void 0&&(_=d),e(o,b,_)}},i)}return Kt=u,Kt}var Vt,ns;function fu(){if(ns)return Vt;ns=1;function r(e){return e}return Vt=r,Vt}var Ht,as;function dc(){if(as)return Ht;as=1;function r(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}return Ht=r,Ht}var Bt,is;function _c(){if(is)return Bt;is=1;var r=dc(),e=Math.max;function n(t,a,i){return a=e(a===void 0?t.length-1:a,0),function(){for(var s=arguments,u=-1,o=e(s.length-a,0),c=Array(o);++u<o;)c[u]=s[a+u];u=-1;for(var f=Array(a+1);++u<a;)f[u]=s[u];return f[a]=i(c),r(t,this,f)}}return Bt=n,Bt}var Yt,ss;function pc(){if(ss)return Yt;ss=1;function r(e){return function(){return e}}return Yt=r,Yt}var Wt,us;function gc(){if(us)return Wt;us=1;var r=pc(),e=$s(),n=fu(),t=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:r(i),writable:!0})}:n;return Wt=t,Wt}var $t,os;function hc(){if(os)return $t;os=1;var r=800,e=16,n=Date.now;function t(a){var i=0,s=0;return function(){var u=n(),o=e-(u-s);if(s=u,o>0){if(++i>=r)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return $t=t,$t}var kt,cs;function yc(){if(cs)return kt;cs=1;var r=gc(),e=hc(),n=e(r);return kt=n,kt}var zt,fs;function lu(){if(fs)return zt;fs=1;var r=fu(),e=_c(),n=yc();function t(a,i){return n(e(a,i,r),a+"")}return zt=t,zt}var Jt,ls;function bc(){if(ls)return Jt;ls=1;var r=ve(),e=fe(),n=zs(),t=V();function a(i,s,u){if(!t(u))return!1;var o=typeof s;return(o=="number"?e(u)&&n(s,u.length):o=="string"&&s in u)?r(u[s],i):!1}return Jt=a,Jt}var Xt,vs;function Ac(){if(vs)return Xt;vs=1;var r=lu(),e=bc();function n(t){return r(function(a,i){var s=-1,u=i.length,o=u>1?i[u-1]:void 0,c=u>2?i[2]:void 0;for(o=t.length>3&&typeof o=="function"?(u--,o):void 0,c&&e(i[0],i[1],c)&&(o=u<3?void 0:o,u=1),a=Object(a);++s<u;){var f=i[s];f&&t(a,f,s,o)}return a})}return Xt=n,Xt}var Zt,ds;function qc(){if(ds)return Zt;ds=1;var r=vc(),e=Ac(),n=e(function(t,a,i){r(t,a,i)});return Zt=n,Zt}var Sc=qc();const Ic=se(Sc);var en,_s;function Rc(){if(_s)return en;_s=1;var r=ue(),e=Ce(),n=W(),t=r?r.isConcatSpreadable:void 0;function a(i){return n(i)||e(i)||!!(t&&i&&i[t])}return en=a,en}var rn,ps;function Tc(){if(ps)return rn;ps=1;var r=Dn(),e=Rc();function n(t,a,i,s,u){var o=-1,c=t.length;for(i||(i=e),u||(u=[]);++o<c;){var f=t[o];a>0&&i(f)?a>1?n(f,a-1,i,s,u):r(u,f):s||(u[u.length]=f)}return u}return rn=n,rn}var tn,gs;function Oc(){if(gs)return tn;gs=1;var r="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,r),this}return tn=e,tn}var nn,hs;function Cc(){if(hs)return nn;hs=1;function r(e){return this.__data__.has(e)}return nn=r,nn}var an,ys;function vu(){if(ys)return an;ys=1;var r=Ws(),e=Oc(),n=Cc();function t(a){var i=-1,s=a==null?0:a.length;for(this.__data__=new r;++i<s;)this.add(a[i])}return t.prototype.add=t.prototype.push=e,t.prototype.has=n,an=t,an}var sn,bs;function mc(){if(bs)return sn;bs=1;function r(e,n,t,a){for(var i=e.length,s=t+(a?1:-1);a?s--:++s<i;)if(n(e[s],s,e))return s;return-1}return sn=r,sn}var un,As;function Pc(){if(As)return un;As=1;function r(e){return e!==e}return un=r,un}var on,qs;function Qc(){if(qs)return on;qs=1;function r(e,n,t){for(var a=t-1,i=e.length;++a<i;)if(e[a]===n)return a;return-1}return on=r,on}var cn,Ss;function wc(){if(Ss)return cn;Ss=1;var r=mc(),e=Pc(),n=Qc();function t(a,i,s){return i===i?n(a,i,s):r(a,e,s)}return cn=t,cn}var fn,Is;function Ec(){if(Is)return fn;Is=1;var r=wc();function e(n,t){var a=n==null?0:n.length;return!!a&&r(n,t,0)>-1}return fn=e,fn}var ln,Rs;function jc(){if(Rs)return ln;Rs=1;function r(e,n,t){for(var a=-1,i=e==null?0:e.length;++a<i;)if(t(n,e[a]))return!0;return!1}return ln=r,ln}var vn,Ts;function du(){if(Ts)return vn;Ts=1;function r(e,n){return e.has(n)}return vn=r,vn}var dn,Os;function xc(){if(Os)return dn;Os=1;function r(){}return dn=r,dn}var _n,Cs;function Un(){if(Cs)return _n;Cs=1;function r(e){var n=-1,t=Array(e.size);return e.forEach(function(a){t[++n]=a}),t}return _n=r,_n}var pn,ms;function Dc(){if(ms)return pn;ms=1;var r=Bs(),e=xc(),n=Un(),t=1/0,a=r&&1/n(new r([,-0]))[1]==t?function(i){return new r(i)}:e;return pn=a,pn}var gn,Ps;function Fc(){if(Ps)return gn;Ps=1;var r=vu(),e=Ec(),n=jc(),t=du(),a=Dc(),i=Un(),s=200;function u(o,c,f){var l=-1,v=e,d=o.length,b=!0,_=[],h=_;if(f)b=!1,v=n;else if(d>=s){var S=c?null:a(o);if(S)return i(S);b=!1,v=t,h=new r}else h=c?[]:_;e:for(;++l<d;){var p=o[l],R=c?c(p):p;if(p=f||p!==0?p:0,b&&R===R){for(var q=h.length;q--;)if(h[q]===R)continue e;c&&h.push(R),_.push(p)}else v(h,R,f)||(h!==_&&h.push(R),_.push(p))}return _}return gn=u,gn}var hn,Qs;function Lc(){if(Qs)return hn;Qs=1;var r=Tc(),e=lu(),n=Fc(),t=ou(),a=e(function(i){return n(r(i,1,t,!0))});return hn=a,hn}var Uc=Lc();const Nc=se(Uc),G=r=>!Object.keys(r).length||M(r==null?void 0:r.content),_u=r=>!G(r),pe=r=>!Mc(r),Mc=r=>isNaN(r),Sf=r=>r.content.value&&r.content.value.some(e=>e==null?void 0:e.toString().startsWith(Ju)),If=r=>!!r.content.isUploadedList,Rf=r=>!!r.content.remoteComponent,ge=r=>typeof r=="object"&&_u(r)&&"op"in r&&Object.values(Re).includes(r.op),Tf=r=>r.content.value.every(e=>["false","true"].includes(e.toString().toLowerCase())),Of=r=>r.op===Zn.In?!1:r.op in Zn,Cf=r=>!!r.title,Y=(r=x())=>({id:r,content:[],op:Re.And}),mf=(r,e=[])=>{const n=B(r),t=[];return n.map(a=>{t.push(Gc(a,e))}),t},Gc=(r,e)=>({content:r.content.filter(t=>{let a=!1;if(!Array.isArray(t.content))t.content&&e!=null&&e.includes(t.content.field)||(a=!0);else if(t.content.length!==0&&(e!=null&&e.includes(t.content.field)||(a=!0),Array.isArray(t.content))){const{field:i}=t.content[0].content;e!=null&&e.includes(i)&&(a=!1)}return a}),id:r.id,op:r.op}),ie=r=>{let e=r;const n=r.filter(a=>G(a)),t=r.filter(a=>_u(a));if(n.length){const a=n[0];e=[...t,a]}return B(e)},pu=(r,e)=>{const n=(i,s)=>s.filter(u=>u!==i).map(u=>pe(u)&&typeof u=="number"&&u>i?u-1:u),t=e.filter((i,s)=>s!==r).map(i=>G(i)?i:{...i,content:n(r,i.content)}),a=t.filter(i=>M(i.content));return a.length?pu(t.findIndex(i=>i.id==a[0].id),t):t},ws=(r,e)=>{var a,i,s,u;const n=e.getRawQueries(),t=e.getState().activeQueryId;if(n.length===1)e.resetQueries(r);else{const o=e.getQueryIndex(r),c=ie(pu(o,n));if(c.length){const f=Kc(c,o),l=c[f];let v=e.getSelectedQueryIndexes();v.includes(o)&&(v=v.filter(_=>_!==o).map(_=>_>o?_-1:_),(i=(a=e.coreProps).onQuerySelectChange)==null||i.call(a,v));const d=c.find(_=>_.id===t),b={activeQueryId:d?t:l.id,queries:c,selectedQueryIndexes:v};d||(u=(s=e.coreProps).onActiveQueryChange)==null||u.call(s,l),e.setState(_=>({..._,...b}))}else e.resetQueries(r)}},Kc=(r,e)=>r.length-1>=e?e:e+1>r.length-1?e-1<r.length&&e-1>=0?e-1:r.length-1:e+1,gu=(r,e)=>({...e,content:e.content.map(n=>ge(n)&&!n.skipBooleanOperatorCheck?gu(r,n):n),op:r}),hu=(r,e)=>({...e,content:e.content.filter(function n(t){return pe(t)?!0:ge(t)?t.content.filter(n).length>0:t.content.field!==r})}),Vc=({sqon:r,field:e,index:n,isUploadedList:t,merge_strategy:a=Z.APPEND_VALUES,operator:i=Gs.In,overrideValuesName:s,remoteComponent:u,value:o})=>{let c;const f={content:{field:e,index:n,isUploadedList:t,overrideValuesName:s,remoteComponent:u,value:o},op:i};return M(r)?(c=Y(),c.content=[f]):c=Hc(r,f,{operator:Te.OVERRIDE_OPERATOR,values:a}),c},Hc=(r,e,n)=>{const t=B(r);return n=Ic({},{operator:Te.DEFAULT,values:Z.DEFAULT},n),yu(t,e,n)?t:{...t,content:[...t.content,e]}},yu=(r,e,n)=>{let t=!1;return r.content.forEach(a=>{if(pe(a)||a.title)return;const i=a;if(ge(i)){t=yu(i,e,n);return}const s=i;s.content.field===e.content.field&&(t=!0,e.content.overrideValuesName&&(s.content.overrideValuesName=e.content.overrideValuesName),e.op&&n.operator!==Te.KEEP_OPERATOR&&(s.op=e.op),n.values===Z.APPEND_VALUES&&(s.content.value=Nc([],s.content.value,e.content.value)),n.values===Z.OVERRIDE_VALUES&&(s.content.value=e.content.value))}),t},Bc=(r,e)=>{const n=e.content,t=typeof r=="number"?n.filter(a=>a!==r):n.filter(a=>{if(typeof a=="number")return!0;const i=a,{skipBooleanOperatorCheck:s}=i,u=s&&i.content[0].content.field!==r,o=a.content.field!==r;return s?u:o});return{...e,content:t,op:e.op}},Yc=(r,e)=>{const t=e.content.filter(a=>a.id!==r);return{...e,content:t,op:e.op}},bu=(r,e)=>ge(e)?e.content.reduce((n,t)=>n||bu(r,t),!1):typeof e=="number"&&e===r,Pf=(r,e)=>B(r).map(t=>{const a=t.content.map(i=>i.id===e.id?{id:e.id,content:e.queries[0].content,op:i.op,title:e.title}:i);return{...t,content:a}}),Au=r=>B(r).map(t=>{const a=t.content.map(i=>i.hasOwnProperty("title")&&i.id?{filterID:i.id}:i);return{...t,content:a}}),Wc=(r,e)=>{let n=-1;const t=r.content.filter((a,i)=>{if(pe(a))return!0;const s=a,{skipBooleanOperatorCheck:u}=s,o=u&&s.content.find(c=>c.content.field===e);return(o||a.content.field==e)&&(n=i),u?!o:a.content.field!==e});return[n,{...r,content:t}]},$c=(r,e,n)=>(console.error("createSQONFromFilters is not implemented"),[]),kc=(r,e,n)=>(console.error("createSQONFromFilters is not implemented"),[]),qu=(r,e)=>{const n=t=>t.content.map(a=>pe(a)?e[a]:a).map(a=>qu(a,e));return ge(r)?{content:n(r),op:r.op}:{content:r.content,op:r.op}};function Su(r="New Filter"){const e=x(),n={id:x(),queries:[Y(e)],title:r,favorite:!1,isDirty:!1,isNew:!0};return{newActiveQueryId:e,newSavedFilter:n}}var Nn=(r=>(r.Filter="filter",r.Query="query",r))(Nn||{});const Iu=(r,e)=>{const n={},t=r.id;return Object.assign(n,{id:t,raw:()=>r,index:()=>e.getState().queries.findIndex(i=>i.id===t),isActive:()=>e.getState().activeQueryId===t,isEmpty:()=>G(r),isNotEmpty:()=>!G(r),toggleSelect:i=>{var o,c;const s=e.getQueryIndex(t);let u=[];i?u=[...e.getState().selectedQueryIndexes,s]:u=e.getState().selectedQueryIndexes.filter(f=>f!==s),e.setState(f=>({...f,selectedQueryIndexes:u})),(c=(o=e.coreProps).onQuerySelectChange)==null||c.call(o,u)},isSelected:()=>e.getState().selectedQueryIndexes.includes(e.getQueryIndex(t)),isSelectable:()=>{const i=e.getState().queries;return i.length===2&&e.hasEmptyQuery()?!1:i.length>1&&n.isNotEmpty()},saveAsCustomPill:async i=>{var u,o;const s={favorite:!1,id:x(),queries:[n.raw()],title:i,type:Nn.Query};return Promise.resolve((o=(u=e.coreProps).onCustomPillSave)==null?void 0:o.call(u,s)).then(()=>n.update({...n.raw(),content:[{id:s.id,op:s.queries[0].op,content:s.queries[0].content,title:s.title}]}))},delete:()=>{var i,s;ws(t,e),(s=(i=e.coreProps).onQueryDelete)==null||s.call(i,t)},update:i=>{var s,u,o,c;if(M(i.content))ws(t,e);else{const f=e.getState().activeQueryId,l=e.getQueryIndex(t),v=B(e.getRawQueries()),d={...i,id:t,content:i.content,op:i.op};v[l]=d,e.setState(b=>({...b,queries:ie(v)})),(u=(s=e.coreProps).onQueryUpdate)==null||u.call(s,d),f===t&&((c=(o=e.coreProps).onActiveQueryChange)==null||c.call(o,d))}},duplicate:()=>{const i=e.getQuery(t);i&&e.createQuery({op:i.raw().op,content:i.raw().content})},setAsActive:()=>{var i,s;e.setState(u=>({...u,activeQueryId:t})),(s=(i=e.coreProps).onActiveQueryChange)==null||s.call(i,n.raw())},changeCombineOperator:i=>{var f,l;const s=B(e.getRawQueries()),u=e.getQueryIndex(t),o=s[u],c=gu(i,o);s[u]={...o,content:c.content,op:c.op},e.setState(v=>({...v,queries:ie(s)})),(l=(f=e.coreProps).onActiveQueryChange)==null||l.call(f,s[u])},addPill:i=>{n.update({...r,content:[...r.content,i]})},removePillById:i=>{n.update(Yc(i,r))},removePillByFieldOrIndex:i=>{n.update(Bc(i,r))},isReferencedInActiveQuery:()=>{const i=e.getActiveQuery();return i?bu(n.index(),i.raw()):!1},hasCustomPill:()=>n.raw().content.some(i=>i.title||!i.content)}),n};var yn,Es;function zc(){if(Es)return yn;Es=1;function r(e,n){for(var t=-1,a=e==null?0:e.length;++t<a;)if(n(e[t],t,e))return!0;return!1}return yn=r,yn}var bn,js;function Ru(){if(js)return bn;js=1;var r=vu(),e=zc(),n=du(),t=1,a=2;function i(s,u,o,c,f,l){var v=o&t,d=s.length,b=u.length;if(d!=b&&!(v&&b>d))return!1;var _=l.get(s),h=l.get(u);if(_&&h)return _==u&&h==s;var S=-1,p=!0,R=o&a?new r:void 0;for(l.set(s,u),l.set(u,s);++S<d;){var q=s[S],m=u[S];if(c)var A=v?c(m,q,S,u,s,l):c(q,m,S,s,u,l);if(A!==void 0){if(A)continue;p=!1;break}if(R){if(!e(u,function(g,I){if(!n(R,I)&&(q===g||f(q,g,o,c,l)))return R.push(I)})){p=!1;break}}else if(!(q===m||f(q,m,o,c,l))){p=!1;break}}return l.delete(s),l.delete(u),p}return bn=i,bn}var An,xs;function Jc(){if(xs)return An;xs=1;function r(e){var n=-1,t=Array(e.size);return e.forEach(function(a,i){t[++n]=[i,a]}),t}return An=r,An}var qn,Ds;function Xc(){if(Ds)return qn;Ds=1;var r=ue(),e=au(),n=ve(),t=Ru(),a=Jc(),i=Un(),s=1,u=2,o="[object Boolean]",c="[object Date]",f="[object Error]",l="[object Map]",v="[object Number]",d="[object RegExp]",b="[object Set]",_="[object String]",h="[object Symbol]",S="[object ArrayBuffer]",p="[object DataView]",R=r?r.prototype:void 0,q=R?R.valueOf:void 0;function m(A,g,I,T,C,y,Q){switch(I){case p:if(A.byteLength!=g.byteLength||A.byteOffset!=g.byteOffset)return!1;A=A.buffer,g=g.buffer;case S:return!(A.byteLength!=g.byteLength||!y(new e(A),new e(g)));case o:case c:case v:return n(+A,+g);case f:return A.name==g.name&&A.message==g.message;case d:case _:return A==g+"";case l:var w=a;case b:var L=T&s;if(w||(w=i),A.size!=g.size&&!L)return!1;var k=Q.get(A);if(k)return k==g;T|=u,Q.set(A,g);var xe=t(w(A),w(g),T,C,y,Q);return Q.delete(A),xe;case h:if(q)return q.call(A)==q.call(g)}return!1}return qn=m,qn}var Sn,Fs;function Zc(){if(Fs)return Sn;Fs=1;var r=nu(),e=1,n=Object.prototype,t=n.hasOwnProperty;function a(i,s,u,o,c,f){var l=u&e,v=r(i),d=v.length,b=r(s),_=b.length;if(d!=_&&!l)return!1;for(var h=d;h--;){var S=v[h];if(!(l?S in s:t.call(s,S)))return!1}var p=f.get(i),R=f.get(s);if(p&&R)return p==s&&R==i;var q=!0;f.set(i,s),f.set(s,i);for(var m=l;++h<d;){S=v[h];var A=i[S],g=s[S];if(o)var I=l?o(g,A,S,s,i,f):o(A,g,S,i,s,f);if(!(I===void 0?A===g||c(A,g,u,o,f):I)){q=!1;break}m||(m=S=="constructor")}if(q&&!m){var T=i.constructor,C=s.constructor;T!=C&&"constructor"in i&&"constructor"in s&&!(typeof T=="function"&&T instanceof T&&typeof C=="function"&&C instanceof C)&&(q=!1)}return f.delete(i),f.delete(s),q}return Sn=a,Sn}var In,Ls;function ef(){if(Ls)return In;Ls=1;var r=wn(),e=Ru(),n=Xc(),t=Zc(),a=ce(),i=W(),s=le(),u=me(),o=1,c="[object Arguments]",f="[object Array]",l="[object Object]",v=Object.prototype,d=v.hasOwnProperty;function b(_,h,S,p,R,q){var m=i(_),A=i(h),g=m?f:a(_),I=A?f:a(h);g=g==c?l:g,I=I==c?l:I;var T=g==l,C=I==l,y=g==I;if(y&&s(_)){if(!s(h))return!1;m=!0,T=!1}if(y&&!T)return q||(q=new r),m||u(_)?e(_,h,S,p,R,q):n(_,h,g,S,p,R,q);if(!(S&o)){var Q=T&&d.call(_,"__wrapped__"),w=C&&d.call(h,"__wrapped__");if(Q||w){var L=Q?_.value():_,k=w?h.value():h;return q||(q=new r),R(L,k,S,p,q)}}return y?(q||(q=new r),t(_,h,S,p,R,q)):!1}return In=b,In}var Rn,Us;function rf(){if(Us)return Rn;Us=1;var r=ef(),e=K();function n(t,a,i,s,u){return t===a?!0:t==null||a==null||!e(t)&&!e(a)?t!==t&&a!==a:r(t,a,i,s,n,u)}return Rn=n,Rn}var Tn,Ns;function tf(){if(Ns)return Tn;Ns=1;var r=rf();function e(n,t){return r(n,t)}return Tn=e,Tn}var nf=tf();const af=se(nf),sf=(r,e)=>{const n={},t=r.id;return Object.assign(n,{id:t,raw:()=>r,getQueries:()=>r.queries&&r.queries.length>0?r.queries.map(i=>Iu(i,e)):[],getRawQueries:()=>r.queries,getQueryById:i=>n.getQueries().find(s=>s.id===i)||null,copy:()=>{const i=n.getRawQueries().map(f=>({...f,id:x()})),u=e.getSavedFilters().filter(f=>!f.isNew()).filter(f=>f.raw().title.includes(r.title)),o=`${r.title} COPY${u.length>1?` ${u.length-1}`:""}`;return{favorite:!1,id:x(),queries:i,title:o,isDirty:!1,isNew:!0}},duplicate:()=>{var i,s;if(n.isSelected()){const u=n.copy();e.setState(o=>({...o,activeQueryId:u.queries[0].id,queries:u.queries,savedFilters:[...o.savedFilters,u]})),(s=(i=e.coreProps).onSavedFilterCreate)==null||s.call(i,u)}else console.error("Can only duplicate the selected saved filter")},delete:async()=>{var i,s;return Promise.resolve((s=(i=e.coreProps).onSavedFilterDelete)==null?void 0:s.call(i,t)).then(()=>{var c,f,l,v;const{newActiveQueryId:u,newSavedFilter:o}=Su();e.setState(d=>({...d,activeQueryId:u,queries:o.queries,savedFilters:[...d.savedFilters.filter(b=>b.id!==t),o]})),(f=(c=e.coreProps).onActiveQueryChange)==null||f.call(c,o.queries[0]),(v=(l=e.coreProps).onSavedFilterCreate)==null||v.call(l,o)})},save:async(i,s)=>{var c,f,l,v;const u={...n.raw(),title:(s==null?void 0:s.title)||n.raw().title,favorite:(s==null?void 0:s.favorite)!==void 0?s.favorite:n.raw().favorite,type:i,queries:e.getRawQueries()};return i===Nn.Query?Promise.resolve((f=(c=e.coreProps).onCustomPillUpdate)==null?void 0:f.call(c,u)).then(()=>{}):Promise.resolve((v=(l=e.coreProps).onSavedFilterUpdate)==null?void 0:v.call(l,{...u,queries:Au(u.queries)})).then(()=>e.setState(d=>({...d,savedFilters:d.savedFilters.map(b=>b.id===t?{...u,isNew:!1,isDirty:!1}:b)})))},select:()=>{e.setState(i=>({...i,activeQueryId:r.queries[0].id,queries:r.queries}))},discardChanges:()=>{n.isSelected()?e.setState(i=>({...i,activeQueryId:r.queries[0].id,queries:r.queries})):console.error("Can only discard changes to the selected saved filter")},hasQueries:()=>n.getQueries().length>0,isSelected:()=>{const i=e.getState().queries.map(s=>s.id);return r.queries.find(s=>i.includes(s.id))!==void 0},isFavorite:()=>r.favorite||!1,isNew:()=>r.isNew||!1,isDirty:()=>!n.isSelected()||r.isNew?!1:r.isDirty||e.getRawQueries().length!==r.queries.length?!0:!r.queries.every(i=>{const s=e.getRawQueries().find(u=>u.id==i.id);return s?af({content:s.content,id:s.id,op:s.op},{content:i.content,id:i.id,op:i.op}):!1})}),n},uf=()=>{const r=x();return{activeQueryId:r,queries:[Y(r)],savedFilters:[],selectedQueryIndexes:[]}},Qf=r=>{const e={};return Object.assign(e,{coreProps:r,setCoreProps:t=>{e.coreProps=t(e.coreProps)},setState:t=>{var a,i;(i=(a=e.coreProps).onStateChange)==null||i.call(a,t(e.coreProps.state))},getState:()=>e.coreProps.state,reset:()=>{e.setState(()=>e.coreProps.initialState)},clearQueries:()=>{var i,s;const t=x(),a=Y(t);e.setState(u=>({...u,activeQueryId:t,queries:[a]})),(s=(i=e.coreProps).onActiveQueryChange)==null||s.call(i,a)},saveNewFilter:async t=>{var i,s;const a={id:x(),title:(t==null?void 0:t.title)||e.coreProps.savedFilterDefaultTitle||"New Filter",favorite:(t==null?void 0:t.favorite)===void 0?!1:t.favorite,queries:e.getRawQueries()};return Promise.resolve((s=(i=e.coreProps).onSavedFilterSave)==null?void 0:s.call(i,{...a,queries:Au(a.queries)})).then(()=>e.setState(u=>({...u,savedFilters:[...u.savedFilters,{...a,isNew:!1,isDirty:!1}]})))},createSavedFilter:()=>{var i,s;const{newActiveQueryId:t,newSavedFilter:a}=Su();e.setState(u=>({...u,activeQueryId:t,queries:a.queries,savedFilters:[...u.savedFilters,a]})),(s=(i=e.coreProps).onSavedFilterCreate)==null||s.call(i,a)},getSelectedSavedFilter:()=>{if(!e.getActiveQuery())return null;let a=e.getSavedFilters().find(i=>i.isSelected()&&!i.isNew());return a||(a=e.getSavedFilters().find(i=>i.isNew())),a||null},getSavedFilters:()=>e.coreProps.state.savedFilters&&e.coreProps.state.savedFilters.length>0?e.coreProps.state.savedFilters.map(t=>sf(t,e)):[],getQueries:()=>e.coreProps.state.queries&&e.coreProps.state.queries.length>0?e.coreProps.state.queries.map(t=>Iu(t,e)):[],getRawQueries:()=>e.coreProps.state.queries||[],getSelectedQueryIndexes:()=>e.getState().selectedQueryIndexes,toggleQuerySelect:(t,a)=>{var i;(i=e.getQuery(t))==null||i.toggleSelect(a)},resetQuerySelection:()=>{var t,a;e.setState(i=>({...i,selectedQueryIndexes:[]})),(a=(t=e.coreProps).onQuerySelectChange)==null||a.call(t,[])},createQuery:({id:t=x(),op:a=Re.And,content:i})=>{var u,o,c,f;const s={id:t,op:a,content:i};return e.setState(l=>({...l,activeQueryId:s.id,queries:ie([...e.getRawQueries(),s])})),(o=(u=e.coreProps).onActiveQueryChange)==null||o.call(u,s),(f=(c=e.coreProps).onQueryCreate)==null||f.call(c,s),s.id},getQuery:t=>e.getQueries().find(a=>a.id===t)||null,setActiveQuery:t=>{var a;(a=e.getQuery(t))==null||a.setAsActive()},getActiveQuery:()=>e.coreProps.state.activeQueryId?e.getQuery(e.coreProps.state.activeQueryId):null,getQueryIndex:t=>{const a=e.getQuery(t);return a?a.index():-1},updateQuery:(t,a)=>{var i;(i=e.getQuery(t))==null||i.update(a)},duplicateQuery:t=>{var a;(a=e.getQuery(t))==null||a.duplicate()},deleteQuery:t=>{var a;(a=e.getQuery(t))==null||a.delete()},changeQueryCombineOperator:(t,a)=>{var i;(i=e.getQuery(t))==null||i.changeCombineOperator(a)},hasEmptyQuery:()=>e.getQueries().some(t=>t.isEmpty()),hasQueries:()=>e.getQueries().length>0,canCombine:()=>e.getQueries().length>1&&e.getSelectedQueryIndexes().length>1,resetQueries:t=>{var i,s;const a=Y(t);(s=(i=e.coreProps).onActiveQueryChange)==null||s.call(i,a),e.setState(u=>({...u,activeQueryId:t,queries:[a]}))},combineSelectedQueries:t=>{var s,u,o,c,f,l;if(!e.canCombine()){console.error("Cannot combine queries. There must be at least 2 queries selected.");return}const a={id:x(),op:t,content:e.getSelectedQueryIndexes().sort()},i=[];e.setState(v=>({...v,activeQueryId:a.id,queries:ie([...v.queries,a]),selectedQueryIndexes:i})),(u=(s=e.coreProps).onActiveQueryChange)==null||u.call(s,a),(c=(o=e.coreProps).onQueryCreate)==null||c.call(o,a),(l=(f=e.coreProps).onQuerySelectChange)==null||l.call(f,i)},isEmpty:()=>e.getQueries().length===1&&e.getQueries()[0].isEmpty()}),e},of="QBCacheUpdate",Tu="query-builder-cache",wf={content:[],op:"and"};var cf=(r=>(r.ADD_QUERY="ADD_QUERY",r.UPDATE_QUERY="UPDATE_QUERY",r.SET_STATE="SET_STATE",r))(cf||{});class ff extends Event{constructor(n){super(of);re(this,"eventData");re(this,"eventType");re(this,"value");re(this,"queryBuilderId");this.eventType=n.eventType,this.queryBuilderId=n.queryBuilderId,this.value=n.value,this.eventData=n.eventData}}const je=(r,{eventType:e,eventData:n,value:t,skipEvent:a})=>{if(window.localStorage.setItem(`${Tu}-${r}`,JSON.stringify(t)),!a){const i=new ff({queryBuilderId:r,value:t,eventType:e,eventData:n});window.dispatchEvent(i)}},On=r=>{const e=uf();return je(r,{value:e,eventType:"SET_STATE",eventData:e}),e},he=r=>{if(typeof window<"u"){const e=window.localStorage.getItem(`${Tu}-${r}`);if(!e)return On(r);try{return JSON.parse(e)}catch{return On(r)}}else return{}},lf=(r,e,n=!1)=>{const t=he(r),a=(t==null?void 0:t.queries)??[],i=a.find(u=>G(u)),s=a.find(u=>u.id===t.activeQueryId&&G(u));je(r,{eventType:"ADD_QUERY",eventData:e,value:{activeQueryId:n||s?e.id:(t==null?void 0:t.activeQueryId)??e.id,queries:i?a.map(u=>G(u)?e:u):[...a,e]}})},vf=(r,e=qu)=>{var t;const n=he(r);return e(((t=n==null?void 0:n.queries)==null?void 0:t.find(({id:a})=>a===n.activeQueryId))??Y(),n.queries)},ye=r=>{var n;const e=he(r);return((n=e==null?void 0:e.queries)==null?void 0:n.find(({id:t})=>t===e.activeQueryId))??Y()},ee=(r,e)=>{var a;const n=he(r),t=(a=n==null?void 0:n.queries)==null?void 0:a.find(({id:i})=>i===e.id);if(t)t.content=e.content,t.op=e.op;else throw new Error(`Query with id ${e.id} not found`);je(r,{eventType:"UPDATE_QUERY",eventData:t,value:n})},df=(r,{field:e,index:n,isUploadedList:t,merge_strategy:a=Z.APPEND_VALUES,operator:i=Gs.In,overrideValuesName:s,remoteComponent:u,value:o})=>{const c=yf.getActiveQuery(r);ee(r,M(o)?hu(e,c):Vc({sqon:c,field:e,index:n,isUploadedList:t,merge_strategy:a,operator:i,overrideValuesName:s,remoteComponent:u,value:o}))},_f=(r,e)=>ee(r,Ou(r,{field:e.filterGroup.field,operator:e.operator,sqonContent:kc(e.filterGroup,e.selectedFilters,e.index)})),Ou=(r,{field:e,operator:n=Re.And,sqonContent:t})=>{const a=ye(r);let i={id:x(),content:t,op:n};if(!M(a)){const s=Wc(a,e),u=s[0],o=s[1],c={...o};M(c.content)&&M(a)?i={id:x(),content:[],op:n}:(u>=0?c.content.splice(u,0,...t):c.content=[...c.content,...t],i={...c,content:[...c.content]},o.content.length===0&&(i.op=n))}return i},pf=(r,e)=>ee(r,e.selectedFilters.length>0?Ou(r,{field:e.field,sqonContent:$c(e.field,e.selectedFilters)}):hu(e.field,ye(r))),gf=(r,e)=>{const n=ye(r);ee(r,{...n,content:[...n.content,e]})},hf=(r,e)=>{const n=ye(r);n.content=n.content.filter(t=>t.id!==e).filter(t=>t!==void 0),ee(r,n)},yf={addQuery:lf,updateQuery:ee,getActiveQuery:ye,getResolvedActiveQuery:vf,updateActiveQueryField:df,updateActiveQueryFilters:_f,updateQueryByTableFilter:pf,addPillToActiveQuery:gf,removePillFromActiveQuery:hf,setLocalQueryBuilderState:je,getLocalQueryBuilderState:he,setDefaultLocalQueryBuilderState:On};export{Re as B,wf as D,Z as M,of as Q,Zn as R,Nn as S,Gs as T,K as a,ue as b,sf as c,W as d,Qf as e,mf as f,uf as g,cf as h,V as i,Tf as j,Of as k,B as l,Cf as m,ge as n,pe as o,Sf as p,yf as q,oe as r,If as s,Rf as t,Pf as u,x as v,qu as w,af as x};
