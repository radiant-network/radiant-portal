import{j as i}from"./jsx-runtime-D_zvdyIk.js";import{g as Ze,a as er,Q as le,r as rr,q as tr,b as ce,d as ir,e as or,f as nr,i as ar,h as sr,j as lr,k as cr,u as ur,S as dr,l as ue,T as de,B as E,m as mr,n as pr,o as fr,p as yr,s as vr,t as gr}from"./query-builder-remote-C0dKPo5c.js";import{r as d,g as Fe}from"./index-CGj_12n1.js";import{u as F}from"./i18n-Ca5-7_Xc.js";import{E as hr,a as re,L as xr,b as qr,G as Pr,c as br}from"./less-than-or-equal-operator-icon-BI5aNTvi.js";import{N as jr}from"./not-in-operator-icon-DdiM-lgK.js";import{S as h}from"./api-BY1uLQuN.js";import{c as g}from"./utils-D-KgF5mV.js";import{r as Tr}from"./string-format-D2CEWHqQ.js";import{C as Dr}from"./chevron-left-Baf1hbwl.js";import{C as Cr}from"./chevron-right-CKDh57Sc.js";import{B as x}from"./button-BlS1TOfw.js";import{X as _r}from"./x-CubKniSv.js";import{C as Ir}from"./conditional-wrapper-BBX8pIPQ.js";import{P as Sr,a as Er,b as Fr}from"./popover-OCK0dKJe.js";import{D as Qr,b as wr,c as kr,d as Br,e as Nr,f as Rr}from"./dialog-D66BMHpA.js";import{I as Or}from"./input-DyY2UfVx.js";import{c as Ar}from"./createLucideIcon-8Lr1oLzj.js";import{S as Lr}from"./separator-6xmuS_PL.js";import{T as Ur,a as Vr,b as Mr}from"./tooltip-Bh6uXa7k.js";import{a as D}from"./alert-dialog-store-CZoSfA8g.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]],Qe=Ar("PencilLine",Gr);function zr(e){const{t}=F(),r={state:{...Ze(),savedFilters:[],selectedQueryIndexes:[]},onStateChange:()=>{},...e},[o]=d.useState(()=>({current:er(r)})),[n,a]=d.useState(()=>r.initialState||r.state);d.useEffect(()=>{var s;n&&((s=e.onStateChange)==null||s.call(e,n))},[n]),d.useEffect(()=>{const s=u=>{var c,p,f,y;if(u.queryBuilderId===e.id){if(u.eventType===ce.ADD_QUERY){const m=u.eventData;(c=e.onQueryCreate)==null||c.call(e,m),m.id===u.value.activeQueryId&&((p=e.onActiveQueryChange)==null||p.call(e,m))}else if(u.eventType===ce.UPDATE_QUERY){const m=u.eventData;(f=e.onQueryUpdate)==null||f.call(e,m),m.id===u.value.activeQueryId&&((y=e.onActiveQueryChange)==null||y.call(e,m))}a(m=>({...m,...e.state,...u.value}))}};return window.addEventListener(le,s),()=>{window.removeEventListener(le,s)}},[e.state]),e.fieldsToIgnore;const l={...n,...e.state};return o.current.setCoreProps(s=>({savedFilterDefaultTitle:t("common.savedFilter.untitledFilter"),...s,...e,state:{...l,queries:e.fieldsToIgnore&&l.queries?rr(l.queries,e.fieldsToIgnore):l.queries},onStateChange:u=>{a(u),tr.setLocalQueryBuilderState(e.id,{value:u,skipEvent:!0})}})),o.current}const we=d.createContext(null);function Q(){const e=d.useContext(we);if(!e)throw new Error("useQueryBuilderContext must be used within a QueryBuilderContextProvider");return e}const $r=d.createContext(null);function q(){const e=d.useContext($r);if(!e)throw new Error("useQueryBuilderDictContext must be used within a QueryBuilderDictContextProvider");return e}const ke=d.createContext(null);function P(){const e=d.useContext(ke);if(!e)throw new Error("useQueryBarContext must be used within a QueryBarContextProvider");return e}function Be({type:e,size:t,className:r}){switch(e){case h.GreaterThan:return i.jsx(br,{size:t,className:r});case h.GreaterThanOrEqualTo:return i.jsx(Pr,{size:t,className:r});case h.LessThan:return i.jsx(qr,{size:t,className:r});case h.LessThanOrEqualTo:return i.jsx(xr,{size:t,className:r});case h.Between:return i.jsx(re,{size:t,className:r});case h.NotIn:return i.jsx(jr,{size:t,className:r});default:return i.jsx(hr,{size:t,className:r})}}Be.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperator",props:{size:{required:!1,tsType:{name:"number"},description:""},type:{required:!0,tsType:{name:"union",raw:"SqonOpEnum | (string & {})",elements:[{name:"SqonOpEnum"},{name:"unknown"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};var N,me;function Ne(){if(me)return N;me=1;function e(t,r,o){var n=-1,a=t.length;r<0&&(r=-r>a?0:a+r),o=o>a?a:o,o<0&&(o+=a),a=r>o?0:o-r>>>0,r>>>=0;for(var l=Array(a);++n<a;)l[n]=t[n+r];return l}return N=e,N}var R,pe;function Hr(){if(pe)return R;pe=1;var e=/\s/;function t(r){for(var o=r.length;o--&&e.test(r.charAt(o)););return o}return R=t,R}var O,fe;function Wr(){if(fe)return O;fe=1;var e=Hr(),t=/^\s+/;function r(o){return o&&o.slice(0,e(o)+1).replace(t,"")}return O=r,O}var A,ye;function Re(){if(ye)return A;ye=1;var e=ir(),t=or(),r="[object Symbol]";function o(n){return typeof n=="symbol"||t(n)&&e(n)==r}return A=o,A}var L,ve;function Yr(){if(ve)return L;ve=1;var e=Wr(),t=nr(),r=Re(),o=NaN,n=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt;function u(c){if(typeof c=="number")return c;if(r(c))return o;if(t(c)){var p=typeof c.valueOf=="function"?c.valueOf():c;c=t(p)?p+"":p}if(typeof c!="string")return c===0?c:+c;c=e(c);var f=a.test(c);return f||l.test(c)?s(c.slice(2),f?2:8):n.test(c)?o:+c}return L=u,L}var U,ge;function Jr(){if(ge)return U;ge=1;var e=Yr(),t=1/0,r=17976931348623157e292;function o(n){if(!n)return n===0?n:0;if(n=e(n),n===t||n===-t){var a=n<0?-1:1;return a*r}return n===n?n:0}return U=o,U}var V,he;function Kr(){if(he)return V;he=1;var e=Jr();function t(r){var o=e(r),n=o%1;return o===o?n?o-n:o:0}return V=t,V}var M,xe;function Xr(){if(xe)return M;xe=1;var e=Ne(),t=Kr();function r(o,n,a){return o&&o.length?(n=a||n===void 0?1:t(n),e(o,0,n<0?0:n)):[]}return M=r,M}var Zr=Xr();const et=Fe(Zr);function Oe({className:e,...t}){return i.jsx("span",{className:e,...t,children:"&"})}Oe.__docgenInfo={description:"",methods:[],displayName:"IntersectionOperator"};function Ae({className:e,...t}){return i.jsx("span",{className:e,...t,children:","})}Ae.__docgenInfo={description:"",methods:[],displayName:"UnionOperator"};function C({canExpand:e,className:t,classNameContent:r,children:o,clickable:n,...a}){return i.jsx("div",{className:g("bg-background rounded-xs pl-2 text-xs font-medium leading-5 relative",e?"pr-[22px]":"pr-2",t),...a,children:i.jsx("div",{className:g("flex flex-wrap items-center",n?"hover:shadow-[inset_0_-4px_0_-2.5px_black] hover:cursor-pointer":"",r),children:o})})}C.__docgenInfo={description:"",methods:[],displayName:"QueryPillValuesContainer",props:{canExpand:{required:!1,tsType:{name:"boolean"},description:""},clickable:{required:!1,tsType:{name:"boolean"},description:""},classNameContent:{required:!1,tsType:{name:"string"},description:""}}};function w({valueFilter:e,...t}){const[r,o]=d.useState(!1),{t:n}=F(),a=e.content.value.length>3,l=r?e.content.value:et(e.content.value,3);return i.jsxs(C,{canExpand:a,...t,children:[e.content.overrideValuesName?i.jsx("div",{children:i.jsx("span",{children:e.content.overrideValuesName})}):l.map((s,u)=>i.jsxs("div",{children:[i.jsx("span",{children:n(`common.filters.labels.${e.content.field}_value.${s}`,{defaultValue:Tr(String(s)).toLowerCase().replace(/^\w/,c=>c.toUpperCase())})}),l.length-1>u&&(e.op===h.All?i.jsx(Oe,{className:"px-1"}):i.jsx(Ae,{className:"px-1"}))]},`${s}-${u}`)),a&&i.jsx("div",{className:"absolute right-1 hover:cursor-pointer",children:r?i.jsx(Dr,{size:16,onClick:s=>{s.preventDefault(),o(!1)}}):i.jsx(Cr,{size:16,onClick:s=>{s.preventDefault(),o(!0)}})})]})}w.__docgenInfo={description:"",methods:[],displayName:"QueryPillValues",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function b({children:e,className:t,onRemovePill:r,...o}){return i.jsxs("div",{className:g("flex items-center rounded-xs p-[2px] bg-muted group-data-[query-active=true]/query:bg-primary/25",t),...o,children:[e,i.jsx(x,{iconOnly:!0,variant:"ghost",size:"sm",className:"mr-[2px] ml-[4px] py-[2px] enabled:hover:bg-transparent size-4",onClick:n=>{n.stopPropagation(),r()},children:i.jsx(_r,{})})]})}b.__docgenInfo={description:"",methods:[],displayName:"QueryPillContainer",props:{onRemovePill:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function te({valueFilter:e,operator:t,className:r,...o}){const n=q(),{showLabels:a}=Q();return i.jsx("div",{className:g("flex items-center",r),...o,children:(a||ar(e)||sr(e))&&i.jsxs(i.Fragment,{children:[i.jsx(oe,{children:n.queryPill.facet(e.content.field)}),i.jsx(ie,{children:t})]})})}const ie=({className:e,children:t,...r})=>i.jsx("span",{className:g("ml-[2px] mr-[4px]",e),...r,children:t});function oe({className:e,children:t,...r}){return i.jsx("span",{className:g("ml-[4px] mr-[2px] text-xs font-medium",e),...r,children:t})}ie.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperatorContainer"};oe.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelContainer"};te.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelOperator",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},operator:{required:!0,tsType:{name:"ReactNode"},description:""}}};function ne({valueFilter:e,customPillEditEnabled:t}){var u;const{query:r}=P(),{queryPillFacetFilterConfig:o}=Q(),[n,a]=d.useState(),l=!!(!t&&(o!=null&&o.enable)&&!((u=o==null?void 0:o.blacklistedFacets)!=null&&u.includes(e.content.field))),s=d.useCallback(()=>{o!=null&&o.onFacetClick&&!n&&a(o.onFacetClick(e))},[n,o==null?void 0:o.onFacetClick]);return i.jsxs(b,{onRemovePill:()=>r.removePillByFieldOrIndex(e.content.field),children:[i.jsx(te,{valueFilter:e,operator:i.jsx(Be,{size:14,type:e.op})}),i.jsx(Ir,{condition:l,wrapper:c=>i.jsxs(Sr,{children:[i.jsx(Er,{onClick:s,children:c}),i.jsx(Fr,{align:"start",className:"p-2.5",children:n})]}),children:i.jsx(w,{valueFilter:e,clickable:l})})]})}ne.__docgenInfo={description:"",methods:[],displayName:"QueryPillField",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};function Le(){const{t:e}=F();return i.jsx("div",{children:e("common.components.queryPillRemote")})}Le.__docgenInfo={description:"",methods:[],displayName:"QueryPillRemoteComponent"};function Ue({valueFilter:e}){const{query:t}=P();return i.jsxs(b,{onRemovePill:()=>t.removePillByFieldOrIndex(e.content.field),children:[i.jsx(te,{valueFilter:e,operator:i.jsx(re,{size:14,type:e.op})}),i.jsx(w,{valueFilter:e})]})}Ue.__docgenInfo={description:"",methods:[],displayName:"QueryPillUploadList",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};var G,qe;function rt(){if(qe)return G;qe=1;function e(t,r){for(var o=-1,n=t==null?0:t.length,a=Array(n);++o<n;)a[o]=r(t[o],o,t);return a}return G=e,G}var z,Pe;function tt(){if(Pe)return z;Pe=1;var e=lr(),t=rt(),r=cr(),o=Re(),n=e?e.prototype:void 0,a=n?n.toString:void 0;function l(s){if(typeof s=="string")return s;if(r(s))return t(s,l)+"";if(o(s))return a?a.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return z=l,z}var $,be;function Ve(){if(be)return $;be=1;var e=tt();function t(r){return r==null?"":e(r)}return $=t,$}var H,je;function it(){if(je)return H;je=1;var e=Ne();function t(r,o,n){var a=r.length;return n=n===void 0?a:n,!o&&n>=a?r:e(r,o,n)}return H=t,H}var W,Te;function Me(){if(Te)return W;Te=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",n=t+r+o,a="\\ufe0e\\ufe0f",l="\\u200d",s=RegExp("["+l+e+n+a+"]");function u(c){return s.test(c)}return W=u,W}var Y,De;function ot(){if(De)return Y;De=1;function e(t){return t.split("")}return Y=e,Y}var J,Ce;function nt(){if(Ce)return J;Ce=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",n=t+r+o,a="\\ufe0e\\ufe0f",l="["+e+"]",s="["+n+"]",u="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+u+")",p="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",j=c+"?",_="["+a+"]?",k="(?:"+m+"(?:"+[p,f,y].join("|")+")"+_+j+")*",v=_+j+k,T="(?:"+[p+s+"?",s,f,y,l].join("|")+")",I=RegExp(u+"(?="+u+")|"+T+v,"g");function S(B){return B.match(I)||[]}return J=S,J}var K,_e;function at(){if(_e)return K;_e=1;var e=ot(),t=Me(),r=nt();function o(n){return t(n)?r(n):e(n)}return K=o,K}var X,Ie;function st(){if(Ie)return X;Ie=1;var e=it(),t=Me(),r=at(),o=Ve();function n(a){return function(l){l=o(l);var s=t(l)?r(l):void 0,u=s?s[0]:l.charAt(0),c=s?e(s,1).join(""):l.slice(1);return u[a]()+c}}return X=n,X}var Z,Se;function lt(){if(Se)return Z;Se=1;var e=st(),t=e("toUpperCase");return Z=t,Z}var ee,Ee;function ct(){if(Ee)return ee;Ee=1;var e=Ve(),t=lt();function r(o){return t(e(o).toLowerCase())}return ee=r,ee}var ut=ct();const dt=Fe(ut);function Ge({valueFilter:e}){const{query:t}=P(),r=q();return i.jsxs(b,{onRemovePill:()=>t.removePillByFieldOrIndex(e.content.field),children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(oe,{children:e.content.index?dt(e.content.index):r.queryPill.facet(e.content.field)}),i.jsx(ie,{children:i.jsx(re,{size:14})})]}),i.jsx(C,{children:i.jsx(w,{valueFilter:e})})]})}Ge.__docgenInfo={description:"",methods:[],displayName:"QueryPillSet",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function ze({refIndex:e}){const{query:t}=P(),{getQueryReferenceColor:r}=Q(),o=r(e);return i.jsx(b,{onRemovePill:()=>t.removePillByFieldOrIndex(e),children:i.jsx(C,{children:i.jsx("span",{style:{color:o},children:`Q${e+1}`})})})}ze.__docgenInfo={description:"",methods:[],displayName:"QueryPillReference",props:{refIndex:{required:!0,tsType:{name:"number"},description:""}}};const $e=({children:e,icon:t=Qe,onChangeText:r,...o})=>{const[n,a]=d.useState(!1),l=t;return i.jsx("div",{...o,children:n?i.jsx(Or,{defaultValue:e,autoFocus:!0,onBlur:s=>{a(!1),r==null||r(s.currentTarget.value)},className:"max-w-96 w-full",onKeyUp:s=>{s.key==="Enter"&&(a(!1),r==null||r(s.currentTarget.value))}}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsx(x,{iconOnly:!0,variant:"ghost",onClick:()=>a(!0),children:i.jsx(l,{})})]})})};$e.__docgenInfo={description:"",methods:[],displayName:"EditableText",props:{icon:{required:!1,tsType:{name:"ReactForwardRefExoticComponent",raw:"React.ForwardRefExoticComponent<Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>>",elements:[{name:"intersection",raw:"Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>",elements:[{name:"Omit",elements:[{name:"LucideProps"},{name:"literal",value:"'ref'"}],raw:"Omit<LucideProps, 'ref'>"},{name:"ReactRefAttributes",raw:"React.RefAttributes<SVGSVGElement>",elements:[{name:"SVGSVGElement"}]}]}]},description:"",defaultValue:{value:"PencilLineIcon",computed:!0}},children:{required:!0,tsType:{name:"string"},description:""},onChangeText:{required:!1,tsType:{name:"signature",type:"function",raw:"(text: string) => void",signature:{arguments:[{type:{name:"string"},name:"text"}],return:{name:"void"}}},description:""}}};function Rt(e,t){D.open({type:"warning",title:t.savedFilter.deleteDialog.title,description:t.savedFilter.deleteDialog.description,cancelProps:{children:t.savedFilter.deleteDialog.cancel},actionProps:{color:"destructive",onClick:()=>e.delete(),children:t.savedFilter.deleteDialog.ok}})}function Ot(e,t){D.open({type:"warning",title:t.savedFilter.overwriteDialog.title,description:t.savedFilter.overwriteDialog.description,cancelProps:{children:t.savedFilter.overwriteDialog.cancel},actionProps:{onClick:()=>e.createSavedFilter(),children:t.savedFilter.overwriteDialog.ok}})}function mt(e){D.open({type:"error",title:e.queryPill.customPill.cantBeEmptyDialog.title,description:e.queryPill.customPill.cantBeEmptyDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.cantBeEmptyDialog.ok}})}function pt(e){D.open({type:"error",title:e.queryPill.customPill.titleExistsDialog.title,description:e.queryPill.customPill.titleExistsDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.titleExistsDialog.ok}})}function ft(e,t,r,o){D.open({type:"warning",title:e.queryPill.customPill.saveDialog.title,description:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{children:e.queryPill.customPill.saveDialog.confirmationMessage.replace("{title}",t)}),!!(r!=null&&r.length)&&i.jsxs("div",{className:"border rounded-sm p-4 space-y-2",children:[i.jsx("div",{className:"font-medium text-foreground",children:e.queryPill.customPill.saveDialog.affectedFilters}),i.jsx("ul",{className:"list-disc list-inside",children:r.map(n=>i.jsx("li",{className:"list-item",children:n.title}))})]})]}),cancelProps:{children:e.queryPill.customPill.saveDialog.cancel},actionProps:{children:e.queryPill.customPill.saveDialog.ok,onClick:async n=>(n.preventDefault(),o())}})}function He({open:e,onOpenChange:t,queryPill:r}){const o=q(),{queryBuilder:n,customPillConfig:a}=Q(),l=zr({id:a==null?void 0:a.queryBuilderEditId,initialState:{activeQueryId:r.queries[0].id,queries:r.queries,savedFilters:[r],selectedQueryIndexes:[]},onCustomPillUpdate:async v=>{var I,S;return await Promise.resolve((S=(I=n.coreProps).onCustomPillUpdate)==null?void 0:S.call(I,v)).then(B=>(n.setState(se=>({...se,queries:ur(se.queries,v)})),t(!1),B))}}),[s,u]=d.useState(r.title),[c,p]=d.useState(!1),f=l.getQueries()[0],y=l.getSelectedSavedFilter(),m=s!==r.title,j=m||(y==null?void 0:y.isDirty()),_=d.useCallback(v=>{v?t(!0):(l.reset(),t(!1))},[t,l]),k=d.useCallback(async()=>{if(f.isEmpty()){mt(o);return}if(p(!0),m){const T=await(a==null?void 0:a.validateCustomPillTitle(s));if(T!==void 0&&T===!1){p(!1),pt(o);return}}const v=await(a==null?void 0:a.fetchSavedFiltersByCustomPillId(r.id).finally(()=>p(!1)));ft(o,s,v,async()=>y==null?void 0:y.save(dr.Query,{title:s}))},[f,y,o,s,r.id,a]);return i.jsx(Qr,{open:e,onOpenChange:_,children:i.jsx(we.Provider,{value:{queryBuilder:l,fetchQueryCount:async()=>0,getQueryReferenceColor:()=>"",showLabels:!0,resolveSyntheticSqon:v=>v},children:i.jsxs(wr,{className:"flex flex-row gap-0 h-screen w-screen max-w-screen rounded-none border-none sm:rounded-none p-0",children:[i.jsx("aside",{className:"flex flex-col min-w-48 bg-primary",children:i.jsx("span",{className:"italic",children:"TODO Insert filters"})}),i.jsx("div",{className:"w-full",children:i.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[i.jsx(kr,{children:i.jsx(Br,{children:o.queryPill.customPill.editDialog.title})}),i.jsx(Lr,{}),i.jsx("div",{children:i.jsx($e,{onChangeText:u,children:s})}),i.jsx("div",{"data-query-active":!0,className:"flex flex-wrap group/query",children:i.jsx(ke.Provider,{value:{query:f},children:i.jsx(ae,{sqon:f.raw(),customPillEditEnabled:!0})})}),i.jsxs(Nr,{className:"mt-5",children:[i.jsx(Rr,{asChild:!0,children:i.jsx(x,{variant:"outline",children:o.queryPill.customPill.editDialog.cancel})}),i.jsx(x,{type:"submit",loading:c,disabled:!j,onClick:k,children:o.queryPill.customPill.editDialog.ok})]})]})})]})})})}He.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustomEditDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},queryPill:{required:!0,tsType:{name:"ISavedFilter"},description:""}}};function We({valueQuery:e}){const{query:t}=P(),[r,o]=d.useState(!1),{title:n,...a}=e,l={id:e.id,title:e.title,queries:[a],favorite:!1};return i.jsxs(i.Fragment,{children:[i.jsx(b,{onRemovePill:()=>t.removePillById(e.id),children:i.jsxs(C,{className:"pr-1",classNameContent:"space-x-1",children:[i.jsx("span",{children:e.title}),i.jsx(x,{iconOnly:!0,size:"xs",variant:"ghost",className:"size-auto p-[2px]",onClick:()=>o(!0),children:i.jsx(Qe,{})})]})}),r&&i.jsx(He,{open:r,onOpenChange:o,queryPill:l})]})}We.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustom",props:{valueQuery:{required:!0,tsType:{name:"IValueQuery"},description:""}}};function Ye({groupFilter:e}){const t={},r=d.useMemo(()=>(e.content.forEach(o=>{t.hasOwnProperty(o.content.field)?(t[o.content.field]=ue(t[o.content.field]),t[o.content.field].content.value=t[o.content.field].content.value.concat(o.content.value),o.op===de.In&&e.op===E.And&&e.skipBooleanOperatorCheck&&(t[o.content.field].op=de.All)):t[o.content.field]=ue(o)}),{...e,content:Object.entries(t).map(o=>o[1])}),[e]);return i.jsx(ne,{valueFilter:r.content[0]})}Ye.__docgenInfo={description:"",methods:[],displayName:"QueryPillIsolatedBoolean",props:{groupFilter:{required:!0,tsType:{name:"ISqonGroupFilter"},description:""}}};function Je({className:e,...t}){const r=q();return i.jsx("span",{className:g("",e),...t,children:r.queryPill.operator.and})}Je.__docgenInfo={description:"",methods:[],displayName:"AndOperator"};function Ke({className:e,...t}){const r=q();return i.jsx("span",{className:g("",e),...t,children:r.queryPill.operator.or})}Ke.__docgenInfo={description:"",methods:[],displayName:"OrOperator"};function Xe(){const{query:e}=P(),t=q(),r=e.raw().op===E.And;return i.jsx("div",{className:"px-2",onClick:o=>o.stopPropagation(),children:i.jsxs(Ur,{children:[i.jsx(Vr,{asChild:!0,children:i.jsx(x,{variant:"link",className:"text-current text-sm p-0 h-auto font-normal",onClick:()=>e.changeCombineOperator(r?E.Or:E.And),children:r?i.jsx(Je,{}):i.jsx(Ke,{})})}),i.jsxs(Mr,{children:[t.queryPill.operator.changeOperatorTo,' "',r?t.queryPill.operator.or:t.queryPill.operator.and,'"']})]})})}Xe.__docgenInfo={description:"",methods:[],displayName:"QueryCombiner"};function ae({sqon:e,customPillEditEnabled:t}){return i.jsx(i.Fragment,{children:e.content.map((r,o)=>i.jsxs("div",{className:"flex items-center py-[2px]",children:[r.skipBooleanOperatorCheck?i.jsx(Ye,{groupFilter:r}):mr(r)?i.jsx(We,{valueQuery:r}):pr(r)?i.jsx(ae,{sqon:r}):fr(r)?i.jsx(ze,{refIndex:r}):yr(r)?i.jsx(Ge,{valueFilter:r}):vr(r)?i.jsx(Ue,{valueFilter:r}):gr(r)?i.jsx(Le,{}):i.jsx(ne,{valueFilter:r,customPillEditEnabled:t}),yt(e.content,o)&&i.jsx(Xe,{})]},o))})}const yt=(e,t)=>e.length-1>t;ae.__docgenInfo={description:"",methods:[],displayName:"QueryPillBoolean",props:{sqon:{required:!0,tsType:{name:"ISyntheticSqon"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};const At=()=>{const{t:e}=F();return{queryBar:{empty:e("common.queryBar.empty"),deletePopover:{title:e("common.queryBar.deletePopover.title"),cancel:e("common.queryBar.deletePopover.cancel"),ok:e("common.queryBar.deletePopover.ok")},customPill:{createTooltip:e("common.queryBar.customPill.createTooltip"),cannotSaveAsCustomPill:e("common.queryBar.customPill.cannotSaveAsCustomPill")},saveDialog:{title:e("common.queryBar.saveDialog.title"),fields:{title:{label:e("common.queryBar.saveDialog.fields.title.label"),placeholder:e("common.queryBar.saveDialog.fields.title.placeholder")}},notice:e("common.queryBar.saveDialog.notice"),cancel:e("common.queryBar.saveDialog.cancel"),ok:e("common.queryBar.saveDialog.ok")}},queryPill:{operator:{changeOperatorTo:e("common.queryPill.operator.changeOperatorTo"),and:e("common.queryPill.operator.and"),or:e("common.queryPill.operator.or")},facet:t=>e(`common.filters.labels.${t}`,{defaultValue:t}),customPill:{editDialog:{title:e("common.queryPill.customPill.editDialog.title"),cancel:e("common.queryPill.customPill.editDialog.cancel"),ok:e("common.queryPill.customPill.editDialog.ok")},cantBeEmptyDialog:{title:e("common.queryPill.customPill.cantBeEmptyDialog.title"),description:e("common.queryPill.customPill.cantBeEmptyDialog.description"),ok:e("common.queryPill.customPill.cantBeEmptyDialog.ok")},titleExistsDialog:{title:e("common.queryPill.customPill.titleExistsDialog.title"),description:e("common.queryPill.customPill.titleExistsDialog.description"),ok:e("common.queryPill.customPill.titleExistsDialog.ok")},saveDialog:{title:e("common.queryPill.customPill.saveDialog.title"),confirmationMessage:e("common.queryPill.customPill.saveDialog.confirmationMessage"),affectedFilters:e("common.queryPill.customPill.saveDialog.affectedFilters"),cancel:e("common.queryPill.customPill.saveDialog.cancel"),ok:e("common.queryPill.customPill.saveDialog.ok")}}},toolbar:{combine:e("common.toolbar.combine"),newQuery:e("common.toolbar.newQuery"),clearAll:e("common.toolbar.clearAll"),clearAllDialog:{title:e("common.toolbar.clearAllDialog.title"),description:e("common.toolbar.clearAllDialog.description"),cancel:e("common.toolbar.clearAllDialog.cancel"),ok:e("common.toolbar.clearAllDialog.ok")},labels:e("common.toolbar.labels")},savedFilter:{deleteTooltip:e("common.savedFilter.deleteTooltip"),deleteDialog:{title:e("common.savedFilter.deleteDialog.title"),description:e("common.savedFilter.deleteDialog.description"),cancel:e("common.savedFilter.deleteDialog.cancel"),ok:e("common.savedFilter.deleteDialog.ok")},duplicateTooltip:e("common.savedFilter.duplicateTooltip"),overwriteDialog:{title:e("common.savedFilter.overwriteDialog.title"),description:e("common.savedFilter.overwriteDialog.description"),cancel:e("common.savedFilter.overwriteDialog.cancel"),ok:e("common.savedFilter.overwriteDialog.ok")},editDialog:{title:e("common.savedFilter.editDialog.title"),cancel:e("common.savedFilter.editDialog.cancel"),ok:e("common.savedFilter.editDialog.ok"),fields:{title:{label:e("common.savedFilter.editDialog.fields.title.label"),placeholder:e("common.savedFilter.editDialog.fields.title.placeholder")}}},myFilters:e("common.savedFilter.myFilters"),manageFilters:e("common.savedFilter.manageFilters"),manageDialog:{title:e("common.savedFilter.manageDialog.title"),close:e("common.savedFilter.manageDialog.close"),lastSaveAt:e("common.savedFilter.manageDialog.lastSaveAt")},newFilter:e("common.savedFilter.newFilter"),saveTooltip:{whenEmpty:e("common.savedFilter.saveTooltip.whenEmpty"),whenDirty:e("common.savedFilter.saveTooltip.whenDirty"),default:e("common.savedFilter.saveTooltip.default")},shareTooltip:{whenNotSaved:e("common.savedFilter.shareTooltip.whenNotSaved"),default:e("common.savedFilter.shareTooltip.default")},favoriteTooltip:{set:e("common.savedFilter.favoriteTooltip.set"),unset:e("common.savedFilter.favoriteTooltip.unset")},discardTooltip:e("common.savedFilter.discardTooltip"),noSavedFilters:e("common.savedFilter.noSavedFilters")}}},Lt=["#C31D7E","#328536","#AA00FF","#C2410C","#047ABE","#E5231F","#007D85","#C51162","#7B5A90","#B85C00","#722ED1","#4D7C0F","#9F1239","#2D7D9A","#847545"];export{Qe as P,$r as Q,zr as a,we as b,He as c,Lt as d,P as e,Q as f,q as g,ke as h,ae as i,dt as j,Rt as k,Ot as o,At as u};
