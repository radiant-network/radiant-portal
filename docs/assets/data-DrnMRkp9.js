import{j as i}from"./jsx-runtime-D_zvdyIk.js";import{g as Ze,a as er,Q as le,r as rr,q as tr,b as ce,d as ir,e as or,f as nr,i as ar,h as sr,j as lr,k as cr,u as dr,S as ur,l as de,T as ue,B as Q,m as mr,n as pr,o as fr,p as yr,s as _r,t as vr}from"./query-builder-remote-CKam2jCw.js";import{r as u,g as we}from"./index-CGj_12n1.js";import{u as w}from"./i18n-CX2-m22N.js";import{E as gr,a as re,L as hr,b as xr,G as qr,c as br}from"./less-than-or-equal-operator-icon-BI5aNTvi.js";import{N as jr}from"./not-in-operator-icon-DdiM-lgK.js";import{S as g}from"./api-BYPCWrIS.js";import{c as v}from"./utils-D-KgF5mV.js";import{r as Pr}from"./string-format-D2CEWHqQ.js";import{C as Cr}from"./chevron-left-Baf1hbwl.js";import{C as Tr}from"./chevron-right-CKDh57Sc.js";import{B as h}from"./button-jgjpf3em.js";import{X as Ir}from"./x-CubKniSv.js";import{C as Sr}from"./conditional-wrapper-BBX8pIPQ.js";import{P as Er,a as Qr,b as wr}from"./popover-CX89_Z95.js";import{I as kr}from"./input-CUZJ9Qyj.js";import{c as Dr}from"./createLucideIcon-8Lr1oLzj.js";import{D as Nr,b as Rr,c as Or,d as Br,g as Ar,h as Fr}from"./dialog-C2eE55TB.js";import{S as Lr}from"./separator-6xmuS_PL.js";import{a as C}from"./alert-dialog-store-CZoSfA8g.js";import{T as Ur,a as Vr,b as Mr}from"./tooltip-eZCTYbea.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]],ke=Dr("PencilLine",Gr);function zr(e){const{t}=w(),r={state:{...Ze(),savedFilters:[],selectedQueryIndexes:[]},onStateChange:()=>{},...e},[o]=u.useState(()=>({current:er(r)})),[n,a]=u.useState(()=>r.initialState||r.state);u.useEffect(()=>{var s;n&&((s=e.onStateChange)==null||s.call(e,n))},[n]),u.useEffect(()=>{const s=d=>{var c,p,f,y;if(d.queryBuilderId===e.id){if(d.eventType===ce.ADD_QUERY){const m=d.eventData;(c=e.onQueryCreate)==null||c.call(e,m),m.id===d.value.activeQueryId&&((p=e.onActiveQueryChange)==null||p.call(e,m))}else if(d.eventType===ce.UPDATE_QUERY){const m=d.eventData;(f=e.onQueryUpdate)==null||f.call(e,m),m.id===d.value.activeQueryId&&((y=e.onActiveQueryChange)==null||y.call(e,m))}a(m=>({...m,...e.state,...d.value}))}};return window.addEventListener(le,s),()=>{window.removeEventListener(le,s)}},[e.state]),e.fieldsToIgnore;const l={...n,...e.state};return o.current.setCoreProps(s=>({savedFilterDefaultTitle:t("common.saved_filter.untitled_filter"),...s,...e,state:{...l,queries:e.fieldsToIgnore&&l.queries?rr(l.queries,e.fieldsToIgnore):l.queries},onStateChange:d=>{a(d),tr.setLocalQueryBuilderState(e.id,{value:d,skipEvent:!0})}})),o.current}const De=u.createContext(null);function k(){const e=u.useContext(De);if(!e)throw new Error("useQueryBuilderContext must be used within a QueryBuilderContextProvider");return e}const $r=u.createContext(null);function x(){const e=u.useContext($r);if(!e)throw new Error("useQueryBuilderDictContext must be used within a QueryBuilderDictContextProvider");return e}const Ne=u.createContext(null);function q(){const e=u.useContext(Ne);if(!e)throw new Error("useQueryBarContext must be used within a QueryBarContextProvider");return e}function Re({type:e,size:t,className:r}){switch(e){case g.GreaterThan:return i.jsx(br,{size:t,className:r});case g.GreaterThanOrEqualTo:return i.jsx(qr,{size:t,className:r});case g.LessThan:return i.jsx(xr,{size:t,className:r});case g.LessThanOrEqualTo:return i.jsx(hr,{size:t,className:r});case g.Between:return i.jsx(re,{size:t,className:r});case g.NotIn:return i.jsx(jr,{size:t,className:r});default:return i.jsx(gr,{size:t,className:r})}}Re.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperator",props:{size:{required:!1,tsType:{name:"number"},description:""},type:{required:!0,tsType:{name:"union",raw:"SqonOpEnum | (string & {})",elements:[{name:"SqonOpEnum"},{name:"unknown"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};var O,me;function Oe(){if(me)return O;me=1;function e(t,r,o){var n=-1,a=t.length;r<0&&(r=-r>a?0:a+r),o=o>a?a:o,o<0&&(o+=a),a=r>o?0:o-r>>>0,r>>>=0;for(var l=Array(a);++n<a;)l[n]=t[n+r];return l}return O=e,O}var B,pe;function Hr(){if(pe)return B;pe=1;var e=/\s/;function t(r){for(var o=r.length;o--&&e.test(r.charAt(o)););return o}return B=t,B}var A,fe;function Wr(){if(fe)return A;fe=1;var e=Hr(),t=/^\s+/;function r(o){return o&&o.slice(0,e(o)+1).replace(t,"")}return A=r,A}var F,ye;function Be(){if(ye)return F;ye=1;var e=ir(),t=or(),r="[object Symbol]";function o(n){return typeof n=="symbol"||t(n)&&e(n)==r}return F=o,F}var L,_e;function Yr(){if(_e)return L;_e=1;var e=Wr(),t=nr(),r=Be(),o=NaN,n=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt;function d(c){if(typeof c=="number")return c;if(r(c))return o;if(t(c)){var p=typeof c.valueOf=="function"?c.valueOf():c;c=t(p)?p+"":p}if(typeof c!="string")return c===0?c:+c;c=e(c);var f=a.test(c);return f||l.test(c)?s(c.slice(2),f?2:8):n.test(c)?o:+c}return L=d,L}var U,ve;function Jr(){if(ve)return U;ve=1;var e=Yr(),t=1/0,r=17976931348623157e292;function o(n){if(!n)return n===0?n:0;if(n=e(n),n===t||n===-t){var a=n<0?-1:1;return a*r}return n===n?n:0}return U=o,U}var V,ge;function Kr(){if(ge)return V;ge=1;var e=Jr();function t(r){var o=e(r),n=o%1;return o===o?n?o-n:o:0}return V=t,V}var M,he;function Xr(){if(he)return M;he=1;var e=Oe(),t=Kr();function r(o,n,a){return o&&o.length?(n=a||n===void 0?1:t(n),e(o,0,n<0?0:n)):[]}return M=r,M}var Zr=Xr();const et=we(Zr);function Ae({className:e,...t}){return i.jsx("span",{className:e,...t,children:"&"})}Ae.__docgenInfo={description:"",methods:[],displayName:"IntersectionOperator"};function Fe({className:e,...t}){return i.jsx("span",{className:e,...t,children:","})}Fe.__docgenInfo={description:"",methods:[],displayName:"UnionOperator"};function T({canExpand:e,className:t,classNameContent:r,children:o,clickable:n,...a}){return i.jsx("div",{className:v("bg-background rounded-xs pl-2 text-xs font-medium leading-5 relative",e?"pr-[22px]":"pr-2",t),...a,children:i.jsx("div",{className:v("flex flex-wrap items-center",n?"hover:shadow-[inset_0_-4px_0_-2.5px_black] hover:cursor-pointer":"",r),children:o})})}T.__docgenInfo={description:"",methods:[],displayName:"QueryPillValuesContainer",props:{canExpand:{required:!1,tsType:{name:"boolean"},description:""},clickable:{required:!1,tsType:{name:"boolean"},description:""},classNameContent:{required:!1,tsType:{name:"string"},description:""}}};function D({valueFilter:e,...t}){const[r,o]=u.useState(!1),{t:n}=w(),a=e.content.value.length>3,l=r?e.content.value:et(e.content.value,3);return i.jsxs(T,{canExpand:a,...t,children:[e.content.overrideValuesName?i.jsx("div",{children:i.jsx("span",{children:e.content.overrideValuesName})}):l.map((s,d)=>i.jsxs("div",{children:[i.jsx("span",{children:n(`common.filters.labels.${e.content.field}_value.${s}`,{defaultValue:Pr(String(s)).toLowerCase().replace(/^\w/,c=>c.toUpperCase())})}),l.length-1>d&&(e.op===g.All?i.jsx(Ae,{className:"px-1"}):i.jsx(Fe,{className:"px-1"}))]},`${s}-${d}`)),a&&i.jsx("div",{className:"absolute right-1 hover:cursor-pointer",children:r?i.jsx(Cr,{size:16,onClick:s=>{s.preventDefault(),o(!1)}}):i.jsx(Tr,{size:16,onClick:s=>{s.preventDefault(),o(!0)}})})]})}D.__docgenInfo={description:"",methods:[],displayName:"QueryPillValues",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function b({children:e,className:t,onRemovePill:r,...o}){return i.jsxs("div",{className:v("flex items-center rounded-xs p-[2px] bg-muted group-data-[query-active=true]/query:bg-primary/25",t),...o,children:[e,i.jsx(h,{iconOnly:!0,variant:"ghost",size:"sm",className:"mr-[2px] ml-[4px] py-[2px] enabled:hover:bg-transparent size-4",onClick:n=>{n.stopPropagation(),r()},children:i.jsx(Ir,{})})]})}b.__docgenInfo={description:"",methods:[],displayName:"QueryPillContainer",props:{onRemovePill:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function te({valueFilter:e,operator:t,className:r,...o}){const n=x(),{showLabels:a}=k();return i.jsx("div",{className:v("flex items-center",r),...o,children:(a||ar(e)||sr(e))&&i.jsxs(i.Fragment,{children:[i.jsx(oe,{children:n.queryPill.facet(e.content.field)}),i.jsx(ie,{children:t})]})})}const ie=({className:e,children:t,...r})=>i.jsx("span",{className:v("ml-[2px] mr-[4px]",e),...r,children:t});function oe({className:e,children:t,...r}){return i.jsx("span",{className:v("ml-[4px] mr-[2px] text-xs font-medium",e),...r,children:t})}ie.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperatorContainer"};oe.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelContainer"};te.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelOperator",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},operator:{required:!0,tsType:{name:"ReactNode"},description:""}}};function ne({valueFilter:e,customPillEditEnabled:t}){var d;const{query:r}=q(),{queryPillFacetFilterConfig:o}=k(),[n,a]=u.useState(),l=!!(!t&&(o!=null&&o.enable)&&!((d=o==null?void 0:o.blacklistedFacets)!=null&&d.includes(e.content.field))),s=u.useCallback(()=>{o!=null&&o.onFacetClick&&!n&&a(o.onFacetClick(e))},[n,o==null?void 0:o.onFacetClick]);return i.jsxs(b,{onRemovePill:()=>r.removePillByFieldOrIndex(e.content.field),children:[i.jsx(te,{valueFilter:e,operator:i.jsx(Re,{size:14,type:e.op})}),i.jsx(Sr,{condition:l,wrapper:c=>i.jsxs(Er,{children:[i.jsx(Qr,{onClick:s,children:c}),i.jsx(wr,{align:"start",className:"p-2.5",children:n})]}),children:i.jsx(D,{valueFilter:e,clickable:l})})]})}ne.__docgenInfo={description:"",methods:[],displayName:"QueryPillField",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};function Le(){const{t:e}=w();return i.jsx("div",{children:e("common.components.query_pill_remote")})}Le.__docgenInfo={description:"",methods:[],displayName:"QueryPillRemoteComponent"};function Ue({valueFilter:e}){const{query:t}=q();return i.jsxs(b,{onRemovePill:()=>t.removePillByFieldOrIndex(e.content.field),children:[i.jsx(te,{valueFilter:e,operator:i.jsx(re,{size:14,type:e.op})}),i.jsx(D,{valueFilter:e})]})}Ue.__docgenInfo={description:"",methods:[],displayName:"QueryPillUploadList",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};var G,xe;function rt(){if(xe)return G;xe=1;function e(t,r){for(var o=-1,n=t==null?0:t.length,a=Array(n);++o<n;)a[o]=r(t[o],o,t);return a}return G=e,G}var z,qe;function tt(){if(qe)return z;qe=1;var e=lr(),t=rt(),r=cr(),o=Be(),n=e?e.prototype:void 0,a=n?n.toString:void 0;function l(s){if(typeof s=="string")return s;if(r(s))return t(s,l)+"";if(o(s))return a?a.call(s):"";var d=s+"";return d=="0"&&1/s==-1/0?"-0":d}return z=l,z}var $,be;function Ve(){if(be)return $;be=1;var e=tt();function t(r){return r==null?"":e(r)}return $=t,$}var H,je;function it(){if(je)return H;je=1;var e=Oe();function t(r,o,n){var a=r.length;return n=n===void 0?a:n,!o&&n>=a?r:e(r,o,n)}return H=t,H}var W,Pe;function Me(){if(Pe)return W;Pe=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",n=t+r+o,a="\\ufe0e\\ufe0f",l="\\u200d",s=RegExp("["+l+e+n+a+"]");function d(c){return s.test(c)}return W=d,W}var Y,Ce;function ot(){if(Ce)return Y;Ce=1;function e(t){return t.split("")}return Y=e,Y}var J,Te;function nt(){if(Te)return J;Te=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",n=t+r+o,a="\\ufe0e\\ufe0f",l="["+e+"]",s="["+n+"]",d="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+d+")",p="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",j=c+"?",I="["+a+"]?",N="(?:"+m+"(?:"+[p,f,y].join("|")+")"+I+j+")*",_=I+j+N,P="(?:"+[p+s+"?",s,f,y,l].join("|")+")",S=RegExp(d+"(?="+d+")|"+P+_,"g");function E(R){return R.match(S)||[]}return J=E,J}var K,Ie;function at(){if(Ie)return K;Ie=1;var e=ot(),t=Me(),r=nt();function o(n){return t(n)?r(n):e(n)}return K=o,K}var X,Se;function st(){if(Se)return X;Se=1;var e=it(),t=Me(),r=at(),o=Ve();function n(a){return function(l){l=o(l);var s=t(l)?r(l):void 0,d=s?s[0]:l.charAt(0),c=s?e(s,1).join(""):l.slice(1);return d[a]()+c}}return X=n,X}var Z,Ee;function lt(){if(Ee)return Z;Ee=1;var e=st(),t=e("toUpperCase");return Z=t,Z}var ee,Qe;function ct(){if(Qe)return ee;Qe=1;var e=Ve(),t=lt();function r(o){return t(e(o).toLowerCase())}return ee=r,ee}var dt=ct();const ut=we(dt);function Ge({valueFilter:e}){const{query:t}=q(),r=x();return i.jsxs(b,{onRemovePill:()=>t.removePillByFieldOrIndex(e.content.field),children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(oe,{children:e.content.index?ut(e.content.index):r.queryPill.facet(e.content.field)}),i.jsx(ie,{children:i.jsx(re,{size:14})})]}),i.jsx(T,{children:i.jsx(D,{valueFilter:e})})]})}Ge.__docgenInfo={description:"",methods:[],displayName:"QueryPillSet",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function ze({refIndex:e}){const{query:t}=q(),{getQueryReferenceColor:r}=k(),o=r(e);return i.jsx(b,{onRemovePill:()=>t.removePillByFieldOrIndex(e),children:i.jsx(T,{children:i.jsx("span",{style:{color:o},children:`Q${e+1}`})})})}ze.__docgenInfo={description:"",methods:[],displayName:"QueryPillReference",props:{refIndex:{required:!0,tsType:{name:"number"},description:""}}};const $e=({children:e,icon:t=ke,onChangeText:r,...o})=>{const[n,a]=u.useState(!1),l=t;return i.jsx("div",{...o,children:n?i.jsx(kr,{defaultValue:e,autoFocus:!0,onBlur:s=>{a(!1),r==null||r(s.currentTarget.value)},className:"max-w-96 w-full",onKeyUp:s=>{s.key==="Enter"&&(a(!1),r==null||r(s.currentTarget.value))}}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsx(h,{iconOnly:!0,variant:"ghost",onClick:()=>a(!0),children:i.jsx(l,{})})]})})};$e.__docgenInfo={description:"",methods:[],displayName:"EditableText",props:{icon:{required:!1,tsType:{name:"ReactForwardRefExoticComponent",raw:"React.ForwardRefExoticComponent<Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>>",elements:[{name:"intersection",raw:"Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>",elements:[{name:"Omit",elements:[{name:"LucideProps"},{name:"literal",value:"'ref'"}],raw:"Omit<LucideProps, 'ref'>"},{name:"ReactRefAttributes",raw:"React.RefAttributes<SVGSVGElement>",elements:[{name:"SVGSVGElement"}]}]}]},description:"",defaultValue:{value:"PencilLineIcon",computed:!0}},children:{required:!0,tsType:{name:"string"},description:""},onChangeText:{required:!1,tsType:{name:"signature",type:"function",raw:"(text: string) => void",signature:{arguments:[{type:{name:"string"},name:"text"}],return:{name:"void"}}},description:""}}};function Bt(e,t){C.open({type:"warning",title:t.savedFilter.deleteDialog.title,description:t.savedFilter.deleteDialog.description,cancelProps:{children:t.savedFilter.deleteDialog.cancel},actionProps:{color:"destructive",onClick:()=>e.delete(),children:t.savedFilter.deleteDialog.ok}})}function At(e,t){C.open({type:"warning",title:t.savedFilter.overwriteDialog.title,description:t.savedFilter.overwriteDialog.description,cancelProps:{children:t.savedFilter.overwriteDialog.cancel},actionProps:{onClick:()=>e.createSavedFilter(),children:t.savedFilter.overwriteDialog.ok}})}function mt(e){C.open({type:"error",title:e.queryPill.customPill.cantBeEmptyDialog.title,description:e.queryPill.customPill.cantBeEmptyDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.cantBeEmptyDialog.ok}})}function pt(e){C.open({type:"error",title:e.queryPill.customPill.titleExistsDialog.title,description:e.queryPill.customPill.titleExistsDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.titleExistsDialog.ok}})}function ft(e,t,r,o){C.open({type:"warning",title:e.queryPill.customPill.saveDialog.title,description:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{children:e.queryPill.customPill.saveDialog.confirmationMessage.replace("{title}",t)}),!!(r!=null&&r.length)&&i.jsxs("div",{className:"border rounded-sm p-4 space-y-2",children:[i.jsx("div",{className:"font-medium text-foreground",children:e.queryPill.customPill.saveDialog.affectedFilters}),i.jsx("ul",{className:"list-disc list-inside",children:r.map(n=>i.jsx("li",{className:"list-item",children:n.title}))})]})]}),cancelProps:{children:e.queryPill.customPill.saveDialog.cancel},actionProps:{children:e.queryPill.customPill.saveDialog.ok,onClick:async n=>(n.preventDefault(),o())}})}function He({open:e,onOpenChange:t,queryPill:r}){const o=x(),{queryBuilder:n,customPillConfig:a}=k(),l=zr({id:a==null?void 0:a.queryBuilderEditId,initialState:{activeQueryId:r.queries[0].id,queries:r.queries,savedFilters:[r],selectedQueryIndexes:[]},onCustomPillUpdate:async _=>{var S,E;return await Promise.resolve((E=(S=n.coreProps).onCustomPillUpdate)==null?void 0:E.call(S,_)).then(R=>(n.setState(se=>({...se,queries:dr(se.queries,_)})),t(!1),R))}}),[s,d]=u.useState(r.title),[c,p]=u.useState(!1),f=l.getQueries()[0],y=l.getSelectedSavedFilter(),m=s!==r.title,j=m||(y==null?void 0:y.isDirty()),I=u.useCallback(_=>{_?t(!0):(l.reset(),t(!1))},[t,l]),N=u.useCallback(async()=>{if(f.isEmpty()){mt(o);return}if(p(!0),m){const P=await(a==null?void 0:a.validateCustomPillTitle(s));if(P!==void 0&&P===!1){p(!1),pt(o);return}}const _=await(a==null?void 0:a.fetchSavedFiltersByCustomPillId(r.id).finally(()=>p(!1)));ft(o,s,_,async()=>y==null?void 0:y.save(ur.Query,{title:s}))},[f,y,o,s,r.id,a]);return i.jsx(Nr,{open:e,onOpenChange:I,children:i.jsx(De.Provider,{value:{queryBuilder:l,fetchQueryCount:async()=>0,getQueryReferenceColor:()=>"",showLabels:!0,resolveSyntheticSqon:_=>_},children:i.jsxs(Rr,{className:"flex flex-row gap-0 h-screen w-screen max-w-screen rounded-none border-none sm:rounded-none p-0",children:[i.jsx("aside",{className:"flex flex-col min-w-48 bg-primary",children:i.jsx("span",{className:"italic",children:"TODO Insert filters"})}),i.jsx("div",{className:"w-full",children:i.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[i.jsx(Or,{children:i.jsx(Br,{children:o.queryPill.customPill.editDialog.title})}),i.jsx(Lr,{}),i.jsx("div",{children:i.jsx($e,{onChangeText:d,children:s})}),i.jsx("div",{"data-query-active":!0,className:"flex flex-wrap group/query",children:i.jsx(Ne.Provider,{value:{query:f},children:i.jsx(ae,{sqon:f.raw(),customPillEditEnabled:!0})})}),i.jsxs(Ar,{className:"mt-5",children:[i.jsx(Fr,{asChild:!0,children:i.jsx(h,{variant:"outline",children:o.queryPill.customPill.editDialog.cancel})}),i.jsx(h,{type:"submit",loading:c,disabled:!j,onClick:N,children:o.queryPill.customPill.editDialog.ok})]})]})})]})})})}He.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustomEditDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},queryPill:{required:!0,tsType:{name:"ISavedFilter"},description:""}}};function We({valueQuery:e}){const{query:t}=q(),[r,o]=u.useState(!1),{title:n,...a}=e,l={id:e.id,title:e.title,queries:[a],favorite:!1};return i.jsxs(i.Fragment,{children:[i.jsx(b,{onRemovePill:()=>t.removePillById(e.id),children:i.jsxs(T,{className:"pr-1",classNameContent:"space-x-1",children:[i.jsx("span",{children:e.title}),i.jsx(h,{iconOnly:!0,size:"xs",variant:"ghost",className:"size-auto p-[2px]",onClick:()=>o(!0),children:i.jsx(ke,{})})]})}),r&&i.jsx(He,{open:r,onOpenChange:o,queryPill:l})]})}We.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustom",props:{valueQuery:{required:!0,tsType:{name:"IValueQuery"},description:""}}};function Ye({groupFilter:e}){const t={},r=u.useMemo(()=>(e.content.forEach(o=>{t.hasOwnProperty(o.content.field)?(t[o.content.field]=de(t[o.content.field]),t[o.content.field].content.value=t[o.content.field].content.value.concat(o.content.value),o.op===ue.In&&e.op===Q.And&&e.skipBooleanOperatorCheck&&(t[o.content.field].op=ue.All)):t[o.content.field]=de(o)}),{...e,content:Object.entries(t).map(o=>o[1])}),[e]);return i.jsx(ne,{valueFilter:r.content[0]})}Ye.__docgenInfo={description:"",methods:[],displayName:"QueryPillIsolatedBoolean",props:{groupFilter:{required:!0,tsType:{name:"ISqonGroupFilter"},description:""}}};function Je({className:e,...t}){const r=x();return i.jsx("span",{className:v("",e),...t,children:r.queryPill.operator.and})}Je.__docgenInfo={description:"",methods:[],displayName:"AndOperator"};function Ke({className:e,...t}){const r=x();return i.jsx("span",{className:v("",e),...t,children:r.queryPill.operator.or})}Ke.__docgenInfo={description:"",methods:[],displayName:"OrOperator"};function Xe(){const{query:e}=q(),t=x(),r=e.raw().op===Q.And;return i.jsx("div",{className:"px-2",onClick:o=>o.stopPropagation(),children:i.jsxs(Ur,{children:[i.jsx(Vr,{asChild:!0,children:i.jsx(h,{variant:"link",className:"text-current text-sm p-0 h-auto font-normal",onClick:()=>e.changeCombineOperator(r?Q.Or:Q.And),children:r?i.jsx(Je,{}):i.jsx(Ke,{})})}),i.jsxs(Mr,{children:[t.queryPill.operator.changeOperatorTo,' "',r?t.queryPill.operator.or:t.queryPill.operator.and,'"']})]})})}Xe.__docgenInfo={description:"",methods:[],displayName:"QueryCombiner"};function ae({sqon:e,customPillEditEnabled:t}){return i.jsx(i.Fragment,{children:e.content.map((r,o)=>i.jsxs("div",{className:"flex items-center py-[2px]",children:[r.skipBooleanOperatorCheck?i.jsx(Ye,{groupFilter:r}):mr(r)?i.jsx(We,{valueQuery:r}):pr(r)?i.jsx(ae,{sqon:r}):fr(r)?i.jsx(ze,{refIndex:r}):yr(r)?i.jsx(Ge,{valueFilter:r}):_r(r)?i.jsx(Ue,{valueFilter:r}):vr(r)?i.jsx(Le,{}):i.jsx(ne,{valueFilter:r,customPillEditEnabled:t}),yt(e.content,o)&&i.jsx(Xe,{})]},o))})}const yt=(e,t)=>e.length-1>t;ae.__docgenInfo={description:"",methods:[],displayName:"QueryPillBoolean",props:{sqon:{required:!0,tsType:{name:"ISyntheticSqon"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};const Ft=()=>{const{t:e}=w();return{queryBar:{empty:e("common.query_bar.empty"),deletePopover:{title:e("common.query_bar.delete_popover.title"),cancel:e("common.query_bar.delete_popover.cancel"),ok:e("common.query_bar.delete_popover.ok")},customPill:{createTooltip:e("common.query_bar.custom_pill.create_tooltip"),cannotSaveAsCustomPill:e("common.query_bar.custom_pill.cannot_save_as_custom_pill")},saveDialog:{title:e("common.query_bar.save_dialog.title"),fields:{title:{label:e("common.query_bar.save_dialog.fields.title.label"),placeholder:e("common.query_bar.save_dialog.fields.title.placeholder")}},notice:e("common.query_bar.save_dialog.notice"),cancel:e("common.query_bar.save_dialog.cancel"),ok:e("common.query_bar.save_dialog.ok")}},queryPill:{operator:{changeOperatorTo:e("common.query_pill.operator.change_operator_to"),and:e("common.query_pill.operator.and"),or:e("common.query_pill.operator.or")},facet:t=>e(`common.filters.labels.${t}`,{defaultValue:t}),customPill:{editDialog:{title:e("common.query_pill.custom_pill.edit_dialog.title"),cancel:e("common.query_pill.custom_pill.edit_dialog.cancel"),ok:e("common.query_pill.custom_pill.edit_dialog.ok")},cantBeEmptyDialog:{title:e("common.query_pill.custom_pill.cant_be_empty_dialog.title"),description:e("common.query_pill.custom_pill.cant_be_empty_dialog.description"),ok:e("common.query_pill.custom_pill.cant_be_empty_dialog.ok")},titleExistsDialog:{title:e("common.query_pill.custom_pill.title_exists_dialog.title"),description:e("common.query_pill.custom_pill.title_exists_dialog.description"),ok:e("common.query_pill.custom_pill.title_exists_dialog.ok")},saveDialog:{title:e("common.query_pill.custom_pill.save_dialog.title"),confirmationMessage:e("common.query_pill.custom_pill.save_dialog.confirmation_message"),affectedFilters:e("common.query_pill.custom_pill.save_dialog.affected_filters"),cancel:e("common.query_pill.custom_pill.save_dialog.cancel"),ok:e("common.query_pill.custom_pill.save_dialog.ok")}}},toolbar:{combine:e("common.toolbar.combine"),newQuery:e("common.toolbar.newQuery"),clearAll:e("common.toolbar.clear_all"),clearAllDialog:{title:e("common.toolbar.clear_all_dialog.title"),description:e("common.toolbar.clear_all_dialog.description"),cancel:e("common.toolbar.clear_all_dialog.cancel"),ok:e("common.toolbar.clear_all_dialog.ok")},labels:e("common.toolbar.labels")},savedFilter:{deleteTooltip:e("common.saved_filter.delete_tooltip"),deleteDialog:{title:e("common.saved_filter.delete_dialog.title"),description:e("common.saved_filter.delete_dialog.description"),cancel:e("common.saved_filter.delete_dialog.cancel"),ok:e("common.saved_filter.delete_dialog.ok")},duplicateTooltip:e("common.saved_filter.duplicate_tooltip"),overwriteDialog:{title:e("common.saved_filter.overwrite_dialog.title"),description:e("common.saved_filter.overwrite_dialog.description"),cancel:e("common.saved_filter.overwrite_dialog.cancel"),ok:e("common.saved_filter.overwrite_dialog.ok")},editDialog:{title:e("common.saved_filter.edit_dialog.title"),cancel:e("common.saved_filter.edit_dialog.cancel"),ok:e("common.saved_filter.edit_dialog.ok"),fields:{title:{label:e("common.saved_filter.edit_dialog.fields.title.label"),placeholder:e("common.saved_filter.edit_dialog.fields.title.placeholder")}}},myFilters:e("common.saved_filter.my_filters"),manageFilters:e("common.saved_filter.manage_filters"),manageDialog:{title:e("common.saved_filter.manage_dialog.title"),close:e("common.saved_filter.manage_dialog.close"),lastSaveAt:e("common.saved_filter.manage_dialog.last_save_at")},newFilter:e("common.saved_filter.new_filter"),saveTooltip:{whenEmpty:e("common.saved_filter.save_tooltip.when_empty"),whenDirty:e("common.saved_filter.save_tooltip.when_dirty"),default:e("common.saved_filter.save_tooltip.default")},shareTooltip:{whenNotSaved:e("common.saved_filter.share_tooltip.when_not_saved"),default:e("common.saved_filter.share_tooltip.default")},favoriteTooltip:{set:e("common.saved_filter.favorite_tooltip.set"),unset:e("common.saved_filter.favorite_tooltip.unset")},discardTooltip:e("common.saved_filter.discard_tooltip"),noSavedFilters:e("common.saved_filter.no_saved_filters")}}},Lt=["#C31D7E","#328536","#AA00FF","#C2410C","#047ABE","#E5231F","#007D85","#C51162","#7B5A90","#B85C00","#722ED1","#4D7C0F","#9F1239","#2D7D9A","#847545"];export{ke as P,$r as Q,zr as a,De as b,He as c,Lt as d,q as e,k as f,x as g,Ne as h,ae as i,ut as j,Bt as k,At as o,Ft as u};
