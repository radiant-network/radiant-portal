import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{R as xe,r as a}from"./index-CGj_12n1.js";import{A as Ke,a as Ye,b as We,c as Xe}from"./accordion-DPra3b9Q.js";import{B as C}from"./button-BDncBsTP.js";import{d as he,e as ve,C as Je,a as Ze}from"./card-CVaWHAcA.js";import{T as et,a as tt,b as st}from"./tooltip-anNhU4TT.js";import{A as nt}from"./action-button-DglMD9AQ.js";import"./button.variants-Du9eY_ux.js";import{C as rt}from"./checkbox-filter-DhnKxBlu.js";import{I as B}from"./input-Dm5winle.js";import{S as ot}from"./separator-IJKoE26K.js";import{S as U}from"./skeleton-Shk8p_SP.js";import{u as T}from"./i18n-CbvocMFw.js";import{q as w,M as G,T as z,R as N,D as ye}from"./query-builder-remote-DnAI0UbO.js";import{A as Z}from"./applications-config-DwuB3Ut-.js";import{u as _e,o as D}from"./api-CvZQK6W_.js";import{S as at}from"./search-DqA1hdnz.js";import{E as lt,L as it,G as ct,a as dt,b as ut,c as mt}from"./less-than-or-equal-operator-icon-BI5aNTvi.js";import{c as pt}from"./index-C66Dxnp2.js";import{C as ft}from"./checkbox-CuLJw5hI.js";import{L as je}from"./label-ymyzYynk.js";import{d as ce,S as de,a as ue,b as me,c as pe}from"./select-WOQZTtP8.js";import{a as xt,c as be,b as J}from"./index-CcLUv2_A.js";import{P as Q,u as ee}from"./index-B7CJuYpG.js";import{i as ke,R as ht,I as vt,C as yt}from"./dropdown-menu-CxUCUeqn.js";import{u as _t}from"./index-C8qycyLa.js";import{u as jt}from"./index-A6VgBoaw.js";import{u as bt}from"./index-qxuqJ0RB.js";import{P as kt}from"./index-CRLeYu_h.js";import{c as Ne}from"./utils-D-KgF5mV.js";const ge=xe.createContext({seqId:"1"}),Nt=r=>{switch(r){case Z.cnv_occurrence:return s=>D.aggregateGermlineCNVOccurrences(s.seqId,s.aggregationBody).then(t=>t.data);default:return s=>D.aggregateGermlineSNVOccurrences(s.seqId,s.aggregationBody).then(t=>t.data)}};function gt(r,s=30,t=!1,c){let i;const{seqId:n}=xe.useContext(ge);t?i={seqId:n,aggregationBody:{field:r,size:s}}:i=null;const o=w.getResolvedActiveQuery(c);return o&&i&&(i.aggregationBody.sqon={content:o.content,op:o.op}),_e(i,Nt(c),{revalidateOnFocus:!1})}function Rt(r,s){const t=r.toLowerCase().split(/\s+/).filter(Boolean);return s.filter(c=>{const i=c.key.toLowerCase(),n=c.label.toLowerCase();function o(l,u){let _=0;for(const m of u){const d=l.indexOf(m,_);if(d===-1)return!1;_=d+m.length}return!0}return o(i,t)||o(n,t)})}function X(r,s){return s<r?s:r}function Re({field:r,maxVisibleItems:s=5}){const{t,sanitize:c,lazyTranslate:i}=T(),{appId:n}=re(),{data:o,isLoading:l}=gt(r.key,void 0,!0,n),[u,_]=a.useState(o||[]),[m,d]=a.useState([]),[f,v]=a.useState([]),[j,x]=a.useState(X(u.length,s)),[g,E]=a.useState(!1);a.useEffect(()=>{const k=w.getResolvedActiveQuery(n).content.find(y=>y.content.field===r.key);k?(v(k.content.value),E(!0)):v([]),o==null||o.sort((y,S)=>{const $=y.key&&f.includes(y.key),W=S.key&&f.includes(S.key);return $===W?S.count-y.count:$?-1:1}),o==null||o.forEach(y=>{y.label=t(`common.filters.values.${r.key}.${c(y.key)}`,{defaultValue:i(y.key)})}),_(o||[]),x(X((o==null?void 0:o.length)||0,s))},[o,n,r.key,s]);const F=a.useCallback(k=>{if(!k.trim()){_(o||[]),x(X((o==null?void 0:o.length)||0,s));return}const y=Rt(k,o);s>y.length?x(y.length):y.length>s&&x(s),_(y)},[o,s]),V=a.useCallback(()=>{x(u.length)},[j,u]),A=a.useCallback(()=>{x(s)},[j]),K=a.useCallback(()=>{f.length!==u.length&&(E(!0),v(u.map(k=>k.key)))},[u,f]),Y=a.useCallback(()=>{f.length!==0&&(E(!0),v([]))},[f]),R=a.useCallback(k=>{let y=[];f.some(S=>S===k.key)?y=f.filter(S=>S!==k.key):y=[...f,k.key],E(!0),v(y)},[f]),h=a.useCallback(()=>{E(!1),v([...m])},[m]),I=a.useCallback(k=>{E(!1),d(f),w.updateActiveQueryField(n,{field:r.key,value:[...f],merge_strategy:G.OVERRIDE_VALUES,operator:k})},[f,n,r.key]),M=a.useCallback(()=>{I(z.In)},[I]),O=a.useCallback(()=>{I(z.NotIn)},[I]),q=a.useCallback(()=>{I(z.All)},[I]),L=a.useCallback(()=>{I(z.In)},[I]);return e.jsxs(e.Fragment,{children:[e.jsxs(he,{size:"sm",variant:"outline",children:[e.jsx(B,{startIcon:at,size:"xs",type:"text",placeholder:t("common.filters.search.placeholder"),className:"w-full text-xs py-1.5 px-3 mb-4 border border-border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",onChange:k=>F(k.target.value),autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(C,{size:"xs",onClick:()=>K(),variant:"link",className:"px-0",children:t("common.filters.buttons.all")}),e.jsx(ot,{orientation:"vertical",className:"h-4"}),e.jsx(C,{size:"xs",onClick:()=>Y(),variant:"link",className:"px-0",children:t("common.filters.buttons.none")})]}),e.jsxs("div",{className:"max-h-[250px] overflow-auto",children:[l&&Array.from({length:3},(k,y)=>e.jsxs("div",{className:"flex justify-between items-center py-2 space-x-2",children:[e.jsx(U,{className:"w-full h-6 rounded"}),e.jsx(U,{className:"h-6 w-12 rounded-md"})]},`skeleton-${y}`)),!l&&u.length===0&&e.jsx("div",{className:"text-muted-foreground py-4",children:t("common.filters.no_values_found")}),!l&&u.length>0&&Array.from({length:j},(k,y)=>e.jsx("div",{className:"gap-3 py-1.5",children:e.jsx(rt,{size:"xs",label:t(`common.filters.labels.${r.key}_value.${u[y].key}`,{defaultValue:u[y].label}),checked:f.some(S=>S===u[y].key),count:u[y].count,onCheckedChange:()=>R(u[y])})},u[y].key))]}),!l&&u.length>j&&e.jsx(C,{className:"mt-2 px-0",onClick:V,size:"xs",variant:"link",children:t("common.filters.buttons.show_more",{count:u.length-s})}),!l&&j>s&&e.jsx(C,{className:"mt-2 px-0",onClick:A,size:"xs",variant:"link",children:t("common.filters.buttons.show_less")})]}),e.jsx(ve,{size:"sm",children:e.jsxs("div",{className:"flex align-right justify-end items-center space-x-2",children:[e.jsx(C,{size:"xxs",variant:"ghost",onClick:h,disabled:!g||l,children:t("common.filters.buttons.clear")}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(nt,{size:"xxs",variant:"outline",className:"h-7",color:"primary",actions:[{label:t("common.filters.buttons.some_not_in"),onClick:L},{label:t("common.filters.buttons.all"),onClick:q},{label:t("common.filters.buttons.not_in"),onClick:O}],onDefaultAction:M,disabled:l,children:t("common.filters.buttons.apply")})})]})})]})}Re.__docgenInfo={description:"",methods:[],displayName:"MultiSelectFilter",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},maxVisibleItems:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"5",computed:!1}}}};const St=pt({slots:{base:"text-muted-foreground"},variants:{size:{xs:{base:"text-xs"},sm:{base:"text-sm"}}},defaultVariants:{size:"sm"}});function Se({className:r,size:s,children:t}){const c=St({size:s});return e.jsx("p",{className:c.base({className:r}),children:t})}Se.__docgenInfo={description:"",methods:[],displayName:"TextMuted"};const Ee="integer",Et=r=>{switch(r){case Z.cnv_occurrence:return s=>D.statisticsGermlineCNVOccurrences(s.seqId,s.statisticsBody).then(t=>t.data);default:return s=>D.statisticsGermlineSNVOccurrences(s.seqId,s.statisticsBody).then(t=>t.data)}};function It(r,s,t,c=!1){const i={seqId:t,statisticsBody:{field:r}},n=c?ye:w.getResolvedActiveQuery(s);return n&&(i.statisticsBody.sqon={content:n.content,op:n.op}),_e(i,Et(s),{revalidateOnFocus:!1})}function fe(r,s,t,c){var j;let i=!1,n=N.LessThan,o="0",l="0",u="",_=!1;const m=(c==null?void 0:c.type)===Ee?0:3,d=s.content.find(x=>"content"in x&&"field"in x.content?x.content.field===r:!1),f=s.content.find(x=>"content"in x&&"field"in x.content?x.content.field===`${r}_unit`:!1);if(d){const x=d.content.value;if(console.log("[NumericalFilter] values",x),x.includes("__missing__"))return{hasUnappliedItems:i,selectedRange:n,minValue:o,maxValue:l,numericalValue:u,hasNoData:!0,selectedUnit:void 0};i=!0,x.length===2?(n=N.Between,o=Number(x[0]).toFixed(m),l=Number(x[1]).toFixed(m)):u=x[0],d.op&&(n=d.op)}else console.log("[NumericalFilter else] no filter exists",t),_=!1,(t==null?void 0:t.defaultMin)!==void 0?(o=t.defaultMin.toString(),u=t.defaultMin.toString()):(c==null?void 0:c.min)!==void 0&&(o=Number(c.min.toFixed(m)).toString(),u=Number(c.min.toFixed(m)).toString()),(t==null?void 0:t.defaultMax)!==void 0?l=t.defaultMax.toString():(c==null?void 0:c.max)!==void 0&&(l=Number(c.max.toFixed(m)).toString()),t!=null&&t.defaultOperator&&(n=N[t.defaultOperator]);let v;return f&&f.content.value[0]&&((j=t==null?void 0:t.rangeTypes)!=null&&j.length)&&(v=t.rangeTypes[0].key),{hasUnappliedItems:i,selectedRange:n,minValue:o,maxValue:l,numericalValue:u,hasNoData:_,selectedUnit:v}}function Ie({field:r}){var oe,ae,le,ie;const{t:s}=T(),{appId:t,aggregations:c}=re(),{seqId:i}=a.useContext(ge),n=r.key,o={[N.GreaterThan]:{display:s("common.filters.operators.greater_than"),dropdown:s("common.filters.operators.greater_than"),icon:mt},[N.LessThan]:{display:s("common.filters.operators.less_than"),dropdown:s("common.filters.operators.less_than"),icon:ut},[N.Between]:{display:s("common.filters.operators.between"),dropdown:s("common.filters.operators.between"),icon:dt},[N.GreaterThanOrEqualTo]:{display:s("common.filters.operators.greater_than_or_equal"),dropdown:s("common.filters.operators.greater_than_or_equal"),icon:ct},[N.LessThanOrEqualTo]:{display:s("common.filters.operators.less_than_or_equal"),dropdown:s("common.filters.operators.less_than_or_equal"),icon:it},[N.In]:{display:s("common.filters.operators.in"),dropdown:s("common.filters.operators.in"),icon:lt}},{data:l,isLoading:u}=It(n,t,i,!1),_=(l==null?void 0:l.type)===Ee?0:3,[m,d]=a.useState(N.GreaterThan),[f,v]=a.useState("0"),[j,x]=a.useState("0"),[g,E]=a.useState("0"),[F,V]=a.useState(!1),[A,K]=a.useState(),[Y,R]=a.useState(!1),h=(oe=Object.values(c).flatMap(p=>p.items).find(p=>p.key===n))==null?void 0:oe.defaults,I=r.type==="numerical"&&(h==null?void 0:h.noDataInputOption),M=(h==null?void 0:h.intervalDecimal)!==void 0&&((h==null?void 0:h.max)!==void 0||(h==null?void 0:h.min)!==void 0)||l&&(l.min!==void 0||l.max!==void 0),O=(h==null?void 0:h.min)??(l==null?void 0:l.min)??0,q=(h==null?void 0:h.max)??(l==null?void 0:l.max)??100,L=a.useCallback(()=>{const p=w.getResolvedActiveQuery(t);if(!(p!=null&&p.content))return;const b=fe(n,p,h,l);V(b.hasNoData),E(b.minValue),x(b.maxValue),R(b.hasUnappliedItems),d(b.selectedRange??N.GreaterThan),v(b.numericalValue)},[t,n,h,l]);a.useEffect(()=>{L()},[L]);const k=a.useCallback(p=>{d(p),R(!0)},[]),y=a.useCallback(p=>{V(p),R(!0)},[]),S=a.useCallback(p=>{K(p),R(!0)},[]),$=()=>{R(!1);const p=fe(n,ye,h,l);V(p.hasNoData),E(p.minValue),x(p.maxValue),R(p.hasUnappliedItems),d(p.selectedRange),v(p.numericalValue)},W=a.useCallback(()=>{if(R(!1),F){w.updateActiveQueryField(t,{field:n,value:["__missing__"],merge_strategy:G.OVERRIDE_VALUES});return}let p=[];p=m===N.Between?[parseFloat(g.toString()),parseFloat(j.toString())]:[parseFloat(f.toString())],w.updateActiveQueryField(t,{field:n,value:p,merge_strategy:G.OVERRIDE_VALUES,operator:m}),A&&w.updateActiveQueryField(t,{field:`${n}_unit`,value:[A],merge_strategy:G.OVERRIDE_VALUES})},[t,n,m,f,g,j,F,A]),Qe=Object.entries(N).map(([p,b])=>{if(b in o){const He=o[b].icon;return e.jsx(ce,{value:b,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{size:16}),e.jsx("span",{children:o[b].dropdown})]})},b)}return null}).filter(Boolean);return e.jsxs(e.Fragment,{children:[e.jsx(he,{id:`${n}_container`,size:"sm",variant:"outline",children:e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{id:`${n}_operator`,children:e.jsxs(de,{value:m,onValueChange:k,children:[e.jsx(ue,{size:"sm",children:e.jsx(me,{placeholder:s("common.filters.operators.select_operator"),children:o[m].display})}),e.jsx(pe,{children:Qe})]})}),m===N.Between?e.jsxs("div",{className:"flex gap-2 flex-row",children:[e.jsx(B,{size:"xs",className:"w-half",value:g,onChange:p=>{const b=p.target.value;isNaN(Number(b))||(E(b),R(!0))},min:O,max:q,id:`${n}_min`,"data-testid":`${n}_min`}),e.jsx(B,{size:"xs",className:"w-half",value:j,onChange:p=>{const b=p.target.value;isNaN(Number(b))||(x(b),R(!0))},min:O,max:q,id:`${n}_max`,"data-testid":`${n}_max`})]}):e.jsx(B,{size:"xs",className:"w-full",value:f,onChange:p=>{const b=p.target.value;isNaN(Number(b))||(v(b),R(!0))},min:O,max:q,id:`${n}_value`,"data-testid":`${n}_value`}),M&&e.jsx("div",{id:`${n}_interval`,children:e.jsxs(Se,{size:"xs",children:[s("common.filters.labels.actual_interval")," : ",(ae=l==null?void 0:l.min)==null?void 0:ae.toFixed(_)," -"," ",(le=l==null?void 0:l.max)==null?void 0:le.toFixed(_)]})})]}),(h==null?void 0:h.rangeTypes)&&h.rangeTypes.length>0&&e.jsx("div",{id:`${n}_range_type_container`,children:u?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"h-5 w-16 mb-1",id:`${n}_unit_label_skeleton`}),e.jsx(U,{className:"h-9 w-full",id:`${n}_select_skeleton`})]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"text-sm",id:`${n}_unit_label`,children:s("common.filters.labels.unit")}),e.jsxs(de,{defaultValue:A||h.rangeTypes[0].key,onValueChange:S,children:[e.jsx(ue,{children:e.jsx(me,{placeholder:s("common.filters.labels.select_unit"),children:((ie=h.rangeTypes.find(p=>p.key===A))==null?void 0:ie.name)||s("common.filters.labels.select_unit")})}),e.jsx(pe,{children:h.rangeTypes.map(p=>e.jsx(ce,{value:p.key,children:p.name},p.key))})]})]})}),I&&!M&&e.jsxs("label",{className:"flex items-center space-x-2 overflow-hidden",id:`${n}_no_data_label`,children:[e.jsx(ft,{checked:F,onCheckedChange:y,id:`${n}_no_data`}),e.jsx("span",{children:s("common.filters.labels.no_data")})]})]})}),e.jsx(ve,{size:"sm",children:e.jsxs("div",{className:"flex align-right justify-end items-center space-x-2",children:[e.jsx(C,{size:"xxs",variant:"ghost",onClick:$,disabled:!Y,id:`${n}_clear`,children:s("common.filters.buttons.clear")}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(C,{size:"xxs",variant:"outline",onClick:W,id:`${n}_apply`,children:s("common.filters.buttons.apply")})})]})})]})}Ie.__docgenInfo={description:"",methods:[],displayName:"NumericalFilter",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};var te="Radio",[wt,we]=be(te),[Ct,At]=wt(te),Ce=a.forwardRef((r,s)=>{const{__scopeRadio:t,name:c,checked:i=!1,required:n,disabled:o,value:l="on",onCheck:u,form:_,...m}=r,[d,f]=a.useState(null),v=ee(s,g=>f(g)),j=a.useRef(!1),x=d?_||!!d.closest("form"):!0;return e.jsxs(Ct,{scope:t,checked:i,disabled:o,children:[e.jsx(Q.button,{type:"button",role:"radio","aria-checked":i,"data-state":Ve(i),"data-disabled":o?"":void 0,disabled:o,value:l,...m,ref:v,onClick:J(r.onClick,g=>{i||u==null||u(),x&&(j.current=g.isPropagationStopped(),j.current||g.stopPropagation())})}),x&&e.jsx(Fe,{control:d,bubbles:!j.current,name:c,value:l,checked:i,required:n,disabled:o,form:_,style:{transform:"translateX(-100%)"}})]})});Ce.displayName=te;var Ae="RadioIndicator",Te=a.forwardRef((r,s)=>{const{__scopeRadio:t,forceMount:c,...i}=r,n=At(Ae,t);return e.jsx(kt,{present:c||n.checked,children:e.jsx(Q.span,{"data-state":Ve(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:s})})});Te.displayName=Ae;var Tt="RadioBubbleInput",Fe=a.forwardRef(({__scopeRadio:r,control:s,checked:t,bubbles:c=!0,...i},n)=>{const o=a.useRef(null),l=ee(o,n),u=bt(t),_=jt(s);return a.useEffect(()=>{const m=o.current;if(!m)return;const d=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(d,"checked").set;if(u!==t&&v){const j=new Event("click",{bubbles:c});v.call(m,t),m.dispatchEvent(j)}},[u,t,c]),e.jsx(Q.input,{type:"radio","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:l,style:{...i.style,..._,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Fe.displayName=Tt;function Ve(r){return r?"checked":"unchecked"}var Ft=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],H="RadioGroup",[Vt,hs]=be(H,[ke,we]),Oe=ke(),qe=we(),[Ot,qt]=Vt(H),Ge=a.forwardRef((r,s)=>{const{__scopeRadioGroup:t,name:c,defaultValue:i,value:n,required:o=!1,disabled:l=!1,orientation:u,dir:_,loop:m=!0,onValueChange:d,...f}=r,v=Oe(t),j=_t(_),[x,g]=xt({prop:n,defaultProp:i??null,onChange:d,caller:H});return e.jsx(Ot,{scope:t,name:c,required:o,disabled:l,value:x,onValueChange:g,children:e.jsx(ht,{asChild:!0,...v,orientation:u,dir:j,loop:m,children:e.jsx(Q.div,{role:"radiogroup","aria-required":o,"aria-orientation":u,"data-disabled":l?"":void 0,dir:j,...f,ref:s})})})});Ge.displayName=H;var Me="RadioGroupItem",Le=a.forwardRef((r,s)=>{const{__scopeRadioGroup:t,disabled:c,...i}=r,n=qt(Me,t),o=n.disabled||c,l=Oe(t),u=qe(t),_=a.useRef(null),m=ee(s,_),d=n.value===i.value,f=a.useRef(!1);return a.useEffect(()=>{const v=x=>{Ft.includes(x.key)&&(f.current=!0)},j=()=>f.current=!1;return document.addEventListener("keydown",v),document.addEventListener("keyup",j),()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",j)}},[]),e.jsx(vt,{asChild:!0,...l,focusable:!o,active:d,children:e.jsx(Ce,{disabled:o,required:n.required,checked:d,...u,...i,name:n.name,ref:m,onCheck:()=>n.onValueChange(i.value),onKeyDown:J(v=>{v.key==="Enter"&&v.preventDefault()}),onFocus:J(i.onFocus,()=>{var v;f.current&&((v=_.current)==null||v.click())})})})});Le.displayName=Me;var Gt="RadioGroupIndicator",$e=a.forwardRef((r,s)=>{const{__scopeRadioGroup:t,...c}=r,i=qe(t);return e.jsx(Te,{...i,...c,ref:s})});$e.displayName=Gt;var ze=Ge,Be=Le,Mt=$e;function se({className:r,...s}){return e.jsx(ze,{className:Ne("grid gap-2",r),...s})}se.displayName=ze.displayName;function ne({className:r,...s}){return e.jsx(Be,{className:Ne("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...s,children:e.jsx(Mt,{className:"flex items-center justify-center",children:e.jsx(yt,{className:"h-2.5 w-2.5 fill-current text-current"})})})}ne.displayName=Be.displayName;se.__docgenInfo={description:"",methods:[]};ne.__docgenInfo={description:"",methods:[]};function Pe({data:r,field:s}){const{t}=T(),[c,i]=a.useState(r||[]),[n,o]=a.useState(null),{appId:l}=re();a.useEffect(()=>{const d=w.getActiveQuery(l).content.find(f=>f.content.field===s.key);if(d){const f=d.content.value;f.length>=1&&o(f[0])}else o(null);i(r||[])},[r]);const u=a.useCallback(d=>{d.key!==n&&d.key!==void 0&&(o(d.key||null),w.updateActiveQueryField(l,{field:s.key,value:[...d.key],merge_strategy:G.OVERRIDE_VALUES}))},[n]),_=a.useCallback(d=>n===d.key,[n]),m=a.useCallback(()=>{o(null)},[n]);return e.jsxs("div",{className:"p-2 w-full max-w-md",children:[e.jsx(se,{children:c.map(d=>e.jsx("div",{className:"space-y-3 pt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{value:d.key||"",id:d.key,checked:_(d),onClick:()=>{u(d)}}),e.jsx(je,{htmlFor:d.key,children:d.key})]}),e.jsx("span",{className:"bg-accent px-2 py-1 rounded-md font-mono text-xs",children:d.count})]})},d.key))}),n!==null&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-4 border-border"}),e.jsx("div",{className:"flex align-right justify-end items-center space-x-2",children:e.jsx(C,{onClick:m,size:"xs",children:t("common.filters.buttons.clear")})})]})]})}Pe.__docgenInfo={description:"",methods:[],displayName:"ToggleFilter",props:{data:{required:!1,tsType:{name:"Array",elements:[{name:"Aggregation"}],raw:"Aggregation[]"},description:""},field:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};function P({field:r,children:s}){const{t}=T(),c=t(`common.filters.labels.${r.translation_key}`,{defaultValue:r.key}),i=`common.filters.labels.${r.translation_key}_tooltip`,n=t(i)===i?null:t(i);function o(){return e.jsx("div",{className:"flex items-center justify-between w-full text-xs",children:e.jsx("span",{children:c})})}return e.jsx(Je,{size:"sm",children:e.jsxs(Ke,{value:r.key,children:[e.jsx(Ze,{size:"sm",children:e.jsx(Ye,{children:n?e.jsxs(et,{children:[e.jsx(tt,{asChild:!0,children:e.jsx("span",{children:o()})}),e.jsx(st,{children:e.jsx("span",{children:n})})]}):o()})}),e.jsx(We,{className:"pb-0",children:s})]},r.key)})}function Ue({field:r,isOpen:s}){const{t}=T(),c=r.type;if(c==="divider")return e.jsx("h4",{className:"mx-1 my-3 mt-5 text-muted-foreground",children:t(`common.filters.${r.key}`)});let i;switch(c){case"multiple":i=e.jsx(P,{field:r,isOpen:s,children:e.jsx(Re,{field:r})});break;case"numerical":i=e.jsx(P,{field:r,isOpen:s,children:e.jsx(Ie,{field:r})});break;case"boolean":i=e.jsx(P,{field:r,isOpen:s,children:e.jsx(Pe,{field:r})});break;default:i=e.jsx("div",{children:t("common.filters.unsupported_type",{type:r.type})})}return i}P.__docgenInfo={description:"",methods:[],displayName:"AccordionContainer",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},searchHandler:{required:!1,tsType:{name:"signature",type:"function",raw:"(_e: React.MouseEvent<SVGElement, MouseEvent>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<SVGElement, MouseEvent>",elements:[{name:"SVGElement"},{name:"MouseEvent"}]},name:"_e"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};Ue.__docgenInfo={description:"To be use when the filter needs to be inside an Accordion component",methods:[],displayName:"FilterContainer",props:{field:{required:!0,tsType:{name:"AggregationConfig"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},searchHandler:{required:!1,tsType:{name:"signature",type:"function",raw:"(_e: React.MouseEvent<SVGElement, MouseEvent>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<SVGElement, MouseEvent>",elements:[{name:"SVGElement"},{name:"MouseEvent"}]},name:"_e"}],return:{name:"void"}}},description:""}}};const De=a.createContext({appId:Z.variant_entity,aggregations:{}}),re=()=>{const r=a.useContext(De);if(!r)throw new Error("useFilterConfig must be used within a FilterConfigProvider");return r};function Lt({groupKey:r,appId:s,aggregations:t}){var _;const{t:c}=T(),[i,n]=a.useState(!1),[o,l]=a.useState([]),u=r?((_=t[r])==null?void 0:_.items)||[]:Object.values(t).flatMap(m=>m.items);return a.useEffect(()=>{n(!1),l([])},[r]),e.jsx(De,{value:{appId:s,aggregations:t},children:e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(C,{variant:"link",onClick:()=>{const m=!i;n(m),l(m?u.map(d=>d.key):[])},children:c(i?"common.actions.collapse_all":"common.actions.expand_all")})}),e.jsx(Xe,{className:"flex flex-col gap-1",type:"multiple",value:o,onValueChange:m=>l(m),children:u.map((m,d)=>e.jsx(Ue,{isOpen:o.includes(m.key),field:m},`${m.key}-${d}`))})]})})}Lt.__docgenInfo={description:"",methods:[],displayName:"FilterList",props:{groupKey:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},aggregations:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  [key: string]: AggregationGroup;
}`,signature:{properties:[{key:{name:"string"},value:{name:"AggregationGroup",required:!0}}]}},description:""},appId:{required:!0,tsType:{name:"ApplicationId"},description:""}}};export{Lt as F,Re as M,Ie as N,Pe as T};
