import{j as b}from"./jsx-runtime-D_zvdyIk.js";import{r as u}from"./index-CGj_12n1.js";import{u as F,c as y}from"./api-DL5z-YXi.js";import{g as I,s as d,D as v}from"./data-table-filters-1YGuU3QP.js";import{P as C}from"./priority-indicator-CJ44lckm.js";import{F as m,C as O,R as w,H as x}from"./refresh-ccw-Bwg-o3xn.js";import{c as R}from"./createLucideIcon-8Lr1oLzj.js";import{C as T}from"./check-DRc1RmCY.js";import{P as j}from"./pen-BVjgPDnY.js";import{u as P}from"./i18n-C_95iu9G.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],A=R("OctagonX",q),h=["routine","urgent","asap","stat"];function E(r){return r.sort((e,n)=>{var i,p;const a=h.indexOf(((i=e.key)==null?void 0:i.toLowerCase())||""),c=h.indexOf(((p=n.key)==null?void 0:p.toLowerCase())||"");return a!==-1&&c!==-1?a-c:a!==-1?-1:c!==-1?1:0}).map(e=>({...e,label:b.jsx(C,{size:"sm",code:e.key})}))}const L="case_exploration.status";function z(r){return{draft:j,submitted:x,in_progress:w,completed:T,incomplete:O,revoke:A,unknown:m}[r.toLowerCase()]||m}function D(r,s){return r.map(e=>({...e,label:s(`${L}.${e.key}`,e.label||""),icon:z(e.key||"")}))}function M(r,s){const[e,n]=u.useState(()=>{if(typeof window>"u")return s;try{const a=localStorage.getItem(r);return a?JSON.parse(a):s}catch{return s}});return u.useEffect(()=>{try{localStorage.setItem(r,JSON.stringify(e))}catch{}},[r,e]),[e,n]}const _={priority:{key:"priority_code",weight:1,visible:!0},status:{key:"status_code",weight:2,visible:!0},case_analysis:{key:"case_analysis_code",weight:3,visible:!0},project:{key:"project_code",visible:!1},performer_lab:{key:"performer_lab_code",visible:!1},requested_by:{key:"requested_by_code",visible:!1}},g={priority:[],status:[],case_analysis:[],project:[],performer_lab:[],requested_by:[]};async function k(r){return(await y.casesFilters(r)).data}function B({loading:r=!0,setSearchCriteria:s}){const[e,n]=u.useState([]),[a,c]=u.useState({}),[i,p]=M("case-exploration-filters",{...g}),{t:f}=P(),{data:o}=F("case-filters",()=>k({search_criteria:[]}),{revalidateOnFocus:!1,revalidateOnMount:!0,revalidateIfStale:!1,revalidateOnReconnect:!1}),S=u.useMemo(()=>o?Object.keys(o).map(t=>{const l={key:t,label:f(`case_exploration.case.filters.${t}`),isVisible:I(_).includes(t),isOpen:a[t]||!1,selectedItems:i[t]||[],options:[]};switch(t){case"status":return{...l,options:d(D(o[t]||[],f))};case"project":case"performer_lab":case"requested_by":return{...l,popoverSize:"lg",isVisible:i[t]&&i[t].length>0||e.includes(t)||!1,options:d(o[t]||[]),withTooltip:!0};case"priority":return{...l,options:E(o[t]||[])};case"case_analysis":return{...l,options:d(o[t]||[]),popoverSize:"lg",withTooltip:!0};default:return l}}):[],[o,i,e,a,f]);return b.jsx(v,{filterSearch:{placeholder:f("case_exploration.filters_group.search_placeholder"),minSearchLength:1,api:t=>y.autocompleteCases(t,"10")},filterButtons:S,changedFilterButtons:e,setChangedFilterButtons:n,filters:i,setFilters:p,openFilters:a,setOpenFilters:c,loading:r,setSearchCriteria:s,criterias:_,defaultFilters:g})}B.__docgenInfo={description:"",methods:[],displayName:"FiltersGroupForm",props:{loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},setSearchCriteria:{required:!0,tsType:{name:"signature",type:"function",raw:"(searchCriteria: SearchCriterion[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"SearchCriterion"}],raw:"SearchCriterion[]"},name:"searchCriteria"}],return:{name:"void"}}},description:""}}};export{B as F};
