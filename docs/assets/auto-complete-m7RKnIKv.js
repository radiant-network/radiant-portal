import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{_ as q,C as L,a as R,b as C,c as K,d as F}from"./command-I9GT5RgW.js";import{r as l}from"./index-DQLiH3RP.js";import{S as G}from"./skeleton-Shk8p_SP.js";import{c as S}from"./utils-D-KgF5mV.js";import{u as M}from"./useDebounce-D_2R-BOd.js";import{X}from"./x-ClsbQ_rO.js";import{C as H}from"./check-DSCf8CVO.js";function V(r,p){return p.find(f=>r===f.value)}const J=({options:r=[],placeholder:p,emptyIndicator:f,value:i,onChange:t,disabled:N,debounceDelay:g=500,onSearch:d,optionFilterProp:x="label",optionLabelProp:v="label",className:k,loading:c,leftAddon:E})=>{const n=l.useRef(null),[b,y]=l.useState(!1),[u,m]=l.useState(V(i,r)),[A,o]=l.useState(""),[h,D]=l.useState(""),T=M(h,g),I=l.useCallback(e=>{const a=n.current;if(a){if(b||y(!0),e.key==="Enter"&&a.value!==""){const j=r.find(B=>B[x]===a.value);j&&(m(j),t==null||t(j.value))}e.key==="Escape"&&a.blur()}},[b,r,t]),_=l.useCallback(()=>{y(!1),o((u==null?void 0:u[v])||"")},[u]),z=l.useCallback(e=>{o(e[v]),m(e),t==null||t(e.value),setTimeout(()=>{var a;(a=n==null?void 0:n.current)==null||a.blur()},0)},[t]);l.useEffect(()=>{if(i&&r.length>0){const e=V(i,r);e&&(m(e),o(e[v]))}},[i,r]),l.useEffect(()=>{!d||!open||T&&(d==null||d(T))},[T,open]);const w=r.filter(e=>e[x].toLowerCase().trim().includes(h.toLowerCase().trim()));return s.jsxs(q,{onKeyDown:I,className:k,shouldFilter:!1,children:[s.jsx("div",{className:"w-full relative shadow-xs outline-none focus-within:ring-1 focus-within:ring-ring rounded-md",children:s.jsx(L,{ref:n,value:A,onValueChange:c?void 0:e=>{o(e),D(e)},onBlur:_,onFocus:()=>y(!0),placeholder:p,disabled:N,className:"text-sm",leftAddon:E,rightAddon:s.jsx("button",{type:"button",onClick:()=>{m(void 0),o(""),t==null||t("")},className:S("h-[26px] p-0",{hidden:!u||N}),children:s.jsx(X,{size:16,className:""})})})}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:S("animate-in fade-in-0 zoom-in-95 absolute top-0 z-10 w-full rounded-xl bg-popover outline-none shadow-md",b?"block mt-1":"hidden"),children:s.jsxs(R,{className:"rounded-lg border",children:[c?s.jsx(q.Loading,{children:s.jsx("div",{className:"p-1",children:s.jsx(G,{className:"h-8 w-full"})})}):null,w.length>0&&!c?s.jsx(C,{children:w.map(e=>s.jsxs(K,{value:e[x],onMouseDown:a=>{a.preventDefault(),a.stopPropagation()},onSelect:()=>z(e),className:"cursor-pointer",children:[s.jsx("span",{className:"flex-1",children:e.label}),e.value===i?s.jsx(H,{className:"w-4"}):null]},e.value))}):null,!c&&s.jsx(F,{children:f||s.jsx("div",{className:"text-center text-sm",children:"No data"})})]})})})]})};J.__docgenInfo={description:"",methods:[],displayName:"AutoComplete",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:"",defaultValue:{value:"[]",computed:!1}},emptyIndicator:{required:!1,tsType:{name:"ReactNode"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onSearch:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},debounceDelay:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}},optionLabelProp:{required:!1,tsType:{name:"T"},description:"",defaultValue:{value:"'label'",computed:!1}},optionFilterProp:{required:!1,tsType:{name:"T"},description:"",defaultValue:{value:"'label'",computed:!1}},loading:{required:!1,tsType:{name:"boolean"},description:""},leftAddon:{required:!1,tsType:{name:"ReactNode"},description:""}}};export{J as A};
