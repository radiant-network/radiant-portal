import{j as t}from"./jsx-runtime-Cf8x2fCZ.js";import{f as h}from"./index-BZkcKs8Z.js";import{a as Ne}from"./index-B-lxVbXh.js";import{g as yi,d as vi,Q as at,e as gi,q as L,f as st,h as xi,i as Ci,j as bi,k as Pi,l as ji,u as qi,S as le,m as lt,T as ct,B as O,n as Si,o as It,p as Qi,s as wi,t as ki,v as Ii,w as B}from"./query-builder-remote-BIxcuZcY.js";import{r as c,R as S,g as Fi}from"./index-tvICUrOf.js";import{u as Ee}from"./i18n-kaxe3DHJ.js";import{u as Be,c as Ft,P as ce,b as Re,a as V,f as Di}from"./index-Csi1vtvD.js";import{i as Ai,u as Ni,C as _i}from"./dropdown-menu-BtHca8-r.js";import{c as Dt,R as Ti,T as Oi,b as Ei}from"./index-Ct3W0jEN.js";import{u as At,P as Bi,h as Ri,R as Mi,a as Li,F as Vi,D as Ui}from"./Combination-CmKP2mMJ.js";import{c as q}from"./utils-CytzSlOG.js";import{C as zi}from"./chevron-down-D97Dr_NX.js";import{B as v}from"./button-UnRZVMn5.js";import{c as z}from"./createLucideIcon-DKFpjrVJ.js";import{c as Nt,R as Hi,A as _t,C as $i,a as Wi}from"./index-CueSDTQu.js";import{P as Tt}from"./index-pLOVI5Ig.js";import{T as Ot,C as Yi,S as Gi,a as Xi,L as Ji}from"./list-item-with-action-LlaTCV7Y.js";import{a as D,b as A,T as N}from"./tooltip-Dvtjdji1.js";import{D as de,a as ue,b as me,c as pe,d as he,e as fe}from"./dialog-CsMtKPah.js";import{t as R,n as Me,g as dt,a as Ki,e as Zi,m as ut,b as ee,u as Et,s as Bt,F as Rt,c as Mt,d as Lt,f as Vt,h as Ut,i as zt,z as oe,r as er,j as tr,k as _e,P as Ht,l as Y,o as G,p as nr,q as je}from"./en-US-BfxBxfab.js";import{I as Le}from"./input-BBA0CWHH.js";import{S as ir}from"./spinner-Bn71UZIB.js";import{n as rr}from"./number-format-BmdRvOec.js";import{C as or}from"./checkbox-DR5AvqL2.js";import{c as ar}from"./index-C66Dxnp2.js";import{E as sr,a as Ve,L as lr,b as cr,G as dr,c as ur}from"./less-than-or-equal-operator-icon-BeMEXZ7b.js";import{N as mr}from"./not-in-operator-icon-C8Fl8SMz.js";import{S as P}from"./api-CkzL9HmQ.js";import{C as pr}from"./chevron-left-DVgRToGC.js";import{X as hr}from"./x-DA4wTodG.js";import{S as fr}from"./separator-yfEj2UAP.js";import{a as H}from"./alert-dialog-store-CZoSfA8g.js";import{A as yr}from"./ActionButton-C_4cAaVG.js";import"./button.variants-B79LQKoe.js";import{S as vr}from"./switch-DOzXzNmJ.js";import{S as gr,a as xr,c as Cr,d as br,e as Pr}from"./select-BAz5cXZu.js";import{U as jr}from"./user-Id7UOoFp.js";import"./index-yBjzXJbu.js";import"./v4-CtRu48qb.js";import"./iframe-GQC8GNlz.js";import"./index-_r67kdfS.js";import"./index-fNjTmf9T.js";import"./check-CfPT3E_d.js";import"./index-DJkr1wGX.js";import"./pen-DKQSveoi.js";import"./index-Bwb5bU54.js";import"./index-BNc2EN3H.js";import"./label-BX6-Aqla.js";import"./info-CHGlDBvT.js";import"./index-C1xbsqtW.js";import"./ellipsis-NIzCCAdy.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$t=z("Copy",qr);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Qr=z("Folder",Sr);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]],Ue=z("PencilLine",wr);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ir=z("RotateCcw",kr);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Wt=z("Save",Fr);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ar=z("Star",Dr);function re(e,i){const n=+R(e)-+R(i);return n<0?-1:n>0?1:n}function Nr(e,i,n){const[r,o]=Me(n==null?void 0:n.in,e,i),a=r.getFullYear()-o.getFullYear(),l=r.getMonth()-o.getMonth();return a*12+l}function _r(e){return i=>{const r=(e?Math[e]:Math.trunc)(i);return r===0?0:r}}function Tr(e,i){return+R(e)-+R(i)}function Or(e,i){const n=R(e,i==null?void 0:i.in);return n.setHours(23,59,59,999),n}function Er(e,i){const n=R(e,i==null?void 0:i.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Br(e,i){const n=R(e,i==null?void 0:i.in);return+Or(n,i)==+Er(n,i)}function Rr(e,i,n){const[r,o,a]=Me(n==null?void 0:n.in,e,e,i),l=re(o,a),s=Math.abs(Nr(o,a));if(s<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-l*s);let u=re(o,a)===-l;Br(r)&&s===1&&re(r,a)===1&&(u=!1);const d=l*(s-+u);return d===0?0:d}function Mr(e,i,n){const r=Tr(e,i)/1e3;return _r(n==null?void 0:n.roundingMethod)(r)}function Lr(e,i,n){const r=Ki(),o=(n==null?void 0:n.locale)??r.locale??Zi,a=2520,l=re(e,i);if(isNaN(l))throw new RangeError("Invalid time value");const s=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l}),[u,d]=Me(n==null?void 0:n.in,...l>0?[i,e]:[e,i]),m=Mr(d,u),f=(dt(d)-dt(u))/1e3,p=Math.round((m-f)/60);let y;if(p<2)return n!=null&&n.includeSeconds?m<5?o.formatDistance("lessThanXSeconds",5,s):m<10?o.formatDistance("lessThanXSeconds",10,s):m<20?o.formatDistance("lessThanXSeconds",20,s):m<40?o.formatDistance("halfAMinute",0,s):m<60?o.formatDistance("lessThanXMinutes",1,s):o.formatDistance("xMinutes",1,s):p===0?o.formatDistance("lessThanXMinutes",1,s):o.formatDistance("xMinutes",p,s);if(p<45)return o.formatDistance("xMinutes",p,s);if(p<90)return o.formatDistance("aboutXHours",1,s);if(p<ut){const C=Math.round(p/60);return o.formatDistance("aboutXHours",C,s)}else{if(p<a)return o.formatDistance("xDays",1,s);if(p<ee){const C=Math.round(p/ut);return o.formatDistance("xDays",C,s)}else if(p<ee*2)return y=Math.round(p/ee),o.formatDistance("aboutXMonths",y,s)}if(y=Rr(d,u),y<12){const C=Math.round(p/ee);return o.formatDistance("xMonths",C,s)}else{const C=y%12,k=Math.trunc(y/12);return C<3?o.formatDistance("aboutXYears",k,s):C<9?o.formatDistance("overXYears",k,s):o.formatDistance("almostXYears",k+1,s)}}function Yt(e){const{t:i}=Ee("common"),n={state:{...yi(),savedFilters:[],selectedQueryIndexes:[]},onStateChange:()=>{},...e},[r]=c.useState(()=>({current:vi(n)})),[o,a]=c.useState(()=>n.initialState||n.state);c.useEffect(()=>{var s;o&&((s=e.onStateChange)==null||s.call(e,o))},[o]),c.useEffect(()=>{const s=u=>{var d,m,f,p;if(u.queryBuilderId===e.id){if(u.eventType===st.ADD_QUERY){const y=u.eventData;(d=e.onQueryCreate)==null||d.call(e,y),y.id===u.value.activeQueryId&&((m=e.onActiveQueryChange)==null||m.call(e,y))}else if(u.eventType===st.UPDATE_QUERY){const y=u.eventData;(f=e.onQueryUpdate)==null||f.call(e,y),y.id===u.value.activeQueryId&&((p=e.onActiveQueryChange)==null||p.call(e,y))}a(y=>({...y,...e.state,...u.value}))}};return window.addEventListener(at,s),()=>{window.removeEventListener(at,s)}},[e.state]),e.fieldsToIgnore;const l={...o,...e.state};return r.current.setCoreProps(s=>({savedFilterDefaultTitle:i("common.savedFilter.untitledFilter"),...s,...e,state:{...l,queries:e.fieldsToIgnore&&l.queries?gi(l.queries,e.fieldsToIgnore):l.queries},onStateChange:u=>{a(u),L.setLocalQueryBuilderState(e.id,{value:u,skipEvent:!0})}})),r.current}var F="Accordion",Vr=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ze,Ur,zr]=Ai(F),[ye,ls]=Ft(F,[zr,Dt]),He=Dt(),Gt=S.forwardRef((e,i)=>{const{type:n,...r}=e,o=r,a=r;return t.jsx(ze.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?t.jsx(Yr,{...a,ref:i}):t.jsx(Wr,{...o,ref:i})})});Gt.displayName=F;var[Xt,Hr]=ye(F),[Jt,$r]=ye(F,{collapsible:!1}),Wr=S.forwardRef((e,i)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:a=!1,...l}=e,[s,u]=Be({prop:n,defaultProp:r??"",onChange:o,caller:F});return t.jsx(Xt,{scope:e.__scopeAccordion,value:S.useMemo(()=>s?[s]:[],[s]),onItemOpen:u,onItemClose:S.useCallback(()=>a&&u(""),[a,u]),children:t.jsx(Jt,{scope:e.__scopeAccordion,collapsible:a,children:t.jsx(Kt,{...l,ref:i})})})}),Yr=S.forwardRef((e,i)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[l,s]=Be({prop:n,defaultProp:r??[],onChange:o,caller:F}),u=S.useCallback(m=>s((f=[])=>[...f,m]),[s]),d=S.useCallback(m=>s((f=[])=>f.filter(p=>p!==m)),[s]);return t.jsx(Xt,{scope:e.__scopeAccordion,value:l,onItemOpen:u,onItemClose:d,children:t.jsx(Jt,{scope:e.__scopeAccordion,collapsible:!0,children:t.jsx(Kt,{...a,ref:i})})})}),[Gr,ve]=ye(F),Kt=S.forwardRef((e,i)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:a="vertical",...l}=e,s=S.useRef(null),u=Re(s,i),d=Ur(n),f=Ni(o)==="ltr",p=V(e.onKeyDown,y=>{var rt;if(!Vr.includes(y.key))return;const C=y.target,k=d().filter(Pe=>{var ot;return!((ot=Pe.ref.current)!=null&&ot.disabled)}),_=k.findIndex(Pe=>Pe.ref.current===C),j=k.length;if(_===-1)return;y.preventDefault();let b=_;const T=0,I=j-1,W=()=>{b=_+1,b>I&&(b=T)},M=()=>{b=_-1,b<T&&(b=I)};switch(y.key){case"Home":b=T;break;case"End":b=I;break;case"ArrowRight":a==="horizontal"&&(f?W():M());break;case"ArrowDown":a==="vertical"&&W();break;case"ArrowLeft":a==="horizontal"&&(f?M():W());break;case"ArrowUp":a==="vertical"&&M();break}const fi=b%j;(rt=k[fi].ref.current)==null||rt.focus()});return t.jsx(Gr,{scope:n,disabled:r,direction:o,orientation:a,children:t.jsx(ze.Slot,{scope:n,children:t.jsx(ce.div,{...l,"data-orientation":a,ref:u,onKeyDown:r?void 0:p})})})}),ae="AccordionItem",[Xr,$e]=ye(ae),Zt=S.forwardRef((e,i)=>{const{__scopeAccordion:n,value:r,...o}=e,a=ve(ae,n),l=Hr(ae,n),s=He(n),u=At(),d=r&&l.value.includes(r)||!1,m=a.disabled||e.disabled;return t.jsx(Xr,{scope:n,open:d,disabled:m,triggerId:u,children:t.jsx(Ti,{"data-orientation":a.orientation,"data-state":an(d),...s,...o,ref:i,disabled:m,open:d,onOpenChange:f=>{f?l.onItemOpen(r):l.onItemClose(r)}})})});Zt.displayName=ae;var en="AccordionHeader",tn=S.forwardRef((e,i)=>{const{__scopeAccordion:n,...r}=e,o=ve(F,n),a=$e(en,n);return t.jsx(ce.h3,{"data-orientation":o.orientation,"data-state":an(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:i})});tn.displayName=en;var Te="AccordionTrigger",nn=S.forwardRef((e,i)=>{const{__scopeAccordion:n,...r}=e,o=ve(F,n),a=$e(Te,n),l=$r(Te,n),s=He(n);return t.jsx(ze.ItemSlot,{scope:n,children:t.jsx(Oi,{"aria-disabled":a.open&&!l.collapsible||void 0,"data-orientation":o.orientation,id:a.triggerId,...s,...r,ref:i})})});nn.displayName=Te;var rn="AccordionContent",on=S.forwardRef((e,i)=>{const{__scopeAccordion:n,...r}=e,o=ve(F,n),a=$e(rn,n),l=He(n);return t.jsx(Ei,{role:"region","aria-labelledby":a.triggerId,"data-orientation":o.orientation,...l,...r,ref:i,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});on.displayName=rn;function an(e){return e?"open":"closed"}var Jr=Gt,Kr=Zt,Zr=tn,sn=nn,ln=on;const eo=Jr,We=c.forwardRef(({className:e,...i},n)=>t.jsx(Kr,{ref:n,className:q("border-b",e),...i}));We.displayName="AccordionItem";const Ye=c.forwardRef(({className:e,children:i,...n},r)=>t.jsx(Zr,{className:"flex justify-between items-center",children:t.jsx(sn,{ref:r,className:q("py-2 transition-all group w-full",e),...n,children:t.jsxs("div",{className:"flex flex-1 items-center",children:[t.jsx("div",{children:t.jsx(zi,{className:"h-4 w-4 shrink-0 group-data-[state=open]:rotate-180 transition-transform duration-200 mr-2"})}),i]})})}));Ye.displayName=sn.displayName;const Ge=c.forwardRef(({className:e,children:i,...n},r)=>t.jsx(ln,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:t.jsx("div",{className:q("pb-2 pt-0",e),children:i})}));Ge.displayName=ln.displayName;We.__docgenInfo={description:"",methods:[],displayName:"AccordionItem"};Ye.__docgenInfo={description:"",methods:[]};Ge.__docgenInfo={description:"",methods:[]};const Xe=c.createContext(null);function x(){const e=c.useContext(Xe);if(!e)throw new Error("useQueryBuilderContext must be used within a QueryBuilderContextProvider");return e}const cn=c.createContext(null);function g(){const e=c.useContext(cn);if(!e)throw new Error("useQueryBuilderDictContext must be used within a QueryBuilderDictContextProvider");return e}const Je=c.createContext(null);function w(){const e=c.useContext(Je);if(!e)throw new Error("useQueryBarContext must be used within a QueryBarContextProvider");return e}function dn(){const{query:e}=w(),{getQueryReferenceColor:i}=x(),n=e.isReferencedInActiveQuery()?i(e.index()):null;return t.jsx("div",{className:"w-1 rounded-s-sm bg-muted-foreground group-data-[query-active=true]/query:bg-primary",style:n?{backgroundColor:n}:{}})}dn.__docgenInfo={description:"",methods:[],displayName:"QueryBarIdentifier"};function un(){const{query:e}=w();return t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",onClick:()=>e.duplicate(),children:t.jsx($t,{})})}un.__docgenInfo={description:"",methods:[],displayName:"QueryBarDuplicateAction"};var ge="Popover",[mn,cs]=Ft(ge,[Nt]),J=Nt(),[to,E]=mn(ge),pn=e=>{const{__scopePopover:i,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:l=!1}=e,s=J(i),u=c.useRef(null),[d,m]=c.useState(!1),[f,p]=Be({prop:r,defaultProp:o??!1,onChange:a,caller:ge});return t.jsx(Hi,{...s,children:t.jsx(to,{scope:i,contentId:At(),triggerRef:u,open:f,onOpenChange:p,onOpenToggle:c.useCallback(()=>p(y=>!y),[p]),hasCustomAnchor:d,onCustomAnchorAdd:c.useCallback(()=>m(!0),[]),onCustomAnchorRemove:c.useCallback(()=>m(!1),[]),modal:l,children:n})})};pn.displayName=ge;var hn="PopoverAnchor",no=c.forwardRef((e,i)=>{const{__scopePopover:n,...r}=e,o=E(hn,n),a=J(n),{onCustomAnchorAdd:l,onCustomAnchorRemove:s}=o;return c.useEffect(()=>(l(),()=>s()),[l,s]),t.jsx(_t,{...a,...r,ref:i})});no.displayName=hn;var fn="PopoverTrigger",yn=c.forwardRef((e,i)=>{const{__scopePopover:n,...r}=e,o=E(fn,n),a=J(n),l=Re(i,o.triggerRef),s=t.jsx(ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":bn(o.open),...r,ref:l,onClick:V(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?s:t.jsx(_t,{asChild:!0,...a,children:s})});yn.displayName=fn;var Ke="PopoverPortal",[io,ro]=mn(Ke,{forceMount:void 0}),vn=e=>{const{__scopePopover:i,forceMount:n,children:r,container:o}=e,a=E(Ke,i);return t.jsx(io,{scope:i,forceMount:n,children:t.jsx(Tt,{present:n||a.open,children:t.jsx(Bi,{asChild:!0,container:o,children:r})})})};vn.displayName=Ke;var U="PopoverContent",gn=c.forwardRef((e,i)=>{const n=ro(U,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,a=E(U,e.__scopePopover);return t.jsx(Tt,{present:r||a.open,children:a.modal?t.jsx(ao,{...o,ref:i}):t.jsx(so,{...o,ref:i})})});gn.displayName=U;var oo=Di("PopoverContent.RemoveScroll"),ao=c.forwardRef((e,i)=>{const n=E(U,e.__scopePopover),r=c.useRef(null),o=Re(i,r),a=c.useRef(!1);return c.useEffect(()=>{const l=r.current;if(l)return Ri(l)},[]),t.jsx(Mi,{as:oo,allowPinchZoom:!0,children:t.jsx(xn,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:V(e.onCloseAutoFocus,l=>{var s;l.preventDefault(),a.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:V(e.onPointerDownOutside,l=>{const s=l.detail.originalEvent,u=s.button===0&&s.ctrlKey===!0,d=s.button===2||u;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:V(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),so=c.forwardRef((e,i)=>{const n=E(U,e.__scopePopover),r=c.useRef(!1),o=c.useRef(!1);return t.jsx(xn,{...e,ref:i,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l,s;(l=e.onCloseAutoFocus)==null||l.call(e,a),a.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var u,d;(u=e.onInteractOutside)==null||u.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const l=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),xn=c.forwardRef((e,i)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:m,...f}=e,p=E(U,n),y=J(n);return Li(),t.jsx(Vi,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:t.jsx(Ui,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:m,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:t.jsx($i,{"data-state":bn(p.open),role:"dialog",id:p.contentId,...y,...f,ref:i,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Cn="PopoverClose",Oe=c.forwardRef((e,i)=>{const{__scopePopover:n,...r}=e,o=E(Cn,n);return t.jsx(ce.button,{type:"button",...r,ref:i,onClick:V(e.onClick,()=>o.onOpenChange(!1))})});Oe.displayName=Cn;var lo="PopoverArrow",co=c.forwardRef((e,i)=>{const{__scopePopover:n,...r}=e,o=J(n);return t.jsx(Wi,{...o,...r,ref:i})});co.displayName=lo;function bn(e){return e?"open":"closed"}var uo=pn,mo=yn,po=vn,Pn=gn;const jn=uo,qn=mo,xe=c.forwardRef(({className:e,align:i="center",sideOffset:n=4,...r},o)=>t.jsx(po,{children:t.jsx(Pn,{ref:o,align:i,sideOffset:n,className:q("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));xe.displayName=Pn.displayName;xe.__docgenInfo={description:"",methods:[],props:{align:{defaultValue:{value:'"center"',computed:!1},required:!1},sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}};function Sn(){const{query:e}=w(),i=g();return t.jsxs(jn,{children:[t.jsx(qn,{asChild:!0,children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",children:t.jsx(Ot,{})})}),t.jsxs(xe,{side:"left",className:"w-[200px] space-y-3",children:[t.jsx("span",{className:"text-sm",children:i.queryBar.deletePopover.title}),t.jsxs("div",{className:"flex gap-1 justify-end",children:[t.jsx(Oe,{asChild:!0,children:t.jsx(v,{size:"xs",variant:"outline",children:i.queryBar.deletePopover.cancel})}),t.jsx(Oe,{asChild:!0,children:t.jsx(v,{size:"xs",variant:"destructive",onClick:()=>e.delete(),children:i.queryBar.deletePopover.ok})})]})]})]})}Sn.__docgenInfo={description:"",methods:[],displayName:"QueryBarDeleteAction"};const ho=oe.object({title:oe.string()});function Qn({open:e,onOpenChange:i,query:n}){const[r,o]=c.useState(!1),a=g(),l=Et({resolver:Bt(ho),values:{title:""}}),s=async u=>(o(!0),Promise.resolve(n.saveAsCustomPill(u.title)).then(()=>i(!1)).finally(()=>o(!1)));return t.jsx(de,{open:e,onOpenChange:i,children:t.jsxs(ue,{children:[t.jsx(me,{children:t.jsx(pe,{children:a.queryBar.saveDialog.title})}),t.jsx(Rt,{...l,children:t.jsxs("form",{onSubmit:l.handleSubmit(s),className:"space-y-6",children:[t.jsx(Mt,{control:l.control,name:"title",render:({field:u})=>t.jsxs(Lt,{children:[t.jsx(Vt,{children:a.queryBar.saveDialog.fields.title.label}),t.jsx(Ut,{children:t.jsx(Le,{placeholder:a.queryBar.saveDialog.fields.title.placeholder,...u})}),t.jsx(zt,{})]})}),t.jsx("div",{className:"text-sm",children:a.queryBar.saveDialog.notice}),t.jsxs(he,{children:[t.jsx(fe,{asChild:!0,children:t.jsx(v,{variant:"outline",children:a.queryBar.saveDialog.cancel})}),t.jsx(v,{type:"submit",color:"primary",loading:r,children:a.queryBar.saveDialog.ok})]})]})})]})})}Qn.__docgenInfo={description:"",methods:[],displayName:"QueryBarSaveDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},query:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  /**
   * ID of the Query
   */
  id: string;

  /**
   * SyntheticSqon representing the query
   */
  raw(): ISyntheticSqon;

  /**
   * Call this function to know if the Query is empty
   */
  isEmpty(): boolean;

  /**
   * Call this function to know if the Query is empty
   */
  isNotEmpty(): boolean;

  /**
   * Call this function to delete the Query
   */
  delete(): void;

  /**
   * Call this function to update the Query
   */
  update(data: Omit<ISyntheticSqon, 'id'>): void;

  /**
   * Call this function to save the Query as a custom pill
   */
  saveAsCustomPill(title: string): void | Promise<void>;

  /**
   * Call this function to duplicate the Query
   */
  duplicate(): void;

  /**
   * Call this function to get the index of the Query
   */
  index(): number;

  /**
   * Call this function to select or unselect the Query
   */
  toggleSelect(selected: boolean): void;

  /**
   * Call this function to know if the Query is selected
   */
  isSelected(): boolean;

  /**
   * Call this function to know if the Query is selectable,
   * meaning the query can be selected for a combine operation
   */
  isSelectable(): boolean;

  /**
   * Call this function to know if the Query is active
   */
  isActive(): boolean;

  /**
   * Call this function to set the Query as active
   */
  setAsActive(): void;

  /**
   * Call this function to add pill to the Query
   */
  addPill: (pill: IValueQuery) => void;

  /**
   * Call this function to remove pill from the Query by ID
   */
  removePillById: (pillId: string) => void;

  /**
   * Call this function to remove pill from the Query by field name
   */
  removePillByFieldOrIndex: (indexOfField: string | number) => void;

  /**
   * Call this function to set the Query as active
   */
  changeCombineOperator(operator: BooleanOperators): void;

  /**
   * Call this function to know if the Query is referenced in the active query
   */
  isReferencedInActiveQuery(): boolean;

  /**
   * Call this function to know if the Query has a custom pill
   */
  hasCustomPill(): boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0},description:"ID of the Query"},{key:"raw",value:{name:"ISyntheticSqon",required:!0},description:"SyntheticSqon representing the query"},{key:"isEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"isNotEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"delete",value:{name:"void",required:!0},description:"Call this function to delete the Query"},{key:"update",value:{name:"void",required:!0},description:"Call this function to update the Query"},{key:"saveAsCustomPill",value:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}],required:!0},description:"Call this function to save the Query as a custom pill"},{key:"duplicate",value:{name:"void",required:!0},description:"Call this function to duplicate the Query"},{key:"index",value:{name:"number",required:!0},description:"Call this function to get the index of the Query"},{key:"toggleSelect",value:{name:"void",required:!0},description:"Call this function to select or unselect the Query"},{key:"isSelected",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is selected"},{key:"isSelectable",value:{name:"boolean",required:!0},description:`Call this function to know if the Query is selectable,
meaning the query can be selected for a combine operation`},{key:"isActive",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is active"},{key:"setAsActive",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"addPill",value:{name:"signature",type:"function",raw:"(pill: IValueQuery) => void",signature:{arguments:[{type:{name:"IValueQuery"},name:"pill"}],return:{name:"void"}},required:!0},description:"Call this function to add pill to the Query"},{key:"removePillById",value:{name:"signature",type:"function",raw:"(pillId: string) => void",signature:{arguments:[{type:{name:"string"},name:"pillId"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by ID"},{key:"removePillByFieldOrIndex",value:{name:"signature",type:"function",raw:"(indexOfField: string | number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"indexOfField"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by field name"},{key:"changeCombineOperator",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"isReferencedInActiveQuery",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is referenced in the active query"},{key:"hasCustomPill",value:{name:"boolean",required:!0},description:"Call this function to know if the Query has a custom pill"}]}},description:""}}};function wn(){const{query:e}=w(),i=g(),[n,r]=c.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",onClick:()=>r(!0),disabled:e.hasCustomPill(),children:t.jsx(Wt,{})})}),t.jsx(N,{className:"max-w-[200px]",children:e.hasCustomPill()?i.queryBar.customPill.cannotSaveAsCustomPill:i.queryBar.customPill.createTooltip})]}),t.jsx(Qn,{open:n,onOpenChange:r,query:e})]})}wn.__docgenInfo={description:"",methods:[],displayName:"QueryBarSaveAction"};function kn(){const{customPillConfig:e}=x();return t.jsxs("div",{className:`
      flex items-center p-2 border-r border-t border-b 
      border-muted-foreground/20 bg-muted/35 text-muted-foreground
      group-data-[query-active=true]/query:border-primary/75
      group-data-[query-active=true]/query:bg-primary/10
      group-data-[query-active=true]/query:text-foreground`,onClick:i=>i.stopPropagation(),children:[(e==null?void 0:e.enable)&&t.jsx(wn,{}),t.jsx(un,{}),t.jsx(Sn,{})]})}kn.__docgenInfo={description:"",methods:[],displayName:"QueryBarActions"};function In(){const{queryBuilder:e,queryCountIcon:i,fetchQueryCount:n}=x(),{query:r}=w(),o=c.useRef(null),[a,l]=c.useState(0),[s,u]=c.useState(!0);return c.useEffect(()=>{if(e.getRawQueries().find(d=>d.id===r.id)){const d=o.current,m=xi(r.raw(),e.getRawQueries());(!o.current||!Ci(d,m))&&(o.current=m,u(!0),n(m).then(l).finally(()=>{u(!1)}))}},[n,r.raw(),e.getRawQueries()]),t.jsx("div",{className:"flex items-center gap-1",children:s?t.jsx(ir,{}):t.jsxs(t.Fragment,{children:[i,t.jsx("span",{className:"font-medium",children:rr(a)})]})})}In.__docgenInfo={description:"",methods:[],displayName:"QueryBarCount"};function Fn(){const{query:e}=w();return e.isSelectable()?t.jsxs("div",{className:`
      flex gap-2 items-center py-2 px-4 border-l border-t border-b 
      border-muted-foreground/20 bg-muted/35 text-muted-foreground
      group-data-[query-active=true]/query:border-primary/75
      group-data-[query-active=true]/query:bg-primary/10
      group-data-[query-active=true]/query:text-foreground
      `,children:[t.jsx(or,{size:"sm",checked:e.isSelected(),onClick:i=>{i.stopPropagation(),e.toggleSelect(!e.isSelected())}}),t.jsxs("span",{className:"text-xs font-medium",children:["Q",e.index()+1]})]}):null}Fn.__docgenInfo={description:"",methods:[],displayName:"QueryBarSelector"};function Dn({type:e,size:i,className:n}){switch(e){case P.GreaterThan:return t.jsx(ur,{size:i,className:n});case P.GreaterThanOrEqualTo:return t.jsx(dr,{size:i,className:n});case P.LessThan:return t.jsx(cr,{size:i,className:n});case P.LessThanOrEqualTo:return t.jsx(lr,{size:i,className:n});case P.Between:return t.jsx(Ve,{size:i,className:n});case P.NotIn:return t.jsx(mr,{size:i,className:n});default:return t.jsx(sr,{size:i,className:n})}}Dn.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperator",props:{size:{required:!1,tsType:{name:"number"},description:""},type:{required:!0,tsType:{name:"union",raw:"SqonOpEnum | (string & {})",elements:[{name:"SqonOpEnum"},{name:"unknown"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};var qe,mt;function fo(){if(mt)return qe;mt=1;var e=/\s/;function i(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return qe=i,qe}var Se,pt;function yo(){if(pt)return Se;pt=1;var e=fo(),i=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(i,"")}return Se=n,Se}var Qe,ht;function vo(){if(ht)return Qe;ht=1;var e=yo(),i=bi(),n=er(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt;function u(d){if(typeof d=="number")return d;if(n(d))return r;if(i(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=i(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=e(d);var f=a.test(d);return f||l.test(d)?s(d.slice(2),f?2:8):o.test(d)?r:+d}return Qe=u,Qe}var we,ft;function go(){if(ft)return we;ft=1;var e=vo(),i=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===i||o===-1/0){var a=o<0?-1:1;return a*n}return o===o?o:0}return we=r,we}var ke,yt;function xo(){if(yt)return ke;yt=1;var e=go();function i(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return ke=i,ke}var Ie,vt;function Co(){if(vt)return Ie;vt=1;var e=tr(),i=xo();function n(r,o,a){return r&&r.length?(o=a||o===void 0?1:i(o),e(r,0,o<0?0:o)):[]}return Ie=n,Ie}var bo=Co();const Po=Fi(bo);function An({className:e,...i}){return t.jsx("span",{className:e,...i,children:"&"})}An.__docgenInfo={description:"",methods:[],displayName:"IntersectionOperator"};function Nn({className:e,...i}){return t.jsx("span",{className:e,...i,children:","})}Nn.__docgenInfo={description:"",methods:[],displayName:"UnionOperator"};function K({canExpand:e,className:i,classNameContent:n,children:r,clickable:o,...a}){return t.jsx("div",{className:q("bg-background rounded-sm pl-2 text-xs font-medium leading-5 relative",e?"pr-[22px]":"pr-2",i),...a,children:t.jsx("div",{className:q("flex flex-wrap items-center",o?"hover:shadow-[inset_0_-4px_0_-2.5px_black] hover:cursor-pointer":"",n),children:r})})}K.__docgenInfo={description:"",methods:[],displayName:"QueryPillValuesContainer",props:{canExpand:{required:!1,tsType:{name:"boolean"},description:""},clickable:{required:!1,tsType:{name:"boolean"},description:""},classNameContent:{required:!1,tsType:{name:"string"},description:""}}};function Ce({valueFilter:e,...i}){const[n,r]=c.useState(!1),o=e.content.value.length>3,a=n?e.content.value:Po(e.content.value,3);return t.jsxs(K,{canExpand:o,...i,children:[e.content.overrideValuesName?t.jsx("div",{children:t.jsx("span",{children:e.content.overrideValuesName})}):a.map((l,s)=>t.jsxs("div",{children:[t.jsx("span",{children:l}),a.length-1>s&&(e.op===P.All?t.jsx(An,{className:"px-1"}):t.jsx(Nn,{className:"px-1"}))]},`${l}-${s}`)),o&&t.jsx("div",{className:"absolute right-1 hover:cursor-pointer",children:n?t.jsx(pr,{size:16,onClick:l=>{l.preventDefault(),r(!1)}}):t.jsx(_i,{size:16,onClick:l=>{l.preventDefault(),r(!0)}})})]})}Ce.__docgenInfo={description:"",methods:[],displayName:"QueryPillValues",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function $({children:e,className:i,onRemovePill:n,...r}){return t.jsxs("div",{className:q("flex items-center rounded-sm p-[2px] bg-muted group-data-[query-active=true]/query:bg-primary/25",i),...r,children:[e,t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",className:"mr-[2px] ml-[4px] py-[2px] enabled:hover:bg-transparent size-4",onClick:o=>{o.stopPropagation(),n()},children:t.jsx(hr,{})})]})}$.__docgenInfo={description:"",methods:[],displayName:"QueryPillContainer",props:{onRemovePill:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function Ze({valueFilter:e,operator:i,className:n,...r}){const o=g(),{showLabels:a}=x();return t.jsx("div",{className:q("flex items-center",n),...r,children:(a||Pi(e)||ji(e))&&t.jsxs(t.Fragment,{children:[t.jsx(tt,{children:o.queryPill.facet(e.content.field)}),t.jsx(et,{children:i})]})})}const et=({className:e,children:i,...n})=>t.jsx("span",{className:q("ml-[2px] mr-[4px]",e),...n,children:i});function tt({className:e,children:i,...n}){return t.jsx("span",{className:q("ml-[4px] mr-[2px] text-xs font-medium",e),...n,children:i})}et.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperatorContainer"};tt.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelContainer"};Ze.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelOperator",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},operator:{required:!0,tsType:{name:"ReactNode"},description:""}}};function nt({valueFilter:e,customPillEditEnabled:i}){var u;const{query:n}=w(),{queryPillFacetFilterConfig:r}=x(),[o,a]=c.useState(),l=!!(!i&&(r!=null&&r.enable)&&!((u=r==null?void 0:r.blacklistedFacets)!=null&&u.includes(e.content.field))),s=c.useCallback(()=>{r!=null&&r.onFacetClick&&!o&&a(r.onFacetClick(e))},[o,r==null?void 0:r.onFacetClick]);return t.jsxs($,{onRemovePill:()=>n.removePillByFieldOrIndex(e.content.field),children:[t.jsx(Ze,{valueFilter:e,operator:t.jsx(Dn,{size:14,type:e.op})}),t.jsx(Yi,{condition:l,wrapper:d=>t.jsxs(jn,{children:[t.jsx(qn,{onClick:s,children:d}),t.jsx(xe,{align:"start",className:"p-2.5",children:o})]}),children:t.jsx(Ce,{valueFilter:e,clickable:l})})]})}nt.__docgenInfo={description:"",methods:[],displayName:"QueryPillField",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};function _n(){const{t:e}=Ee();return t.jsx("div",{children:e("common.components.queryPillRemote")})}_n.__docgenInfo={description:"",methods:[],displayName:"QueryPillRemoteComponent"};function Tn({valueFilter:e}){const{query:i}=w();return t.jsxs($,{onRemovePill:()=>i.removePillByFieldOrIndex(e.content.field),children:[t.jsx(Ze,{valueFilter:e,operator:t.jsx(Ve,{size:14,type:e.op})}),t.jsx(Ce,{valueFilter:e})]})}Tn.__docgenInfo={description:"",methods:[],displayName:"QueryPillUploadList",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function On({valueFilter:e}){const{query:i}=w(),n=g();return t.jsxs($,{onRemovePill:()=>i.removePillByFieldOrIndex(e.content.field),children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(tt,{children:e.content.index?_e(e.content.index):n.queryPill.facet(e.content.field)}),t.jsx(et,{children:t.jsx(Ve,{size:14})})]}),t.jsx(K,{children:t.jsx(Ce,{valueFilter:e})})]})}On.__docgenInfo={description:"",methods:[],displayName:"QueryPillSet",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function En({refIndex:e}){const{query:i}=w(),{getQueryReferenceColor:n}=x(),r=n(e);return t.jsx($,{onRemovePill:()=>i.removePillByFieldOrIndex(e),children:t.jsx(K,{children:t.jsx("span",{style:{color:r},children:`Q${e+1}`})})})}En.__docgenInfo={description:"",methods:[],displayName:"QueryPillReference",props:{refIndex:{required:!0,tsType:{name:"number"},description:""}}};const Bn=({children:e,icon:i=Ue,onChangeText:n,...r})=>{const[o,a]=c.useState(!1),l=i;return t.jsx("div",{...r,children:o?t.jsx(Le,{defaultValue:e,autoFocus:!0,onBlur:s=>{a(!1),n==null||n(s.currentTarget.value)},className:"max-w-96 w-full",onKeyUp:s=>{s.key==="Enter"&&(a(!1),n==null||n(s.currentTarget.value))}}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:e}),t.jsx(v,{iconOnly:!0,onClick:()=>a(!0),children:t.jsx(l,{})})]})})};Bn.__docgenInfo={description:"",methods:[],displayName:"EditableText",props:{icon:{required:!1,tsType:{name:"ReactForwardRefExoticComponent",raw:"React.ForwardRefExoticComponent<Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>>",elements:[{name:"intersection",raw:"Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>",elements:[{name:"Omit",elements:[{name:"LucideProps"},{name:"literal",value:"'ref'"}],raw:"Omit<LucideProps, 'ref'>"},{name:"ReactRefAttributes",raw:"React.RefAttributes<SVGSVGElement>",elements:[{name:"SVGSVGElement"}]}]}]},description:"",defaultValue:{value:"PencilLineIcon",computed:!0}},children:{required:!0,tsType:{name:"string"},description:""},onChangeText:{required:!1,tsType:{name:"signature",type:"function",raw:"(text: string) => void",signature:{arguments:[{type:{name:"string"},name:"text"}],return:{name:"void"}}},description:""}}};function Rn(e,i){H.open({type:"warning",title:i.savedFilter.deleteDialog.title,description:i.savedFilter.deleteDialog.description,cancelProps:{children:i.savedFilter.deleteDialog.cancel},actionProps:{color:"destructive",onClick:()=>e.delete(),children:i.savedFilter.deleteDialog.ok}})}function Mn(e,i){H.open({type:"warning",title:i.savedFilter.overwriteDialog.title,description:i.savedFilter.overwriteDialog.description,cancelProps:{children:i.savedFilter.overwriteDialog.cancel},actionProps:{onClick:()=>e.createSavedFilter(),children:i.savedFilter.overwriteDialog.ok}})}function jo(e){H.open({type:"error",title:e.queryPill.customPill.cantBeEmptyDialog.title,description:e.queryPill.customPill.cantBeEmptyDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.cantBeEmptyDialog.ok}})}function qo(e){H.open({type:"error",title:e.queryPill.customPill.titleExistsDialog.title,description:e.queryPill.customPill.titleExistsDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.titleExistsDialog.ok}})}function So(e,i,n,r){H.open({type:"warning",title:e.queryPill.customPill.saveDialog.title,description:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:e.queryPill.customPill.saveDialog.confirmationMessage.replace("{title}",i)}),(n==null?void 0:n.length)&&t.jsxs("div",{className:"border rounded p-4 space-y-2",children:[t.jsx("div",{className:"font-medium text-foreground",children:e.queryPill.customPill.saveDialog.affectedFilters}),t.jsx("ul",{className:"list-disc list-inside",children:n.map(o=>t.jsx("li",{className:"list-item",children:o.title}))})]})]}),cancelProps:{children:e.queryPill.customPill.saveDialog.cancel},actionProps:{children:e.queryPill.customPill.saveDialog.ok,onClick:async o=>(o.preventDefault(),r())}})}function Ln({open:e,onOpenChange:i,queryPill:n}){const r=g(),{queryBuilder:o,customPillConfig:a}=x(),l=Yt({id:a==null?void 0:a.queryBuilderEditId,initialState:{activeQueryId:n.queries[0].id,queries:n.queries,savedFilters:[n],selectedQueryIndexes:[]},onCustomPillUpdate:async j=>{var T,I;return await Promise.resolve((I=(T=o.coreProps).onCustomPillUpdate)==null?void 0:I.call(T,j)).then(W=>(o.setState(M=>({...M,queries:qi(M.queries,j)})),i(!1),W))}}),[s,u]=c.useState(n.title),[d,m]=c.useState(!1),f=l.getQueries()[0],p=l.getSelectedSavedFilter(),y=s!==n.title,C=y||(p==null?void 0:p.isDirty()),k=c.useCallback(j=>{j?i(!0):(l.reset(),i(!1))},[i,l]),_=c.useCallback(async()=>{if(f.isEmpty()){jo(r);return}if(m(!0),y){const b=await(a==null?void 0:a.validateCustomPillTitle(s));if(b!==void 0&&b===!1){m(!1),qo(r);return}}const j=await(a==null?void 0:a.fetchSavedFiltersByCustomPillId(n.id).finally(()=>m(!1)));So(r,s,j,async()=>p==null?void 0:p.save(le.Query,{title:s}))},[f,p,r,s,n.id,a]);return t.jsx(de,{open:e,onOpenChange:k,children:t.jsx(Xe.Provider,{value:{queryBuilder:l,fetchQueryCount:async()=>0,getQueryReferenceColor:()=>"",showLabels:!0,resolveSyntheticSqon:j=>j},children:t.jsxs(ue,{className:"flex flex-row gap-0 h-screen w-screen max-w-screen rounded-none border-none sm:rounded-none p-0",children:[t.jsx("aside",{className:"flex flex-col min-w-48 bg-primary",children:t.jsx("span",{className:"italic",children:"TODO Insert filters"})}),t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[t.jsx(me,{children:t.jsx(pe,{children:r.queryPill.customPill.editDialog.title})}),t.jsx(fr,{}),t.jsx("div",{children:t.jsx(Bn,{onChangeText:u,children:s})}),t.jsx("div",{"data-query-active":!0,className:"flex flex-wrap group/query",children:t.jsx(Je.Provider,{value:{query:f},children:t.jsx(be,{sqon:f.raw(),customPillEditEnabled:!0})})}),t.jsxs(he,{className:"mt-5",children:[t.jsx(fe,{asChild:!0,children:t.jsx(v,{variant:"outline",children:r.queryPill.customPill.editDialog.cancel})}),t.jsx(v,{type:"submit",color:"primary",loading:d,disabled:!C,onClick:_,children:r.queryPill.customPill.editDialog.ok})]})]})})]})})})}Ln.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustomEditDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},queryPill:{required:!0,tsType:{name:"ISavedFilter"},description:""}}};function Vn({valueQuery:e}){const{query:i}=w(),[n,r]=c.useState(!1),{title:o,...a}=e,l={id:e.id,title:e.title,queries:[a],favorite:!1};return t.jsxs(t.Fragment,{children:[t.jsx($,{onRemovePill:()=>i.removePillById(e.id),children:t.jsxs(K,{className:"pr-1",classNameContent:"space-x-1",children:[t.jsx("span",{children:e.title}),t.jsx(v,{iconOnly:!0,size:"xs",className:"size-auto p-[2px]",onClick:()=>r(!0),children:t.jsx(Ue,{})})]})}),n&&t.jsx(Ln,{open:n,onOpenChange:r,queryPill:l})]})}Vn.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustom",props:{valueQuery:{required:!0,tsType:{name:"IValueQuery"},description:""}}};function Un({groupFilter:e}){const i={},n=c.useMemo(()=>(e.content.forEach(r=>{i.hasOwnProperty(r.content.field)?(i[r.content.field]=lt(i[r.content.field]),i[r.content.field].content.value=i[r.content.field].content.value.concat(r.content.value),r.op===ct.In&&e.op===O.And&&e.skipBooleanOperatorCheck&&(i[r.content.field].op=ct.All)):i[r.content.field]=lt(r)}),{...e,content:Object.entries(i).map(r=>r[1])}),[e]);return t.jsx(nt,{valueFilter:n.content[0]})}Un.__docgenInfo={description:"",methods:[],displayName:"QueryPillIsolatedBoolean",props:{groupFilter:{required:!0,tsType:{name:"ISqonGroupFilter"},description:""}}};function zn({className:e,...i}){const n=g();return t.jsx("span",{className:q("",e),...i,children:n.queryPill.operator.and})}zn.__docgenInfo={description:"",methods:[],displayName:"AndOperator"};function Hn({className:e,...i}){const n=g();return t.jsx("span",{className:q("",e),...i,children:n.queryPill.operator.or})}Hn.__docgenInfo={description:"",methods:[],displayName:"OrOperator"};function $n(){const{query:e}=w(),i=g(),n=e.raw().op===O.And;return t.jsx("div",{className:"px-2",onClick:r=>r.stopPropagation(),children:t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx(v,{variant:"link",className:"text-sm p-0 h-auto font-normal",onClick:()=>e.changeCombineOperator(n?O.Or:O.And),children:n?t.jsx(zn,{}):t.jsx(Hn,{})})}),t.jsxs(N,{children:[i.queryPill.operator.changeOperatorTo,' "',n?i.queryPill.operator.or:i.queryPill.operator.and,'"']})]})})}$n.__docgenInfo={description:"",methods:[],displayName:"QueryCombiner"};function be({sqon:e,customPillEditEnabled:i}){return t.jsx(t.Fragment,{children:e.content.map((n,r)=>t.jsxs("div",{className:"flex items-center py-[2px]",children:[n.skipBooleanOperatorCheck?t.jsx(Un,{groupFilter:n}):Si(n)?t.jsx(Vn,{valueQuery:n}):It(n)?t.jsx(be,{sqon:n}):Qi(n)?t.jsx(En,{refIndex:n}):wi(n)?t.jsx(On,{valueFilter:n}):ki(n)?t.jsx(Tn,{valueFilter:n}):Ii(n)?t.jsx(_n,{}):t.jsx(nt,{valueFilter:n,customPillEditEnabled:i}),Qo(e.content,r)&&t.jsx($n,{})]},r))})}const Qo=(e,i)=>e.length-1>i;be.__docgenInfo={description:"",methods:[],displayName:"QueryPillBoolean",props:{sqon:{required:!0,tsType:{name:"ISyntheticSqon"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};const wo=ar({base:"flex flex-1 py-2 px-3 border ",variants:{active:{true:["border-primary/75 bg-primary/10"],false:["border-muted-foreground/20 bg-muted/35 text-muted-foreground"]}},defaultVariants:{active:!1}});function Wn({query:e}){const i=e.isActive(),n=g(),{enableCombine:r}=x(),o=()=>{i||e.setAsActive()};return t.jsx(Je.Provider,{value:{query:e},children:t.jsxs("div",{"data-query-active":i,className:"flex group/query",onClick:o,children:[t.jsx(dn,{}),r&&t.jsx(Fn,{}),t.jsx("div",{className:wo({active:i}),children:t.jsx("div",{className:"flex flex-1 items-center justify-between",children:e.isEmpty()?t.jsx(t.Fragment,{children:n.queryBar.empty}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex-1",children:It(e.raw())&&t.jsx("div",{className:"flex items-center flex-wrap pr-2",children:t.jsx(be,{sqon:e.raw()})})}),t.jsx(In,{})]})})}),e.isNotEmpty()&&t.jsx(kn,{})]})})}Wn.__docgenInfo={description:"",methods:[],displayName:"QueryBar",props:{query:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  /**
   * ID of the Query
   */
  id: string;

  /**
   * SyntheticSqon representing the query
   */
  raw(): ISyntheticSqon;

  /**
   * Call this function to know if the Query is empty
   */
  isEmpty(): boolean;

  /**
   * Call this function to know if the Query is empty
   */
  isNotEmpty(): boolean;

  /**
   * Call this function to delete the Query
   */
  delete(): void;

  /**
   * Call this function to update the Query
   */
  update(data: Omit<ISyntheticSqon, 'id'>): void;

  /**
   * Call this function to save the Query as a custom pill
   */
  saveAsCustomPill(title: string): void | Promise<void>;

  /**
   * Call this function to duplicate the Query
   */
  duplicate(): void;

  /**
   * Call this function to get the index of the Query
   */
  index(): number;

  /**
   * Call this function to select or unselect the Query
   */
  toggleSelect(selected: boolean): void;

  /**
   * Call this function to know if the Query is selected
   */
  isSelected(): boolean;

  /**
   * Call this function to know if the Query is selectable,
   * meaning the query can be selected for a combine operation
   */
  isSelectable(): boolean;

  /**
   * Call this function to know if the Query is active
   */
  isActive(): boolean;

  /**
   * Call this function to set the Query as active
   */
  setAsActive(): void;

  /**
   * Call this function to add pill to the Query
   */
  addPill: (pill: IValueQuery) => void;

  /**
   * Call this function to remove pill from the Query by ID
   */
  removePillById: (pillId: string) => void;

  /**
   * Call this function to remove pill from the Query by field name
   */
  removePillByFieldOrIndex: (indexOfField: string | number) => void;

  /**
   * Call this function to set the Query as active
   */
  changeCombineOperator(operator: BooleanOperators): void;

  /**
   * Call this function to know if the Query is referenced in the active query
   */
  isReferencedInActiveQuery(): boolean;

  /**
   * Call this function to know if the Query has a custom pill
   */
  hasCustomPill(): boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0},description:"ID of the Query"},{key:"raw",value:{name:"ISyntheticSqon",required:!0},description:"SyntheticSqon representing the query"},{key:"isEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"isNotEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"delete",value:{name:"void",required:!0},description:"Call this function to delete the Query"},{key:"update",value:{name:"void",required:!0},description:"Call this function to update the Query"},{key:"saveAsCustomPill",value:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}],required:!0},description:"Call this function to save the Query as a custom pill"},{key:"duplicate",value:{name:"void",required:!0},description:"Call this function to duplicate the Query"},{key:"index",value:{name:"number",required:!0},description:"Call this function to get the index of the Query"},{key:"toggleSelect",value:{name:"void",required:!0},description:"Call this function to select or unselect the Query"},{key:"isSelected",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is selected"},{key:"isSelectable",value:{name:"boolean",required:!0},description:`Call this function to know if the Query is selectable,
meaning the query can be selected for a combine operation`},{key:"isActive",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is active"},{key:"setAsActive",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"addPill",value:{name:"signature",type:"function",raw:"(pill: IValueQuery) => void",signature:{arguments:[{type:{name:"IValueQuery"},name:"pill"}],return:{name:"void"}},required:!0},description:"Call this function to add pill to the Query"},{key:"removePillById",value:{name:"signature",type:"function",raw:"(pillId: string) => void",signature:{arguments:[{type:{name:"string"},name:"pillId"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by ID"},{key:"removePillByFieldOrIndex",value:{name:"signature",type:"function",raw:"(indexOfField: string | number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"indexOfField"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by field name"},{key:"changeCombineOperator",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"isReferencedInActiveQuery",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is referenced in the active query"},{key:"hasCustomPill",value:{name:"boolean",required:!0},description:"Call this function to know if the Query has a custom pill"}]}},description:""}}};function Yn(){const e=g(),{queryBuilder:i}=x(),n=c.useCallback(()=>{H.open({type:"warning",title:e.toolbar.clearAllDialog.title,description:e.toolbar.clearAllDialog.description,cancelProps:{children:e.toolbar.clearAllDialog.cancel},actionProps:{variant:"destructive",onClick:()=>i.clearQueries(),children:e.toolbar.clearAllDialog.ok}})},[i,e]);return i.getQueries().length>1?t.jsx(v,{variant:"ghost",size:"sm",className:"no-underline enabled:hover:no-underline",onClick:n,children:e.toolbar.clearAll}):null}Yn.__docgenInfo={description:"",methods:[],displayName:"QueryToolbarClearAction"};function Gn(){const e=g(),{queryBuilder:i,enableCombine:n}=x();return i.canCombine()&&n?t.jsx(yr,{actions:[{label:_e(e.queryPill.operator.and),onClick:()=>i.combineSelectedQueries(O.And)},{label:_e(e.queryPill.operator.or),onClick:()=>i.combineSelectedQueries(O.Or)}],onDefaultAction:()=>i.combineSelectedQueries(O.And),size:"xs",color:"primary",children:e.toolbar.combine}):null}Gn.__docgenInfo={description:"",methods:[],displayName:"QueryToolbarCombineAction"};function Xn(){const e=g(),{queryBuilder:i}=x();return i.canCombine()?null:t.jsxs(v,{size:"xs",disabled:i.hasEmptyQuery(),onClick:()=>i.createQuery({op:O.And,content:[]}),children:[t.jsx(Ht,{}),e.toolbar.newQuery]})}Xn.__docgenInfo={description:"",methods:[],displayName:"QueryToolbarAddAction"};function Jn(){const e=g(),{queryBuilder:i,enableShowHideLabels:n,showLabels:r,toggleLabels:o}=x();return!i.canCombine()&&n?t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(vr,{size:"xs",checked:r,onCheckedChange:o})," ",e.toolbar.labels]}):null}Jn.__docgenInfo={description:"",methods:[],displayName:"QueryToolbarLabelsAction"};function Kn(){return t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Xn,{}),t.jsx(Gn,{}),t.jsx(Jn,{})]}),t.jsx("div",{children:t.jsx(Yn,{})})]})}Kn.__docgenInfo={description:"",methods:[],displayName:"QueriesToolbar"};function Zn(){const e=g(),{queryBuilder:i}=x(),n=i.getSelectedSavedFilter(),r=function(){n!=null&&n.isDirty()?Mn(i,e):n==null||n.duplicate()};return t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",disabled:(n==null?void 0:n.isNew())||!n,onClick:r,children:t.jsx($t,{})})})}),t.jsx(N,{children:e.savedFilter.duplicateTooltip})]})}Zn.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersDuplicateAction"};function ei(){const e=g(),{queryBuilder:i}=x(),n=i.getSelectedSavedFilter(),r=function(){n!=null&&n.isDirty()?Mn(i,e):i.createSavedFilter()};return t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",onClick:r,disabled:(n==null?void 0:n.isNew())||!n,children:t.jsx(Ht,{})})})}),t.jsx(N,{children:e.savedFilter.newFilter})]})}ei.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersNewAction"};function ti(){const e=g(),{queryBuilder:i}=x(),n=i.getSelectedSavedFilter(),r=n?!n.isDirty():i.isEmpty(),o=function(){n?n.save(le.Filter):i.saveNewFilter()};return t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",disabled:r,className:n!=null&&n.isDirty()?"text-yellow-500":"",onClick:o,children:t.jsx(Wt,{})})})}),t.jsx(N,{children:i.isEmpty()?e.savedFilter.saveTooltip.whenEmpty:n!=null&&n.isDirty()?e.savedFilter.saveTooltip.whenDirty:e.savedFilter.saveTooltip.default})]})}ti.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersSaveAction"};function ni(){const e=g(),{queryBuilder:i}=x(),n=i.getSelectedSavedFilter();return t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",disabled:(n==null?void 0:n.isNew())||!n,onClick:()=>Rn(n,e),children:t.jsx(Ot,{})})})}),t.jsx(N,{children:e.savedFilter.deleteTooltip})]})}ni.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersDeleteAction"};function ii(){const e=g(),{queryBuilder:i}=x(),n=i.getSelectedSavedFilter(),r=function(){};return t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx("span",{className:"inline-flex",children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",disabled:(n==null?void 0:n.isDirty())||(n==null?void 0:n.isNew())||!n,onClick:r,children:t.jsx(Gi,{})})})}),t.jsx(N,{children:n!=null&&n.isDirty()||!n?e.savedFilter.shareTooltip.whenNotSaved:e.savedFilter.shareTooltip.default})]})}ii.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersShareAction"};const ko=oe.object({title:oe.string().min(2,"Min 2 characters").max(50,"Max 50 characters")});function it({open:e,onOpenChange:i,savedFilter:n}){const r=g(),{queryBuilder:o}=x(),a=Et({resolver:Bt(ko),values:{title:(n==null?void 0:n.raw().title)||""}});function l(s){n?n.save(le.Filter,{title:s.title}):o.saveNewFilter({title:s.title}),i(!1)}return t.jsx(de,{open:e,onOpenChange:i,children:t.jsxs(ue,{children:[t.jsx(me,{children:t.jsx(pe,{children:r.savedFilter.editDialog.title})}),t.jsx(Rt,{...a,children:t.jsxs("form",{onSubmit:a.handleSubmit(l),className:"space-y-8",children:[t.jsx(Mt,{control:a.control,name:"title",render:({field:s})=>t.jsxs(Lt,{children:[t.jsx(Vt,{children:r.savedFilter.editDialog.fields.title.label}),t.jsx(Ut,{children:t.jsx(Le,{placeholder:r.savedFilter.editDialog.fields.title.placeholder,...s})}),t.jsx(zt,{})]})}),t.jsxs(he,{children:[t.jsx(fe,{asChild:!0,children:t.jsx(v,{variant:"outline",children:r.savedFilter.editDialog.cancel})}),t.jsx(v,{type:"submit",color:"primary",children:r.savedFilter.editDialog.ok})]})]})})]})})}it.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersEditDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},savedFilter:{required:!0,tsType:{name:"union",raw:"SavedFilterInstance | null",elements:[{name:"signature",type:"object",raw:`{
  /**
   * Id of the SavedFilter
   */
  id: string;

  /**
   * Call this function to get the SavedFilter's raw data
   */
  raw(): ISavedFilter;

  /**
   * Call this function to get the SavedFilter's queries
   */
  getQueries(): QueryInstance[];

  /**
   * Call this function to get the SavedFilter's raw queries (ISyntheticSqon[])
   */
  getRawQueries(): ISyntheticSqon[];

  /**
   * Call this function to get a Query by id
   */
  getQueryById(id: string): QueryInstance | null;

  /**
   * Call this function to check if the SavedFilter has queries
   */
  hasQueries(): boolean;

  /**
   * Call this function to delete the SavedFilter
   */
  delete(): void | Promise<void>;

  /**
   * Call this function to duplicate the SavedFilter
   */
  duplicate(): void;

  /**
   * Call this function to save (update) the SavedFilter
   */
  save(
    type: SavedFilterTypeEnum,
    params?: {
      title?: string;
      favorite?: boolean;
    }
  ): Promise<void>;

  /**
   * Call this function to discard the changes made to the SavedFilter
   */
  discardChanges(): void;

  /**
   * Call this function to select the SavedFilter
   */
  select(): void;

  /**
   * Call this function to check if the SavedFilter is a favorite
   */
  isFavorite(): boolean;

  /**
   * Call this function to check if the SavedFilter is new meaning it has never been saved.
   */
  isNew(): boolean;

  /**
   * Call this function to check if the SavedFilter is dirty meaning it has been modified.
   */
  isDirty(): boolean;

  /**
   * Call this function to check if the SavedFilter is currently selected
   */
  isSelected(): boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0},description:"Id of the SavedFilter"},{key:"raw",value:{name:"ISavedFilter",required:!0},description:"Call this function to get the SavedFilter's raw data"},{key:"getQueries",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  /**
   * ID of the Query
   */
  id: string;

  /**
   * SyntheticSqon representing the query
   */
  raw(): ISyntheticSqon;

  /**
   * Call this function to know if the Query is empty
   */
  isEmpty(): boolean;

  /**
   * Call this function to know if the Query is empty
   */
  isNotEmpty(): boolean;

  /**
   * Call this function to delete the Query
   */
  delete(): void;

  /**
   * Call this function to update the Query
   */
  update(data: Omit<ISyntheticSqon, 'id'>): void;

  /**
   * Call this function to save the Query as a custom pill
   */
  saveAsCustomPill(title: string): void | Promise<void>;

  /**
   * Call this function to duplicate the Query
   */
  duplicate(): void;

  /**
   * Call this function to get the index of the Query
   */
  index(): number;

  /**
   * Call this function to select or unselect the Query
   */
  toggleSelect(selected: boolean): void;

  /**
   * Call this function to know if the Query is selected
   */
  isSelected(): boolean;

  /**
   * Call this function to know if the Query is selectable,
   * meaning the query can be selected for a combine operation
   */
  isSelectable(): boolean;

  /**
   * Call this function to know if the Query is active
   */
  isActive(): boolean;

  /**
   * Call this function to set the Query as active
   */
  setAsActive(): void;

  /**
   * Call this function to add pill to the Query
   */
  addPill: (pill: IValueQuery) => void;

  /**
   * Call this function to remove pill from the Query by ID
   */
  removePillById: (pillId: string) => void;

  /**
   * Call this function to remove pill from the Query by field name
   */
  removePillByFieldOrIndex: (indexOfField: string | number) => void;

  /**
   * Call this function to set the Query as active
   */
  changeCombineOperator(operator: BooleanOperators): void;

  /**
   * Call this function to know if the Query is referenced in the active query
   */
  isReferencedInActiveQuery(): boolean;

  /**
   * Call this function to know if the Query has a custom pill
   */
  hasCustomPill(): boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0},description:"ID of the Query"},{key:"raw",value:{name:"ISyntheticSqon",required:!0},description:"SyntheticSqon representing the query"},{key:"isEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"isNotEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"delete",value:{name:"void",required:!0},description:"Call this function to delete the Query"},{key:"update",value:{name:"void",required:!0},description:"Call this function to update the Query"},{key:"saveAsCustomPill",value:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}],required:!0},description:"Call this function to save the Query as a custom pill"},{key:"duplicate",value:{name:"void",required:!0},description:"Call this function to duplicate the Query"},{key:"index",value:{name:"number",required:!0},description:"Call this function to get the index of the Query"},{key:"toggleSelect",value:{name:"void",required:!0},description:"Call this function to select or unselect the Query"},{key:"isSelected",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is selected"},{key:"isSelectable",value:{name:"boolean",required:!0},description:`Call this function to know if the Query is selectable,
meaning the query can be selected for a combine operation`},{key:"isActive",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is active"},{key:"setAsActive",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"addPill",value:{name:"signature",type:"function",raw:"(pill: IValueQuery) => void",signature:{arguments:[{type:{name:"IValueQuery"},name:"pill"}],return:{name:"void"}},required:!0},description:"Call this function to add pill to the Query"},{key:"removePillById",value:{name:"signature",type:"function",raw:"(pillId: string) => void",signature:{arguments:[{type:{name:"string"},name:"pillId"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by ID"},{key:"removePillByFieldOrIndex",value:{name:"signature",type:"function",raw:"(indexOfField: string | number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"indexOfField"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by field name"},{key:"changeCombineOperator",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"isReferencedInActiveQuery",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is referenced in the active query"},{key:"hasCustomPill",value:{name:"boolean",required:!0},description:"Call this function to know if the Query has a custom pill"}]}}],raw:"QueryInstance[]",required:!0},description:"Call this function to get the SavedFilter's queries"},{key:"getRawQueries",value:{name:"Array",elements:[{name:"ISyntheticSqon"}],raw:"ISyntheticSqon[]",required:!0},description:"Call this function to get the SavedFilter's raw queries (ISyntheticSqon[])"},{key:"getQueryById",value:{name:"union",raw:"QueryInstance | null",elements:[{name:"signature",type:"object",raw:`{
  /**
   * ID of the Query
   */
  id: string;

  /**
   * SyntheticSqon representing the query
   */
  raw(): ISyntheticSqon;

  /**
   * Call this function to know if the Query is empty
   */
  isEmpty(): boolean;

  /**
   * Call this function to know if the Query is empty
   */
  isNotEmpty(): boolean;

  /**
   * Call this function to delete the Query
   */
  delete(): void;

  /**
   * Call this function to update the Query
   */
  update(data: Omit<ISyntheticSqon, 'id'>): void;

  /**
   * Call this function to save the Query as a custom pill
   */
  saveAsCustomPill(title: string): void | Promise<void>;

  /**
   * Call this function to duplicate the Query
   */
  duplicate(): void;

  /**
   * Call this function to get the index of the Query
   */
  index(): number;

  /**
   * Call this function to select or unselect the Query
   */
  toggleSelect(selected: boolean): void;

  /**
   * Call this function to know if the Query is selected
   */
  isSelected(): boolean;

  /**
   * Call this function to know if the Query is selectable,
   * meaning the query can be selected for a combine operation
   */
  isSelectable(): boolean;

  /**
   * Call this function to know if the Query is active
   */
  isActive(): boolean;

  /**
   * Call this function to set the Query as active
   */
  setAsActive(): void;

  /**
   * Call this function to add pill to the Query
   */
  addPill: (pill: IValueQuery) => void;

  /**
   * Call this function to remove pill from the Query by ID
   */
  removePillById: (pillId: string) => void;

  /**
   * Call this function to remove pill from the Query by field name
   */
  removePillByFieldOrIndex: (indexOfField: string | number) => void;

  /**
   * Call this function to set the Query as active
   */
  changeCombineOperator(operator: BooleanOperators): void;

  /**
   * Call this function to know if the Query is referenced in the active query
   */
  isReferencedInActiveQuery(): boolean;

  /**
   * Call this function to know if the Query has a custom pill
   */
  hasCustomPill(): boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0},description:"ID of the Query"},{key:"raw",value:{name:"ISyntheticSqon",required:!0},description:"SyntheticSqon representing the query"},{key:"isEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"isNotEmpty",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is empty"},{key:"delete",value:{name:"void",required:!0},description:"Call this function to delete the Query"},{key:"update",value:{name:"void",required:!0},description:"Call this function to update the Query"},{key:"saveAsCustomPill",value:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}],required:!0},description:"Call this function to save the Query as a custom pill"},{key:"duplicate",value:{name:"void",required:!0},description:"Call this function to duplicate the Query"},{key:"index",value:{name:"number",required:!0},description:"Call this function to get the index of the Query"},{key:"toggleSelect",value:{name:"void",required:!0},description:"Call this function to select or unselect the Query"},{key:"isSelected",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is selected"},{key:"isSelectable",value:{name:"boolean",required:!0},description:`Call this function to know if the Query is selectable,
meaning the query can be selected for a combine operation`},{key:"isActive",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is active"},{key:"setAsActive",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"addPill",value:{name:"signature",type:"function",raw:"(pill: IValueQuery) => void",signature:{arguments:[{type:{name:"IValueQuery"},name:"pill"}],return:{name:"void"}},required:!0},description:"Call this function to add pill to the Query"},{key:"removePillById",value:{name:"signature",type:"function",raw:"(pillId: string) => void",signature:{arguments:[{type:{name:"string"},name:"pillId"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by ID"},{key:"removePillByFieldOrIndex",value:{name:"signature",type:"function",raw:"(indexOfField: string | number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"indexOfField"}],return:{name:"void"}},required:!0},description:"Call this function to remove pill from the Query by field name"},{key:"changeCombineOperator",value:{name:"void",required:!0},description:"Call this function to set the Query as active"},{key:"isReferencedInActiveQuery",value:{name:"boolean",required:!0},description:"Call this function to know if the Query is referenced in the active query"},{key:"hasCustomPill",value:{name:"boolean",required:!0},description:"Call this function to know if the Query has a custom pill"}]}},{name:"null"}],required:!0},description:"Call this function to get a Query by id"},{key:"hasQueries",value:{name:"boolean",required:!0},description:"Call this function to check if the SavedFilter has queries"},{key:"delete",value:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}],required:!0},description:"Call this function to delete the SavedFilter"},{key:"duplicate",value:{name:"void",required:!0},description:"Call this function to duplicate the SavedFilter"},{key:"save",value:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>",required:!0},description:"Call this function to save (update) the SavedFilter"},{key:"discardChanges",value:{name:"void",required:!0},description:"Call this function to discard the changes made to the SavedFilter"},{key:"select",value:{name:"void",required:!0},description:"Call this function to select the SavedFilter"},{key:"isFavorite",value:{name:"boolean",required:!0},description:"Call this function to check if the SavedFilter is a favorite"},{key:"isNew",value:{name:"boolean",required:!0},description:"Call this function to check if the SavedFilter is new meaning it has never been saved."},{key:"isDirty",value:{name:"boolean",required:!0},description:"Call this function to check if the SavedFilter is dirty meaning it has been modified."},{key:"isSelected",value:{name:"boolean",required:!0},description:"Call this function to check if the SavedFilter is currently selected"}]}},{name:"null"}]},description:""}}};const Io={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},Fo=(e,i,n)=>{let r;const o=Io[e];return typeof o=="string"?r=o:i===1?r=o.one:r=o.other.replace("{{count}}",String(i)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},Do={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},Ao=(e,i,n,r)=>Do[e],No={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},_o={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},To={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},Oo={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Eo={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},Bo=(e,i)=>{const n=Number(e),r=i==null?void 0:i.unit;if(n===0)return"0";const o=["year","week","hour","minute","second"];let a;return n===1?a=r&&o.includes(r)?"re":"er":a="me",n+a},Ro=["MMM","MMMM"],Mo={preprocessor:(e,i)=>e.getDate()===1||!i.some(r=>r.isToken&&Ro.includes(r.value))?i:i.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:Bo,era:Y({values:No,defaultWidth:"wide"}),quarter:Y({values:_o,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Y({values:To,defaultWidth:"wide"}),day:Y({values:Oo,defaultWidth:"wide"}),dayPeriod:Y({values:Eo,defaultWidth:"wide"})},Lo=/^(\d+)(ime|re|me|er|e)?/i,Vo=/\d+/i,Uo={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},zo={any:[/^av/i,/^ap/i]},Ho={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},$o={any:[/1/i,/2/i,/3/i,/4/i]},Wo={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},Yo={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},Go={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},Xo={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Jo={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},Ko={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},Zo={ordinalNumber:nr({matchPattern:Lo,parsePattern:Vo,valueCallback:e=>parseInt(e)}),era:G({matchPatterns:Uo,defaultMatchWidth:"wide",parsePatterns:zo,defaultParseWidth:"any"}),quarter:G({matchPatterns:Ho,defaultMatchWidth:"wide",parsePatterns:$o,defaultParseWidth:"any",valueCallback:e=>e+1}),month:G({matchPatterns:Wo,defaultMatchWidth:"wide",parsePatterns:Yo,defaultParseWidth:"any"}),day:G({matchPatterns:Go,defaultMatchWidth:"wide",parsePatterns:Xo,defaultParseWidth:"any"}),dayPeriod:G({matchPatterns:Jo,defaultMatchWidth:"any",parsePatterns:Ko,defaultParseWidth:"any"})},ea={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"yy-MM-dd"},ta={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},na={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ia={date:je({formats:ea,defaultWidth:"full"}),time:je({formats:ta,defaultWidth:"full"}),dateTime:je({formats:na,defaultWidth:"full"})},ra={code:"fr-CA",formatDistance:Fo,formatLong:ia,formatRelative:Ao,localize:Mo,match:Zo,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ri({open:e,onOpenChange:i}){const n=g(),{queryBuilder:r}=x(),o=r.getSavedFilters();return c.useEffect(()=>{o.length===0&&i(!1)},[o]),t.jsx(t.Fragment,{children:t.jsx(de,{open:e,onOpenChange:i,children:t.jsxs(ue,{className:"w-full max-w-[550px]",children:[t.jsx(me,{children:t.jsx(pe,{children:n.savedFilter.manageDialog.title})}),t.jsx(Xi,{bordered:!0,className:"max-h-[250px]",children:o.map(a=>t.jsx(oa,{savedFilter:a},a.id))}),t.jsx(he,{children:t.jsx(fe,{asChild:!0,children:t.jsx(v,{children:n.savedFilter.manageDialog.close})})})]})})})}const oa=({savedFilter:e})=>{const i=g(),[n,r]=c.useState(!1),o=c.useCallback(()=>{const a=e.raw();if(!a.updated_date)return i.savedFilter.manageDialog.lastSaveAt.replace("{lastSaveAt}","n/a");const l=Lr(new Date,new Date(a.updated_date),{locale:ra});return i.savedFilter.manageDialog.lastSaveAt.replace("{lastSaveAt}",l)},[e.raw()]);return t.jsxs(t.Fragment,{children:[t.jsx(Ji,{title:e.raw().title,description:o(),className:"border-b last:border-b-0 relative px-3 py-2 group",onEdit:()=>r(!0),onDelete:()=>Rn(e,i)},e.id),t.jsx(it,{open:n,onOpenChange:r,savedFilter:e})]})};ri.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersManageDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}};function oi(){const e=g(),{queryBuilder:i}=x(),n=i.getSavedFilters(),[r,o]=c.useState(!1),[a,l]=c.useState(!1),s=i.getSelectedSavedFilter(),u=function(){o(!1),l(!0)},d=c.useMemo(()=>new Date,[s==null?void 0:s.id]);return t.jsxs(t.Fragment,{children:[t.jsxs(gr,{value:s==null?void 0:s.id,onValueChange:m=>{var f;return(f=n.find(p=>p.id===m))==null?void 0:f.select()},open:r,onOpenChange:o,disabled:n.length===0,children:[t.jsxs(D,{open:n.length>0?!1:void 0,children:[t.jsx(A,{asChild:!0,children:t.jsx(xr,{className:"w-[135px] h-7",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Qr,{size:14})," ",e.savedFilter.myFilters]})})}),t.jsx(N,{children:e.savedFilter.noSavedFilters})]}),t.jsxs(Cr,{children:[n.map(m=>t.jsx(br,{value:m.id,children:m.raw().title},m.id)),t.jsx(Pr,{}),t.jsx(v,{size:"sm",variant:"ghost",className:"w-full pl-2 justify-start",onClick:u,children:e.savedFilter.manageFilters})]})]},+d),t.jsx(ri,{open:a,onOpenChange:l})]})}oi.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersSelect"};function ai({className:e,...i}){return t.jsx("div",{className:q("flex",e),...i,children:t.jsxs("div",{className:"flex gap-4 items-center",onClick:n=>n.stopPropagation(),children:[t.jsxs("div",{className:"flex whitespace-nowrap",children:[t.jsx(ei,{}),t.jsx(ti,{}),t.jsx(Zn,{}),t.jsx(ni,{}),t.jsx(ii,{})]}),t.jsx(oi,{})]})})}ai.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersRightActions"};function si(){const{queryBuilder:e}=x(),[i,n]=c.useState(!1),r=e.getSelectedSavedFilter();return t.jsxs(t.Fragment,{children:[t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",onClick:()=>n(!0),children:t.jsx(Ue,{})}),t.jsx(it,{open:i,onOpenChange:n,savedFilter:r})]})}si.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersEditAction"};function li(){const e=g(),{queryBuilder:i}=x(),n=i.getSelectedSavedFilter();return n!=null&&n.isDirty()?t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",disabled:!n,onClick:()=>n.discardChanges(),children:t.jsx(Ir,{})})}),t.jsx(N,{children:e.savedFilter.discardTooltip})]}):null}li.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersUndoAction"};function ci(){const e=g(),{queryBuilder:i,enableFavorite:n}=x(),r=i.getSelectedSavedFilter();if(!n)return null;const o=function(){r?r.save(le.Filter,{favorite:!r.isFavorite()}):i.saveNewFilter({favorite:!0})};return t.jsxs(D,{children:[t.jsx(A,{asChild:!0,children:t.jsx(v,{iconOnly:!0,variant:"ghost",size:"sm",disabled:!r,onClick:o,children:t.jsx(Ar,{className:r!=null&&r.isFavorite()?"stroke-yellow-500 fill-yellow-500":""})})}),t.jsx(N,{children:r!=null&&r.isFavorite()?e.savedFilter.favoriteTooltip.unset:e.savedFilter.favoriteTooltip.set})]})}ci.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersStarAction"};function di({className:e,...i}){const{queryBuilder:n}=x(),r=n.getSelectedSavedFilter();return t.jsxs("div",{className:q("flex items-center gap-4 whitespace-nowrap text-ellipsis overflow-hidden",e),...i,children:[t.jsx("div",{className:"text-ellipsis overflow-hidden text-base",children:r?r.raw().title:n.coreProps.savedFilterDefaultTitle}),t.jsxs("div",{className:"flex items-center",onClick:o=>o.stopPropagation(),children:[t.jsx(si,{}),t.jsx(ci,{}),t.jsx(li,{})]})]})}di.__docgenInfo={description:"",methods:[],displayName:"SavedFiltersLeftActions"};const aa=()=>{const{t:e}=Ee("common");return{queryBar:{empty:e("common.queryBar.empty"),deletePopover:{title:e("common.queryBar.deletePopover.title"),cancel:e("common.queryBar.deletePopover.cancel"),ok:e("common.queryBar.deletePopover.ok")},customPill:{createTooltip:e("common.queryBar.customPill.createTooltip"),cannotSaveAsCustomPill:e("common.queryBar.customPill.cannotSaveAsCustomPill")},saveDialog:{title:e("common.queryBar.saveDialog.title"),fields:{title:{label:e("common.queryBar.saveDialog.fields.title.label"),placeholder:e("common.queryBar.saveDialog.fields.title.placeholder")}},notice:e("common.queryBar.saveDialog.notice"),cancel:e("common.queryBar.saveDialog.cancel"),ok:e("common.queryBar.saveDialog.ok")}},queryPill:{operator:{changeOperatorTo:e("common.queryPill.operator.changeOperatorTo"),and:e("common.queryPill.operator.and"),or:e("common.queryPill.operator.or")},facet:i=>i,customPill:{editDialog:{title:e("common.queryPill.customPill.editDialog.title"),cancel:e("common.queryPill.customPill.editDialog.cancel"),ok:e("common.queryPill.customPill.editDialog.ok")},cantBeEmptyDialog:{title:e("common.queryPill.customPill.cantBeEmptyDialog.title"),description:e("common.queryPill.customPill.cantBeEmptyDialog.description"),ok:e("common.queryPill.customPill.cantBeEmptyDialog.ok")},titleExistsDialog:{title:e("common.queryPill.customPill.titleExistsDialog.title"),description:e("common.queryPill.customPill.titleExistsDialog.description"),ok:e("common.queryPill.customPill.titleExistsDialog.ok")},saveDialog:{title:e("common.queryPill.customPill.saveDialog.title"),confirmationMessage:e("common.queryPill.customPill.saveDialog.confirmationMessage"),affectedFilters:e("common.queryPill.customPill.saveDialog.affectedFilters"),cancel:e("common.queryPill.customPill.saveDialog.cancel"),ok:e("common.queryPill.customPill.saveDialog.ok")}}},toolbar:{combine:e("common.toolbar.combine"),newQuery:e("common.toolbar.newQuery"),clearAll:e("common.toolbar.clearAll"),clearAllDialog:{title:e("common.toolbar.clearAllDialog.title"),description:e("common.toolbar.clearAllDialog.description"),cancel:e("common.toolbar.clearAllDialog.cancel"),ok:e("common.toolbar.clearAllDialog.ok")},labels:e("common.toolbar.labels")},savedFilter:{deleteTooltip:e("common.savedFilter.deleteTooltip"),deleteDialog:{title:e("common.savedFilter.deleteDialog.title"),description:e("common.savedFilter.deleteDialog.description"),cancel:e("common.savedFilter.deleteDialog.cancel"),ok:e("common.savedFilter.deleteDialog.ok")},duplicateTooltip:e("common.savedFilter.duplicateTooltip"),overwriteDialog:{title:e("common.savedFilter.overwriteDialog.title"),description:e("common.savedFilter.overwriteDialog.description"),cancel:e("common.savedFilter.overwriteDialog.cancel"),ok:e("common.savedFilter.overwriteDialog.ok")},editDialog:{title:e("common.savedFilter.editDialog.title"),cancel:e("common.savedFilter.editDialog.cancel"),ok:e("common.savedFilter.editDialog.ok"),fields:{title:{label:e("common.savedFilter.editDialog.fields.title.label"),placeholder:e("common.savedFilter.editDialog.fields.title.placeholder")}}},myFilters:e("common.savedFilter.myFilters"),manageFilters:e("common.savedFilter.manageFilters"),manageDialog:{title:e("common.savedFilter.manageDialog.title"),close:e("common.savedFilter.manageDialog.close"),lastSaveAt:e("common.savedFilter.manageDialog.lastSaveAt")},newFilter:e("common.savedFilter.newFilter"),saveTooltip:{whenEmpty:e("common.savedFilter.saveTooltip.whenEmpty"),whenDirty:e("common.savedFilter.saveTooltip.whenDirty"),default:e("common.savedFilter.saveTooltip.default")},shareTooltip:{whenNotSaved:e("common.savedFilter.shareTooltip.whenNotSaved"),default:e("common.savedFilter.shareTooltip.default")},favoriteTooltip:{set:e("common.savedFilter.favoriteTooltip.set"),unset:e("common.savedFilter.favoriteTooltip.unset")},discardTooltip:e("common.savedFilter.discardTooltip"),noSavedFilters:e("common.savedFilter.noSavedFilters")}}},ui=["#C31D7E","#328536","#AA00FF","#C2410C","#047ABE","#E5231F","#007D85","#C51162","#7B5A90","#B85C00","#722ED1","#4D7C0F","#9F1239","#2D7D9A","#847545"];function Fe(e){return e&&typeof e=="object"&&!Array.isArray(e)}function mi(e,i){const n={...e},r=i;return Fe(e)&&Fe(i)&&Object.keys(i).forEach(o=>{Fe(r[o])&&o in e?n[o]=mi(n[o],r[o]):n[o]=r[o]}),n}function Z({className:e,enableCombine:i=!0,enableFavorite:n=!1,enableShowHideLabels:r,initialShowHideLabels:o=!0,queryReferenceColors:a=ui,queryCountIcon:l,fetchQueryCount:s,dictionary:u,customPillConfig:d,queryPillFacetFilterConfig:m,resolveSyntheticSqon:f,...p}){const y=Yt(p),C=aa(),k=c.useMemo(()=>mi(C,u||{}),[u,C]),[_,j]=c.useState(o),b=c.useCallback(I=>a[I%a.length],[a]),T=c.useMemo(()=>({queryBuilder:y,enableCombine:i,enableFavorite:n,enableShowHideLabels:r,showLabels:_,toggleLabels:j,queryCountIcon:l,getQueryReferenceColor:b,fetchQueryCount:s,dictionary:u,customPillConfig:d,queryPillFacetFilterConfig:m,resolveSyntheticSqon:f}),[y,i,n,r,_,j,l,b,s,u,d,m,f]);return t.jsx(cn.Provider,{value:k,children:t.jsx(Xe.Provider,{value:T,children:t.jsx(eo,{type:"multiple",defaultValue:["query-builder"],className:e,children:t.jsxs(We,{value:"query-builder",className:"border-none",children:[t.jsxs(Ye,{asChild:!0,className:"border py-0 px-5 rounded-t data-[state=closed]:rounded hover:cursor-pointer",children:[t.jsx(di,{className:"py-4 pr-4"}),t.jsx(ai,{className:"ml-auto py-4"})]}),t.jsxs(Ge,{className:"border-l border-b border-r py-4 px-5 space-y-4 rounded-b",children:[t.jsx("div",{className:"flex flex-col gap-2 max-h-[30vh] overflow-y-scroll",children:y.getQueries().map(I=>t.jsx(Wn,{query:I},I.id))}),t.jsx(Kn,{})]})]})})})})}Z.__docgenInfo={description:"",methods:[],displayName:"QueryBuilder",props:{enableCombine:{defaultValue:{value:"true",computed:!1},required:!1},enableFavorite:{defaultValue:{value:"false",computed:!1},required:!1},initialShowHideLabels:{defaultValue:{value:"true",computed:!1},required:!1},queryReferenceColors:{defaultValue:{value:`[
  "#C31D7E",
  "#328536",
  "#AA00FF",
  "#C2410C",
  "#047ABE",
  "#E5231F",
  "#007D85",
  "#C51162",
  "#7B5A90",
  "#B85C00",
  "#722ED1",
  "#4D7C0F",
  "#9F1239",
  "#2D7D9A",
  "#847545",
]`,computed:!1},required:!1}}};const sa={queryBar:{empty:"Use the search tools & facets on the left to build a query",deletePopover:{title:"Delete this query?",cancel:"Cancel",ok:"Delete"},customPill:{createTooltip:"Create a custom query",cannotSaveAsCustomPill:"Custom queries cannot include other custom queries"},saveDialog:{title:"Save this query",fields:{title:{label:"Query name",placeholder:"Untitled query"}},notice:'You will find your saved queries in the sidebar under the "Queries" heading.',cancel:"Cancel",ok:"Save"}},queryPill:{operator:{changeOperatorTo:"Change operator to",and:"and",or:"or"},facet:e=>e,customPill:{editDialog:{title:"Edit custom query",cancel:"Cancel",ok:"Save"},cantBeEmptyDialog:{title:"Query cannot be empty",description:"Your custom query must contain at least one criteria.",ok:"Close"},titleExistsDialog:{title:"Name already in use",description:"A custom query with this name already exists. Please assign a unique name.",ok:"Close"},saveDialog:{title:"Edit this query?",confirmationMessage:'You are about to edit the custom query "{title}", which may affect your results.',affectedFilters:"Affected saved filters:",cancel:"Cancel",ok:"Save"}}},toolbar:{combine:"Combine",newQuery:"New query",clearAll:"Clear all",clearAllDialog:{title:"Delete all queries?",description:"You are about to delete all your queries. They will be lost forever.",cancel:"Cancel",ok:"Delete"},labels:"Labels"},savedFilter:{deleteTooltip:"Delete filter",deleteDialog:{title:"Permanently delete this filter?",description:"You are about to permanently delete this filter and all of its queries.",cancel:"Cancel",ok:"Delete filter"},duplicateTooltip:"Duplicate filter",overwriteDialog:{title:"Unsaved changes",description:"You are about to create a new filter; all modifications will be lost.",cancel:"Cancel",ok:"Create"},editDialog:{title:"Edit filter",cancel:"Cancel",ok:"Save",fields:{title:{label:"Title",placeholder:"Untitled query"}}},myFilters:"My Filters",manageFilters:"Manage filters",manageDialog:{title:"Manage filters",close:"Close",lastSaveAt:"Last saved at: {lastSaveAt} ago"},newFilter:"New filter",saveTooltip:{whenEmpty:"Add a query to save",whenDirty:"Save changes",default:"Save filter"},shareTooltip:{whenNotSaved:"Save filter to share",default:"Share (Copy url)"},favoriteTooltip:{set:"Set as default filter",unset:"Unset default filter"},discardTooltip:"Discard unsaved changes",noSavedFilters:"You have no saved filters"}},ds={title:"Feature/Query Builder",component:Z,args:{id:"query-builder-id",enableCombine:!0,enableFavorite:!0,enableShowHideLabels:!0,initialShowHideLabels:!0,queryReferenceColors:ui,resolveSyntheticSqon:h(),dictionary:sa}},De="query-builder-id",la="query-builder-custom-pill-id",Ae="query-builder-query-pill-filter-id",gt=e=>e[Math.floor(Math.random()*e.length)],se=(e=1,i=100)=>Math.floor(Math.random()*(i-e+1))+e,pi=()=>Math.random().toString(36).substring(7),ca=[P.GreaterThan,P.LessThan,P.Between,P.GreaterThanOrEqualTo,P.LessThanOrEqualTo],X=e=>({id:B(),title:(e==null?void 0:e.title)||`Custom Pill ${se(1,50)}`,queries:[Q()],keycloak_id:B(),creation_date:new Date().toISOString(),updated_date:new Date().toISOString(),tag:"tag",favorite:!1}),da=e=>ca.includes(e)?Array.from({length:2},()=>se()):Array.from({length:se(2,5)},()=>pi()),Q=(e=B())=>{const i=se(1,3),n=Array.from({length:i},()=>{const r=Object.values(P).filter(a=>a!==P.And&&a!==P.Or&&a!==P.Not),o=gt(r);return{op:o,content:{field:`field_${pi()}`,value:da(o)}}});return{id:e,op:gt(["and","or"]),content:n}};function hi({queryBuilderId:e}){return t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{children:"Testing Tools:"}),t.jsxs("div",{className:"flex border p-4 gap-2",children:[t.jsx(v,{color:"primary",size:"sm",onClick:()=>L.addQuery(e,Q()),children:"Add query"}),t.jsx(v,{color:"primary",size:"sm",onClick:()=>{L.updateActiveQueryField(e,{field:"field",value:["new-value"]})},children:"Add field to active query"}),t.jsx(v,{color:"primary",size:"sm",onClick:()=>{L.updateActiveQueryField(e,{field:"field",value:[]})},children:"Remove field from active query"})]})]})}const te={args:{id:De,initialState:{...L.getLocalQueryBuilderState(De),savedFilters:[{id:B(),title:"Olivier's Filter",favorite:!1,queries:[Q(),Q(),Q()]},{id:B(),title:"Francis' Filter",favorite:!1,queries:[Q(),Q()]},{id:B(),title:"Luc's Filter",favorite:!1,queries:[Q(),Q(),Q()]}],selectedQueryIndexes:[]},fetchQueryCount:async()=>Promise.resolve(15),onStateChange:h(),onActiveQueryChange:h(),onQueryCreate:h(),onQueryDelete:h(),onQuerySelectChange:h(),onQueryUpdate:h(),onCustomPillSave:h(),onCustomPillUpdate:h(),onSavedFilterCreate:h(),onSavedFilterDelete:h(),onSavedFilterSave:h(),onSavedFilterUpdate:h()},render:e=>t.jsxs("div",{className:"space-y-6",children:[t.jsx(Z,{...e}),t.jsx(hi,{queryBuilderId:De})]})},xt=B(),ne={args:{id:la,queryCountIcon:t.jsx(jr,{size:14}),initialState:{activeQueryId:xt,queries:[Q(xt),Q()],savedFilters:[],selectedQueryIndexes:[]},fetchQueryCount:async()=>Promise.resolve(15),onStateChange:h(),onActiveQueryChange:h(),onQueryCreate:h(),onQueryDelete:h(),onQuerySelectChange:h(),onQueryUpdate:h(),onCustomPillSave:e=>(Ne("onCustomPillSave")(e),new Promise(i=>setTimeout(()=>i(X(e)),750))),onCustomPillUpdate:e=>(Ne("onCustomPillUpdate")(e),new Promise(i=>setTimeout(()=>i(X(e)),750))),onSavedFilterCreate:h(),onSavedFilterDelete:h(),onSavedFilterSave:h(),onSavedFilterUpdate:h(),customPillConfig:{enable:!0,queryBuilderEditId:"qb-custom-pill-edit-id",fetchCustomPillById:()=>new Promise(e=>setTimeout(()=>e(X()),750)),validateCustomPillTitle:()=>new Promise(e=>setTimeout(()=>e(!0),750)),fetchSavedFiltersByCustomPillId:()=>new Promise(e=>setTimeout(()=>e([X(),X()]),750))}},render:e=>t.jsx(Z,{...e})},ie={args:{id:Ae,initialState:{...L.getLocalQueryBuilderState(Ae),savedFilters:[],selectedQueryIndexes:[]},fetchQueryCount:async()=>Promise.resolve(15),onStateChange:h(),onActiveQueryChange:h(),onQueryCreate:h(),onQueryDelete:h(),onQuerySelectChange:h(),onQueryUpdate:h(),onSavedFilterCreate:h(),onSavedFilterDelete:h(),onSavedFilterSave:h(),onSavedFilterUpdate:h(),queryPillFacetFilterConfig:{enable:!0,onFacetClick:e=>(Ne("onFacetClick")(e),t.jsx("div",{className:"italic text-sm",children:"Insert Filter Content"}))}},render:e=>t.jsxs("div",{className:"space-y-6",children:[t.jsx(Z,{...e}),t.jsx(hi,{queryBuilderId:Ae})]})};var Ct,bt,Pt;te.parameters={...te.parameters,docs:{...(Ct=te.parameters)==null?void 0:Ct.docs,source:{originalSource:`{
  args: {
    id: qbId,
    initialState: {
      ...queryBuilderRemote.getLocalQueryBuilderState(qbId),
      savedFilters: [{
        id: v4(),
        title: "Olivier's Filter",
        favorite: false,
        queries: [generateRandomQuery(), generateRandomQuery(), generateRandomQuery()]
      }, {
        id: v4(),
        title: "Francis' Filter",
        favorite: false,
        queries: [generateRandomQuery(), generateRandomQuery()]
      }, {
        id: v4(),
        title: "Luc's Filter",
        favorite: false,
        queries: [generateRandomQuery(), generateRandomQuery(), generateRandomQuery()]
      }],
      selectedQueryIndexes: []
    },
    fetchQueryCount: async () => Promise.resolve(15),
    onStateChange: fn(),
    onActiveQueryChange: fn(),
    onQueryCreate: fn(),
    onQueryDelete: fn(),
    onQuerySelectChange: fn(),
    onQueryUpdate: fn(),
    onCustomPillSave: fn(),
    onCustomPillUpdate: fn(),
    onSavedFilterCreate: fn(),
    onSavedFilterDelete: fn(),
    onSavedFilterSave: fn(),
    onSavedFilterUpdate: fn()
  },
  render: args => {
    return <div className="space-y-6">
        <QueryBuilder {...args} />
        <TestingTools queryBuilderId={qbId} />
      </div>;
  }
}`,...(Pt=(bt=te.parameters)==null?void 0:bt.docs)==null?void 0:Pt.source}}};var jt,qt,St;ne.parameters={...ne.parameters,docs:{...(jt=ne.parameters)==null?void 0:jt.docs,source:{originalSource:`{
  args: {
    id: qbCustomPillId,
    queryCountIcon: <UserIcon size={14} />,
    initialState: {
      activeQueryId: customPillActiveQueryId,
      queries: [generateRandomQuery(customPillActiveQueryId), generateRandomQuery()],
      savedFilters: [],
      selectedQueryIndexes: []
    },
    fetchQueryCount: async () => Promise.resolve(15),
    onStateChange: fn(),
    onActiveQueryChange: fn(),
    onQueryCreate: fn(),
    onQueryDelete: fn(),
    onQuerySelectChange: fn(),
    onQueryUpdate: fn(),
    onCustomPillSave: filter => {
      action('onCustomPillSave')(filter);
      return new Promise(resolve => setTimeout(() => resolve(generateRandomUserSavedFilter(filter)), 750));
    },
    onCustomPillUpdate: filter => {
      action('onCustomPillUpdate')(filter);
      return new Promise(resolve => setTimeout(() => resolve(generateRandomUserSavedFilter(filter)), 750));
    },
    onSavedFilterCreate: fn(),
    onSavedFilterDelete: fn(),
    onSavedFilterSave: fn(),
    onSavedFilterUpdate: fn(),
    customPillConfig: {
      enable: true,
      queryBuilderEditId: 'qb-custom-pill-edit-id',
      fetchCustomPillById: () => new Promise(resolve => setTimeout(() => resolve(generateRandomUserSavedFilter()), 750)),
      validateCustomPillTitle: () => new Promise(resolve => setTimeout(() => resolve(true), 750)),
      fetchSavedFiltersByCustomPillId: () => new Promise(resolve => setTimeout(() => resolve([generateRandomUserSavedFilter(), generateRandomUserSavedFilter()]), 750))
    }
  },
  render: args => {
    return <QueryBuilder {...args} />;
  }
}`,...(St=(qt=ne.parameters)==null?void 0:qt.docs)==null?void 0:St.source}}};var Qt,wt,kt;ie.parameters={...ie.parameters,docs:{...(Qt=ie.parameters)==null?void 0:Qt.docs,source:{originalSource:`{
  args: {
    id: qbQueryPillFilterId,
    initialState: {
      ...queryBuilderRemote.getLocalQueryBuilderState(qbQueryPillFilterId),
      savedFilters: [],
      selectedQueryIndexes: []
    },
    fetchQueryCount: async () => Promise.resolve(15),
    onStateChange: fn(),
    onActiveQueryChange: fn(),
    onQueryCreate: fn(),
    onQueryDelete: fn(),
    onQuerySelectChange: fn(),
    onQueryUpdate: fn(),
    onSavedFilterCreate: fn(),
    onSavedFilterDelete: fn(),
    onSavedFilterSave: fn(),
    onSavedFilterUpdate: fn(),
    queryPillFacetFilterConfig: {
      enable: true,
      onFacetClick: filter => {
        action('onFacetClick')(filter);
        return <div className="italic text-sm">Insert Filter Content</div>;
      }
    }
  },
  render: args => {
    return <div className="space-y-6">
        <QueryBuilder {...args} />
        <TestingTools queryBuilderId={qbQueryPillFilterId} />
      </div>;
  }
}`,...(kt=(wt=ie.parameters)==null?void 0:wt.docs)==null?void 0:kt.source}}};const us=["Default","CustomPill","QueryPillFilter"];export{ne as CustomPill,te as Default,ie as QueryPillFilter,us as __namedExportsOrder,ds as default};
