import{r as C,R as nt}from"./index-CGj_12n1.js";import{s as re}from"./index-DxlLpgFR.js";import{a as Bt,H as oe,C as ie,O as ae,B as G,I as ce,M as ue,b as le,A as fe}from"./api-BY1uLQuN.js";import{q as de}from"./query-builder-remote-C0dKPo5c.js";const $t=0,Kt=1,zt=2,qt=3;var Wt=Object.prototype.hasOwnProperty;function Ot(t,e){var n,s;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((s=t.length)===e.length)for(;s--&&Ot(t[s],e[s]););return s===-1}if(!n||typeof t=="object"){s=0;for(n in t)if(Wt.call(t,n)&&++s&&!Wt.call(e,n)||!(n in e)||!Ot(t[n],e[n]))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}const F=new WeakMap,W=()=>{},A=W(),vt=Object,a=t=>t===A,N=t=>typeof t=="function",U=(t,e)=>({...t,...e}),Jt=t=>N(t.then),ht={},ct={},_t="undefined",st=typeof window!=_t,Ct=typeof document!=_t,pe=st&&"Deno"in window,he=()=>st&&typeof window.requestAnimationFrame!=_t,Gt=(t,e)=>{const n=F.get(t);return[()=>!a(e)&&t.get(e)||ht,s=>{if(!a(e)){const i=t.get(e);e in ct||(ct[e]=i),n[5](e,U(i,s),i||ht)}},n[6],()=>!a(e)&&e in ct?ct[e]:!a(e)&&t.get(e)||ht]};let St=!0;const ge=()=>St,[Tt,yt]=st&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[W,W],Ee=()=>{const t=Ct&&document.visibilityState;return a(t)||t!=="hidden"},Re=t=>(Ct&&document.addEventListener("visibilitychange",t),Tt("focus",t),()=>{Ct&&document.removeEventListener("visibilitychange",t),yt("focus",t)}),we=t=>{const e=()=>{St=!0,t()},n=()=>{St=!1};return Tt("online",e),Tt("offline",n),()=>{yt("online",e),yt("offline",n)}},me={isOnline:ge,isVisible:Ee},Oe={initFocus:Re,initReconnect:we},Ut=!nt.useId,et=!st||pe,ve=t=>he()?window.requestAnimationFrame(t):setTimeout(t,1),gt=et?C.useEffect:C.useLayoutEffect,Et=typeof navigator<"u"&&navigator.connection,Ht=!et&&Et&&(["slow-2g","2g"].includes(Et.effectiveType)||Et.saveData),ut=new WeakMap,Ce=t=>vt.prototype.toString.call(t),Rt=(t,e)=>t===`[object ${e}]`;let Se=0;const At=t=>{const e=typeof t,n=Ce(t),s=Rt(n,"Date"),i=Rt(n,"RegExp"),c=Rt(n,"Object");let r,u;if(vt(t)===t&&!s&&!i){if(r=ut.get(t),r)return r;if(r=++Se+"~",ut.set(t,r),Array.isArray(t)){for(r="@",u=0;u<t.length;u++)r+=At(t[u])+",";ut.set(t,r)}if(c){r="#";const p=vt.keys(t).sort();for(;!a(u=p.pop());)a(t[u])||(r+=u+":"+At(t[u])+",");ut.set(t,r)}}else r=s?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return r},bt=t=>{if(N(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?At(t):"",[t,e]};let Te=0;const Dt=()=>++Te;async function Qt(...t){const[e,n,s,i]=t,c=U({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let r=c.populateCache;const u=c.rollbackOnError;let p=c.optimisticData;const _=S=>typeof u=="function"?u(S):u!==!1,m=c.throwOnError;if(N(n)){const S=n,g=[],I=e.keys();for(const E of I)!/^\$(inf|sub)\$/.test(E)&&S(e.get(E)._k)&&g.push(E);return Promise.all(g.map(R))}return R(n);async function R(S){const[g]=bt(S);if(!g)return;const[I,E]=Gt(e,g),[lt,o,rt,Y]=F.get(e),q=()=>{const T=lt[g];return(N(c.revalidate)?c.revalidate(I().data,S):c.revalidate!==!1)&&(delete rt[g],delete Y[g],T&&T[0])?T[0](zt).then(()=>I().data):I().data};if(t.length<3)return q();let O=s,x,L=!1;const d=Dt();o[g]=[d,0];const B=!a(p),V=I(),$=V.data,ot=V._c,H=a(ot)?$:ot;if(B&&(p=N(p)?p(H,$):p,E({data:p,_c:H})),N(O))try{O=O(H)}catch(T){x=T,L=!0}if(O&&Jt(O))if(O=await O.catch(T=>{x=T,L=!0}),d!==o[g][0]){if(L)throw x;return O}else L&&B&&_(x)&&(r=!0,E({data:H,_c:A}));if(r&&!L)if(N(r)){const T=r(O,H);E({data:T,error:A,_c:A})}else E({data:O,error:A,_c:A});if(o[g][1]=Dt(),Promise.resolve(q()).then(()=>{E({_c:A})}),L){if(m)throw x;return}return O}}const kt=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},ye=(t,e)=>{if(!F.has(t)){const n=U(Oe,e),s=Object.create(null),i=Qt.bind(A,t);let c=W;const r=Object.create(null),u=(m,R)=>{const S=r[m]||[];return r[m]=S,S.push(R),()=>S.splice(S.indexOf(R),1)},p=(m,R,S)=>{t.set(m,R);const g=r[m];if(g)for(const I of g)I(R,S)},_=()=>{if(!F.has(t)&&(F.set(t,[s,Object.create(null),Object.create(null),Object.create(null),i,p,u]),!et)){const m=n.initFocus(setTimeout.bind(A,kt.bind(A,s,$t))),R=n.initReconnect(setTimeout.bind(A,kt.bind(A,s,Kt)));c=()=>{m&&m(),R&&R(),F.delete(t)}}};return _(),[t,i,_,c]}return[t,F.get(t)[4]]},Ae=(t,e,n,s,i)=>{const c=n.errorRetryCount,r=i.retryCount,u=~~((Math.random()+.5)*(1<<(r<8?r:8)))*n.errorRetryInterval;!a(c)&&r>c||setTimeout(s,u,i)},De=Ot,[Yt,_e]=ye(new Map),be=U({onLoadingSlow:W,onSuccess:W,onError:W,onErrorRetry:Ae,onDiscarded:W,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ht?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Ht?5e3:3e3,compare:De,isPaused:()=>!1,cache:Yt,mutate:_e,fallback:{}},me),Ie=(t,e)=>{const n=U(t,e);if(e){const{use:s,fallback:i}=t,{use:c,fallback:r}=e;s&&c&&(n.use=s.concat(c)),i&&r&&(n.fallback=U(i,r))}return n},Le=C.createContext({}),Ve="$inf$",Xt=st&&window.__SWR_DEVTOOLS_USE__,Ne=Xt?window.__SWR_DEVTOOLS_USE__:[],xe=()=>{Xt&&(window.__SWR_DEVTOOLS_REACT__=nt)},Zt=t=>N(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Pe=()=>U(be,C.useContext(Le)),je=t=>(e,n,s)=>t(e,n&&((...c)=>{const[r]=bt(e),[,,,u]=F.get(Yt);if(r.startsWith(Ve))return n(...c);const p=u[r];return a(p)?n(...c):(delete u[r],p)}),s),Fe=Ne.concat(je),Me=t=>function(...n){const s=Pe(),[i,c,r]=Zt(n),u=Ie(s,r);let p=t;const{use:_}=u,m=(_||[]).concat(Fe);for(let R=m.length;R--;)p=m[R](p);return p(i,c||u.fetcher||null,u)},qe=(t,e,n)=>{const s=e[t]||(e[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i>=0&&(s[i]=s[s.length-1],s.pop())}},Ye=(t,e)=>(...n)=>{const[s,i,c]=Zt(n),r=(c.use||[]).concat(e);return t(s,i,{...c,use:r})};xe();const wt=nt.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),mt={dedupe:!0},We=(t,e,n)=>{const{cache:s,compare:i,suspense:c,fallbackData:r,revalidateOnMount:u,revalidateIfStale:p,refreshInterval:_,refreshWhenHidden:m,refreshWhenOffline:R,keepPreviousData:S}=n,[g,I,E,lt]=F.get(s),[o,rt]=bt(t),Y=C.useRef(!1),q=C.useRef(!1),O=C.useRef(o),x=C.useRef(e),L=C.useRef(n),d=()=>L.current,B=()=>d().isVisible()&&d().isOnline(),[V,$,ot,H]=Gt(s,o),T=C.useRef({}).current,X=a(r)?a(n.fallback)?A:n.fallback[o]:r,It=(f,l)=>{for(const v in T){const h=v;if(h==="data"){if(!i(f[h],l[h])&&(!a(f[h])||!i(at,l[h])))return!1}else if(l[h]!==f[h])return!1}return!0},Lt=C.useMemo(()=>{const f=!o||!e?!1:a(u)?d().isPaused()||c?!1:p!==!1:u,l=y=>{const P=U(y);return delete P._k,f?{isValidating:!0,isLoading:!0,...P}:P},v=V(),h=H(),b=l(v),J=v===h?b:l(h);let w=b;return[()=>{const y=l(V());return It(y,w)?(w.data=y.data,w.isLoading=y.isLoading,w.isValidating=y.isValidating,w.error=y.error,w):(w=y,y)},()=>J]},[s,o]),K=re.useSyncExternalStore(C.useCallback(f=>ot(o,(l,v)=>{It(v,l)||f()}),[s,o]),Lt[0],Lt[1]),Vt=!Y.current,te=g[o]&&g[o].length>0,z=K.data,k=a(z)?X&&Jt(X)?wt(X):X:z,it=K.error,ft=C.useRef(k),at=S?a(z)?a(ft.current)?k:ft.current:z:k,Nt=te&&!a(it)?!1:Vt&&!a(u)?u:d().isPaused()?!1:c?a(k)?!1:p:a(k)||p,xt=!!(o&&e&&Vt&&Nt),ee=a(K.isValidating)?xt:K.isValidating,ne=a(K.isLoading)?xt:K.isLoading,Z=C.useCallback(async f=>{const l=x.current;if(!o||!l||q.current||d().isPaused())return!1;let v,h,b=!0;const J=f||{},w=!E[o]||!J.dedupe,y=()=>Ut?!q.current&&o===O.current&&Y.current:o===O.current,P={isValidating:!1,isLoading:!1},jt=()=>{$(P)},Ft=()=>{const D=E[o];D&&D[1]===h&&delete E[o]},Mt={isValidating:!0};a(V().data)&&(Mt.isLoading=!0);try{if(w&&($(Mt),n.loadingTimeout&&a(V().data)&&setTimeout(()=>{b&&y()&&d().onLoadingSlow(o,n)},n.loadingTimeout),E[o]=[l(rt),Dt()]),[v,h]=E[o],v=await v,w&&setTimeout(Ft,n.dedupingInterval),!E[o]||E[o][1]!==h)return w&&y()&&d().onDiscarded(o),!1;P.error=A;const D=I[o];if(!a(D)&&(h<=D[0]||h<=D[1]||D[1]===0))return jt(),w&&y()&&d().onDiscarded(o),!1;const j=V().data;P.data=i(j,v)?j:v,w&&y()&&d().onSuccess(v,o,n)}catch(D){Ft();const j=d(),{shouldRetryOnError:dt}=j;j.isPaused()||(P.error=D,w&&y()&&(j.onError(D,o,j),(dt===!0||N(dt)&&dt(D))&&(!d().revalidateOnFocus||!d().revalidateOnReconnect||B())&&j.onErrorRetry(D,o,j,se=>{const pt=g[o];pt&&pt[0]&&pt[0](qt,se)},{retryCount:(J.retryCount||0)+1,dedupe:!0})))}return b=!1,jt(),!0},[o,s]),Pt=C.useCallback((...f)=>Qt(s,O.current,...f),[]);if(gt(()=>{x.current=e,L.current=n,a(z)||(ft.current=z)}),gt(()=>{if(!o)return;const f=Z.bind(A,mt);let l=0;d().revalidateOnFocus&&(l=Date.now()+d().focusThrottleInterval);const h=qe(o,g,(b,J={})=>{if(b==$t){const w=Date.now();d().revalidateOnFocus&&w>l&&B()&&(l=w+d().focusThrottleInterval,f())}else if(b==Kt)d().revalidateOnReconnect&&B()&&f();else{if(b==zt)return Z();if(b==qt)return Z(J)}});return q.current=!1,O.current=o,Y.current=!0,$({_k:rt}),Nt&&(E[o]||(a(k)||et?f():ve(f))),()=>{q.current=!0,h()}},[o]),gt(()=>{let f;function l(){const h=N(_)?_(V().data):_;h&&f!==-1&&(f=setTimeout(v,h))}function v(){!V().error&&(m||d().isVisible())&&(R||d().isOnline())?Z(mt).then(l):l()}return l(),()=>{f&&(clearTimeout(f),f=-1)}},[_,m,R,o]),C.useDebugValue(at),c&&a(k)&&o){if(!Ut&&et)throw new Error("Fallback data is required when using Suspense in SSR.");x.current=e,L.current=n,q.current=!1;const f=lt[o];if(!a(f)){const l=Pt(f);wt(l)}if(a(it)){const l=Z(mt);a(at)||(l.status="fulfilled",l.value=!0),wt(l)}else throw it}return{mutate:Pt,get data(){return T.data=!0,at},get error(){return T.error=!0,it},get isValidating(){return T.isValidating=!0,ee},get isLoading(){return T.isLoading=!0,ne}}},Ue=Me(We);class He{constructor(e={}){var n;this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.serverIndex=e.serverIndex,this.baseOptions={...e.baseOptions,headers:{...(n=e.baseOptions)==null?void 0:n.headers}},this.formDataCtor=e.formDataCtor}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(n.test(e)||e.toLowerCase()==="application/json-patch+json")}}const M=Bt.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});let tt=null;M.interceptors.response.use(t=>t,async t=>{const e=t.config;if(tt)return await tt,M(e);if(t.response.status===oe.Unauthorized&&!e._retry){e._retry=!0;try{return tt=Bt.post("/auth/refresh-token").finally(()=>{tt=null}),await tt,M(e)}catch(n){return window.location.href="/auth/logout",Promise.reject(n)}}return Promise.reject(t)});const Q=new He({basePath:"/api"});new le(Q,G,M);const ke=new ae(Q,G,M),Xe=new ce(Q,G,M),Ze=new ue(Q,G,M),tn=new ie(Q,G,M);new fe(Q,G,M);const Be=nt.createContext({seqId:"1"}),$e=t=>ke.aggregateGermlineSNVOccurrences(t.seqId,t.aggregationBody).then(e=>e.data);function en(t,e=30,n=!1,s){let i;const{seqId:c}=nt.useContext(Be);n?i={seqId:c,aggregationBody:{field:t,size:e}}:i=null;const r=de.getResolvedActiveQuery(s);return r&&i&&(i.aggregationBody.sqon={content:r.content,op:r.op}),Ue(i,$e,{revalidateOnFocus:!1})}export{Be as A,Ut as I,A as U,Ue as a,Pe as b,tn as c,U as d,gt as e,Dt as g,Xe as i,Ze as m,ke as o,bt as s,en as u,Ye as w};
