import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as i}from"./index-CGj_12n1.js";import{B as K}from"./button-3bVsk-lN.js";import{L as z}from"./label-CnYaQ8j3.js";import{a as H,c as C,b}from"./index-CcLUv2_A.js";import{P as g,u as k}from"./index-COcwYKbe.js";import{j as N,u as Q,R as $,I as W,C as X}from"./dropdown-menu-Bb-Cj6Tn.js";import{u as Y}from"./index-A6VgBoaw.js";import{u as J}from"./index-qxuqJ0RB.js";import{P as Z}from"./index-BOEjv1S3.js";import{c as S}from"./utils-D-KgF5mV.js";import{q as E,M as ee}from"./query-builder-remote-Bch3VBmc.js";import{u as oe}from"./applications-config-q4OA8PiL.js";import{u as re}from"./i18n-BeFm-yE7.js";var j="Radio",[te,w]=C(j),[se,ae]=te(j),A=i.forwardRef((t,c)=>{const{__scopeRadio:a,name:l,checked:s=!1,required:r,disabled:d,value:R="on",onCheck:u,form:f,...m}=t,[p,o]=i.useState(null),n=k(c,x=>o(x)),v=i.useRef(!1),y=p?f||!!p.closest("form"):!0;return e.jsxs(se,{scope:a,checked:s,disabled:d,children:[e.jsx(g.button,{type:"button",role:"radio","aria-checked":s,"data-state":F(s),"data-disabled":d?"":void 0,disabled:d,value:R,...m,ref:n,onClick:b(t.onClick,x=>{s||u==null||u(),y&&(v.current=x.isPropagationStopped(),v.current||x.stopPropagation())})}),y&&e.jsx(D,{control:p,bubbles:!v.current,name:l,value:R,checked:s,required:r,disabled:d,form:f,style:{transform:"translateX(-100%)"}})]})});A.displayName=j;var G="RadioIndicator",P=i.forwardRef((t,c)=>{const{__scopeRadio:a,forceMount:l,...s}=t,r=ae(G,a);return e.jsx(Z,{present:l||r.checked,children:e.jsx(g.span,{"data-state":F(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:c})})});P.displayName=G;var ne="RadioBubbleInput",D=i.forwardRef(({__scopeRadio:t,control:c,checked:a,bubbles:l=!0,...s},r)=>{const d=i.useRef(null),R=k(d,r),u=J(a),f=Y(c);return i.useEffect(()=>{const m=d.current;if(!m)return;const p=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(p,"checked").set;if(u!==a&&n){const v=new Event("click",{bubbles:l});n.call(m,a),m.dispatchEvent(v)}},[u,a,l]),e.jsx(g.input,{type:"radio","aria-hidden":!0,defaultChecked:a,...s,tabIndex:-1,ref:R,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});D.displayName=ne;function F(t){return t?"checked":"unchecked"}var ie=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],h="RadioGroup",[ce,Ne]=C(h,[N,w]),T=N(),L=w(),[de,le]=ce(h),M=i.forwardRef((t,c)=>{const{__scopeRadioGroup:a,name:l,defaultValue:s,value:r,required:d=!1,disabled:R=!1,orientation:u,dir:f,loop:m=!0,onValueChange:p,...o}=t,n=T(a),v=Q(f),[y,x]=H({prop:r,defaultProp:s??null,onChange:p,caller:h});return e.jsx(de,{scope:a,name:l,required:d,disabled:R,value:y,onValueChange:x,children:e.jsx($,{asChild:!0,...n,orientation:u,dir:v,loop:m,children:e.jsx(g.div,{role:"radiogroup","aria-required":d,"aria-orientation":u,"data-disabled":R?"":void 0,dir:v,...o,ref:c})})})});M.displayName=h;var q="RadioGroupItem",B=i.forwardRef((t,c)=>{const{__scopeRadioGroup:a,disabled:l,...s}=t,r=le(q,a),d=r.disabled||l,R=T(a),u=L(a),f=i.useRef(null),m=k(c,f),p=r.value===s.value,o=i.useRef(!1);return i.useEffect(()=>{const n=y=>{ie.includes(y.key)&&(o.current=!0)},v=()=>o.current=!1;return document.addEventListener("keydown",n),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",n),document.removeEventListener("keyup",v)}},[]),e.jsx(W,{asChild:!0,...R,focusable:!d,active:p,children:e.jsx(A,{disabled:d,required:r.required,checked:p,...u,...s,name:r.name,ref:m,onCheck:()=>r.onValueChange(s.value),onKeyDown:b(n=>{n.key==="Enter"&&n.preventDefault()}),onFocus:b(s.onFocus,()=>{var n;o.current&&((n=f.current)==null||n.click())})})})});B.displayName=q;var ue="RadioGroupIndicator",O=i.forwardRef((t,c)=>{const{__scopeRadioGroup:a,...l}=t,s=L(a);return e.jsx(P,{...s,...l,ref:c})});O.displayName=ue;var V=M,U=B,pe=O;function I({className:t,...c}){return e.jsx(V,{className:S("grid gap-2",t),...c})}I.displayName=V.displayName;function _({className:t,...c}){return e.jsx(U,{className:S("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...c,children:e.jsx(pe,{className:"flex items-center justify-center",children:e.jsx(X,{className:"h-2.5 w-2.5 fill-current text-current"})})})}_.displayName=U.displayName;I.__docgenInfo={description:"",methods:[]};_.__docgenInfo={description:"",methods:[]};function fe({data:t,field:c}){const{t:a}=re(),[l,s]=i.useState(t||[]),[r,d]=i.useState(null),u=oe().variant_exploration.app_id;i.useEffect(()=>{let o=E.getActiveQuery(u).content.find(n=>n.content.field===c.key);if(o){let n=o.content.value;n.length>=1&&d(n[0])}else d(null);s(t||[])},[t]);const f=i.useCallback(o=>{o.key!==r&&o.key!==void 0&&(d(o.key||null),E.updateActiveQueryField(u,{field:c.key,value:[...o.key],merge_strategy:ee.OVERRIDE_VALUES}))},[r]),m=i.useCallback(o=>r===o.key,[r]),p=i.useCallback(()=>{d(null)},[r]);return e.jsxs("div",{className:"p-2 w-full max-w-md",children:[e.jsx(I,{children:l.map(o=>e.jsx("div",{className:"space-y-3 pt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{value:o.key||"",id:o.key,checked:m(o),onClick:()=>{f(o)}}),e.jsx(z,{htmlFor:o.key,children:o.key})]}),e.jsx("span",{className:"bg-accent px-2 py-1 rounded-md font-mono text-xs",children:o.count})]})},o.key))}),r!==null&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-4 border-border"}),e.jsx("div",{className:"flex align-right justify-end items-center space-x-2",children:e.jsx(K,{onClick:p,size:"xs",children:a("common.filters.buttons.clear")})})]})]})}fe.__docgenInfo={description:"",methods:[],displayName:"ToggleFilter",props:{data:{required:!1,tsType:{name:"Array",elements:[{name:"Aggregation"}],raw:"Aggregation[]"},description:""},field:{required:!0,tsType:{name:"AggregationConfig"},description:""}}};export{fe as T};
