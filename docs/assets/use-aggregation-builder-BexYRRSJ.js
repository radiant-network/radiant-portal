import{r as C,R as nt}from"./index-DQLiH3RP.js";import{s as re}from"./index-BjfAAjgr.js";import{a as Bt,H as oe,O as ie,B as J,I as ae,M as ce,b as ue,C as le,A as fe}from"./api-fYFwtGmU.js";import{q as de}from"./query-builder-remote-DQDcrGW9.js";class pe{constructor(e={}){var n;this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.serverIndex=e.serverIndex,this.baseOptions={headers:{...(n=e.baseOptions)==null?void 0:n.headers,"User-Agent":"OpenAPI-Generator/typescript-axios"},...e.baseOptions},this.formDataCtor=e.formDataCtor}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(n.test(e)||e.toLowerCase()==="application/json-patch+json")}}const M=Bt.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});let tt=null;M.interceptors.response.use(t=>t,async t=>{const e=t.config;if(tt)return await tt,M(e);if(t.response.status===oe.Unauthorized&&!e._retry){e._retry=!0;try{return tt=Bt.post("/auth/refresh-token").finally(()=>{tt=null}),await tt,M(e)}catch(n){return window.location.href="/auth/logout",Promise.reject(n)}}return Promise.reject(t)});const Q=new pe({basePath:"/api"});new ue(Q,J,M);const he=new ie(Q,J,M),Ye=new ae(Q,J,M),Xe=new ce(Q,J,M);new le(Q,J,M);new fe(Q,J,M);const $t=0,Kt=1,zt=2,qt=3;var Wt=Object.prototype.hasOwnProperty;function Ot(t,e){var n,s;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((s=t.length)===e.length)for(;s--&&Ot(t[s],e[s]););return s===-1}if(!n||typeof t=="object"){s=0;for(n in t)if(Wt.call(t,n)&&++s&&!Wt.call(e,n)||!(n in e)||!Ot(t[n],e[n]))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}const F=new WeakMap,W=()=>{},A=W(),vt=Object,a=t=>t===A,x=t=>typeof t=="function",U=(t,e)=>({...t,...e}),Gt=t=>x(t.then),ht={},ct={},_t="undefined",st=typeof window!=_t,Ct=typeof document!=_t,ge=st&&"Deno"in window,Ee=()=>st&&typeof window.requestAnimationFrame!=_t,Jt=(t,e)=>{const n=F.get(t);return[()=>!a(e)&&t.get(e)||ht,s=>{if(!a(e)){const i=t.get(e);e in ct||(ct[e]=i),n[5](e,U(i,s),i||ht)}},n[6],()=>!a(e)&&e in ct?ct[e]:!a(e)&&t.get(e)||ht]};let Tt=!0;const Re=()=>Tt,[yt,St]=st&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[W,W],we=()=>{const t=Ct&&document.visibilityState;return a(t)||t!=="hidden"},me=t=>(Ct&&document.addEventListener("visibilitychange",t),yt("focus",t),()=>{Ct&&document.removeEventListener("visibilitychange",t),St("focus",t)}),Oe=t=>{const e=()=>{Tt=!0,t()},n=()=>{Tt=!1};return yt("online",e),yt("offline",n),()=>{St("online",e),St("offline",n)}},ve={isOnline:Re,isVisible:we},Ce={initFocus:me,initReconnect:Oe},Ut=!nt.useId,et=!st||ge,Te=t=>Ee()?window.requestAnimationFrame(t):setTimeout(t,1),gt=et?C.useEffect:C.useLayoutEffect,Et=typeof navigator<"u"&&navigator.connection,Ht=!et&&Et&&(["slow-2g","2g"].includes(Et.effectiveType)||Et.saveData),ut=new WeakMap,ye=t=>vt.prototype.toString.call(t),Rt=(t,e)=>t===`[object ${e}]`;let Se=0;const At=t=>{const e=typeof t,n=ye(t),s=Rt(n,"Date"),i=Rt(n,"RegExp"),c=Rt(n,"Object");let r,u;if(vt(t)===t&&!s&&!i){if(r=ut.get(t),r)return r;if(r=++Se+"~",ut.set(t,r),Array.isArray(t)){for(r="@",u=0;u<t.length;u++)r+=At(t[u])+",";ut.set(t,r)}if(c){r="#";const p=vt.keys(t).sort();for(;!a(u=p.pop());)a(t[u])||(r+=u+":"+At(t[u])+",");ut.set(t,r)}}else r=s?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return r},It=t=>{if(x(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?At(t):"",[t,e]};let Ae=0;const Dt=()=>++Ae;async function Qt(...t){const[e,n,s,i]=t,c=U({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let r=c.populateCache;const u=c.rollbackOnError;let p=c.optimisticData;const _=T=>typeof u=="function"?u(T):u!==!1,m=c.throwOnError;if(x(n)){const T=n,g=[],b=e.keys();for(const E of b)!/^\$(inf|sub)\$/.test(E)&&T(e.get(E)._k)&&g.push(E);return Promise.all(g.map(R))}return R(n);async function R(T){const[g]=It(T);if(!g)return;const[b,E]=Jt(e,g),[lt,o,rt,Y]=F.get(e),q=()=>{const y=lt[g];return(x(c.revalidate)?c.revalidate(b().data,T):c.revalidate!==!1)&&(delete rt[g],delete Y[g],y&&y[0])?y[0](zt).then(()=>b().data):b().data};if(t.length<3)return q();let O=s,N,L=!1;const d=Dt();o[g]=[d,0];const B=!a(p),V=b(),$=V.data,ot=V._c,H=a(ot)?$:ot;if(B&&(p=x(p)?p(H,$):p,E({data:p,_c:H})),x(O))try{O=O(H)}catch(y){N=y,L=!0}if(O&&Gt(O))if(O=await O.catch(y=>{N=y,L=!0}),d!==o[g][0]){if(L)throw N;return O}else L&&B&&_(N)&&(r=!0,E({data:H,_c:A}));if(r&&!L)if(x(r)){const y=r(O,H);E({data:y,error:A,_c:A})}else E({data:O,error:A,_c:A});if(o[g][1]=Dt(),Promise.resolve(q()).then(()=>{E({_c:A})}),L){if(m)throw N;return}return O}}const kt=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},De=(t,e)=>{if(!F.has(t)){const n=U(Ce,e),s=Object.create(null),i=Qt.bind(A,t);let c=W;const r=Object.create(null),u=(m,R)=>{const T=r[m]||[];return r[m]=T,T.push(R),()=>T.splice(T.indexOf(R),1)},p=(m,R,T)=>{t.set(m,R);const g=r[m];if(g)for(const b of g)b(R,T)},_=()=>{if(!F.has(t)&&(F.set(t,[s,Object.create(null),Object.create(null),Object.create(null),i,p,u]),!et)){const m=n.initFocus(setTimeout.bind(A,kt.bind(A,s,$t))),R=n.initReconnect(setTimeout.bind(A,kt.bind(A,s,Kt)));c=()=>{m&&m(),R&&R(),F.delete(t)}}};return _(),[t,i,_,c]}return[t,F.get(t)[4]]},_e=(t,e,n,s,i)=>{const c=n.errorRetryCount,r=i.retryCount,u=~~((Math.random()+.5)*(1<<(r<8?r:8)))*n.errorRetryInterval;!a(c)&&r>c||setTimeout(s,u,i)},Ie=Ot,[Yt,be]=De(new Map),Le=U({onLoadingSlow:W,onSuccess:W,onError:W,onErrorRetry:_e,onDiscarded:W,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ht?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Ht?5e3:3e3,compare:Ie,isPaused:()=>!1,cache:Yt,mutate:be,fallback:{}},ve),Ve=(t,e)=>{const n=U(t,e);if(e){const{use:s,fallback:i}=t,{use:c,fallback:r}=e;s&&c&&(n.use=s.concat(c)),i&&r&&(n.fallback=U(i,r))}return n},xe=C.createContext({}),Ne="$inf$",Xt=st&&window.__SWR_DEVTOOLS_USE__,Pe=Xt?window.__SWR_DEVTOOLS_USE__:[],je=()=>{Xt&&(window.__SWR_DEVTOOLS_REACT__=nt)},Zt=t=>x(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Fe=()=>U(Le,C.useContext(xe)),Me=t=>(e,n,s)=>t(e,n&&((...c)=>{const[r]=It(e),[,,,u]=F.get(Yt);if(r.startsWith(Ne))return n(...c);const p=u[r];return a(p)?n(...c):(delete u[r],p)}),s),qe=Pe.concat(Me),We=t=>function(...n){const s=Fe(),[i,c,r]=Zt(n),u=Ve(s,r);let p=t;const{use:_}=u,m=(_||[]).concat(qe);for(let R=m.length;R--;)p=m[R](p);return p(i,c||u.fetcher||null,u)},Ue=(t,e,n)=>{const s=e[t]||(e[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i>=0&&(s[i]=s[s.length-1],s.pop())}},Ze=(t,e)=>(...n)=>{const[s,i,c]=Zt(n),r=(c.use||[]).concat(e);return t(s,i,{...c,use:r})};je();const wt=nt.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),mt={dedupe:!0},He=(t,e,n)=>{const{cache:s,compare:i,suspense:c,fallbackData:r,revalidateOnMount:u,revalidateIfStale:p,refreshInterval:_,refreshWhenHidden:m,refreshWhenOffline:R,keepPreviousData:T}=n,[g,b,E,lt]=F.get(s),[o,rt]=It(t),Y=C.useRef(!1),q=C.useRef(!1),O=C.useRef(o),N=C.useRef(e),L=C.useRef(n),d=()=>L.current,B=()=>d().isVisible()&&d().isOnline(),[V,$,ot,H]=Jt(s,o),y=C.useRef({}).current,X=a(r)?a(n.fallback)?A:n.fallback[o]:r,bt=(f,l)=>{for(const v in y){const h=v;if(h==="data"){if(!i(f[h],l[h])&&(!a(f[h])||!i(at,l[h])))return!1}else if(l[h]!==f[h])return!1}return!0},Lt=C.useMemo(()=>{const f=!o||!e?!1:a(u)?d().isPaused()||c?!1:p!==!1:u,l=S=>{const P=U(S);return delete P._k,f?{isValidating:!0,isLoading:!0,...P}:P},v=V(),h=H(),I=l(v),G=v===h?I:l(h);let w=I;return[()=>{const S=l(V());return bt(S,w)?(w.data=S.data,w.isLoading=S.isLoading,w.isValidating=S.isValidating,w.error=S.error,w):(w=S,S)},()=>G]},[s,o]),K=re.useSyncExternalStore(C.useCallback(f=>ot(o,(l,v)=>{bt(v,l)||f()}),[s,o]),Lt[0],Lt[1]),Vt=!Y.current,te=g[o]&&g[o].length>0,z=K.data,k=a(z)?X&&Gt(X)?wt(X):X:z,it=K.error,ft=C.useRef(k),at=T?a(z)?a(ft.current)?k:ft.current:z:k,xt=te&&!a(it)?!1:Vt&&!a(u)?u:d().isPaused()?!1:c?a(k)?!1:p:a(k)||p,Nt=!!(o&&e&&Vt&&xt),ee=a(K.isValidating)?Nt:K.isValidating,ne=a(K.isLoading)?Nt:K.isLoading,Z=C.useCallback(async f=>{const l=N.current;if(!o||!l||q.current||d().isPaused())return!1;let v,h,I=!0;const G=f||{},w=!E[o]||!G.dedupe,S=()=>Ut?!q.current&&o===O.current&&Y.current:o===O.current,P={isValidating:!1,isLoading:!1},jt=()=>{$(P)},Ft=()=>{const D=E[o];D&&D[1]===h&&delete E[o]},Mt={isValidating:!0};a(V().data)&&(Mt.isLoading=!0);try{if(w&&($(Mt),n.loadingTimeout&&a(V().data)&&setTimeout(()=>{I&&S()&&d().onLoadingSlow(o,n)},n.loadingTimeout),E[o]=[l(rt),Dt()]),[v,h]=E[o],v=await v,w&&setTimeout(Ft,n.dedupingInterval),!E[o]||E[o][1]!==h)return w&&S()&&d().onDiscarded(o),!1;P.error=A;const D=b[o];if(!a(D)&&(h<=D[0]||h<=D[1]||D[1]===0))return jt(),w&&S()&&d().onDiscarded(o),!1;const j=V().data;P.data=i(j,v)?j:v,w&&S()&&d().onSuccess(v,o,n)}catch(D){Ft();const j=d(),{shouldRetryOnError:dt}=j;j.isPaused()||(P.error=D,w&&S()&&(j.onError(D,o,j),(dt===!0||x(dt)&&dt(D))&&(!d().revalidateOnFocus||!d().revalidateOnReconnect||B())&&j.onErrorRetry(D,o,j,se=>{const pt=g[o];pt&&pt[0]&&pt[0](qt,se)},{retryCount:(G.retryCount||0)+1,dedupe:!0})))}return I=!1,jt(),!0},[o,s]),Pt=C.useCallback((...f)=>Qt(s,O.current,...f),[]);if(gt(()=>{N.current=e,L.current=n,a(z)||(ft.current=z)}),gt(()=>{if(!o)return;const f=Z.bind(A,mt);let l=0;d().revalidateOnFocus&&(l=Date.now()+d().focusThrottleInterval);const h=Ue(o,g,(I,G={})=>{if(I==$t){const w=Date.now();d().revalidateOnFocus&&w>l&&B()&&(l=w+d().focusThrottleInterval,f())}else if(I==Kt)d().revalidateOnReconnect&&B()&&f();else{if(I==zt)return Z();if(I==qt)return Z(G)}});return q.current=!1,O.current=o,Y.current=!0,$({_k:rt}),xt&&(E[o]||(a(k)||et?f():Te(f))),()=>{q.current=!0,h()}},[o]),gt(()=>{let f;function l(){const h=x(_)?_(V().data):_;h&&f!==-1&&(f=setTimeout(v,h))}function v(){!V().error&&(m||d().isVisible())&&(R||d().isOnline())?Z(mt).then(l):l()}return l(),()=>{f&&(clearTimeout(f),f=-1)}},[_,m,R,o]),C.useDebugValue(at),c&&a(k)&&o){if(!Ut&&et)throw new Error("Fallback data is required when using Suspense in SSR.");N.current=e,L.current=n,q.current=!1;const f=lt[o];if(!a(f)){const l=Pt(f);wt(l)}if(a(it)){const l=Z(mt);a(at)||(l.status="fulfilled",l.value=!0),wt(l)}else throw it}return{mutate:Pt,get data(){return y.data=!0,at},get error(){return y.error=!0,it},get isValidating(){return y.isValidating=!0,ee},get isLoading(){return y.isLoading=!0,ne}}},ke=We(He),Be=nt.createContext({seqId:"1"}),$e=t=>he.aggregateGermlineOccurrences(t.seqId,t.aggregationBody).then(e=>e.data);function tn(t,e=30,n=!1,s){let i;const{seqId:c}=nt.useContext(Be);n?i={seqId:c,aggregationBody:{field:t,size:e}}:i=null;const r=de.getResolvedActiveQuery(s);return r&&i&&(i.aggregationBody.sqon={content:r.content,op:r.op}),ke(i,$e,{revalidateOnFocus:!1})}export{Be as A,Ut as I,A as U,ke as a,Fe as b,U as c,gt as d,Dt as g,Ye as i,Xe as m,he as o,It as s,tn as u,Ze as w};
