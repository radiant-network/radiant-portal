import{r as O,R as nt}from"./index-CGj_12n1.js";import{s as re}from"./index-DxlLpgFR.js";import{a as $t,H as ie,O as ae,C as ce,B as G,I as ue,M as le,b as fe,A as de}from"./api-yy8fQEBq.js";import{q as pe}from"./query-builder-remote-2SFIQwuv.js";const Kt=0,zt=1,Jt=2,qt=3;var Wt=Object.prototype.hasOwnProperty;function Ot(t,e){var n,s;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((s=t.length)===e.length)for(;s--&&Ot(t[s],e[s]););return s===-1}if(!n||typeof t=="object"){s=0;for(n in t)if(Wt.call(t,n)&&++s&&!Wt.call(e,n)||!(n in e)||!Ot(t[n],e[n]))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}const F=new WeakMap,W=()=>{},S=W(),vt=Object,a=t=>t===S,N=t=>typeof t=="function",U=(t,e)=>({...t,...e}),Gt=t=>N(t.then),ht={},ct={},_t="undefined",st=typeof window!=_t,Ct=typeof document!=_t,he=st&&"Deno"in window,ge=()=>st&&typeof window.requestAnimationFrame!=_t,Qt=(t,e)=>{const n=F.get(t);return[()=>!a(e)&&t.get(e)||ht,s=>{if(!a(e)){const i=t.get(e);e in ct||(ct[e]=i),n[5](e,U(i,s),i||ht)}},n[6],()=>!a(e)&&e in ct?ct[e]:!a(e)&&t.get(e)||ht]};let St=!0;const Ee=()=>St,[Tt,yt]=st&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[W,W],Re=()=>{const t=Ct&&document.visibilityState;return a(t)||t!=="hidden"},me=t=>(Ct&&document.addEventListener("visibilitychange",t),Tt("focus",t),()=>{Ct&&document.removeEventListener("visibilitychange",t),yt("focus",t)}),we=t=>{const e=()=>{St=!0,t()},n=()=>{St=!1};return Tt("online",e),Tt("offline",n),()=>{yt("online",e),yt("offline",n)}},Oe={isOnline:Ee,isVisible:Re},ve={initFocus:me,initReconnect:we},Ut=!nt.useId,et=!st||he,Ce=t=>ge()?window.requestAnimationFrame(t):setTimeout(t,1),gt=et?O.useEffect:O.useLayoutEffect,Et=typeof navigator<"u"&&navigator.connection,Ht=!et&&Et&&(["slow-2g","2g"].includes(Et.effectiveType)||Et.saveData),ut=new WeakMap,Se=t=>vt.prototype.toString.call(t),Rt=(t,e)=>t===`[object ${e}]`;let Te=0;const At=t=>{const e=typeof t,n=Se(t),s=Rt(n,"Date"),i=Rt(n,"RegExp"),c=Rt(n,"Object");let o,l;if(vt(t)===t&&!s&&!i){if(o=ut.get(t),o)return o;if(o=++Te+"~",ut.set(t,o),Array.isArray(t)){for(o="@",l=0;l<t.length;l++)o+=At(t[l])+",";ut.set(t,o)}if(c){o="#";const h=vt.keys(t).sort();for(;!a(l=h.pop());)a(t[l])||(o+=l+":"+At(t[l])+",");ut.set(t,o)}}else o=s?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},bt=t=>{if(N(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?At(t):"",[t,e]};let ye=0;const Dt=()=>++ye;async function Yt(...t){const[e,n,s,i]=t,c=U({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let o=c.populateCache;const l=c.rollbackOnError;let h=c.optimisticData;const _=T=>typeof l=="function"?l(T):l!==!1,v=c.throwOnError;if(N(n)){const T=n,g=[],I=e.keys();for(const E of I)!/^\$(inf|sub)\$/.test(E)&&T(e.get(E)._k)&&g.push(E);return Promise.all(g.map(m))}return m(n);async function m(T){const[g]=bt(T);if(!g)return;const[I,E]=Qt(e,g),[lt,r,ot,Y]=F.get(e),q=()=>{const y=lt[g];return(N(c.revalidate)?c.revalidate(I().data,T):c.revalidate!==!1)&&(delete ot[g],delete Y[g],y&&y[0])?y[0](Jt).then(()=>I().data):I().data};if(t.length<3)return q();let C=s,x,L=!1;const p=Dt();r[g]=[p,0];const k=!a(h),V=I(),$=V.data,rt=V._c,H=a(rt)?$:rt;if(k&&(h=N(h)?h(H,$):h,E({data:h,_c:H})),N(C))try{C=C(H)}catch(y){x=y,L=!0}if(C&&Gt(C))if(C=await C.catch(y=>{x=y,L=!0}),p!==r[g][0]){if(L)throw x;return C}else L&&k&&_(x)&&(o=!0,E({data:H,_c:S}));if(o&&!L)if(N(o)){const y=o(C,H);E({data:y,error:S,_c:S})}else E({data:C,error:S,_c:S});if(r[g][1]=Dt(),Promise.resolve(q()).then(()=>{E({_c:S})}),L){if(v)throw x;return}return C}}const Bt=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Ae=(t,e)=>{if(!F.has(t)){const n=U(ve,e),s=Object.create(null),i=Yt.bind(S,t);let c=W;const o=Object.create(null),l=(v,m)=>{const T=o[v]||[];return o[v]=T,T.push(m),()=>T.splice(T.indexOf(m),1)},h=(v,m,T)=>{t.set(v,m);const g=o[v];if(g)for(const I of g)I(m,T)},_=()=>{if(!F.has(t)&&(F.set(t,[s,Object.create(null),Object.create(null),Object.create(null),i,h,l]),!et)){const v=n.initFocus(setTimeout.bind(S,Bt.bind(S,s,Kt))),m=n.initReconnect(setTimeout.bind(S,Bt.bind(S,s,zt)));c=()=>{v&&v(),m&&m(),F.delete(t)}}};return _(),[t,i,_,c]}return[t,F.get(t)[4]]},De=(t,e,n,s,i)=>{const c=n.errorRetryCount,o=i.retryCount,l=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!a(c)&&o>c||setTimeout(s,l,i)},_e=Ot,[Xt,be]=Ae(new Map),Ie=U({onLoadingSlow:W,onSuccess:W,onError:W,onErrorRetry:De,onDiscarded:W,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ht?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Ht?5e3:3e3,compare:_e,isPaused:()=>!1,cache:Xt,mutate:be,fallback:{}},Oe),Le=(t,e)=>{const n=U(t,e);if(e){const{use:s,fallback:i}=t,{use:c,fallback:o}=e;s&&c&&(n.use=s.concat(c)),i&&o&&(n.fallback=U(i,o))}return n},Ve=O.createContext({}),Ne="$inf$",Zt=st&&window.__SWR_DEVTOOLS_USE__,xe=Zt?window.__SWR_DEVTOOLS_USE__:[],Pe=()=>{Zt&&(window.__SWR_DEVTOOLS_REACT__=nt)},te=t=>N(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],je=()=>{const t=O.useContext(Ve);return O.useMemo(()=>U(Ie,t),[t])},Fe=t=>(e,n,s)=>t(e,n&&((...c)=>{const[o]=bt(e),[,,,l]=F.get(Xt);if(o.startsWith(Ne))return n(...c);const h=l[o];return a(h)?n(...c):(delete l[o],h)}),s),Me=xe.concat(Fe),qe=t=>function(...n){const s=je(),[i,c,o]=te(n),l=Le(s,o);let h=t;const{use:_}=l,v=(_||[]).concat(Me);for(let m=v.length;m--;)h=v[m](h);return h(i,c||l.fetcher||null,l)},We=(t,e,n)=>{const s=e[t]||(e[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i>=0&&(s[i]=s[s.length-1],s.pop())}},Xe=(t,e)=>(...n)=>{const[s,i,c]=te(n),o=(c.use||[]).concat(e);return t(s,i,{...c,use:o})};Pe();const mt=nt.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),wt={dedupe:!0},kt=Promise.resolve(S),Ue=(t,e,n)=>{const{cache:s,compare:i,suspense:c,fallbackData:o,revalidateOnMount:l,revalidateIfStale:h,refreshInterval:_,refreshWhenHidden:v,refreshWhenOffline:m,keepPreviousData:T}=n,[g,I,E,lt]=F.get(s),[r,ot]=bt(t),Y=O.useRef(!1),q=O.useRef(!1),C=O.useRef(r),x=O.useRef(e),L=O.useRef(n),p=()=>L.current,k=()=>p().isVisible()&&p().isOnline(),[V,$,rt,H]=Qt(s,r),y=O.useRef({}).current,X=a(o)?a(n.fallback)?S:n.fallback[r]:o,It=(u,d)=>{for(const R in y){const f=R;if(f==="data"){if(!i(u[f],d[f])&&(!a(u[f])||!i(at,d[f])))return!1}else if(d[f]!==u[f])return!1}return!0},Lt=O.useMemo(()=>{const u=!r||!e?!1:a(l)?p().isPaused()||c?!1:h!==!1:l,d=A=>{const P=U(A);return delete P._k,u?{isValidating:!0,isLoading:!0,...P}:P},R=V(),f=H(),b=d(R),J=R===f?b:d(f);let w=b;return[()=>{const A=d(V());return It(A,w)?(w.data=A.data,w.isLoading=A.isLoading,w.isValidating=A.isValidating,w.error=A.error,w):(w=A,A)},()=>J]},[s,r]),K=re.useSyncExternalStore(O.useCallback(u=>rt(r,(d,R)=>{It(R,d)||u()}),[s,r]),Lt[0],Lt[1]),Vt=!Y.current,ee=g[r]&&g[r].length>0,z=K.data,B=a(z)?X&&Gt(X)?mt(X):X:z,it=K.error,ft=O.useRef(B),at=T?a(z)?a(ft.current)?B:ft.current:z:B,Nt=ee&&!a(it)?!1:Vt&&!a(l)?l:p().isPaused()?!1:c?a(B)?!1:h:a(B)||h,xt=!!(r&&e&&Vt&&Nt),ne=a(K.isValidating)?xt:K.isValidating,se=a(K.isLoading)?xt:K.isLoading,Z=O.useCallback(async u=>{const d=x.current;if(!r||!d||q.current||p().isPaused())return!1;let R,f,b=!0;const J=u||{},w=!E[r]||!J.dedupe,A=()=>Ut?!q.current&&r===C.current&&Y.current:r===C.current,P={isValidating:!1,isLoading:!1},jt=()=>{$(P)},Ft=()=>{const D=E[r];D&&D[1]===f&&delete E[r]},Mt={isValidating:!0};a(V().data)&&(Mt.isLoading=!0);try{if(w&&($(Mt),n.loadingTimeout&&a(V().data)&&setTimeout(()=>{b&&A()&&p().onLoadingSlow(r,n)},n.loadingTimeout),E[r]=[d(ot),Dt()]),[R,f]=E[r],R=await R,w&&setTimeout(Ft,n.dedupingInterval),!E[r]||E[r][1]!==f)return w&&A()&&p().onDiscarded(r),!1;P.error=S;const D=I[r];if(!a(D)&&(f<=D[0]||f<=D[1]||D[1]===0))return jt(),w&&A()&&p().onDiscarded(r),!1;const j=V().data;P.data=i(j,R)?j:R,w&&A()&&p().onSuccess(R,r,n)}catch(D){Ft();const j=p(),{shouldRetryOnError:dt}=j;j.isPaused()||(P.error=D,w&&A()&&(j.onError(D,r,j),(dt===!0||N(dt)&&dt(D))&&(!p().revalidateOnFocus||!p().revalidateOnReconnect||k())&&j.onErrorRetry(D,r,j,oe=>{const pt=g[r];pt&&pt[0]&&pt[0](qt,oe)},{retryCount:(J.retryCount||0)+1,dedupe:!0})))}return b=!1,jt(),!0},[r,s]),Pt=O.useCallback((...u)=>Yt(s,C.current,...u),[]);if(gt(()=>{x.current=e,L.current=n,a(z)||(ft.current=z)}),gt(()=>{if(!r)return;const u=Z.bind(S,wt);let d=0;p().revalidateOnFocus&&(d=Date.now()+p().focusThrottleInterval);const f=We(r,g,(b,J={})=>{if(b==Kt){const w=Date.now();p().revalidateOnFocus&&w>d&&k()&&(d=w+p().focusThrottleInterval,u())}else if(b==zt)p().revalidateOnReconnect&&k()&&u();else{if(b==Jt)return Z();if(b==qt)return Z(J)}});return q.current=!1,C.current=r,Y.current=!0,$({_k:ot}),Nt&&(E[r]||(a(B)||et?u():Ce(u))),()=>{q.current=!0,f()}},[r]),gt(()=>{let u;function d(){const f=N(_)?_(V().data):_;f&&u!==-1&&(u=setTimeout(R,f))}function R(){!V().error&&(v||p().isVisible())&&(m||p().isOnline())?Z(wt).then(d):d()}return d(),()=>{u&&(clearTimeout(u),u=-1)}},[_,v,m,r]),O.useDebugValue(at),c){const u=r&&a(B);if(!Ut&&et&&u)throw new Error("Fallback data is required when using Suspense in SSR.");u&&(x.current=e,L.current=n,q.current=!1);const d=lt[r],R=!a(d)&&u?Pt(d):kt;if(mt(R),!a(it)&&u)throw it;const f=u?Z(wt):kt;!a(at)&&u&&(f.status="fulfilled",f.value=!0),mt(f)}return{mutate:Pt,get data(){return y.data=!0,at},get error(){return y.error=!0,it},get isValidating(){return y.isValidating=!0,ne},get isLoading(){return y.isLoading=!0,se}}},He=qe(Ue);class Be{constructor(e={}){var n;this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.serverIndex=e.serverIndex,this.baseOptions={...e.baseOptions,headers:{...(n=e.baseOptions)==null?void 0:n.headers}},this.formDataCtor=e.formDataCtor}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(n.test(e)||e.toLowerCase()==="application/json-patch+json")}}const M=$t.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});let tt=null;M.interceptors.response.use(t=>t,async t=>{const e=t.config;if(tt)return await tt,M(e);if(t.response.status===ie.Unauthorized&&!e._retry){e._retry=!0;try{return tt=$t.post("/auth/refresh-token").finally(()=>{tt=null}),await tt,M(e)}catch(n){return window.location.href="/auth/logout",Promise.reject(n)}}return Promise.reject(t)});const Q=new Be({basePath:"/api"});new fe(Q,G,M);const ke=new ae(Q,G,M),Ze=new ue(Q,G,M),tn=new le(Q,G,M),en=new ce(Q,G,M);new de(Q,G,M);const $e=nt.createContext({seqId:"1"}),Ke=t=>ke.aggregateGermlineSNVOccurrences(t.seqId,t.aggregationBody).then(e=>e.data);function nn(t,e=30,n=!1,s){let i;const{seqId:c}=nt.useContext($e);n?i={seqId:c,aggregationBody:{field:t,size:e}}:i=null;const o=pe.getResolvedActiveQuery(s);return o&&i&&(i.aggregationBody.sqon={content:o.content,op:o.op}),He(i,Ke,{revalidateOnFocus:!1})}export{$e as A,Ut as I,S as U,He as a,je as b,en as c,gt as d,tn as e,Dt as g,Ze as i,U as m,ke as o,bt as s,nn as u,Xe as w};
