import{u as k}from"./i18n-DZKZN_WR.js";import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{g as Ze,a as er,Q as le,r as rr,q as tr,b as ce,B as Q,u as ir,S as or,d as nr,e as ar,f as sr,i as lr,h as cr,j as de,T as ue,k as dr,l as ur,m as mr,n as pr,o as fr,p as yr,s as _r,t as vr}from"./query-builder-remote-DrsXIDys.js";import{r as u,g as ke}from"./index-CGj_12n1.js";import{T as gr,a as hr,b as xr}from"./tooltip-anNhU4TT.js";import{B as h}from"./button-_p9JFpJD.js";import{c as v}from"./utils-D-KgF5mV.js";import{X as qr}from"./x-CubKniSv.js";import{I as br}from"./input-Dm5winle.js";import{c as jr}from"./createLucideIcon-8Lr1oLzj.js";import{D as Pr,b as Cr,c as Tr,d as Ir,g as Sr,h as Er}from"./dialog-D8H4qXag.js";import{S as Qr}from"./separator-IJKoE26K.js";import{a as C}from"./alert-dialog-store-CZoSfA8g.js";import{E as kr,a as re,L as wr,b as Dr,G as Nr,c as Rr}from"./less-than-or-equal-operator-icon-BI5aNTvi.js";import{N as Or}from"./not-in-operator-icon-DdiM-lgK.js";import{S as g}from"./api-BLBZBurO.js";import{C as Br}from"./chevron-left-Baf1hbwl.js";import{C as Ar}from"./chevron-right-CKDh57Sc.js";import{C as Fr}from"./conditional-wrapper-BBX8pIPQ.js";import{P as Lr,a as Vr,b as Ur}from"./popover-Dw4ngTBa.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]],we=jr("PencilLine",Mr),Ot=()=>{const{t:e}=k();return{queryBar:{empty:e("common.query_bar.empty"),deletePopover:{title:e("common.query_bar.delete_popover.title"),cancel:e("common.query_bar.delete_popover.cancel"),ok:e("common.query_bar.delete_popover.ok")},customPill:{createTooltip:e("common.query_bar.custom_pill.create_tooltip"),cannotSaveAsCustomPill:e("common.query_bar.custom_pill.cannot_save_as_custom_pill")},saveDialog:{title:e("common.query_bar.save_dialog.title"),fields:{title:{label:e("common.query_bar.save_dialog.fields.title.label"),placeholder:e("common.query_bar.save_dialog.fields.title.placeholder")}},notice:e("common.query_bar.save_dialog.notice"),cancel:e("common.query_bar.save_dialog.cancel"),ok:e("common.query_bar.save_dialog.ok")}},queryPill:{operator:{changeOperatorTo:e("common.query_pill.operator.change_operator_to"),and:e("common.query_pill.operator.and"),or:e("common.query_pill.operator.or")},facet:r=>e(`common.filters.labels.${r}`,{defaultValue:r}),customPill:{editDialog:{title:e("common.query_pill.custom_pill.edit_dialog.title"),cancel:e("common.query_pill.custom_pill.edit_dialog.cancel"),ok:e("common.query_pill.custom_pill.edit_dialog.ok")},cantBeEmptyDialog:{title:e("common.query_pill.custom_pill.cant_be_empty_dialog.title"),description:e("common.query_pill.custom_pill.cant_be_empty_dialog.description"),ok:e("common.query_pill.custom_pill.cant_be_empty_dialog.ok")},titleExistsDialog:{title:e("common.query_pill.custom_pill.title_exists_dialog.title"),description:e("common.query_pill.custom_pill.title_exists_dialog.description"),ok:e("common.query_pill.custom_pill.title_exists_dialog.ok")},saveDialog:{title:e("common.query_pill.custom_pill.save_dialog.title"),confirmationMessage:e("common.query_pill.custom_pill.save_dialog.confirmation_message"),affectedFilters:e("common.query_pill.custom_pill.save_dialog.affected_filters"),cancel:e("common.query_pill.custom_pill.save_dialog.cancel"),ok:e("common.query_pill.custom_pill.save_dialog.ok")}}},toolbar:{combine:e("common.toolbar.combine"),newQuery:e("common.toolbar.newQuery"),clearAll:e("common.toolbar.clear_all"),clearAllDialog:{title:e("common.toolbar.clear_all_dialog.title"),description:e("common.toolbar.clear_all_dialog.description"),cancel:e("common.toolbar.clear_all_dialog.cancel"),ok:e("common.toolbar.clear_all_dialog.ok")},labels:e("common.toolbar.labels")},savedFilter:{deleteTooltip:e("common.saved_filter.delete_tooltip"),deleteDialog:{title:e("common.saved_filter.delete_dialog.title"),description:e("common.saved_filter.delete_dialog.description"),cancel:e("common.saved_filter.delete_dialog.cancel"),ok:e("common.saved_filter.delete_dialog.ok")},duplicateTooltip:e("common.saved_filter.duplicate_tooltip"),overwriteDialog:{title:e("common.saved_filter.overwrite_dialog.title"),description:e("common.saved_filter.overwrite_dialog.description"),cancel:e("common.saved_filter.overwrite_dialog.cancel"),ok:e("common.saved_filter.overwrite_dialog.ok")},editDialog:{title:e("common.saved_filter.edit_dialog.title"),cancel:e("common.saved_filter.edit_dialog.cancel"),ok:e("common.saved_filter.edit_dialog.ok"),fields:{title:{label:e("common.saved_filter.edit_dialog.fields.title.label"),placeholder:e("common.saved_filter.edit_dialog.fields.title.placeholder")}}},myFilters:e("common.saved_filter.my_filters"),manageFilters:e("common.saved_filter.manage_filters"),manageDialog:{title:e("common.saved_filter.manage_dialog.title"),close:e("common.saved_filter.manage_dialog.close"),lastSaveAt:e("common.saved_filter.manage_dialog.last_save_at")},newFilter:e("common.saved_filter.new_filter"),saveTooltip:{whenEmpty:e("common.saved_filter.save_tooltip.when_empty"),whenDirty:e("common.saved_filter.save_tooltip.when_dirty"),default:e("common.saved_filter.save_tooltip.default")},shareTooltip:{whenNotSaved:e("common.saved_filter.share_tooltip.when_not_saved"),default:e("common.saved_filter.share_tooltip.default")},favoriteTooltip:{set:e("common.saved_filter.favorite_tooltip.set"),unset:e("common.saved_filter.favorite_tooltip.unset")},discardTooltip:e("common.saved_filter.discard_tooltip"),noSavedFilters:e("common.saved_filter.no_saved_filters"),notifications:{created:e("common.saved_filter.notifications.created"),deleted:e("common.saved_filter.notifications.deleted"),updated:e("common.saved_filter.notifications.updated"),errors:{duplicated:e("common.saved_filter.notifications.errors.duplicated"),fetching:e("common.saved_filter.notifications.errors.fetching"),updated:e("common.saved_filter.notifications.errors.updated"),deleted:e("common.saved_filter.notifications.errors.deleted"),created:e("common.saved_filter.notifications.errors.created")}}}}},Bt=["#C31D7E","#328536","#AA00FF","#C2410C","#047ABE","#E5231F","#007D85","#C51162","#7B5A90","#B85C00","#722ED1","#4D7C0F","#9F1239","#2D7D9A","#847545"];function Gr(e){const{t:r}=k(),o={state:{...Ze(),savedFilters:[],selectedQueryIndexes:[]},onStateChange:()=>{},...e},[i]=u.useState(()=>({current:er(o)})),[n,a]=u.useState(()=>o.initialState||o.state);u.useEffect(()=>{var s;n&&((s=e.onStateChange)==null||s.call(e,n))},[n]),u.useEffect(()=>{const s=d=>{var l,m,f,y;if(d.queryBuilderId===e.id){if(d.eventType===ce.ADD_QUERY){const p=d.eventData;(l=e.onQueryCreate)==null||l.call(e,p),p.id===d.value.activeQueryId&&((m=e.onActiveQueryChange)==null||m.call(e,p))}else if(d.eventType===ce.UPDATE_QUERY){const p=d.eventData;(f=e.onQueryUpdate)==null||f.call(e,p),p.id===d.value.activeQueryId&&((y=e.onActiveQueryChange)==null||y.call(e,p))}a(p=>({...p,...e.state,...d.value}))}};return window.addEventListener(le,s),()=>{window.removeEventListener(le,s)}},[e.state]);const c={...n,...e.state};return i.current.setCoreProps(s=>({savedFilterDefaultTitle:r("common.saved_filter.untitled_filter"),...s,...e,state:{...c,queries:e.fieldsToIgnore&&c.queries?rr(c.queries,e.fieldsToIgnore):c.queries},onStateChange:d=>{a(d),tr.setLocalQueryBuilderState(e.id,{value:d,skipEvent:!0})}})),i.current}const De=u.createContext(null);function w(){const e=u.useContext(De);if(!e)throw new Error("useQueryBuilderContext must be used within a QueryBuilderContextProvider");return e}const zr=u.createContext(null);function x(){const e=u.useContext(zr);if(!e)throw new Error("useQueryBuilderDictContext must be used within a QueryBuilderDictContextProvider");return e}const Ne=u.createContext(null);function q(){const e=u.useContext(Ne);if(!e)throw new Error("useQueryBarContext must be used within a QueryBarContextProvider");return e}function Re({className:e,...r}){const o=x();return t.jsx("span",{className:v("",e),...r,children:o.queryPill.operator.and})}Re.__docgenInfo={description:"",methods:[],displayName:"AndOperator"};function Oe({className:e,...r}){const o=x();return t.jsx("span",{className:v("",e),...r,children:o.queryPill.operator.or})}Oe.__docgenInfo={description:"",methods:[],displayName:"OrOperator"};function Be(){const{query:e}=q(),r=x(),o=e.raw().op===Q.And;return t.jsx("div",{className:"px-2",onClick:i=>i.stopPropagation(),children:t.jsxs(gr,{children:[t.jsx(hr,{asChild:!0,children:t.jsx(h,{variant:"link",className:"text-current text-sm p-0 h-auto font-normal",onClick:()=>e.changeCombineOperator(o?Q.Or:Q.And),children:o?t.jsx(Re,{}):t.jsx(Oe,{})})}),t.jsxs(xr,{children:[r.queryPill.operator.changeOperatorTo,' "',o?r.queryPill.operator.or:r.queryPill.operator.and,'"']})]})})}Be.__docgenInfo={description:"",methods:[],displayName:"QueryCombiner"};function b({children:e,className:r,onRemovePill:o,...i}){return t.jsxs("div",{className:v("flex items-center rounded-xs p-[2px] bg-muted group-data-[query-active=true]/query:bg-primary/25",r),...i,children:[e,t.jsx(h,{iconOnly:!0,variant:"ghost",size:"sm",className:"mr-[2px] ml-[4px] py-[2px] enabled:hover:bg-transparent size-4",onClick:n=>{n.stopPropagation(),o()},children:t.jsx(qr,{})})]})}b.__docgenInfo={description:"",methods:[],displayName:"QueryPillContainer",props:{onRemovePill:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Ae=({children:e,icon:r=we,onChangeText:o,...i})=>{const[n,a]=u.useState(!1),c=r;return t.jsx("div",{...i,children:n?t.jsx(br,{defaultValue:e,autoFocus:!0,onBlur:s=>{a(!1),o==null||o(s.currentTarget.value)},className:"max-w-96 w-full",onKeyUp:s=>{s.key==="Enter"&&(a(!1),o==null||o(s.currentTarget.value))}}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:e}),t.jsx(h,{iconOnly:!0,variant:"ghost",onClick:()=>a(!0),children:t.jsx(c,{})})]})})};Ae.__docgenInfo={description:"",methods:[],displayName:"EditableText",props:{icon:{required:!1,tsType:{name:"ReactForwardRefExoticComponent",raw:"React.ForwardRefExoticComponent<Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>>",elements:[{name:"intersection",raw:"Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>",elements:[{name:"Omit",elements:[{name:"LucideProps"},{name:"literal",value:"'ref'"}],raw:"Omit<LucideProps, 'ref'>"},{name:"ReactRefAttributes",raw:"React.RefAttributes<SVGSVGElement>",elements:[{name:"SVGSVGElement"}]}]}]},description:"",defaultValue:{value:"PencilLineIcon",computed:!0}},children:{required:!0,tsType:{name:"string"},description:""},onChangeText:{required:!1,tsType:{name:"signature",type:"function",raw:"(text: string) => void",signature:{arguments:[{type:{name:"string"},name:"text"}],return:{name:"void"}}},description:""}}};function At(e,r){C.open({type:"warning",title:r.savedFilter.deleteDialog.title,description:r.savedFilter.deleteDialog.description,cancelProps:{children:r.savedFilter.deleteDialog.cancel},actionProps:{color:"destructive",onClick:()=>e.delete(),children:r.savedFilter.deleteDialog.ok}})}function Ft(e,r){C.open({type:"warning",title:r.savedFilter.overwriteDialog.title,description:r.savedFilter.overwriteDialog.description,cancelProps:{children:r.savedFilter.overwriteDialog.cancel},actionProps:{onClick:()=>e.createSavedFilter(),children:r.savedFilter.overwriteDialog.ok}})}function $r(e){C.open({type:"error",title:e.queryPill.customPill.cantBeEmptyDialog.title,description:e.queryPill.customPill.cantBeEmptyDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.cantBeEmptyDialog.ok}})}function Hr(e){C.open({type:"error",title:e.queryPill.customPill.titleExistsDialog.title,description:e.queryPill.customPill.titleExistsDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.titleExistsDialog.ok}})}function Wr(e,r,o,i){C.open({type:"warning",title:e.queryPill.customPill.saveDialog.title,description:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:e.queryPill.customPill.saveDialog.confirmationMessage.replace("{title}",r)}),!!(o!=null&&o.length)&&t.jsxs("div",{className:"border rounded-sm p-4 space-y-2",children:[t.jsx("div",{className:"font-medium text-foreground",children:e.queryPill.customPill.saveDialog.affectedFilters}),t.jsx("ul",{className:"list-disc list-inside",children:o.map(n=>t.jsx("li",{className:"list-item",children:n.title}))})]})]}),cancelProps:{children:e.queryPill.customPill.saveDialog.cancel},actionProps:{children:e.queryPill.customPill.saveDialog.ok,onClick:async n=>(n.preventDefault(),i())}})}function Fe({open:e,onOpenChange:r,queryPill:o}){const i=x(),{queryBuilder:n,customPillConfig:a}=w(),c=Gr({id:a==null?void 0:a.queryBuilderEditId,initialState:{activeQueryId:o.queries[0].id,queries:o.queries,savedFilters:[o],selectedQueryIndexes:[]},onCustomPillUpdate:async _=>{var S,E;return await Promise.resolve((E=(S=n.coreProps).onCustomPillUpdate)==null?void 0:E.call(S,_)).then(R=>(n.setState(se=>({...se,queries:ir(se.queries,_)})),r(!1),R))},savedFilterType:o.type}),[s,d]=u.useState(o.name),[l,m]=u.useState(!1),f=c.getQueries()[0],y=c.getSelectedSavedFilter(),p=s!==o.name,j=p||(y==null?void 0:y.isDirty()),I=u.useCallback(_=>{_?r(!0):(c.reset(),r(!1))},[r,c]),N=u.useCallback(async()=>{if(f.isEmpty()){$r(i);return}if(m(!0),p){const P=await(a==null?void 0:a.validateCustomPillTitle(s));if(P!==void 0&&P===!1){m(!1),Hr(i);return}}const _=await(a==null?void 0:a.fetchSavedFiltersByCustomPillId(o.id).finally(()=>m(!1)));Wr(i,s,_,async()=>y==null?void 0:y.save(or.Query,{name:s}))},[f,y,i,s,o.id,a]);return t.jsx(Pr,{open:e,onOpenChange:I,children:t.jsx(De.Provider,{value:{queryBuilder:c,fetchQueryCount:async()=>0,getQueryReferenceColor:()=>"",showLabels:!0,resolveSyntheticSqon:_=>_},children:t.jsxs(Cr,{className:"flex flex-row gap-0 h-screen w-screen max-w-screen rounded-none border-none sm:rounded-none p-0",children:[t.jsx("aside",{className:"flex flex-col min-w-48 bg-primary",children:t.jsx("span",{className:"italic",children:"TODO Insert filters"})}),t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[t.jsx(Tr,{children:t.jsx(Ir,{children:i.queryPill.customPill.editDialog.title})}),t.jsx(Qr,{}),t.jsx("div",{children:t.jsx(Ae,{onChangeText:d,children:s})}),t.jsx("div",{"data-query-active":!0,className:"flex flex-wrap group/query",children:t.jsx(Ne.Provider,{value:{query:f},children:t.jsx(ae,{sqon:f.raw(),customPillEditEnabled:!0})})}),t.jsxs(Sr,{className:"mt-5",children:[t.jsx(Er,{asChild:!0,children:t.jsx(h,{variant:"outline",children:i.queryPill.customPill.editDialog.cancel})}),t.jsx(h,{type:"submit",loading:l,disabled:!j,onClick:N,children:i.queryPill.customPill.editDialog.ok})]})]})})]})})})}Fe.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustomEditDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},queryPill:{required:!0,tsType:{name:"ISavedFilter"},description:""}}};function T({canExpand:e,className:r,classNameContent:o,children:i,clickable:n,...a}){return t.jsx("div",{className:v("bg-background rounded-xs pl-2 text-xs font-medium leading-5 relative",e?"pr-[22px]":"pr-2",r),...a,children:t.jsx("div",{className:v("flex flex-wrap items-center",n?"hover:shadow-[inset_0_-4px_0_-2.5px_black] hover:cursor-pointer":"",o),children:i})})}T.__docgenInfo={description:"",methods:[],displayName:"QueryPillValuesContainer",props:{canExpand:{required:!1,tsType:{name:"boolean"},description:""},clickable:{required:!1,tsType:{name:"boolean"},description:""},classNameContent:{required:!1,tsType:{name:"string"},description:""}}};function Le({valueQuery:e}){const{query:r}=q(),[o,i]=u.useState(!1),{title:n,...a}=e,c={id:e.id,name:e.title,queries:[a],favorite:!1};return t.jsxs(t.Fragment,{children:[t.jsx(b,{onRemovePill:()=>r.removePillById(e.id),children:t.jsxs(T,{className:"pr-1",classNameContent:"space-x-1",children:[t.jsx("span",{children:e.title}),t.jsx(h,{iconOnly:!0,size:"xs",variant:"ghost",className:"size-auto p-[2px]",onClick:()=>i(!0),children:t.jsx(we,{})})]})}),o&&t.jsx(Fe,{open:o,onOpenChange:i,queryPill:c})]})}Le.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustom",props:{valueQuery:{required:!0,tsType:{name:"IValueQuery"},description:""}}};function Ve({type:e,size:r,className:o}){switch(e){case g.GreaterThan:return t.jsx(Rr,{size:r,className:o});case g.GreaterThanOrEqualTo:return t.jsx(Nr,{size:r,className:o});case g.LessThan:return t.jsx(Dr,{size:r,className:o});case g.LessThanOrEqualTo:return t.jsx(wr,{size:r,className:o});case g.Between:return t.jsx(re,{size:r,className:o});case g.NotIn:return t.jsx(Or,{size:r,className:o});default:return t.jsx(kr,{size:r,className:o})}}Ve.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperator",props:{size:{required:!1,tsType:{name:"number"},description:""},type:{required:!0,tsType:{name:"union",raw:"SqonOpEnum | (string & {})",elements:[{name:"SqonOpEnum"},{name:"unknown"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};var O,me;function Ue(){if(me)return O;me=1;function e(r,o,i){var n=-1,a=r.length;o<0&&(o=-o>a?0:a+o),i=i>a?a:i,i<0&&(i+=a),a=o>i?0:i-o>>>0,o>>>=0;for(var c=Array(a);++n<a;)c[n]=r[n+o];return c}return O=e,O}var B,pe;function Yr(){if(pe)return B;pe=1;var e=/\s/;function r(o){for(var i=o.length;i--&&e.test(o.charAt(i)););return i}return B=r,B}var A,fe;function Jr(){if(fe)return A;fe=1;var e=Yr(),r=/^\s+/;function o(i){return i&&i.slice(0,e(i)+1).replace(r,"")}return A=o,A}var F,ye;function Me(){if(ye)return F;ye=1;var e=nr(),r=ar(),o="[object Symbol]";function i(n){return typeof n=="symbol"||r(n)&&e(n)==o}return F=i,F}var L,_e;function Kr(){if(_e)return L;_e=1;var e=Jr(),r=sr(),o=Me(),i=NaN,n=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,s=parseInt;function d(l){if(typeof l=="number")return l;if(o(l))return i;if(r(l)){var m=typeof l.valueOf=="function"?l.valueOf():l;l=r(m)?m+"":m}if(typeof l!="string")return l===0?l:+l;l=e(l);var f=a.test(l);return f||c.test(l)?s(l.slice(2),f?2:8):n.test(l)?i:+l}return L=d,L}var V,ve;function Xr(){if(ve)return V;ve=1;var e=Kr(),r=1/0,o=17976931348623157e292;function i(n){if(!n)return n===0?n:0;if(n=e(n),n===r||n===-r){var a=n<0?-1:1;return a*o}return n===n?n:0}return V=i,V}var U,ge;function Zr(){if(ge)return U;ge=1;var e=Xr();function r(o){var i=e(o),n=i%1;return i===i?n?i-n:i:0}return U=r,U}var M,he;function et(){if(he)return M;he=1;var e=Ue(),r=Zr();function o(i,n,a){return i&&i.length?(n=a||n===void 0?1:r(n),e(i,0,n<0?0:n)):[]}return M=o,M}var rt=et();const tt=ke(rt);function Ge({className:e,...r}){return t.jsx("span",{className:e,...r,children:"&"})}Ge.__docgenInfo={description:"",methods:[],displayName:"IntersectionOperator"};function ze({className:e,...r}){return t.jsx("span",{className:e,...r,children:","})}ze.__docgenInfo={description:"",methods:[],displayName:"UnionOperator"};function D({valueFilter:e,...r}){const[o,i]=u.useState(!1),{t:n,sanitize:a,lazyTranslate:c}=k(),s=e.content.value.length>3,d=o?e.content.value:tt(e.content.value,3);return t.jsxs(T,{canExpand:s,...r,children:[e.content.overrideValuesName?t.jsx("div",{children:t.jsx("span",{children:e.content.overrideValuesName})}):d.map((l,m)=>t.jsxs("div",{children:[t.jsx("span",{children:n(`common.filters.values.${e.content.field}.${a(l)}`,{defaultValue:c(l)})}),d.length-1>m&&(e.op===g.All?t.jsx(Ge,{className:"px-1"}):t.jsx(ze,{className:"px-1"}))]},`${l}-${m}`)),s&&t.jsx("div",{className:"absolute right-1 hover:cursor-pointer",children:o?t.jsx(Br,{size:16,onClick:l=>{l.preventDefault(),i(!1)}}):t.jsx(Ar,{size:16,onClick:l=>{l.preventDefault(),i(!0)}})})]})}D.__docgenInfo={description:"",methods:[],displayName:"QueryPillValues",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function te({valueFilter:e,operator:r,className:o,...i}){const n=x(),{showLabels:a}=w();return t.jsx("div",{className:v("flex items-center",o),...i,children:(a||lr(e)||cr(e))&&t.jsxs(t.Fragment,{children:[t.jsx(oe,{children:n.queryPill.facet(e.content.field)}),t.jsx(ie,{children:r})]})})}const ie=({className:e,children:r,...o})=>t.jsx("span",{className:v("ml-[2px] mr-[4px]",e),...o,children:r});function oe({className:e,children:r,...o}){return t.jsx("span",{className:v("ml-[4px] mr-[2px] text-xs font-medium",e),...o,children:r})}ie.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperatorContainer"};oe.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelContainer"};te.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelOperator",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},operator:{required:!0,tsType:{name:"ReactNode"},description:""}}};function ne({valueFilter:e,customPillEditEnabled:r}){var d;const{query:o}=q(),{queryPillFacetFilterConfig:i}=w(),[n,a]=u.useState(),c=!!(!r&&(i!=null&&i.enable)&&!((d=i==null?void 0:i.blacklistedFacets)!=null&&d.includes(e.content.field))),s=u.useCallback(()=>{i!=null&&i.onFacetClick&&!n&&a(i.onFacetClick(e))},[n,i==null?void 0:i.onFacetClick]);return t.jsxs(b,{onRemovePill:()=>o.removePillByFieldOrIndex(e.content.field),children:[t.jsx(te,{valueFilter:e,operator:t.jsx(Ve,{size:14,type:e.op})}),t.jsx(Fr,{condition:c,wrapper:l=>t.jsxs(Lr,{children:[t.jsx(Vr,{onClick:s,children:l}),t.jsx(Ur,{align:"start",className:"p-2.5",children:n})]}),children:t.jsx(D,{valueFilter:e,clickable:c})})]})}ne.__docgenInfo={description:"",methods:[],displayName:"QueryPillField",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};function $e({groupFilter:e}){const r={},o=u.useMemo(()=>(e.content.forEach(i=>{r.hasOwnProperty(i.content.field)?(r[i.content.field]=de(r[i.content.field]),r[i.content.field].content.value=r[i.content.field].content.value.concat(i.content.value),i.op===ue.In&&e.op===Q.And&&e.skipBooleanOperatorCheck&&(r[i.content.field].op=ue.All)):r[i.content.field]=de(i)}),{...e,content:Object.entries(r).map(i=>i[1])}),[e]);return t.jsx(ne,{valueFilter:o.content[0]})}$e.__docgenInfo={description:"",methods:[],displayName:"QueryPillIsolatedBoolean",props:{groupFilter:{required:!0,tsType:{name:"ISqonGroupFilter"},description:""}}};function He({refIndex:e}){const{query:r}=q(),{getQueryReferenceColor:o}=w(),i=o(e);return t.jsx(b,{onRemovePill:()=>r.removePillByFieldOrIndex(e),children:t.jsx(T,{children:t.jsx("span",{style:{color:i},children:`Q${e+1}`})})})}He.__docgenInfo={description:"",methods:[],displayName:"QueryPillReference",props:{refIndex:{required:!0,tsType:{name:"number"},description:""}}};function We(){const{t:e}=k();return t.jsx("div",{children:e("common.components.query_pill_remote")})}We.__docgenInfo={description:"",methods:[],displayName:"QueryPillRemoteComponent"};var G,xe;function it(){if(xe)return G;xe=1;function e(r,o){for(var i=-1,n=r==null?0:r.length,a=Array(n);++i<n;)a[i]=o(r[i],i,r);return a}return G=e,G}var z,qe;function ot(){if(qe)return z;qe=1;var e=dr(),r=it(),o=ur(),i=Me(),n=e?e.prototype:void 0,a=n?n.toString:void 0;function c(s){if(typeof s=="string")return s;if(o(s))return r(s,c)+"";if(i(s))return a?a.call(s):"";var d=s+"";return d=="0"&&1/s==-1/0?"-0":d}return z=c,z}var $,be;function Ye(){if(be)return $;be=1;var e=ot();function r(o){return o==null?"":e(o)}return $=r,$}var H,je;function nt(){if(je)return H;je=1;var e=Ue();function r(o,i,n){var a=o.length;return n=n===void 0?a:n,!i&&n>=a?o:e(o,i,n)}return H=r,H}var W,Pe;function Je(){if(Pe)return W;Pe=1;var e="\\ud800-\\udfff",r="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",n=r+o+i,a="\\ufe0e\\ufe0f",c="\\u200d",s=RegExp("["+c+e+n+a+"]");function d(l){return s.test(l)}return W=d,W}var Y,Ce;function at(){if(Ce)return Y;Ce=1;function e(r){return r.split("")}return Y=e,Y}var J,Te;function st(){if(Te)return J;Te=1;var e="\\ud800-\\udfff",r="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",n=r+o+i,a="\\ufe0e\\ufe0f",c="["+e+"]",s="["+n+"]",d="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+d+")",m="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",j=l+"?",I="["+a+"]?",N="(?:"+p+"(?:"+[m,f,y].join("|")+")"+I+j+")*",_=I+j+N,P="(?:"+[m+s+"?",s,f,y,c].join("|")+")",S=RegExp(d+"(?="+d+")|"+P+_,"g");function E(R){return R.match(S)||[]}return J=E,J}var K,Ie;function lt(){if(Ie)return K;Ie=1;var e=at(),r=Je(),o=st();function i(n){return r(n)?o(n):e(n)}return K=i,K}var X,Se;function ct(){if(Se)return X;Se=1;var e=nt(),r=Je(),o=lt(),i=Ye();function n(a){return function(c){c=i(c);var s=r(c)?o(c):void 0,d=s?s[0]:c.charAt(0),l=s?e(s,1).join(""):c.slice(1);return d[a]()+l}}return X=n,X}var Z,Ee;function dt(){if(Ee)return Z;Ee=1;var e=ct(),r=e("toUpperCase");return Z=r,Z}var ee,Qe;function ut(){if(Qe)return ee;Qe=1;var e=Ye(),r=dt();function o(i){return r(e(i).toLowerCase())}return ee=o,ee}var mt=ut();const pt=ke(mt);function Ke({valueFilter:e}){const{query:r}=q(),o=x();return t.jsxs(b,{onRemovePill:()=>r.removePillByFieldOrIndex(e.content.field),children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(oe,{children:e.content.index?pt(e.content.index):o.queryPill.facet(e.content.field)}),t.jsx(ie,{children:t.jsx(re,{size:14})})]}),t.jsx(T,{children:t.jsx(D,{valueFilter:e})})]})}Ke.__docgenInfo={description:"",methods:[],displayName:"QueryPillSet",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function Xe({valueFilter:e}){const{query:r}=q();return t.jsxs(b,{onRemovePill:()=>r.removePillByFieldOrIndex(e.content.field),children:[t.jsx(te,{valueFilter:e,operator:t.jsx(re,{size:14,type:e.op})}),t.jsx(D,{valueFilter:e})]})}Xe.__docgenInfo={description:"",methods:[],displayName:"QueryPillUploadList",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function ft(e,r){return e.skipBooleanOperatorCheck?t.jsx($e,{groupFilter:e}):mr(e)?t.jsx(Le,{valueQuery:e}):pr(e)?t.jsx(ae,{sqon:e}):fr(e)?t.jsx(He,{refIndex:e}):yr(e)?t.jsx(Ke,{valueFilter:e}):_r(e)?t.jsx(Xe,{valueFilter:e}):vr(e)?t.jsx(We,{}):t.jsx(ne,{valueFilter:e,customPillEditEnabled:r})}function ae({sqon:e,customPillEditEnabled:r}){return t.jsx(t.Fragment,{children:e.content.map((o,i)=>t.jsxs("div",{className:"flex items-center py-[2px]",children:[ft(o,r),yt(e.content,i)&&t.jsx(Be,{})]},i))})}const yt=(e,r)=>e.length-1>r;ae.__docgenInfo={description:"",methods:[],displayName:"QueryPillBoolean",props:{sqon:{required:!0,tsType:{name:"ISyntheticSqon"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};export{we as P,zr as Q,Gr as a,De as b,Fe as c,Bt as d,q as e,w as f,x as g,Ne as h,ae as i,pt as j,Ft as k,At as o,Ot as u};
