import{j as u}from"./jsx-runtime-D_zvdyIk.js";import{r as i}from"./index-CGj_12n1.js";import{c as C,u as f}from"./index-CcLUv2_A.js";import{u as b}from"./index-CphM_NEg.js";import{P as m}from"./index-COcwYKbe.js";import{s as j}from"./index-DxlLpgFR.js";import{c as A}from"./utils-D-KgF5mV.js";function k(){return j.useSyncExternalStore(F,()=>!0,()=>!1)}function F(){return()=>{}}var v="Avatar",[M,z]=C(v),[P,S]=M(v),x=i.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,a]=i.useState("idle");return u.jsx(P,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:u.jsx(m.span,{...r,ref:t})})});x.displayName=v;var L="AvatarImage",h=i.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...a}=e,l=S(L,n),s=T(r,a),d=b(c=>{o(c),l.onImageLoadingStatusChange(c)});return f(()=>{s!=="idle"&&d(s)},[s,d]),s==="loaded"?u.jsx(m.img,{...a,ref:t,src:r}):null});h.displayName=L;var E="AvatarFallback",y=i.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,a=S(E,n),[l,s]=i.useState(r===void 0);return i.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(d)}},[r]),l&&a.imageLoadingStatus!=="loaded"?u.jsx(m.span,{...o,ref:t}):null});y.displayName=E;function g(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function T(e,{referrerPolicy:t,crossOrigin:n}){const r=k(),o=i.useRef(null),a=r?(o.current||(o.current=new window.Image),o.current):null,[l,s]=i.useState(()=>g(a,e));return f(()=>{s(g(a,e))},[a,e]),f(()=>{const d=R=>()=>{s(R)};if(!a)return;const c=d("loaded"),p=d("error");return a.addEventListener("load",c),a.addEventListener("error",p),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",c),a.removeEventListener("error",p)}},[a,n,t]),l}var w=x,H=h,I=y;function N({className:e,...t}){return u.jsx(w,{className:A("relative flex h-6 w-6 shrink-0 overflow-hidden rounded-full",e),...t})}N.displayName=w.displayName;H.displayName;function _({className:e,...t}){return u.jsx(I,{className:A("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t})}_.displayName=I.displayName;N.__docgenInfo={description:"",methods:[]};_.__docgenInfo={description:"",methods:[]};export{N as A,_ as a};
