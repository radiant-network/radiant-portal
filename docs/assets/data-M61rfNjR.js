import{j as n}from"./jsx-runtime-D_zvdyIk.js";import{r as d,g as Be}from"./index-DQLiH3RP.js";import{a as fr,c as yr,b as x}from"./index-DTwDs4x6.js";import{P as vr,u as hr}from"./index-Dw-eQTPP.js";import{c as Ae,R as gr,A as xr,C as Pr,a as Cr}from"./index-BsCFIxoT.js";import{P as br}from"./index-uZc0PFVk.js";import{D as qr}from"./index-BkhUCz-k.js";import{c as P}from"./utils-D-KgF5mV.js";import{r as Tr,a as jr,b as Dr,d as Sr,g as _r,e as Er,Q as ye,f as wr,q as Rr,h as ve,i as Ir,j as Nr,k as Or,u as Fr,S as kr,l as he,T as ge,B as I,m as Qr,n as Br,o as Ar,p as Lr,s as Ur,t as Hr}from"./query-builder-remote-DQDcrGW9.js";import{u as F}from"./i18n-CnbQ0kq8.js";import{E as Vr,a as se,L as Mr,b as Gr,G as zr,c as $r}from"./less-than-or-equal-operator-icon-BI5aNTvi.js";import{N as Wr}from"./not-in-operator-icon-DdiM-lgK.js";import{S as b}from"./api-fYFwtGmU.js";import{r as Yr}from"./string-format-D2CEWHqQ.js";import{C as Kr}from"./chevron-left-DGpQFcG5.js";import{C as Jr}from"./chevron-right--l3G0NFC.js";import{B as q}from"./button-0MjMXxSy.js";import{X as Xr}from"./x-ClsbQ_rO.js";import{C as Zr}from"./conditional-wrapper-BBX8pIPQ.js";import{P as et,a as rt,b as tt}from"./popover-DRJBelA9.js";import{D as ot,a as nt,b as it,c as at,d as st,e as lt}from"./dialog-H5nkUZvT.js";import{I as ct}from"./input-DyY2UfVx.js";import{c as ut}from"./createLucideIcon-BMP5cxO1.js";import{S as dt}from"./separator-PkW7KAol.js";import{T as mt,a as pt,b as ft}from"./tooltip-CqCjg2e9.js";import{a as _}from"./alert-dialog-store-CZoSfA8g.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]],Le=ut("PencilLine",yt);var U,k="HoverCard",[Ue,qo]=yr(k,[Ae]),Q=Ae(),[vt,le]=Ue(k),He=e=>{const{__scopeHoverCard:r,children:t,open:o,defaultOpen:i,onOpenChange:a,openDelay:l=700,closeDelay:s=300}=e,c=Q(r),u=d.useRef(0),p=d.useRef(0),v=d.useRef(!1),f=d.useRef(!1),[y,m]=fr({prop:o,defaultProp:i??!1,onChange:a,caller:k}),g=d.useCallback(()=>{clearTimeout(p.current),u.current=window.setTimeout(()=>m(!0),l)},[l,m]),C=d.useCallback(()=>{clearTimeout(u.current),!v.current&&!f.current&&(p.current=window.setTimeout(()=>m(!1),s))},[s,m]),h=d.useCallback(()=>m(!1),[m]);return d.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(p.current)},[]),n.jsx(vt,{scope:r,open:y,onOpenChange:m,onOpen:g,onClose:C,onDismiss:h,hasSelectionRef:v,isPointerDownOnContentRef:f,children:n.jsx(gr,{...c,children:t})})};He.displayName=k;var Ve="HoverCardTrigger",Me=d.forwardRef((e,r)=>{const{__scopeHoverCard:t,...o}=e,i=le(Ve,t),a=Q(t);return n.jsx(xr,{asChild:!0,...a,children:n.jsx(vr.a,{"data-state":i.open?"open":"closed",...o,ref:r,onPointerEnter:x(e.onPointerEnter,O(i.onOpen)),onPointerLeave:x(e.onPointerLeave,O(i.onClose)),onFocus:x(e.onFocus,i.onOpen),onBlur:x(e.onBlur,i.onClose),onTouchStart:x(e.onTouchStart,l=>l.preventDefault())})})});Me.displayName=Ve;var ht="HoverCardPortal",[To,gt]=Ue(ht,{forceMount:void 0}),N="HoverCardContent",Ge=d.forwardRef((e,r)=>{const t=gt(N,e.__scopeHoverCard),{forceMount:o=t.forceMount,...i}=e,a=le(N,e.__scopeHoverCard);return n.jsx(br,{present:o||a.open,children:n.jsx(xt,{"data-state":a.open?"open":"closed",...i,onPointerEnter:x(e.onPointerEnter,O(a.onOpen)),onPointerLeave:x(e.onPointerLeave,O(a.onClose)),ref:r})})});Ge.displayName=N;var xt=d.forwardRef((e,r)=>{const{__scopeHoverCard:t,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,...s}=e,c=le(N,t),u=Q(t),p=d.useRef(null),v=hr(r,p),[f,y]=d.useState(!1);return d.useEffect(()=>{if(f){const m=document.body;return U=m.style.userSelect||m.style.webkitUserSelect,m.style.userSelect="none",m.style.webkitUserSelect="none",()=>{m.style.userSelect=U,m.style.webkitUserSelect=U}}},[f]),d.useEffect(()=>{if(p.current){const m=()=>{y(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var C;((C=document.getSelection())==null?void 0:C.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",m),()=>{document.removeEventListener("pointerup",m),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),d.useEffect(()=>{p.current&&bt(p.current).forEach(g=>g.setAttribute("tabindex","-1"))}),n.jsx(qr,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:l,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:x(a,m=>{m.preventDefault()}),onDismiss:c.onDismiss,children:n.jsx(Pr,{...u,...s,onPointerDown:x(s.onPointerDown,m=>{m.currentTarget.contains(m.target)&&y(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:v,style:{...s.style,userSelect:f?"text":void 0,WebkitUserSelect:f?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),Pt="HoverCardArrow",Ct=d.forwardRef((e,r)=>{const{__scopeHoverCard:t,...o}=e,i=Q(t);return n.jsx(Cr,{...i,...o,ref:r})});Ct.displayName=Pt;function O(e){return r=>r.pointerType==="touch"?void 0:e()}function bt(e){const r=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;t.nextNode();)r.push(t.currentNode);return r}var qt=He,Tt=Me,ze=Ge;const jo=qt,Do=Tt;function $e({className:e,align:r="center",sideOffset:t=4,...o}){return n.jsx(ze,{align:r,sideOffset:t,className:P("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o})}$e.displayName=ze.displayName;$e.__docgenInfo={description:"",methods:[],props:{align:{defaultValue:{value:"'center'",computed:!1},required:!1},sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}};var H,xe;function jt(){if(xe)return H;xe=1;function e(r,t){for(var o=-1,i=r==null?0:r.length,a=Array(i);++o<i;)a[o]=t(r[o],o,r);return a}return H=e,H}var V,Pe;function We(){if(Pe)return V;Pe=1;var e=Tr(),r=jr(),t="[object Symbol]";function o(i){return typeof i=="symbol"||r(i)&&e(i)==t}return V=o,V}var M,Ce;function Dt(){if(Ce)return M;Ce=1;var e=Dr(),r=jt(),t=Sr(),o=We(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function l(s){if(typeof s=="string")return s;if(t(s))return r(s,l)+"";if(o(s))return a?a.call(s):"";var c=s+"";return c=="0"&&1/s==-1/0?"-0":c}return M=l,M}var G,be;function Ye(){if(be)return G;be=1;var e=Dt();function r(t){return t==null?"":e(t)}return G=r,G}var z,qe;function Ke(){if(qe)return z;qe=1;function e(r,t,o){var i=-1,a=r.length;t<0&&(t=-t>a?0:a+t),o=o>a?a:o,o<0&&(o+=a),a=t>o?0:o-t>>>0,t>>>=0;for(var l=Array(a);++i<a;)l[i]=r[i+t];return l}return z=e,z}var $,Te;function St(){if(Te)return $;Te=1;var e=Ke();function r(t,o,i){var a=t.length;return i=i===void 0?a:i,!o&&i>=a?t:e(t,o,i)}return $=r,$}var W,je;function Je(){if(je)return W;je=1;var e="\\ud800-\\udfff",r="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",i=r+t+o,a="\\ufe0e\\ufe0f",l="\\u200d",s=RegExp("["+l+e+i+a+"]");function c(u){return s.test(u)}return W=c,W}var Y,De;function _t(){if(De)return Y;De=1;function e(r){return r.split("")}return Y=e,Y}var K,Se;function Et(){if(Se)return K;Se=1;var e="\\ud800-\\udfff",r="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",i=r+t+o,a="\\ufe0e\\ufe0f",l="["+e+"]",s="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+s+"|"+c+")",p="[^"+e+"]",v="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",m=u+"?",g="["+a+"]?",C="(?:"+y+"(?:"+[p,v,f].join("|")+")"+g+m+")*",h=g+m+C,S="(?:"+[p+s+"?",s,v,f,l].join("|")+")",w=RegExp(c+"(?="+c+")|"+S+h,"g");function R(L){return L.match(w)||[]}return K=R,K}var J,_e;function wt(){if(_e)return J;_e=1;var e=_t(),r=Je(),t=Et();function o(i){return r(i)?t(i):e(i)}return J=o,J}var X,Ee;function Rt(){if(Ee)return X;Ee=1;var e=St(),r=Je(),t=wt(),o=Ye();function i(a){return function(l){l=o(l);var s=r(l)?t(l):void 0,c=s?s[0]:l.charAt(0),u=s?e(s,1).join(""):l.slice(1);return c[a]()+u}}return X=i,X}var Z,we;function It(){if(we)return Z;we=1;var e=Rt(),r=e("toUpperCase");return Z=r,Z}var ee,Re;function Nt(){if(Re)return ee;Re=1;var e=Ye(),r=It();function t(o){return r(e(o).toLowerCase())}return ee=t,ee}var Ot=Nt();const Ft=Be(Ot);function kt(e){const{t:r}=F(),t={state:{..._r(),savedFilters:[],selectedQueryIndexes:[]},onStateChange:()=>{},...e},[o]=d.useState(()=>({current:Er(t)})),[i,a]=d.useState(()=>t.initialState||t.state);d.useEffect(()=>{var s;i&&((s=e.onStateChange)==null||s.call(e,i))},[i]),d.useEffect(()=>{const s=c=>{var u,p,v,f;if(c.queryBuilderId===e.id){if(c.eventType===ve.ADD_QUERY){const y=c.eventData;(u=e.onQueryCreate)==null||u.call(e,y),y.id===c.value.activeQueryId&&((p=e.onActiveQueryChange)==null||p.call(e,y))}else if(c.eventType===ve.UPDATE_QUERY){const y=c.eventData;(v=e.onQueryUpdate)==null||v.call(e,y),y.id===c.value.activeQueryId&&((f=e.onActiveQueryChange)==null||f.call(e,y))}a(y=>({...y,...e.state,...c.value}))}};return window.addEventListener(ye,s),()=>{window.removeEventListener(ye,s)}},[e.state]),e.fieldsToIgnore;const l={...i,...e.state};return o.current.setCoreProps(s=>({savedFilterDefaultTitle:r("common.savedFilter.untitledFilter"),...s,...e,state:{...l,queries:e.fieldsToIgnore&&l.queries?wr(l.queries,e.fieldsToIgnore):l.queries},onStateChange:c=>{a(c),Rr.setLocalQueryBuilderState(e.id,{value:c,skipEvent:!0})}})),o.current}const Xe=d.createContext(null);function B(){const e=d.useContext(Xe);if(!e)throw new Error("useQueryBuilderContext must be used within a QueryBuilderContextProvider");return e}const Qt=d.createContext(null);function T(){const e=d.useContext(Qt);if(!e)throw new Error("useQueryBuilderDictContext must be used within a QueryBuilderDictContextProvider");return e}const Ze=d.createContext(null);function j(){const e=d.useContext(Ze);if(!e)throw new Error("useQueryBarContext must be used within a QueryBarContextProvider");return e}function er({type:e,size:r,className:t}){switch(e){case b.GreaterThan:return n.jsx($r,{size:r,className:t});case b.GreaterThanOrEqualTo:return n.jsx(zr,{size:r,className:t});case b.LessThan:return n.jsx(Gr,{size:r,className:t});case b.LessThanOrEqualTo:return n.jsx(Mr,{size:r,className:t});case b.Between:return n.jsx(se,{size:r,className:t});case b.NotIn:return n.jsx(Wr,{size:r,className:t});default:return n.jsx(Vr,{size:r,className:t})}}er.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperator",props:{size:{required:!1,tsType:{name:"number"},description:""},type:{required:!0,tsType:{name:"union",raw:"SqonOpEnum | (string & {})",elements:[{name:"SqonOpEnum"},{name:"unknown"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};var re,Ie;function Bt(){if(Ie)return re;Ie=1;var e=/\s/;function r(t){for(var o=t.length;o--&&e.test(t.charAt(o)););return o}return re=r,re}var te,Ne;function At(){if(Ne)return te;Ne=1;var e=Bt(),r=/^\s+/;function t(o){return o&&o.slice(0,e(o)+1).replace(r,"")}return te=t,te}var oe,Oe;function Lt(){if(Oe)return oe;Oe=1;var e=At(),r=Ir(),t=We(),o=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt;function c(u){if(typeof u=="number")return u;if(t(u))return o;if(r(u)){var p=typeof u.valueOf=="function"?u.valueOf():u;u=r(p)?p+"":p}if(typeof u!="string")return u===0?u:+u;u=e(u);var v=a.test(u);return v||l.test(u)?s(u.slice(2),v?2:8):i.test(u)?o:+u}return oe=c,oe}var ne,Fe;function Ut(){if(Fe)return ne;Fe=1;var e=Lt(),r=1/0,t=17976931348623157e292;function o(i){if(!i)return i===0?i:0;if(i=e(i),i===r||i===-r){var a=i<0?-1:1;return a*t}return i===i?i:0}return ne=o,ne}var ie,ke;function Ht(){if(ke)return ie;ke=1;var e=Ut();function r(t){var o=e(t),i=o%1;return o===o?i?o-i:o:0}return ie=r,ie}var ae,Qe;function Vt(){if(Qe)return ae;Qe=1;var e=Ke(),r=Ht();function t(o,i,a){return o&&o.length?(i=a||i===void 0?1:r(i),e(o,0,i<0?0:i)):[]}return ae=t,ae}var Mt=Vt();const Gt=Be(Mt);function rr({className:e,...r}){return n.jsx("span",{className:e,...r,children:"&"})}rr.__docgenInfo={description:"",methods:[],displayName:"IntersectionOperator"};function tr({className:e,...r}){return n.jsx("span",{className:e,...r,children:","})}tr.__docgenInfo={description:"",methods:[],displayName:"UnionOperator"};function E({canExpand:e,className:r,classNameContent:t,children:o,clickable:i,...a}){return n.jsx("div",{className:P("bg-background rounded-xs pl-2 text-xs font-medium leading-5 relative",e?"pr-[22px]":"pr-2",r),...a,children:n.jsx("div",{className:P("flex flex-wrap items-center",i?"hover:shadow-[inset_0_-4px_0_-2.5px_black] hover:cursor-pointer":"",t),children:o})})}E.__docgenInfo={description:"",methods:[],displayName:"QueryPillValuesContainer",props:{canExpand:{required:!1,tsType:{name:"boolean"},description:""},clickable:{required:!1,tsType:{name:"boolean"},description:""},classNameContent:{required:!1,tsType:{name:"string"},description:""}}};function A({valueFilter:e,...r}){const[t,o]=d.useState(!1),{t:i}=F(),a=e.content.value.length>3,l=t?e.content.value:Gt(e.content.value,3);return n.jsxs(E,{canExpand:a,...r,children:[e.content.overrideValuesName?n.jsx("div",{children:n.jsx("span",{children:e.content.overrideValuesName})}):l.map((s,c)=>n.jsxs("div",{children:[n.jsx("span",{children:i(`common.filters.labels.${e.content.field}_value.${s}`,{defaultValue:Yr(String(s)).toLowerCase().replace(/^\w/,u=>u.toUpperCase())})}),l.length-1>c&&(e.op===b.All?n.jsx(rr,{className:"px-1"}):n.jsx(tr,{className:"px-1"}))]},`${s}-${c}`)),a&&n.jsx("div",{className:"absolute right-1 hover:cursor-pointer",children:t?n.jsx(Kr,{size:16,onClick:s=>{s.preventDefault(),o(!1)}}):n.jsx(Jr,{size:16,onClick:s=>{s.preventDefault(),o(!0)}})})]})}A.__docgenInfo={description:"",methods:[],displayName:"QueryPillValues",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function D({children:e,className:r,onRemovePill:t,...o}){return n.jsxs("div",{className:P("flex items-center rounded-xs p-[2px] bg-muted group-data-[query-active=true]/query:bg-primary/25",r),...o,children:[e,n.jsx(q,{iconOnly:!0,variant:"ghost",size:"sm",className:"mr-[2px] ml-[4px] py-[2px] enabled:hover:bg-transparent size-4",onClick:i=>{i.stopPropagation(),t()},children:n.jsx(Xr,{})})]})}D.__docgenInfo={description:"",methods:[],displayName:"QueryPillContainer",props:{onRemovePill:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function ce({valueFilter:e,operator:r,className:t,...o}){const i=T(),{showLabels:a}=B();return n.jsx("div",{className:P("flex items-center",t),...o,children:(a||Nr(e)||Or(e))&&n.jsxs(n.Fragment,{children:[n.jsx(de,{children:i.queryPill.facet(e.content.field)}),n.jsx(ue,{children:r})]})})}const ue=({className:e,children:r,...t})=>n.jsx("span",{className:P("ml-[2px] mr-[4px]",e),...t,children:r});function de({className:e,children:r,...t}){return n.jsx("span",{className:P("ml-[4px] mr-[2px] text-xs font-medium",e),...t,children:r})}ue.__docgenInfo={description:"",methods:[],displayName:"QueryPillOperatorContainer"};de.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelContainer"};ce.__docgenInfo={description:"",methods:[],displayName:"QueryPillLabelOperator",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},operator:{required:!0,tsType:{name:"ReactNode"},description:""}}};function me({valueFilter:e,customPillEditEnabled:r}){var c;const{query:t}=j(),{queryPillFacetFilterConfig:o}=B(),[i,a]=d.useState(),l=!!(!r&&(o!=null&&o.enable)&&!((c=o==null?void 0:o.blacklistedFacets)!=null&&c.includes(e.content.field))),s=d.useCallback(()=>{o!=null&&o.onFacetClick&&!i&&a(o.onFacetClick(e))},[i,o==null?void 0:o.onFacetClick]);return n.jsxs(D,{onRemovePill:()=>t.removePillByFieldOrIndex(e.content.field),children:[n.jsx(ce,{valueFilter:e,operator:n.jsx(er,{size:14,type:e.op})}),n.jsx(Zr,{condition:l,wrapper:u=>n.jsxs(et,{children:[n.jsx(rt,{onClick:s,children:u}),n.jsx(tt,{align:"start",className:"p-2.5",children:i})]}),children:n.jsx(A,{valueFilter:e,clickable:l})})]})}me.__docgenInfo={description:"",methods:[],displayName:"QueryPillField",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};function or(){const{t:e}=F();return n.jsx("div",{children:e("common.components.queryPillRemote")})}or.__docgenInfo={description:"",methods:[],displayName:"QueryPillRemoteComponent"};function nr({valueFilter:e}){const{query:r}=j();return n.jsxs(D,{onRemovePill:()=>r.removePillByFieldOrIndex(e.content.field),children:[n.jsx(ce,{valueFilter:e,operator:n.jsx(se,{size:14,type:e.op})}),n.jsx(A,{valueFilter:e})]})}nr.__docgenInfo={description:"",methods:[],displayName:"QueryPillUploadList",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function ir({valueFilter:e}){const{query:r}=j(),t=T();return n.jsxs(D,{onRemovePill:()=>r.removePillByFieldOrIndex(e.content.field),children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(de,{children:e.content.index?Ft(e.content.index):t.queryPill.facet(e.content.field)}),n.jsx(ue,{children:n.jsx(se,{size:14})})]}),n.jsx(E,{children:n.jsx(A,{valueFilter:e})})]})}ir.__docgenInfo={description:"",methods:[],displayName:"QueryPillSet",props:{valueFilter:{required:!0,tsType:{name:"IValueFilter"},description:""}}};function ar({refIndex:e}){const{query:r}=j(),{getQueryReferenceColor:t}=B(),o=t(e);return n.jsx(D,{onRemovePill:()=>r.removePillByFieldOrIndex(e),children:n.jsx(E,{children:n.jsx("span",{style:{color:o},children:`Q${e+1}`})})})}ar.__docgenInfo={description:"",methods:[],displayName:"QueryPillReference",props:{refIndex:{required:!0,tsType:{name:"number"},description:""}}};const sr=({children:e,icon:r=Le,onChangeText:t,...o})=>{const[i,a]=d.useState(!1),l=r;return n.jsx("div",{...o,children:i?n.jsx(ct,{defaultValue:e,autoFocus:!0,onBlur:s=>{a(!1),t==null||t(s.currentTarget.value)},className:"max-w-96 w-full",onKeyUp:s=>{s.key==="Enter"&&(a(!1),t==null||t(s.currentTarget.value))}}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:e}),n.jsx(q,{iconOnly:!0,variant:"ghost",onClick:()=>a(!0),children:n.jsx(l,{})})]})})};sr.__docgenInfo={description:"",methods:[],displayName:"EditableText",props:{icon:{required:!1,tsType:{name:"ReactForwardRefExoticComponent",raw:"React.ForwardRefExoticComponent<Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>>",elements:[{name:"intersection",raw:"Omit<LucideProps, 'ref'> & React.RefAttributes<SVGSVGElement>",elements:[{name:"Omit",elements:[{name:"LucideProps"},{name:"literal",value:"'ref'"}],raw:"Omit<LucideProps, 'ref'>"},{name:"ReactRefAttributes",raw:"React.RefAttributes<SVGSVGElement>",elements:[{name:"SVGSVGElement"}]}]}]},description:"",defaultValue:{value:"PencilLineIcon",computed:!0}},children:{required:!0,tsType:{name:"string"},description:""},onChangeText:{required:!1,tsType:{name:"signature",type:"function",raw:"(text: string) => void",signature:{arguments:[{type:{name:"string"},name:"text"}],return:{name:"void"}}},description:""}}};function So(e,r){_.open({type:"warning",title:r.savedFilter.deleteDialog.title,description:r.savedFilter.deleteDialog.description,cancelProps:{children:r.savedFilter.deleteDialog.cancel},actionProps:{color:"destructive",onClick:()=>e.delete(),children:r.savedFilter.deleteDialog.ok}})}function _o(e,r){_.open({type:"warning",title:r.savedFilter.overwriteDialog.title,description:r.savedFilter.overwriteDialog.description,cancelProps:{children:r.savedFilter.overwriteDialog.cancel},actionProps:{onClick:()=>e.createSavedFilter(),children:r.savedFilter.overwriteDialog.ok}})}function zt(e){_.open({type:"error",title:e.queryPill.customPill.cantBeEmptyDialog.title,description:e.queryPill.customPill.cantBeEmptyDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.cantBeEmptyDialog.ok}})}function $t(e){_.open({type:"error",title:e.queryPill.customPill.titleExistsDialog.title,description:e.queryPill.customPill.titleExistsDialog.description,hideCancel:!0,actionProps:{children:e.queryPill.customPill.titleExistsDialog.ok}})}function Wt(e,r,t,o){_.open({type:"warning",title:e.queryPill.customPill.saveDialog.title,description:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{children:e.queryPill.customPill.saveDialog.confirmationMessage.replace("{title}",r)}),!!(t!=null&&t.length)&&n.jsxs("div",{className:"border rounded-sm p-4 space-y-2",children:[n.jsx("div",{className:"font-medium text-foreground",children:e.queryPill.customPill.saveDialog.affectedFilters}),n.jsx("ul",{className:"list-disc list-inside",children:t.map(i=>n.jsx("li",{className:"list-item",children:i.title}))})]})]}),cancelProps:{children:e.queryPill.customPill.saveDialog.cancel},actionProps:{children:e.queryPill.customPill.saveDialog.ok,onClick:async i=>(i.preventDefault(),o())}})}function lr({open:e,onOpenChange:r,queryPill:t}){const o=T(),{queryBuilder:i,customPillConfig:a}=B(),l=kt({id:a==null?void 0:a.queryBuilderEditId,initialState:{activeQueryId:t.queries[0].id,queries:t.queries,savedFilters:[t],selectedQueryIndexes:[]},onCustomPillUpdate:async h=>{var w,R;return await Promise.resolve((R=(w=i.coreProps).onCustomPillUpdate)==null?void 0:R.call(w,h)).then(L=>(i.setState(fe=>({...fe,queries:Fr(fe.queries,h)})),r(!1),L))}}),[s,c]=d.useState(t.title),[u,p]=d.useState(!1),v=l.getQueries()[0],f=l.getSelectedSavedFilter(),y=s!==t.title,m=y||(f==null?void 0:f.isDirty()),g=d.useCallback(h=>{h?r(!0):(l.reset(),r(!1))},[r,l]),C=d.useCallback(async()=>{if(v.isEmpty()){zt(o);return}if(p(!0),y){const S=await(a==null?void 0:a.validateCustomPillTitle(s));if(S!==void 0&&S===!1){p(!1),$t(o);return}}const h=await(a==null?void 0:a.fetchSavedFiltersByCustomPillId(t.id).finally(()=>p(!1)));Wt(o,s,h,async()=>f==null?void 0:f.save(kr.Query,{title:s}))},[v,f,o,s,t.id,a]);return n.jsx(ot,{open:e,onOpenChange:g,children:n.jsx(Xe.Provider,{value:{queryBuilder:l,fetchQueryCount:async()=>0,getQueryReferenceColor:()=>"",showLabels:!0,resolveSyntheticSqon:h=>h},children:n.jsxs(nt,{className:"flex flex-row gap-0 h-screen w-screen max-w-screen rounded-none border-none sm:rounded-none p-0",children:[n.jsx("aside",{className:"flex flex-col min-w-48 bg-primary",children:n.jsx("span",{className:"italic",children:"TODO Insert filters"})}),n.jsx("div",{className:"w-full",children:n.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[n.jsx(it,{children:n.jsx(at,{children:o.queryPill.customPill.editDialog.title})}),n.jsx(dt,{}),n.jsx("div",{children:n.jsx(sr,{onChangeText:c,children:s})}),n.jsx("div",{"data-query-active":!0,className:"flex flex-wrap group/query",children:n.jsx(Ze.Provider,{value:{query:v},children:n.jsx(pe,{sqon:v.raw(),customPillEditEnabled:!0})})}),n.jsxs(st,{className:"mt-5",children:[n.jsx(lt,{asChild:!0,children:n.jsx(q,{variant:"outline",children:o.queryPill.customPill.editDialog.cancel})}),n.jsx(q,{type:"submit",loading:u,disabled:!m,onClick:C,children:o.queryPill.customPill.editDialog.ok})]})]})})]})})})}lr.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustomEditDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},queryPill:{required:!0,tsType:{name:"ISavedFilter"},description:""}}};function cr({valueQuery:e}){const{query:r}=j(),[t,o]=d.useState(!1),{title:i,...a}=e,l={id:e.id,title:e.title,queries:[a],favorite:!1};return n.jsxs(n.Fragment,{children:[n.jsx(D,{onRemovePill:()=>r.removePillById(e.id),children:n.jsxs(E,{className:"pr-1",classNameContent:"space-x-1",children:[n.jsx("span",{children:e.title}),n.jsx(q,{iconOnly:!0,size:"xs",variant:"ghost",className:"size-auto p-[2px]",onClick:()=>o(!0),children:n.jsx(Le,{})})]})}),t&&n.jsx(lr,{open:t,onOpenChange:o,queryPill:l})]})}cr.__docgenInfo={description:"",methods:[],displayName:"QueryPillCustom",props:{valueQuery:{required:!0,tsType:{name:"IValueQuery"},description:""}}};function ur({groupFilter:e}){const r={},t=d.useMemo(()=>(e.content.forEach(o=>{r.hasOwnProperty(o.content.field)?(r[o.content.field]=he(r[o.content.field]),r[o.content.field].content.value=r[o.content.field].content.value.concat(o.content.value),o.op===ge.In&&e.op===I.And&&e.skipBooleanOperatorCheck&&(r[o.content.field].op=ge.All)):r[o.content.field]=he(o)}),{...e,content:Object.entries(r).map(o=>o[1])}),[e]);return n.jsx(me,{valueFilter:t.content[0]})}ur.__docgenInfo={description:"",methods:[],displayName:"QueryPillIsolatedBoolean",props:{groupFilter:{required:!0,tsType:{name:"ISqonGroupFilter"},description:""}}};function dr({className:e,...r}){const t=T();return n.jsx("span",{className:P("",e),...r,children:t.queryPill.operator.and})}dr.__docgenInfo={description:"",methods:[],displayName:"AndOperator"};function mr({className:e,...r}){const t=T();return n.jsx("span",{className:P("",e),...r,children:t.queryPill.operator.or})}mr.__docgenInfo={description:"",methods:[],displayName:"OrOperator"};function pr(){const{query:e}=j(),r=T(),t=e.raw().op===I.And;return n.jsx("div",{className:"px-2",onClick:o=>o.stopPropagation(),children:n.jsxs(mt,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(q,{variant:"link",className:"text-current text-sm p-0 h-auto font-normal",onClick:()=>e.changeCombineOperator(t?I.Or:I.And),children:t?n.jsx(dr,{}):n.jsx(mr,{})})}),n.jsxs(ft,{children:[r.queryPill.operator.changeOperatorTo,' "',t?r.queryPill.operator.or:r.queryPill.operator.and,'"']})]})})}pr.__docgenInfo={description:"",methods:[],displayName:"QueryCombiner"};function pe({sqon:e,customPillEditEnabled:r}){return n.jsx(n.Fragment,{children:e.content.map((t,o)=>n.jsxs("div",{className:"flex items-center py-[2px]",children:[t.skipBooleanOperatorCheck?n.jsx(ur,{groupFilter:t}):Qr(t)?n.jsx(cr,{valueQuery:t}):Br(t)?n.jsx(pe,{sqon:t}):Ar(t)?n.jsx(ar,{refIndex:t}):Lr(t)?n.jsx(ir,{valueFilter:t}):Ur(t)?n.jsx(nr,{valueFilter:t}):Hr(t)?n.jsx(or,{}):n.jsx(me,{valueFilter:t,customPillEditEnabled:r}),Yt(e.content,o)&&n.jsx(pr,{})]},o))})}const Yt=(e,r)=>e.length-1>r;pe.__docgenInfo={description:"",methods:[],displayName:"QueryPillBoolean",props:{sqon:{required:!0,tsType:{name:"ISyntheticSqon"},description:""},customPillEditEnabled:{required:!1,tsType:{name:"boolean"},description:""}}};const Eo=()=>{const{t:e}=F();return{queryBar:{empty:e("common.queryBar.empty"),deletePopover:{title:e("common.queryBar.deletePopover.title"),cancel:e("common.queryBar.deletePopover.cancel"),ok:e("common.queryBar.deletePopover.ok")},customPill:{createTooltip:e("common.queryBar.customPill.createTooltip"),cannotSaveAsCustomPill:e("common.queryBar.customPill.cannotSaveAsCustomPill")},saveDialog:{title:e("common.queryBar.saveDialog.title"),fields:{title:{label:e("common.queryBar.saveDialog.fields.title.label"),placeholder:e("common.queryBar.saveDialog.fields.title.placeholder")}},notice:e("common.queryBar.saveDialog.notice"),cancel:e("common.queryBar.saveDialog.cancel"),ok:e("common.queryBar.saveDialog.ok")}},queryPill:{operator:{changeOperatorTo:e("common.queryPill.operator.changeOperatorTo"),and:e("common.queryPill.operator.and"),or:e("common.queryPill.operator.or")},facet:r=>e(`common.filters.labels.${r}`,{defaultValue:r}),customPill:{editDialog:{title:e("common.queryPill.customPill.editDialog.title"),cancel:e("common.queryPill.customPill.editDialog.cancel"),ok:e("common.queryPill.customPill.editDialog.ok")},cantBeEmptyDialog:{title:e("common.queryPill.customPill.cantBeEmptyDialog.title"),description:e("common.queryPill.customPill.cantBeEmptyDialog.description"),ok:e("common.queryPill.customPill.cantBeEmptyDialog.ok")},titleExistsDialog:{title:e("common.queryPill.customPill.titleExistsDialog.title"),description:e("common.queryPill.customPill.titleExistsDialog.description"),ok:e("common.queryPill.customPill.titleExistsDialog.ok")},saveDialog:{title:e("common.queryPill.customPill.saveDialog.title"),confirmationMessage:e("common.queryPill.customPill.saveDialog.confirmationMessage"),affectedFilters:e("common.queryPill.customPill.saveDialog.affectedFilters"),cancel:e("common.queryPill.customPill.saveDialog.cancel"),ok:e("common.queryPill.customPill.saveDialog.ok")}}},toolbar:{combine:e("common.toolbar.combine"),newQuery:e("common.toolbar.newQuery"),clearAll:e("common.toolbar.clearAll"),clearAllDialog:{title:e("common.toolbar.clearAllDialog.title"),description:e("common.toolbar.clearAllDialog.description"),cancel:e("common.toolbar.clearAllDialog.cancel"),ok:e("common.toolbar.clearAllDialog.ok")},labels:e("common.toolbar.labels")},savedFilter:{deleteTooltip:e("common.savedFilter.deleteTooltip"),deleteDialog:{title:e("common.savedFilter.deleteDialog.title"),description:e("common.savedFilter.deleteDialog.description"),cancel:e("common.savedFilter.deleteDialog.cancel"),ok:e("common.savedFilter.deleteDialog.ok")},duplicateTooltip:e("common.savedFilter.duplicateTooltip"),overwriteDialog:{title:e("common.savedFilter.overwriteDialog.title"),description:e("common.savedFilter.overwriteDialog.description"),cancel:e("common.savedFilter.overwriteDialog.cancel"),ok:e("common.savedFilter.overwriteDialog.ok")},editDialog:{title:e("common.savedFilter.editDialog.title"),cancel:e("common.savedFilter.editDialog.cancel"),ok:e("common.savedFilter.editDialog.ok"),fields:{title:{label:e("common.savedFilter.editDialog.fields.title.label"),placeholder:e("common.savedFilter.editDialog.fields.title.placeholder")}}},myFilters:e("common.savedFilter.myFilters"),manageFilters:e("common.savedFilter.manageFilters"),manageDialog:{title:e("common.savedFilter.manageDialog.title"),close:e("common.savedFilter.manageDialog.close"),lastSaveAt:e("common.savedFilter.manageDialog.lastSaveAt")},newFilter:e("common.savedFilter.newFilter"),saveTooltip:{whenEmpty:e("common.savedFilter.saveTooltip.whenEmpty"),whenDirty:e("common.savedFilter.saveTooltip.whenDirty"),default:e("common.savedFilter.saveTooltip.default")},shareTooltip:{whenNotSaved:e("common.savedFilter.shareTooltip.whenNotSaved"),default:e("common.savedFilter.shareTooltip.default")},favoriteTooltip:{set:e("common.savedFilter.favoriteTooltip.set"),unset:e("common.savedFilter.favoriteTooltip.unset")},discardTooltip:e("common.savedFilter.discardTooltip"),noSavedFilters:e("common.savedFilter.noSavedFilters")}}},wo=["#C31D7E","#328536","#AA00FF","#C2410C","#047ABE","#E5231F","#007D85","#C51162","#7B5A90","#B85C00","#722ED1","#4D7C0F","#9F1239","#2D7D9A","#847545"];export{jo as H,Le as P,Qt as Q,kt as a,Xe as b,Do as c,wo as d,$e as e,lr as f,j as g,B as h,T as i,Ze as j,pe as k,Ft as l,So as m,_o as o,Eo as u};
